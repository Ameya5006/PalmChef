var jD=Object.defineProperty;var wk=r=>{throw TypeError(r)};var BD=(r,t,e)=>t in r?jD(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e;var ct=(r,t,e)=>BD(r,typeof t!="symbol"?t+"":t,e),zb=(r,t,e)=>t.has(r)||wk("Cannot "+e);var l=(r,t,e)=>(zb(r,t,"read from private field"),e?e.call(r):t.get(r)),_=(r,t,e)=>t.has(r)?wk("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(r):t.set(r,e),A=(r,t,e,n)=>(zb(r,t,"write to private field"),n?n.call(r,e):t.set(r,e),e),R=(r,t,e)=>(zb(r,t,"access private method"),e);var wn=(r,t,e,n)=>({set _(i){A(r,t,i,e)},get _(){return l(r,t,n)}});function UD(r,t){for(var e=0;e<t.length;e++){const n=t[e];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in r)){const o=Object.getOwnPropertyDescriptor(n,i);o&&Object.defineProperty(r,i,o.get?o:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function e(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=e(i);fetch(i.href,o)}})();var xk=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function y1(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Hb={exports:{}},qp={},$b={exports:{}},te={};var bk;function VD(){if(bk)return te;bk=1;var r=Symbol.for("react.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),m=Symbol.iterator;function v(W){return W===null||typeof W!="object"?null:(W=m&&W[m]||W["@@iterator"],typeof W=="function"?W:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,E={};function T(W,tt,bt){this.props=W,this.context=tt,this.refs=E,this.updater=bt||b}T.prototype.isReactComponent={},T.prototype.setState=function(W,tt){if(typeof W!="object"&&typeof W!="function"&&W!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,W,tt,"setState")},T.prototype.forceUpdate=function(W){this.updater.enqueueForceUpdate(this,W,"forceUpdate")};function P(){}P.prototype=T.prototype;function N(W,tt,bt){this.props=W,this.context=tt,this.refs=E,this.updater=bt||b}var L=N.prototype=new P;L.constructor=N,C(L,T.prototype),L.isPureReactComponent=!0;var F=Array.isArray,O=Object.prototype.hasOwnProperty,z={current:null},K={key:!0,ref:!0,__self:!0,__source:!0};function Y(W,tt,bt){var Bt,Vt={},zt=null,jt=null;if(tt!=null)for(Bt in tt.ref!==void 0&&(jt=tt.ref),tt.key!==void 0&&(zt=""+tt.key),tt)O.call(tt,Bt)&&!K.hasOwnProperty(Bt)&&(Vt[Bt]=tt[Bt]);var Jt=arguments.length-2;if(Jt===1)Vt.children=bt;else if(1<Jt){for(var re=Array(Jt),mn=0;mn<Jt;mn++)re[mn]=arguments[mn+2];Vt.children=re}if(W&&W.defaultProps)for(Bt in Jt=W.defaultProps,Jt)Vt[Bt]===void 0&&(Vt[Bt]=Jt[Bt]);return{$$typeof:r,type:W,key:zt,ref:jt,props:Vt,_owner:z.current}}function nt(W,tt){return{$$typeof:r,type:W.type,key:tt,ref:W.ref,props:W.props,_owner:W._owner}}function st(W){return typeof W=="object"&&W!==null&&W.$$typeof===r}function it(W){var tt={"=":"=0",":":"=2"};return"$"+W.replace(/[=:]/g,function(bt){return tt[bt]})}var Mt=/\/+/g;function xt(W,tt){return typeof W=="object"&&W!==null&&W.key!=null?it(""+W.key):tt.toString(36)}function Ct(W,tt,bt,Bt,Vt){var zt=typeof W;(zt==="undefined"||zt==="boolean")&&(W=null);var jt=!1;if(W===null)jt=!0;else switch(zt){case"string":case"number":jt=!0;break;case"object":switch(W.$$typeof){case r:case t:jt=!0}}if(jt)return jt=W,Vt=Vt(jt),W=Bt===""?"."+xt(jt,0):Bt,F(Vt)?(bt="",W!=null&&(bt=W.replace(Mt,"$&/")+"/"),Ct(Vt,tt,bt,"",function(mn){return mn})):Vt!=null&&(st(Vt)&&(Vt=nt(Vt,bt+(!Vt.key||jt&&jt.key===Vt.key?"":(""+Vt.key).replace(Mt,"$&/")+"/")+W)),tt.push(Vt)),1;if(jt=0,Bt=Bt===""?".":Bt+":",F(W))for(var Jt=0;Jt<W.length;Jt++){zt=W[Jt];var re=Bt+xt(zt,Jt);jt+=Ct(zt,tt,bt,re,Vt)}else if(re=v(W),typeof re=="function")for(W=re.call(W),Jt=0;!(zt=W.next()).done;)zt=zt.value,re=Bt+xt(zt,Jt++),jt+=Ct(zt,tt,bt,re,Vt);else if(zt==="object")throw tt=String(W),Error("Objects are not valid as a React child (found: "+(tt==="[object Object]"?"object with keys {"+Object.keys(W).join(", ")+"}":tt)+"). If you meant to render a collection of children, use an array instead.");return jt}function Qt(W,tt,bt){if(W==null)return W;var Bt=[],Vt=0;return Ct(W,Bt,"","",function(zt){return tt.call(bt,zt,Vt++)}),Bt}function ft(W){if(W._status===-1){var tt=W._result;tt=tt(),tt.then(function(bt){(W._status===0||W._status===-1)&&(W._status=1,W._result=bt)},function(bt){(W._status===0||W._status===-1)&&(W._status=2,W._result=bt)}),W._status===-1&&(W._status=0,W._result=tt)}if(W._status===1)return W._result.default;throw W._result}var lt={current:null},et={transition:null},mt={ReactCurrentDispatcher:lt,ReactCurrentBatchConfig:et,ReactCurrentOwner:z};function ht(){throw Error("act(...) is not supported in production builds of React.")}return te.Children={map:Qt,forEach:function(W,tt,bt){Qt(W,function(){tt.apply(this,arguments)},bt)},count:function(W){var tt=0;return Qt(W,function(){tt++}),tt},toArray:function(W){return Qt(W,function(tt){return tt})||[]},only:function(W){if(!st(W))throw Error("React.Children.only expected to receive a single React element child.");return W}},te.Component=T,te.Fragment=e,te.Profiler=i,te.PureComponent=N,te.StrictMode=n,te.Suspense=h,te.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mt,te.act=ht,te.cloneElement=function(W,tt,bt){if(W==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+W+".");var Bt=C({},W.props),Vt=W.key,zt=W.ref,jt=W._owner;if(tt!=null){if(tt.ref!==void 0&&(zt=tt.ref,jt=z.current),tt.key!==void 0&&(Vt=""+tt.key),W.type&&W.type.defaultProps)var Jt=W.type.defaultProps;for(re in tt)O.call(tt,re)&&!K.hasOwnProperty(re)&&(Bt[re]=tt[re]===void 0&&Jt!==void 0?Jt[re]:tt[re])}var re=arguments.length-2;if(re===1)Bt.children=bt;else if(1<re){Jt=Array(re);for(var mn=0;mn<re;mn++)Jt[mn]=arguments[mn+2];Bt.children=Jt}return{$$typeof:r,type:W.type,key:Vt,ref:zt,props:Bt,_owner:jt}},te.createContext=function(W){return W={$$typeof:c,_currentValue:W,_currentValue2:W,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},W.Provider={$$typeof:o,_context:W},W.Consumer=W},te.createElement=Y,te.createFactory=function(W){var tt=Y.bind(null,W);return tt.type=W,tt},te.createRef=function(){return{current:null}},te.forwardRef=function(W){return{$$typeof:u,render:W}},te.isValidElement=st,te.lazy=function(W){return{$$typeof:p,_payload:{_status:-1,_result:W},_init:ft}},te.memo=function(W,tt){return{$$typeof:f,type:W,compare:tt===void 0?null:tt}},te.startTransition=function(W){var tt=et.transition;et.transition={};try{W()}finally{et.transition=tt}},te.unstable_act=ht,te.useCallback=function(W,tt){return lt.current.useCallback(W,tt)},te.useContext=function(W){return lt.current.useContext(W)},te.useDebugValue=function(){},te.useDeferredValue=function(W){return lt.current.useDeferredValue(W)},te.useEffect=function(W,tt){return lt.current.useEffect(W,tt)},te.useId=function(){return lt.current.useId()},te.useImperativeHandle=function(W,tt,bt){return lt.current.useImperativeHandle(W,tt,bt)},te.useInsertionEffect=function(W,tt){return lt.current.useInsertionEffect(W,tt)},te.useLayoutEffect=function(W,tt){return lt.current.useLayoutEffect(W,tt)},te.useMemo=function(W,tt){return lt.current.useMemo(W,tt)},te.useReducer=function(W,tt,bt){return lt.current.useReducer(W,tt,bt)},te.useRef=function(W){return lt.current.useRef(W)},te.useState=function(W){return lt.current.useState(W)},te.useSyncExternalStore=function(W,tt,bt){return lt.current.useSyncExternalStore(W,tt,bt)},te.useTransition=function(){return lt.current.useTransition()},te.version="18.3.1",te}var Ak;function I0(){return Ak||(Ak=1,$b.exports=VD()),$b.exports}var Sk;function zD(){if(Sk)return qp;Sk=1;var r=I0(),t=Symbol.for("react.element"),e=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,i=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function c(u,h,f){var p,m={},v=null,b=null;f!==void 0&&(v=""+f),h.key!==void 0&&(v=""+h.key),h.ref!==void 0&&(b=h.ref);for(p in h)n.call(h,p)&&!o.hasOwnProperty(p)&&(m[p]=h[p]);if(u&&u.defaultProps)for(p in h=u.defaultProps,h)m[p]===void 0&&(m[p]=h[p]);return{$$typeof:t,type:u,key:v,ref:b,props:m,_owner:i.current}}return qp.Fragment=e,qp.jsx=c,qp.jsxs=c,qp}var Ek;function HD(){return Ek||(Ek=1,Hb.exports=zD()),Hb.exports}var I=HD(),$=I0();const v1=y1($),$D=UD({__proto__:null,default:v1},[$]);var iv={},Wb={exports:{}},Oi={},Gb={exports:{}},Xb={};var Ck;function WD(){return Ck||(Ck=1,(function(r){function t(et,mt){var ht=et.length;et.push(mt);t:for(;0<ht;){var W=ht-1>>>1,tt=et[W];if(0<i(tt,mt))et[W]=mt,et[ht]=tt,ht=W;else break t}}function e(et){return et.length===0?null:et[0]}function n(et){if(et.length===0)return null;var mt=et[0],ht=et.pop();if(ht!==mt){et[0]=ht;t:for(var W=0,tt=et.length,bt=tt>>>1;W<bt;){var Bt=2*(W+1)-1,Vt=et[Bt],zt=Bt+1,jt=et[zt];if(0>i(Vt,ht))zt<tt&&0>i(jt,Vt)?(et[W]=jt,et[zt]=ht,W=zt):(et[W]=Vt,et[Bt]=ht,W=Bt);else if(zt<tt&&0>i(jt,ht))et[W]=jt,et[zt]=ht,W=zt;else break t}}return mt}function i(et,mt){var ht=et.sortIndex-mt.sortIndex;return ht!==0?ht:et.id-mt.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;r.unstable_now=function(){return o.now()}}else{var c=Date,u=c.now();r.unstable_now=function(){return c.now()-u}}var h=[],f=[],p=1,m=null,v=3,b=!1,C=!1,E=!1,T=typeof setTimeout=="function"?setTimeout:null,P=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function L(et){for(var mt=e(f);mt!==null;){if(mt.callback===null)n(f);else if(mt.startTime<=et)n(f),mt.sortIndex=mt.expirationTime,t(h,mt);else break;mt=e(f)}}function F(et){if(E=!1,L(et),!C)if(e(h)!==null)C=!0,ft(O);else{var mt=e(f);mt!==null&&lt(F,mt.startTime-et)}}function O(et,mt){C=!1,E&&(E=!1,P(Y),Y=-1),b=!0;var ht=v;try{for(L(mt),m=e(h);m!==null&&(!(m.expirationTime>mt)||et&&!it());){var W=m.callback;if(typeof W=="function"){m.callback=null,v=m.priorityLevel;var tt=W(m.expirationTime<=mt);mt=r.unstable_now(),typeof tt=="function"?m.callback=tt:m===e(h)&&n(h),L(mt)}else n(h);m=e(h)}if(m!==null)var bt=!0;else{var Bt=e(f);Bt!==null&&lt(F,Bt.startTime-mt),bt=!1}return bt}finally{m=null,v=ht,b=!1}}var z=!1,K=null,Y=-1,nt=5,st=-1;function it(){return!(r.unstable_now()-st<nt)}function Mt(){if(K!==null){var et=r.unstable_now();st=et;var mt=!0;try{mt=K(!0,et)}finally{mt?xt():(z=!1,K=null)}}else z=!1}var xt;if(typeof N=="function")xt=function(){N(Mt)};else if(typeof MessageChannel<"u"){var Ct=new MessageChannel,Qt=Ct.port2;Ct.port1.onmessage=Mt,xt=function(){Qt.postMessage(null)}}else xt=function(){T(Mt,0)};function ft(et){K=et,z||(z=!0,xt())}function lt(et,mt){Y=T(function(){et(r.unstable_now())},mt)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(et){et.callback=null},r.unstable_continueExecution=function(){C||b||(C=!0,ft(O))},r.unstable_forceFrameRate=function(et){0>et||125<et?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):nt=0<et?Math.floor(1e3/et):5},r.unstable_getCurrentPriorityLevel=function(){return v},r.unstable_getFirstCallbackNode=function(){return e(h)},r.unstable_next=function(et){switch(v){case 1:case 2:case 3:var mt=3;break;default:mt=v}var ht=v;v=mt;try{return et()}finally{v=ht}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(et,mt){switch(et){case 1:case 2:case 3:case 4:case 5:break;default:et=3}var ht=v;v=et;try{return mt()}finally{v=ht}},r.unstable_scheduleCallback=function(et,mt,ht){var W=r.unstable_now();switch(typeof ht=="object"&&ht!==null?(ht=ht.delay,ht=typeof ht=="number"&&0<ht?W+ht:W):ht=W,et){case 1:var tt=-1;break;case 2:tt=250;break;case 5:tt=1073741823;break;case 4:tt=1e4;break;default:tt=5e3}return tt=ht+tt,et={id:p++,callback:mt,priorityLevel:et,startTime:ht,expirationTime:tt,sortIndex:-1},ht>W?(et.sortIndex=ht,t(f,et),e(h)===null&&et===e(f)&&(E?(P(Y),Y=-1):E=!0,lt(F,ht-W))):(et.sortIndex=tt,t(h,et),C||b||(C=!0,ft(O))),et},r.unstable_shouldYield=it,r.unstable_wrapCallback=function(et){var mt=v;return function(){var ht=v;v=mt;try{return et.apply(this,arguments)}finally{v=ht}}}})(Xb)),Xb}var kk;function GD(){return kk||(kk=1,Gb.exports=WD()),Gb.exports}var Tk;function XD(){if(Tk)return Oi;Tk=1;var r=I0(),t=GD();function e(s){for(var a="https://reactjs.org/docs/error-decoder.html?invariant="+s,d=1;d<arguments.length;d++)a+="&args[]="+encodeURIComponent(arguments[d]);return"Minified React error #"+s+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,i={};function o(s,a){c(s,a),c(s+"Capture",a)}function c(s,a){for(i[s]=a,s=0;s<a.length;s++)n.add(a[s])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},m={};function v(s){return h.call(m,s)?!0:h.call(p,s)?!1:f.test(s)?m[s]=!0:(p[s]=!0,!1)}function b(s,a,d,y){if(d!==null&&d.type===0)return!1;switch(typeof a){case"function":case"symbol":return!0;case"boolean":return y?!1:d!==null?!d.acceptsBooleans:(s=s.toLowerCase().slice(0,5),s!=="data-"&&s!=="aria-");default:return!1}}function C(s,a,d,y){if(a===null||typeof a>"u"||b(s,a,d,y))return!0;if(y)return!1;if(d!==null)switch(d.type){case 3:return!a;case 4:return a===!1;case 5:return isNaN(a);case 6:return isNaN(a)||1>a}return!1}function E(s,a,d,y,w,S,D){this.acceptsBooleans=a===2||a===3||a===4,this.attributeName=y,this.attributeNamespace=w,this.mustUseProperty=d,this.propertyName=s,this.type=a,this.sanitizeURL=S,this.removeEmptyString=D}var T={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(s){T[s]=new E(s,0,!1,s,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(s){var a=s[0];T[a]=new E(a,1,!1,s[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(s){T[s]=new E(s,2,!1,s.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(s){T[s]=new E(s,2,!1,s,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(s){T[s]=new E(s,3,!1,s.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(s){T[s]=new E(s,3,!0,s,null,!1,!1)}),["capture","download"].forEach(function(s){T[s]=new E(s,4,!1,s,null,!1,!1)}),["cols","rows","size","span"].forEach(function(s){T[s]=new E(s,6,!1,s,null,!1,!1)}),["rowSpan","start"].forEach(function(s){T[s]=new E(s,5,!1,s.toLowerCase(),null,!1,!1)});var P=/[\-:]([a-z])/g;function N(s){return s[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(s){var a=s.replace(P,N);T[a]=new E(a,1,!1,s,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(s){var a=s.replace(P,N);T[a]=new E(a,1,!1,s,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(s){var a=s.replace(P,N);T[a]=new E(a,1,!1,s,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(s){T[s]=new E(s,1,!1,s.toLowerCase(),null,!1,!1)}),T.xlinkHref=new E("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(s){T[s]=new E(s,1,!1,s.toLowerCase(),null,!0,!0)});function L(s,a,d,y){var w=T.hasOwnProperty(a)?T[a]:null;(w!==null?w.type!==0:y||!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(C(a,d,w,y)&&(d=null),y||w===null?v(a)&&(d===null?s.removeAttribute(a):s.setAttribute(a,""+d)):w.mustUseProperty?s[w.propertyName]=d===null?w.type===3?!1:"":d:(a=w.attributeName,y=w.attributeNamespace,d===null?s.removeAttribute(a):(w=w.type,d=w===3||w===4&&d===!0?"":""+d,y?s.setAttributeNS(y,a,d):s.setAttribute(a,d))))}var F=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,O=Symbol.for("react.element"),z=Symbol.for("react.portal"),K=Symbol.for("react.fragment"),Y=Symbol.for("react.strict_mode"),nt=Symbol.for("react.profiler"),st=Symbol.for("react.provider"),it=Symbol.for("react.context"),Mt=Symbol.for("react.forward_ref"),xt=Symbol.for("react.suspense"),Ct=Symbol.for("react.suspense_list"),Qt=Symbol.for("react.memo"),ft=Symbol.for("react.lazy"),lt=Symbol.for("react.offscreen"),et=Symbol.iterator;function mt(s){return s===null||typeof s!="object"?null:(s=et&&s[et]||s["@@iterator"],typeof s=="function"?s:null)}var ht=Object.assign,W;function tt(s){if(W===void 0)try{throw Error()}catch(d){var a=d.stack.trim().match(/\n( *(at )?)/);W=a&&a[1]||""}return`
`+W+s}var bt=!1;function Bt(s,a){if(!s||bt)return"";bt=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(a)if(a=function(){throw Error()},Object.defineProperty(a.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(a,[])}catch(J){var y=J}Reflect.construct(s,[],a)}else{try{a.call()}catch(J){y=J}s.call(a.prototype)}else{try{throw Error()}catch(J){y=J}s()}}catch(J){if(J&&y&&typeof J.stack=="string"){for(var w=J.stack.split(`
`),S=y.stack.split(`
`),D=w.length-1,V=S.length-1;1<=D&&0<=V&&w[D]!==S[V];)V--;for(;1<=D&&0<=V;D--,V--)if(w[D]!==S[V]){if(D!==1||V!==1)do if(D--,V--,0>V||w[D]!==S[V]){var H=`
`+w[D].replace(" at new "," at ");return s.displayName&&H.includes("<anonymous>")&&(H=H.replace("<anonymous>",s.displayName)),H}while(1<=D&&0<=V);break}}}finally{bt=!1,Error.prepareStackTrace=d}return(s=s?s.displayName||s.name:"")?tt(s):""}function Vt(s){switch(s.tag){case 5:return tt(s.type);case 16:return tt("Lazy");case 13:return tt("Suspense");case 19:return tt("SuspenseList");case 0:case 2:case 15:return s=Bt(s.type,!1),s;case 11:return s=Bt(s.type.render,!1),s;case 1:return s=Bt(s.type,!0),s;default:return""}}function zt(s){if(s==null)return null;if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case K:return"Fragment";case z:return"Portal";case nt:return"Profiler";case Y:return"StrictMode";case xt:return"Suspense";case Ct:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case it:return(s.displayName||"Context")+".Consumer";case st:return(s._context.displayName||"Context")+".Provider";case Mt:var a=s.render;return s=s.displayName,s||(s=a.displayName||a.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case Qt:return a=s.displayName||null,a!==null?a:zt(s.type)||"Memo";case ft:a=s._payload,s=s._init;try{return zt(s(a))}catch{}}return null}function jt(s){var a=s.type;switch(s.tag){case 24:return"Cache";case 9:return(a.displayName||"Context")+".Consumer";case 10:return(a._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return s=a.render,s=s.displayName||s.name||"",a.displayName||(s!==""?"ForwardRef("+s+")":"ForwardRef");case 7:return"Fragment";case 5:return a;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return zt(a);case 8:return a===Y?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a}return null}function Jt(s){switch(typeof s){case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function re(s){var a=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function mn(s){var a=re(s)?"checked":"value",d=Object.getOwnPropertyDescriptor(s.constructor.prototype,a),y=""+s[a];if(!s.hasOwnProperty(a)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var w=d.get,S=d.set;return Object.defineProperty(s,a,{configurable:!0,get:function(){return w.call(this)},set:function(D){y=""+D,S.call(this,D)}}),Object.defineProperty(s,a,{enumerable:d.enumerable}),{getValue:function(){return y},setValue:function(D){y=""+D},stopTracking:function(){s._valueTracker=null,delete s[a]}}}}function Ti(s){s._valueTracker||(s._valueTracker=mn(s))}function Sa(s){if(!s)return!1;var a=s._valueTracker;if(!a)return!0;var d=a.getValue(),y="";return s&&(y=re(s)?s.checked?"true":"false":s.value),s=y,s!==d?(a.setValue(s),!0):!1}function Se(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}function sn(s,a){var d=a.checked;return ht({},a,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:d??s._wrapperState.initialChecked})}function up(s,a){var d=a.defaultValue==null?"":a.defaultValue,y=a.checked!=null?a.checked:a.defaultChecked;d=Jt(a.value!=null?a.value:d),s._wrapperState={initialChecked:y,initialValue:d,controlled:a.type==="checkbox"||a.type==="radio"?a.checked!=null:a.value!=null}}function X0(s,a){a=a.checked,a!=null&&L(s,"checked",a,!1)}function vh(s,a){X0(s,a);var d=Jt(a.value),y=a.type;if(d!=null)y==="number"?(d===0&&s.value===""||s.value!=d)&&(s.value=""+d):s.value!==""+d&&(s.value=""+d);else if(y==="submit"||y==="reset"){s.removeAttribute("value");return}a.hasOwnProperty("value")?wh(s,a.type,d):a.hasOwnProperty("defaultValue")&&wh(s,a.type,Jt(a.defaultValue)),a.checked==null&&a.defaultChecked!=null&&(s.defaultChecked=!!a.defaultChecked)}function hp(s,a,d){if(a.hasOwnProperty("value")||a.hasOwnProperty("defaultValue")){var y=a.type;if(!(y!=="submit"&&y!=="reset"||a.value!==void 0&&a.value!==null))return;a=""+s._wrapperState.initialValue,d||a===s.value||(s.value=a),s.defaultValue=a}d=s.name,d!==""&&(s.name=""),s.defaultChecked=!!s._wrapperState.initialChecked,d!==""&&(s.name=d)}function wh(s,a,d){(a!=="number"||Se(s.ownerDocument)!==s)&&(d==null?s.defaultValue=""+s._wrapperState.initialValue:s.defaultValue!==""+d&&(s.defaultValue=""+d))}var Ea=Array.isArray;function ho(s,a,d,y){if(s=s.options,a){a={};for(var w=0;w<d.length;w++)a["$"+d[w]]=!0;for(d=0;d<s.length;d++)w=a.hasOwnProperty("$"+s[d].value),s[d].selected!==w&&(s[d].selected=w),w&&y&&(s[d].defaultSelected=!0)}else{for(d=""+Jt(d),a=null,w=0;w<s.length;w++){if(s[w].value===d){s[w].selected=!0,y&&(s[w].defaultSelected=!0);return}a!==null||s[w].disabled||(a=s[w])}a!==null&&(a.selected=!0)}}function ec(s,a){if(a.dangerouslySetInnerHTML!=null)throw Error(e(91));return ht({},a,{value:void 0,defaultValue:void 0,children:""+s._wrapperState.initialValue})}function dp(s,a){var d=a.value;if(d==null){if(d=a.children,a=a.defaultValue,d!=null){if(a!=null)throw Error(e(92));if(Ea(d)){if(1<d.length)throw Error(e(93));d=d[0]}a=d}a==null&&(a=""),d=a}s._wrapperState={initialValue:Jt(d)}}function Sr(s,a){var d=Jt(a.value),y=Jt(a.defaultValue);d!=null&&(d=""+d,d!==s.value&&(s.value=d),a.defaultValue==null&&s.defaultValue!==d&&(s.defaultValue=d)),y!=null&&(s.defaultValue=""+y)}function fp(s){var a=s.textContent;a===s._wrapperState.initialValue&&a!==""&&a!==null&&(s.value=a)}function nc(s){switch(s){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ic(s,a){return s==null||s==="http://www.w3.org/1999/xhtml"?nc(a):s==="http://www.w3.org/2000/svg"&&a==="foreignObject"?"http://www.w3.org/1999/xhtml":s}var xh,pp=(function(s){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(a,d,y,w){MSApp.execUnsafeLocalFunction(function(){return s(a,d,y,w)})}:s})(function(s,a){if(s.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in s)s.innerHTML=a;else{for(xh=xh||document.createElement("div"),xh.innerHTML="<svg>"+a.valueOf().toString()+"</svg>",a=xh.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;a.firstChild;)s.appendChild(a.firstChild)}});function sc(s,a){if(a){var d=s.firstChild;if(d&&d===s.lastChild&&d.nodeType===3){d.nodeValue=a;return}}s.textContent=a}var Ca={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},K0=["Webkit","ms","Moz","O"];Object.keys(Ca).forEach(function(s){K0.forEach(function(a){a=a+s.charAt(0).toUpperCase()+s.substring(1),Ca[a]=Ca[s]})});function ka(s,a,d){return a==null||typeof a=="boolean"||a===""?"":d||typeof a!="number"||a===0||Ca.hasOwnProperty(s)&&Ca[s]?(""+a).trim():a+"px"}function bh(s,a){s=s.style;for(var d in a)if(a.hasOwnProperty(d)){var y=d.indexOf("--")===0,w=ka(d,a[d],y);d==="float"&&(d="cssFloat"),y?s.setProperty(d,w):s[d]=w}}var Y0=ht({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function mp(s,a){if(a){if(Y0[s]&&(a.children!=null||a.dangerouslySetInnerHTML!=null))throw Error(e(137,s));if(a.dangerouslySetInnerHTML!=null){if(a.children!=null)throw Error(e(60));if(typeof a.dangerouslySetInnerHTML!="object"||!("__html"in a.dangerouslySetInnerHTML))throw Error(e(61))}if(a.style!=null&&typeof a.style!="object")throw Error(e(62))}}function Ah(s,a){if(s.indexOf("-")===-1)return typeof a.is=="string";switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var rc=null;function qs(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var fo=null,po=null,mo=null;function Sh(s){if(s=Ip(s)){if(typeof fo!="function")throw Error(e(280));var a=s.stateNode;a&&(a=vy(a),fo(s.stateNode,s.type,a))}}function gp(s){po?mo?mo.push(s):mo=[s]:po=s}function Er(){if(po){var s=po,a=mo;if(mo=po=null,Sh(s),a)for(s=0;s<a.length;s++)Sh(a[s])}}function Eh(s,a){return s(a)}function yp(){}var Ta=!1;function oc(s,a,d){if(Ta)return s(a,d);Ta=!0;try{return Eh(s,a,d)}finally{Ta=!1,(po!==null||mo!==null)&&(yp(),Er())}}function ac(s,a){var d=s.stateNode;if(d===null)return null;var y=vy(d);if(y===null)return null;d=y[a];t:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(y=!y.disabled)||(s=s.type,y=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!y;break t;default:s=!1}if(s)return null;if(d&&typeof d!="function")throw Error(e(231,a,typeof d));return d}var Cr=!1;if(u)try{var lc={};Object.defineProperty(lc,"passive",{get:function(){Cr=!0}}),window.addEventListener("test",lc,lc),window.removeEventListener("test",lc,lc)}catch{Cr=!1}function Qs(s,a,d,y,w,S,D,V,H){var J=Array.prototype.slice.call(arguments,3);try{a.apply(d,J)}catch(ot){this.onError(ot)}}var Xi=!1,cc=null,_e=!1,_i=null,vp={onError:function(s){Xi=!0,cc=s}};function lx(s,a,d,y,w,S,D,V,H){Xi=!1,cc=null,Qs.apply(vp,arguments)}function Ch(s,a,d,y,w,S,D,V,H){if(lx.apply(this,arguments),Xi){if(Xi){var J=cc;Xi=!1,cc=null}else throw Error(e(198));_e||(_e=!0,_i=J)}}function Zs(s){var a=s,d=s;if(s.alternate)for(;a.return;)a=a.return;else{s=a;do a=s,(a.flags&4098)!==0&&(d=a.return),s=a.return;while(s)}return a.tag===3?d:null}function uc(s){if(s.tag===13){var a=s.memoizedState;if(a===null&&(s=s.alternate,s!==null&&(a=s.memoizedState)),a!==null)return a.dehydrated}return null}function _a(s){if(Zs(s)!==s)throw Error(e(188))}function q0(s){var a=s.alternate;if(!a){if(a=Zs(s),a===null)throw Error(e(188));return a!==s?null:s}for(var d=s,y=a;;){var w=d.return;if(w===null)break;var S=w.alternate;if(S===null){if(y=w.return,y!==null){d=y;continue}break}if(w.child===S.child){for(S=w.child;S;){if(S===d)return _a(w),s;if(S===y)return _a(w),a;S=S.sibling}throw Error(e(188))}if(d.return!==y.return)d=w,y=S;else{for(var D=!1,V=w.child;V;){if(V===d){D=!0,d=w,y=S;break}if(V===y){D=!0,y=w,d=S;break}V=V.sibling}if(!D){for(V=S.child;V;){if(V===d){D=!0,d=S,y=w;break}if(V===y){D=!0,y=S,d=w;break}V=V.sibling}if(!D)throw Error(e(189))}}if(d.alternate!==y)throw Error(e(190))}if(d.tag!==3)throw Error(e(188));return d.stateNode.current===d?s:a}function kh(s){return s=q0(s),s!==null?Th(s):null}function Th(s){if(s.tag===5||s.tag===6)return s;for(s=s.child;s!==null;){var a=Th(s);if(a!==null)return a;s=s.sibling}return null}var wp=t.unstable_scheduleCallback,Pi=t.unstable_cancelCallback,Ss=t.unstable_shouldYield,hc=t.unstable_requestPaint,Ne=t.unstable_now,xp=t.unstable_getCurrentPriorityLevel,_h=t.unstable_ImmediatePriority,dc=t.unstable_UserBlockingPriority,hi=t.unstable_NormalPriority,Q0=t.unstable_LowPriority,fc=t.unstable_IdlePriority,di=null,fi=null;function cx(s){if(fi&&typeof fi.onCommitFiberRoot=="function")try{fi.onCommitFiberRoot(di,s,void 0,(s.current.flags&128)===128)}catch{}}var Ri=Math.clz32?Math.clz32:hx,bp=Math.log,ux=Math.LN2;function hx(s){return s>>>=0,s===0?32:31-(bp(s)/ux|0)|0}var pc=64,mc=4194304;function Pa(s){switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return s&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return s}}function gc(s,a){var d=s.pendingLanes;if(d===0)return 0;var y=0,w=s.suspendedLanes,S=s.pingedLanes,D=d&268435455;if(D!==0){var V=D&~w;V!==0?y=Pa(V):(S&=D,S!==0&&(y=Pa(S)))}else D=d&~w,D!==0?y=Pa(D):S!==0&&(y=Pa(S));if(y===0)return 0;if(a!==0&&a!==y&&(a&w)===0&&(w=y&-y,S=a&-a,w>=S||w===16&&(S&4194240)!==0))return a;if((y&4)!==0&&(y|=d&16),a=s.entangledLanes,a!==0)for(s=s.entanglements,a&=y;0<a;)d=31-Ri(a),w=1<<d,y|=s[d],a&=~w;return y}function Yn(s,a){switch(s){case 1:case 2:case 4:return a+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Z0(s,a){for(var d=s.suspendedLanes,y=s.pingedLanes,w=s.expirationTimes,S=s.pendingLanes;0<S;){var D=31-Ri(S),V=1<<D,H=w[D];H===-1?((V&d)===0||(V&y)!==0)&&(w[D]=Yn(V,a)):H<=a&&(s.expiredLanes|=V),S&=~V}}function Ph(s){return s=s.pendingLanes&-1073741825,s!==0?s:s&1073741824?1073741824:0}function yc(){var s=pc;return pc<<=1,(pc&4194240)===0&&(pc=64),s}function Rh(s){for(var a=[],d=0;31>d;d++)a.push(s);return a}function Ra(s,a,d){s.pendingLanes|=a,a!==536870912&&(s.suspendedLanes=0,s.pingedLanes=0),s=s.eventTimes,a=31-Ri(a),s[a]=d}function dx(s,a){var d=s.pendingLanes&~a;s.pendingLanes=a,s.suspendedLanes=0,s.pingedLanes=0,s.expiredLanes&=a,s.mutableReadLanes&=a,s.entangledLanes&=a,a=s.entanglements;var y=s.eventTimes;for(s=s.expirationTimes;0<d;){var w=31-Ri(d),S=1<<w;a[w]=0,y[w]=-1,s[w]=-1,d&=~S}}function Ap(s,a){var d=s.entangledLanes|=a;for(s=s.entanglements;d;){var y=31-Ri(d),w=1<<y;w&a|s[y]&a&&(s[y]|=a),d&=~w}}var ce=0;function Sp(s){return s&=-s,1<s?4<s?(s&268435455)!==0?16:536870912:4:1}var vc,Mh,Ep,Ma,J0,Cp=!1,Dh=[],kr=null,Es=null,Mi=null,wc=new Map,xc=new Map,Tr=[],fx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Nh(s,a){switch(s){case"focusin":case"focusout":kr=null;break;case"dragenter":case"dragleave":Es=null;break;case"mouseover":case"mouseout":Mi=null;break;case"pointerover":case"pointerout":wc.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":xc.delete(a.pointerId)}}function Da(s,a,d,y,w,S){return s===null||s.nativeEvent!==S?(s={blockedOn:a,domEventName:d,eventSystemFlags:y,nativeEvent:S,targetContainers:[w]},a!==null&&(a=Ip(a),a!==null&&Mh(a)),s):(s.eventSystemFlags|=y,a=s.targetContainers,w!==null&&a.indexOf(w)===-1&&a.push(w),s)}function ty(s,a,d,y,w){switch(a){case"focusin":return kr=Da(kr,s,a,d,y,w),!0;case"dragenter":return Es=Da(Es,s,a,d,y,w),!0;case"mouseover":return Mi=Da(Mi,s,a,d,y,w),!0;case"pointerover":var S=w.pointerId;return wc.set(S,Da(wc.get(S)||null,s,a,d,y,w)),!0;case"gotpointercapture":return S=w.pointerId,xc.set(S,Da(xc.get(S)||null,s,a,d,y,w)),!0}return!1}function Na(s){var a=Tc(s.target);if(a!==null){var d=Zs(a);if(d!==null){if(a=d.tag,a===13){if(a=uc(d),a!==null){s.blockedOn=a,J0(s.priority,function(){Ep(d)});return}}else if(a===3&&d.stateNode.current.memoizedState.isDehydrated){s.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}s.blockedOn=null}function qn(s){if(s.blockedOn!==null)return!1;for(var a=s.targetContainers;0<a.length;){var d=Ih(s.domEventName,s.eventSystemFlags,a[0],s.nativeEvent);if(d===null){d=s.nativeEvent;var y=new d.constructor(d.type,d);rc=y,d.target.dispatchEvent(y),rc=null}else return a=Ip(d),a!==null&&Mh(a),s.blockedOn=d,!1;a.shift()}return!0}function ey(s,a,d){qn(s)&&d.delete(a)}function px(){Cp=!1,kr!==null&&qn(kr)&&(kr=null),Es!==null&&qn(Es)&&(Es=null),Mi!==null&&qn(Mi)&&(Mi=null),wc.forEach(ey),xc.forEach(ey)}function La(s,a){s.blockedOn===a&&(s.blockedOn=null,Cp||(Cp=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,px)))}function Ia(s){function a(w){return La(w,s)}if(0<Dh.length){La(Dh[0],s);for(var d=1;d<Dh.length;d++){var y=Dh[d];y.blockedOn===s&&(y.blockedOn=null)}}for(kr!==null&&La(kr,s),Es!==null&&La(Es,s),Mi!==null&&La(Mi,s),wc.forEach(a),xc.forEach(a),d=0;d<Tr.length;d++)y=Tr[d],y.blockedOn===s&&(y.blockedOn=null);for(;0<Tr.length&&(d=Tr[0],d.blockedOn===null);)Na(d),d.blockedOn===null&&Tr.shift()}var _r=F.ReactCurrentBatchConfig,Fa=!0;function Oa(s,a,d,y){var w=ce,S=_r.transition;_r.transition=null;try{ce=1,bc(s,a,d,y)}finally{ce=w,_r.transition=S}}function ny(s,a,d,y){var w=ce,S=_r.transition;_r.transition=null;try{ce=4,bc(s,a,d,y)}finally{ce=w,_r.transition=S}}function bc(s,a,d,y){if(Fa){var w=Ih(s,a,d,y);if(w===null)Dx(s,a,y,Lh,d),Nh(s,y);else if(ty(w,s,a,d,y))y.stopPropagation();else if(Nh(s,y),a&4&&-1<fx.indexOf(s)){for(;w!==null;){var S=Ip(w);if(S!==null&&vc(S),S=Ih(s,a,d,y),S===null&&Dx(s,a,y,Lh,d),S===w)break;w=S}w!==null&&y.stopPropagation()}else Dx(s,a,y,null,d)}}var Lh=null;function Ih(s,a,d,y){if(Lh=null,s=qs(y),s=Tc(s),s!==null)if(a=Zs(s),a===null)s=null;else if(d=a.tag,d===13){if(s=uc(a),s!==null)return s;s=null}else if(d===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;s=null}else a!==s&&(s=null);return Lh=s,null}function go(s){switch(s){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(xp()){case _h:return 1;case dc:return 4;case hi:case Q0:return 16;case fc:return 536870912;default:return 16}default:return 16}}var Js=null,Fh=null,Oh=null;function kp(){if(Oh)return Oh;var s,a=Fh,d=a.length,y,w="value"in Js?Js.value:Js.textContent,S=w.length;for(s=0;s<d&&a[s]===w[s];s++);var D=d-s;for(y=1;y<=D&&a[d-y]===w[S-y];y++);return Oh=w.slice(s,1<y?1-y:void 0)}function yo(s){var a=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&a===13&&(s=13)):s=a,s===10&&(s=13),32<=s||s===13?s:0}function Ac(){return!0}function iy(){return!1}function Qn(s){function a(d,y,w,S,D){this._reactName=d,this._targetInst=w,this.type=y,this.nativeEvent=S,this.target=D,this.currentTarget=null;for(var V in s)s.hasOwnProperty(V)&&(d=s[V],this[V]=d?d(S):S[V]);return this.isDefaultPrevented=(S.defaultPrevented!=null?S.defaultPrevented:S.returnValue===!1)?Ac:iy,this.isPropagationStopped=iy,this}return ht(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=Ac)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=Ac)},persist:function(){},isPersistent:Ac}),a}var vo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},jh=Qn(vo),ja=ht({},vo,{view:0,detail:0}),Tp=Qn(ja),Bh,_p,Sc,Uh=ht({},ja,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:x,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Sc&&(Sc&&s.type==="mousemove"?(Bh=s.screenX-Sc.screenX,_p=s.screenY-Sc.screenY):_p=Bh=0,Sc=s),Bh)},movementY:function(s){return"movementY"in s?s.movementY:_p}}),sy=Qn(Uh),ry=ht({},Uh,{dataTransfer:0}),mx=Qn(ry),gx=ht({},ja,{relatedTarget:0}),Ec=Qn(gx),yx=ht({},vo,{animationName:0,elapsedTime:0,pseudoElement:0}),vx=Qn(yx),wx=ht({},vo,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),Vh=Qn(wx),xx=ht({},vo,{data:0}),oy=Qn(xx),bx={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ay={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ly={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function g(s){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(s):(s=ly[s])?!!a[s]:!1}function x(){return g}var k=ht({},ja,{key:function(s){if(s.key){var a=bx[s.key]||s.key;if(a!=="Unidentified")return a}return s.type==="keypress"?(s=yo(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?ay[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:x,charCode:function(s){return s.type==="keypress"?yo(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?yo(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),M=Qn(k),j=ht({},Uh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),U=Qn(j),B=ht({},ja,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:x}),G=Qn(B),Z=ht({},vo,{propertyName:0,elapsedTime:0,pseudoElement:0}),at=Qn(Z),pt=ht({},Uh,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),Ft=Qn(pt),Rt=[9,13,27,32],gt=u&&"CompositionEvent"in window,Dt=null;u&&"documentMode"in document&&(Dt=document.documentMode);var Kt=u&&"TextEvent"in window&&!Dt,ge=u&&(!gt||Dt&&8<Dt&&11>=Dt),fe=" ",cn=!1;function pi(s,a){switch(s){case"keyup":return Rt.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Fn(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Zt=!1;function gn(s,a){switch(s){case"compositionend":return Fn(a);case"keypress":return a.which!==32?null:(cn=!0,fe);case"textInput":return s=a.data,s===fe&&cn?null:s;default:return null}}function Pr(s,a){if(Zt)return s==="compositionend"||!gt&&pi(s,a)?(s=kp(),Oh=Fh=Js=null,Zt=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return ge&&a.locale!=="ko"?null:a.data;default:return null}}var Ax={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function cy(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a==="input"?!!Ax[s.type]:a==="textarea"}function uy(s,a,d,y){gp(y),a=my(a,"onChange"),0<a.length&&(d=new jh("onChange","change",null,d,y),s.push({event:d,listeners:a}))}var Cc=null,kc=null;function zh(s){IE(s,0)}function hy(s){var a=Xh(s);if(Sa(a))return s}function BM(s,a){if(s==="change")return a}var vE=!1;if(u){var Sx;if(u){var Ex="oninput"in document;if(!Ex){var wE=document.createElement("div");wE.setAttribute("oninput","return;"),Ex=typeof wE.oninput=="function"}Sx=Ex}else Sx=!1;vE=Sx&&(!document.documentMode||9<document.documentMode)}function xE(){Cc&&(Cc.detachEvent("onpropertychange",bE),kc=Cc=null)}function bE(s){if(s.propertyName==="value"&&hy(kc)){var a=[];uy(a,kc,s,qs(s)),oc(zh,a)}}function UM(s,a,d){s==="focusin"?(xE(),Cc=a,kc=d,Cc.attachEvent("onpropertychange",bE)):s==="focusout"&&xE()}function VM(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return hy(kc)}function zM(s,a){if(s==="click")return hy(a)}function HM(s,a){if(s==="input"||s==="change")return hy(a)}function $M(s,a){return s===a&&(s!==0||1/s===1/a)||s!==s&&a!==a}var tr=typeof Object.is=="function"?Object.is:$M;function Pp(s,a){if(tr(s,a))return!0;if(typeof s!="object"||s===null||typeof a!="object"||a===null)return!1;var d=Object.keys(s),y=Object.keys(a);if(d.length!==y.length)return!1;for(y=0;y<d.length;y++){var w=d[y];if(!h.call(a,w)||!tr(s[w],a[w]))return!1}return!0}function AE(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function SE(s,a){var d=AE(s);s=0;for(var y;d;){if(d.nodeType===3){if(y=s+d.textContent.length,s<=a&&y>=a)return{node:d,offset:a-s};s=y}t:{for(;d;){if(d.nextSibling){d=d.nextSibling;break t}d=d.parentNode}d=void 0}d=AE(d)}}function EE(s,a){return s&&a?s===a?!0:s&&s.nodeType===3?!1:a&&a.nodeType===3?EE(s,a.parentNode):"contains"in s?s.contains(a):s.compareDocumentPosition?!!(s.compareDocumentPosition(a)&16):!1:!1}function CE(){for(var s=window,a=Se();a instanceof s.HTMLIFrameElement;){try{var d=typeof a.contentWindow.location.href=="string"}catch{d=!1}if(d)s=a.contentWindow;else break;a=Se(s.document)}return a}function Cx(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a&&(a==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||a==="textarea"||s.contentEditable==="true")}function WM(s){var a=CE(),d=s.focusedElem,y=s.selectionRange;if(a!==d&&d&&d.ownerDocument&&EE(d.ownerDocument.documentElement,d)){if(y!==null&&Cx(d)){if(a=y.start,s=y.end,s===void 0&&(s=a),"selectionStart"in d)d.selectionStart=a,d.selectionEnd=Math.min(s,d.value.length);else if(s=(a=d.ownerDocument||document)&&a.defaultView||window,s.getSelection){s=s.getSelection();var w=d.textContent.length,S=Math.min(y.start,w);y=y.end===void 0?S:Math.min(y.end,w),!s.extend&&S>y&&(w=y,y=S,S=w),w=SE(d,S);var D=SE(d,y);w&&D&&(s.rangeCount!==1||s.anchorNode!==w.node||s.anchorOffset!==w.offset||s.focusNode!==D.node||s.focusOffset!==D.offset)&&(a=a.createRange(),a.setStart(w.node,w.offset),s.removeAllRanges(),S>y?(s.addRange(a),s.extend(D.node,D.offset)):(a.setEnd(D.node,D.offset),s.addRange(a)))}}for(a=[],s=d;s=s.parentNode;)s.nodeType===1&&a.push({element:s,left:s.scrollLeft,top:s.scrollTop});for(typeof d.focus=="function"&&d.focus(),d=0;d<a.length;d++)s=a[d],s.element.scrollLeft=s.left,s.element.scrollTop=s.top}}var GM=u&&"documentMode"in document&&11>=document.documentMode,Hh=null,kx=null,Rp=null,Tx=!1;function kE(s,a,d){var y=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;Tx||Hh==null||Hh!==Se(y)||(y=Hh,"selectionStart"in y&&Cx(y)?y={start:y.selectionStart,end:y.selectionEnd}:(y=(y.ownerDocument&&y.ownerDocument.defaultView||window).getSelection(),y={anchorNode:y.anchorNode,anchorOffset:y.anchorOffset,focusNode:y.focusNode,focusOffset:y.focusOffset}),Rp&&Pp(Rp,y)||(Rp=y,y=my(kx,"onSelect"),0<y.length&&(a=new jh("onSelect","select",null,a,d),s.push({event:a,listeners:y}),a.target=Hh)))}function dy(s,a){var d={};return d[s.toLowerCase()]=a.toLowerCase(),d["Webkit"+s]="webkit"+a,d["Moz"+s]="moz"+a,d}var $h={animationend:dy("Animation","AnimationEnd"),animationiteration:dy("Animation","AnimationIteration"),animationstart:dy("Animation","AnimationStart"),transitionend:dy("Transition","TransitionEnd")},_x={},TE={};u&&(TE=document.createElement("div").style,"AnimationEvent"in window||(delete $h.animationend.animation,delete $h.animationiteration.animation,delete $h.animationstart.animation),"TransitionEvent"in window||delete $h.transitionend.transition);function fy(s){if(_x[s])return _x[s];if(!$h[s])return s;var a=$h[s],d;for(d in a)if(a.hasOwnProperty(d)&&d in TE)return _x[s]=a[d];return s}var _E=fy("animationend"),PE=fy("animationiteration"),RE=fy("animationstart"),ME=fy("transitionend"),DE=new Map,NE="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ba(s,a){DE.set(s,a),o(a,[s])}for(var Px=0;Px<NE.length;Px++){var Rx=NE[Px],XM=Rx.toLowerCase(),KM=Rx[0].toUpperCase()+Rx.slice(1);Ba(XM,"on"+KM)}Ba(_E,"onAnimationEnd"),Ba(PE,"onAnimationIteration"),Ba(RE,"onAnimationStart"),Ba("dblclick","onDoubleClick"),Ba("focusin","onFocus"),Ba("focusout","onBlur"),Ba(ME,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Mp="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),YM=new Set("cancel close invalid load scroll toggle".split(" ").concat(Mp));function LE(s,a,d){var y=s.type||"unknown-event";s.currentTarget=d,Ch(y,a,void 0,s),s.currentTarget=null}function IE(s,a){a=(a&4)!==0;for(var d=0;d<s.length;d++){var y=s[d],w=y.event;y=y.listeners;t:{var S=void 0;if(a)for(var D=y.length-1;0<=D;D--){var V=y[D],H=V.instance,J=V.currentTarget;if(V=V.listener,H!==S&&w.isPropagationStopped())break t;LE(w,V,J),S=H}else for(D=0;D<y.length;D++){if(V=y[D],H=V.instance,J=V.currentTarget,V=V.listener,H!==S&&w.isPropagationStopped())break t;LE(w,V,J),S=H}}}if(_e)throw s=_i,_e=!1,_i=null,s}function Le(s,a){var d=a[jx];d===void 0&&(d=a[jx]=new Set);var y=s+"__bubble";d.has(y)||(FE(a,s,2,!1),d.add(y))}function Mx(s,a,d){var y=0;a&&(y|=4),FE(d,s,y,a)}var py="_reactListening"+Math.random().toString(36).slice(2);function Dp(s){if(!s[py]){s[py]=!0,n.forEach(function(d){d!=="selectionchange"&&(YM.has(d)||Mx(d,!1,s),Mx(d,!0,s))});var a=s.nodeType===9?s:s.ownerDocument;a===null||a[py]||(a[py]=!0,Mx("selectionchange",!1,a))}}function FE(s,a,d,y){switch(go(a)){case 1:var w=Oa;break;case 4:w=ny;break;default:w=bc}d=w.bind(null,a,d,s),w=void 0,!Cr||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(w=!0),y?w!==void 0?s.addEventListener(a,d,{capture:!0,passive:w}):s.addEventListener(a,d,!0):w!==void 0?s.addEventListener(a,d,{passive:w}):s.addEventListener(a,d,!1)}function Dx(s,a,d,y,w){var S=y;if((a&1)===0&&(a&2)===0&&y!==null)t:for(;;){if(y===null)return;var D=y.tag;if(D===3||D===4){var V=y.stateNode.containerInfo;if(V===w||V.nodeType===8&&V.parentNode===w)break;if(D===4)for(D=y.return;D!==null;){var H=D.tag;if((H===3||H===4)&&(H=D.stateNode.containerInfo,H===w||H.nodeType===8&&H.parentNode===w))return;D=D.return}for(;V!==null;){if(D=Tc(V),D===null)return;if(H=D.tag,H===5||H===6){y=S=D;continue t}V=V.parentNode}}y=y.return}oc(function(){var J=S,ot=qs(d),ut=[];t:{var rt=DE.get(s);if(rt!==void 0){var wt=jh,kt=s;switch(s){case"keypress":if(yo(d)===0)break t;case"keydown":case"keyup":wt=M;break;case"focusin":kt="focus",wt=Ec;break;case"focusout":kt="blur",wt=Ec;break;case"beforeblur":case"afterblur":wt=Ec;break;case"click":if(d.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":wt=sy;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":wt=mx;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":wt=G;break;case _E:case PE:case RE:wt=vx;break;case ME:wt=at;break;case"scroll":wt=Tp;break;case"wheel":wt=Ft;break;case"copy":case"cut":case"paste":wt=Vh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":wt=U}var Tt=(a&4)!==0,rn=!Tt&&s==="scroll",q=Tt?rt!==null?rt+"Capture":null:rt;Tt=[];for(var X=J,Q;X!==null;){Q=X;var dt=Q.stateNode;if(Q.tag===5&&dt!==null&&(Q=dt,q!==null&&(dt=ac(X,q),dt!=null&&Tt.push(Np(X,dt,Q)))),rn)break;X=X.return}0<Tt.length&&(rt=new wt(rt,kt,null,d,ot),ut.push({event:rt,listeners:Tt}))}}if((a&7)===0){t:{if(rt=s==="mouseover"||s==="pointerover",wt=s==="mouseout"||s==="pointerout",rt&&d!==rc&&(kt=d.relatedTarget||d.fromElement)&&(Tc(kt)||kt[wo]))break t;if((wt||rt)&&(rt=ot.window===ot?ot:(rt=ot.ownerDocument)?rt.defaultView||rt.parentWindow:window,wt?(kt=d.relatedTarget||d.toElement,wt=J,kt=kt?Tc(kt):null,kt!==null&&(rn=Zs(kt),kt!==rn||kt.tag!==5&&kt.tag!==6)&&(kt=null)):(wt=null,kt=J),wt!==kt)){if(Tt=sy,dt="onMouseLeave",q="onMouseEnter",X="mouse",(s==="pointerout"||s==="pointerover")&&(Tt=U,dt="onPointerLeave",q="onPointerEnter",X="pointer"),rn=wt==null?rt:Xh(wt),Q=kt==null?rt:Xh(kt),rt=new Tt(dt,X+"leave",wt,d,ot),rt.target=rn,rt.relatedTarget=Q,dt=null,Tc(ot)===J&&(Tt=new Tt(q,X+"enter",kt,d,ot),Tt.target=Q,Tt.relatedTarget=rn,dt=Tt),rn=dt,wt&&kt)e:{for(Tt=wt,q=kt,X=0,Q=Tt;Q;Q=Wh(Q))X++;for(Q=0,dt=q;dt;dt=Wh(dt))Q++;for(;0<X-Q;)Tt=Wh(Tt),X--;for(;0<Q-X;)q=Wh(q),Q--;for(;X--;){if(Tt===q||q!==null&&Tt===q.alternate)break e;Tt=Wh(Tt),q=Wh(q)}Tt=null}else Tt=null;wt!==null&&OE(ut,rt,wt,Tt,!1),kt!==null&&rn!==null&&OE(ut,rn,kt,Tt,!0)}}t:{if(rt=J?Xh(J):window,wt=rt.nodeName&&rt.nodeName.toLowerCase(),wt==="select"||wt==="input"&&rt.type==="file")var Pt=BM;else if(cy(rt))if(vE)Pt=HM;else{Pt=VM;var Nt=UM}else(wt=rt.nodeName)&&wt.toLowerCase()==="input"&&(rt.type==="checkbox"||rt.type==="radio")&&(Pt=zM);if(Pt&&(Pt=Pt(s,J))){uy(ut,Pt,d,ot);break t}Nt&&Nt(s,rt,J),s==="focusout"&&(Nt=rt._wrapperState)&&Nt.controlled&&rt.type==="number"&&wh(rt,"number",rt.value)}switch(Nt=J?Xh(J):window,s){case"focusin":(cy(Nt)||Nt.contentEditable==="true")&&(Hh=Nt,kx=J,Rp=null);break;case"focusout":Rp=kx=Hh=null;break;case"mousedown":Tx=!0;break;case"contextmenu":case"mouseup":case"dragend":Tx=!1,kE(ut,d,ot);break;case"selectionchange":if(GM)break;case"keydown":case"keyup":kE(ut,d,ot)}var Lt;if(gt)t:{switch(s){case"compositionstart":var Ut="onCompositionStart";break t;case"compositionend":Ut="onCompositionEnd";break t;case"compositionupdate":Ut="onCompositionUpdate";break t}Ut=void 0}else Zt?pi(s,d)&&(Ut="onCompositionEnd"):s==="keydown"&&d.keyCode===229&&(Ut="onCompositionStart");Ut&&(ge&&d.locale!=="ko"&&(Zt||Ut!=="onCompositionStart"?Ut==="onCompositionEnd"&&Zt&&(Lt=kp()):(Js=ot,Fh="value"in Js?Js.value:Js.textContent,Zt=!0)),Nt=my(J,Ut),0<Nt.length&&(Ut=new oy(Ut,s,null,d,ot),ut.push({event:Ut,listeners:Nt}),Lt?Ut.data=Lt:(Lt=Fn(d),Lt!==null&&(Ut.data=Lt)))),(Lt=Kt?gn(s,d):Pr(s,d))&&(J=my(J,"onBeforeInput"),0<J.length&&(ot=new oy("onBeforeInput","beforeinput",null,d,ot),ut.push({event:ot,listeners:J}),ot.data=Lt))}IE(ut,a)})}function Np(s,a,d){return{instance:s,listener:a,currentTarget:d}}function my(s,a){for(var d=a+"Capture",y=[];s!==null;){var w=s,S=w.stateNode;w.tag===5&&S!==null&&(w=S,S=ac(s,d),S!=null&&y.unshift(Np(s,S,w)),S=ac(s,a),S!=null&&y.push(Np(s,S,w))),s=s.return}return y}function Wh(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5);return s||null}function OE(s,a,d,y,w){for(var S=a._reactName,D=[];d!==null&&d!==y;){var V=d,H=V.alternate,J=V.stateNode;if(H!==null&&H===y)break;V.tag===5&&J!==null&&(V=J,w?(H=ac(d,S),H!=null&&D.unshift(Np(d,H,V))):w||(H=ac(d,S),H!=null&&D.push(Np(d,H,V)))),d=d.return}D.length!==0&&s.push({event:a,listeners:D})}var qM=/\r\n?/g,QM=/\u0000|\uFFFD/g;function jE(s){return(typeof s=="string"?s:""+s).replace(qM,`
`).replace(QM,"")}function gy(s,a,d){if(a=jE(a),jE(s)!==a&&d)throw Error(e(425))}function yy(){}var Nx=null,Lx=null;function Ix(s,a){return s==="textarea"||s==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Fx=typeof setTimeout=="function"?setTimeout:void 0,ZM=typeof clearTimeout=="function"?clearTimeout:void 0,BE=typeof Promise=="function"?Promise:void 0,JM=typeof queueMicrotask=="function"?queueMicrotask:typeof BE<"u"?function(s){return BE.resolve(null).then(s).catch(tD)}:Fx;function tD(s){setTimeout(function(){throw s})}function Ox(s,a){var d=a,y=0;do{var w=d.nextSibling;if(s.removeChild(d),w&&w.nodeType===8)if(d=w.data,d==="/$"){if(y===0){s.removeChild(w),Ia(a);return}y--}else d!=="$"&&d!=="$?"&&d!=="$!"||y++;d=w}while(d);Ia(a)}function Ua(s){for(;s!=null;s=s.nextSibling){var a=s.nodeType;if(a===1||a===3)break;if(a===8){if(a=s.data,a==="$"||a==="$!"||a==="$?")break;if(a==="/$")return null}}return s}function UE(s){s=s.previousSibling;for(var a=0;s;){if(s.nodeType===8){var d=s.data;if(d==="$"||d==="$!"||d==="$?"){if(a===0)return s;a--}else d==="/$"&&a++}s=s.previousSibling}return null}var Gh=Math.random().toString(36).slice(2),Rr="__reactFiber$"+Gh,Lp="__reactProps$"+Gh,wo="__reactContainer$"+Gh,jx="__reactEvents$"+Gh,eD="__reactListeners$"+Gh,nD="__reactHandles$"+Gh;function Tc(s){var a=s[Rr];if(a)return a;for(var d=s.parentNode;d;){if(a=d[wo]||d[Rr]){if(d=a.alternate,a.child!==null||d!==null&&d.child!==null)for(s=UE(s);s!==null;){if(d=s[Rr])return d;s=UE(s)}return a}s=d,d=s.parentNode}return null}function Ip(s){return s=s[Rr]||s[wo],!s||s.tag!==5&&s.tag!==6&&s.tag!==13&&s.tag!==3?null:s}function Xh(s){if(s.tag===5||s.tag===6)return s.stateNode;throw Error(e(33))}function vy(s){return s[Lp]||null}var Bx=[],Kh=-1;function Va(s){return{current:s}}function Ie(s){0>Kh||(s.current=Bx[Kh],Bx[Kh]=null,Kh--)}function Pe(s,a){Kh++,Bx[Kh]=s.current,s.current=a}var za={},Zn=Va(za),Di=Va(!1),_c=za;function Yh(s,a){var d=s.type.contextTypes;if(!d)return za;var y=s.stateNode;if(y&&y.__reactInternalMemoizedUnmaskedChildContext===a)return y.__reactInternalMemoizedMaskedChildContext;var w={},S;for(S in d)w[S]=a[S];return y&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=a,s.__reactInternalMemoizedMaskedChildContext=w),w}function Ni(s){return s=s.childContextTypes,s!=null}function wy(){Ie(Di),Ie(Zn)}function VE(s,a,d){if(Zn.current!==za)throw Error(e(168));Pe(Zn,a),Pe(Di,d)}function zE(s,a,d){var y=s.stateNode;if(a=a.childContextTypes,typeof y.getChildContext!="function")return d;y=y.getChildContext();for(var w in y)if(!(w in a))throw Error(e(108,jt(s)||"Unknown",w));return ht({},d,y)}function xy(s){return s=(s=s.stateNode)&&s.__reactInternalMemoizedMergedChildContext||za,_c=Zn.current,Pe(Zn,s),Pe(Di,Di.current),!0}function HE(s,a,d){var y=s.stateNode;if(!y)throw Error(e(169));d?(s=zE(s,a,_c),y.__reactInternalMemoizedMergedChildContext=s,Ie(Di),Ie(Zn),Pe(Zn,s)):Ie(Di),Pe(Di,d)}var xo=null,by=!1,Ux=!1;function $E(s){xo===null?xo=[s]:xo.push(s)}function iD(s){by=!0,$E(s)}function Ha(){if(!Ux&&xo!==null){Ux=!0;var s=0,a=ce;try{var d=xo;for(ce=1;s<d.length;s++){var y=d[s];do y=y(!0);while(y!==null)}xo=null,by=!1}catch(w){throw xo!==null&&(xo=xo.slice(s+1)),wp(_h,Ha),w}finally{ce=a,Ux=!1}}return null}var qh=[],Qh=0,Ay=null,Sy=0,Cs=[],ks=0,Pc=null,bo=1,Ao="";function Rc(s,a){qh[Qh++]=Sy,qh[Qh++]=Ay,Ay=s,Sy=a}function WE(s,a,d){Cs[ks++]=bo,Cs[ks++]=Ao,Cs[ks++]=Pc,Pc=s;var y=bo;s=Ao;var w=32-Ri(y)-1;y&=~(1<<w),d+=1;var S=32-Ri(a)+w;if(30<S){var D=w-w%5;S=(y&(1<<D)-1).toString(32),y>>=D,w-=D,bo=1<<32-Ri(a)+w|d<<w|y,Ao=S+s}else bo=1<<S|d<<w|y,Ao=s}function Vx(s){s.return!==null&&(Rc(s,1),WE(s,1,0))}function zx(s){for(;s===Ay;)Ay=qh[--Qh],qh[Qh]=null,Sy=qh[--Qh],qh[Qh]=null;for(;s===Pc;)Pc=Cs[--ks],Cs[ks]=null,Ao=Cs[--ks],Cs[ks]=null,bo=Cs[--ks],Cs[ks]=null}var Ki=null,Yi=null,je=!1,er=null;function GE(s,a){var d=Rs(5,null,null,0);d.elementType="DELETED",d.stateNode=a,d.return=s,a=s.deletions,a===null?(s.deletions=[d],s.flags|=16):a.push(d)}function XE(s,a){switch(s.tag){case 5:var d=s.type;return a=a.nodeType!==1||d.toLowerCase()!==a.nodeName.toLowerCase()?null:a,a!==null?(s.stateNode=a,Ki=s,Yi=Ua(a.firstChild),!0):!1;case 6:return a=s.pendingProps===""||a.nodeType!==3?null:a,a!==null?(s.stateNode=a,Ki=s,Yi=null,!0):!1;case 13:return a=a.nodeType!==8?null:a,a!==null?(d=Pc!==null?{id:bo,overflow:Ao}:null,s.memoizedState={dehydrated:a,treeContext:d,retryLane:1073741824},d=Rs(18,null,null,0),d.stateNode=a,d.return=s,s.child=d,Ki=s,Yi=null,!0):!1;default:return!1}}function Hx(s){return(s.mode&1)!==0&&(s.flags&128)===0}function $x(s){if(je){var a=Yi;if(a){var d=a;if(!XE(s,a)){if(Hx(s))throw Error(e(418));a=Ua(d.nextSibling);var y=Ki;a&&XE(s,a)?GE(y,d):(s.flags=s.flags&-4097|2,je=!1,Ki=s)}}else{if(Hx(s))throw Error(e(418));s.flags=s.flags&-4097|2,je=!1,Ki=s}}}function KE(s){for(s=s.return;s!==null&&s.tag!==5&&s.tag!==3&&s.tag!==13;)s=s.return;Ki=s}function Ey(s){if(s!==Ki)return!1;if(!je)return KE(s),je=!0,!1;var a;if((a=s.tag!==3)&&!(a=s.tag!==5)&&(a=s.type,a=a!=="head"&&a!=="body"&&!Ix(s.type,s.memoizedProps)),a&&(a=Yi)){if(Hx(s))throw YE(),Error(e(418));for(;a;)GE(s,a),a=Ua(a.nextSibling)}if(KE(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(e(317));t:{for(s=s.nextSibling,a=0;s;){if(s.nodeType===8){var d=s.data;if(d==="/$"){if(a===0){Yi=Ua(s.nextSibling);break t}a--}else d!=="$"&&d!=="$!"&&d!=="$?"||a++}s=s.nextSibling}Yi=null}}else Yi=Ki?Ua(s.stateNode.nextSibling):null;return!0}function YE(){for(var s=Yi;s;)s=Ua(s.nextSibling)}function Zh(){Yi=Ki=null,je=!1}function Wx(s){er===null?er=[s]:er.push(s)}var sD=F.ReactCurrentBatchConfig;function Fp(s,a,d){if(s=d.ref,s!==null&&typeof s!="function"&&typeof s!="object"){if(d._owner){if(d=d._owner,d){if(d.tag!==1)throw Error(e(309));var y=d.stateNode}if(!y)throw Error(e(147,s));var w=y,S=""+s;return a!==null&&a.ref!==null&&typeof a.ref=="function"&&a.ref._stringRef===S?a.ref:(a=function(D){var V=w.refs;D===null?delete V[S]:V[S]=D},a._stringRef=S,a)}if(typeof s!="string")throw Error(e(284));if(!d._owner)throw Error(e(290,s))}return s}function Cy(s,a){throw s=Object.prototype.toString.call(a),Error(e(31,s==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":s))}function qE(s){var a=s._init;return a(s._payload)}function QE(s){function a(q,X){if(s){var Q=q.deletions;Q===null?(q.deletions=[X],q.flags|=16):Q.push(X)}}function d(q,X){if(!s)return null;for(;X!==null;)a(q,X),X=X.sibling;return null}function y(q,X){for(q=new Map;X!==null;)X.key!==null?q.set(X.key,X):q.set(X.index,X),X=X.sibling;return q}function w(q,X){return q=Qa(q,X),q.index=0,q.sibling=null,q}function S(q,X,Q){return q.index=Q,s?(Q=q.alternate,Q!==null?(Q=Q.index,Q<X?(q.flags|=2,X):Q):(q.flags|=2,X)):(q.flags|=1048576,X)}function D(q){return s&&q.alternate===null&&(q.flags|=2),q}function V(q,X,Q,dt){return X===null||X.tag!==6?(X=Fb(Q,q.mode,dt),X.return=q,X):(X=w(X,Q),X.return=q,X)}function H(q,X,Q,dt){var Pt=Q.type;return Pt===K?ot(q,X,Q.props.children,dt,Q.key):X!==null&&(X.elementType===Pt||typeof Pt=="object"&&Pt!==null&&Pt.$$typeof===ft&&qE(Pt)===X.type)?(dt=w(X,Q.props),dt.ref=Fp(q,X,Q),dt.return=q,dt):(dt=Yy(Q.type,Q.key,Q.props,null,q.mode,dt),dt.ref=Fp(q,X,Q),dt.return=q,dt)}function J(q,X,Q,dt){return X===null||X.tag!==4||X.stateNode.containerInfo!==Q.containerInfo||X.stateNode.implementation!==Q.implementation?(X=Ob(Q,q.mode,dt),X.return=q,X):(X=w(X,Q.children||[]),X.return=q,X)}function ot(q,X,Q,dt,Pt){return X===null||X.tag!==7?(X=jc(Q,q.mode,dt,Pt),X.return=q,X):(X=w(X,Q),X.return=q,X)}function ut(q,X,Q){if(typeof X=="string"&&X!==""||typeof X=="number")return X=Fb(""+X,q.mode,Q),X.return=q,X;if(typeof X=="object"&&X!==null){switch(X.$$typeof){case O:return Q=Yy(X.type,X.key,X.props,null,q.mode,Q),Q.ref=Fp(q,null,X),Q.return=q,Q;case z:return X=Ob(X,q.mode,Q),X.return=q,X;case ft:var dt=X._init;return ut(q,dt(X._payload),Q)}if(Ea(X)||mt(X))return X=jc(X,q.mode,Q,null),X.return=q,X;Cy(q,X)}return null}function rt(q,X,Q,dt){var Pt=X!==null?X.key:null;if(typeof Q=="string"&&Q!==""||typeof Q=="number")return Pt!==null?null:V(q,X,""+Q,dt);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case O:return Q.key===Pt?H(q,X,Q,dt):null;case z:return Q.key===Pt?J(q,X,Q,dt):null;case ft:return Pt=Q._init,rt(q,X,Pt(Q._payload),dt)}if(Ea(Q)||mt(Q))return Pt!==null?null:ot(q,X,Q,dt,null);Cy(q,Q)}return null}function wt(q,X,Q,dt,Pt){if(typeof dt=="string"&&dt!==""||typeof dt=="number")return q=q.get(Q)||null,V(X,q,""+dt,Pt);if(typeof dt=="object"&&dt!==null){switch(dt.$$typeof){case O:return q=q.get(dt.key===null?Q:dt.key)||null,H(X,q,dt,Pt);case z:return q=q.get(dt.key===null?Q:dt.key)||null,J(X,q,dt,Pt);case ft:var Nt=dt._init;return wt(q,X,Q,Nt(dt._payload),Pt)}if(Ea(dt)||mt(dt))return q=q.get(Q)||null,ot(X,q,dt,Pt,null);Cy(X,dt)}return null}function kt(q,X,Q,dt){for(var Pt=null,Nt=null,Lt=X,Ut=X=0,_n=null;Lt!==null&&Ut<Q.length;Ut++){Lt.index>Ut?(_n=Lt,Lt=null):_n=Lt.sibling;var ue=rt(q,Lt,Q[Ut],dt);if(ue===null){Lt===null&&(Lt=_n);break}s&&Lt&&ue.alternate===null&&a(q,Lt),X=S(ue,X,Ut),Nt===null?Pt=ue:Nt.sibling=ue,Nt=ue,Lt=_n}if(Ut===Q.length)return d(q,Lt),je&&Rc(q,Ut),Pt;if(Lt===null){for(;Ut<Q.length;Ut++)Lt=ut(q,Q[Ut],dt),Lt!==null&&(X=S(Lt,X,Ut),Nt===null?Pt=Lt:Nt.sibling=Lt,Nt=Lt);return je&&Rc(q,Ut),Pt}for(Lt=y(q,Lt);Ut<Q.length;Ut++)_n=wt(Lt,q,Ut,Q[Ut],dt),_n!==null&&(s&&_n.alternate!==null&&Lt.delete(_n.key===null?Ut:_n.key),X=S(_n,X,Ut),Nt===null?Pt=_n:Nt.sibling=_n,Nt=_n);return s&&Lt.forEach(function(Za){return a(q,Za)}),je&&Rc(q,Ut),Pt}function Tt(q,X,Q,dt){var Pt=mt(Q);if(typeof Pt!="function")throw Error(e(150));if(Q=Pt.call(Q),Q==null)throw Error(e(151));for(var Nt=Pt=null,Lt=X,Ut=X=0,_n=null,ue=Q.next();Lt!==null&&!ue.done;Ut++,ue=Q.next()){Lt.index>Ut?(_n=Lt,Lt=null):_n=Lt.sibling;var Za=rt(q,Lt,ue.value,dt);if(Za===null){Lt===null&&(Lt=_n);break}s&&Lt&&Za.alternate===null&&a(q,Lt),X=S(Za,X,Ut),Nt===null?Pt=Za:Nt.sibling=Za,Nt=Za,Lt=_n}if(ue.done)return d(q,Lt),je&&Rc(q,Ut),Pt;if(Lt===null){for(;!ue.done;Ut++,ue=Q.next())ue=ut(q,ue.value,dt),ue!==null&&(X=S(ue,X,Ut),Nt===null?Pt=ue:Nt.sibling=ue,Nt=ue);return je&&Rc(q,Ut),Pt}for(Lt=y(q,Lt);!ue.done;Ut++,ue=Q.next())ue=wt(Lt,q,Ut,ue.value,dt),ue!==null&&(s&&ue.alternate!==null&&Lt.delete(ue.key===null?Ut:ue.key),X=S(ue,X,Ut),Nt===null?Pt=ue:Nt.sibling=ue,Nt=ue);return s&&Lt.forEach(function(OD){return a(q,OD)}),je&&Rc(q,Ut),Pt}function rn(q,X,Q,dt){if(typeof Q=="object"&&Q!==null&&Q.type===K&&Q.key===null&&(Q=Q.props.children),typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case O:t:{for(var Pt=Q.key,Nt=X;Nt!==null;){if(Nt.key===Pt){if(Pt=Q.type,Pt===K){if(Nt.tag===7){d(q,Nt.sibling),X=w(Nt,Q.props.children),X.return=q,q=X;break t}}else if(Nt.elementType===Pt||typeof Pt=="object"&&Pt!==null&&Pt.$$typeof===ft&&qE(Pt)===Nt.type){d(q,Nt.sibling),X=w(Nt,Q.props),X.ref=Fp(q,Nt,Q),X.return=q,q=X;break t}d(q,Nt);break}else a(q,Nt);Nt=Nt.sibling}Q.type===K?(X=jc(Q.props.children,q.mode,dt,Q.key),X.return=q,q=X):(dt=Yy(Q.type,Q.key,Q.props,null,q.mode,dt),dt.ref=Fp(q,X,Q),dt.return=q,q=dt)}return D(q);case z:t:{for(Nt=Q.key;X!==null;){if(X.key===Nt)if(X.tag===4&&X.stateNode.containerInfo===Q.containerInfo&&X.stateNode.implementation===Q.implementation){d(q,X.sibling),X=w(X,Q.children||[]),X.return=q,q=X;break t}else{d(q,X);break}else a(q,X);X=X.sibling}X=Ob(Q,q.mode,dt),X.return=q,q=X}return D(q);case ft:return Nt=Q._init,rn(q,X,Nt(Q._payload),dt)}if(Ea(Q))return kt(q,X,Q,dt);if(mt(Q))return Tt(q,X,Q,dt);Cy(q,Q)}return typeof Q=="string"&&Q!==""||typeof Q=="number"?(Q=""+Q,X!==null&&X.tag===6?(d(q,X.sibling),X=w(X,Q),X.return=q,q=X):(d(q,X),X=Fb(Q,q.mode,dt),X.return=q,q=X),D(q)):d(q,X)}return rn}var Jh=QE(!0),ZE=QE(!1),ky=Va(null),Ty=null,td=null,Gx=null;function Xx(){Gx=td=Ty=null}function Kx(s){var a=ky.current;Ie(ky),s._currentValue=a}function Yx(s,a,d){for(;s!==null;){var y=s.alternate;if((s.childLanes&a)!==a?(s.childLanes|=a,y!==null&&(y.childLanes|=a)):y!==null&&(y.childLanes&a)!==a&&(y.childLanes|=a),s===d)break;s=s.return}}function ed(s,a){Ty=s,Gx=td=null,s=s.dependencies,s!==null&&s.firstContext!==null&&((s.lanes&a)!==0&&(Li=!0),s.firstContext=null)}function Ts(s){var a=s._currentValue;if(Gx!==s)if(s={context:s,memoizedValue:a,next:null},td===null){if(Ty===null)throw Error(e(308));td=s,Ty.dependencies={lanes:0,firstContext:s}}else td=td.next=s;return a}var Mc=null;function qx(s){Mc===null?Mc=[s]:Mc.push(s)}function JE(s,a,d,y){var w=a.interleaved;return w===null?(d.next=d,qx(a)):(d.next=w.next,w.next=d),a.interleaved=d,So(s,y)}function So(s,a){s.lanes|=a;var d=s.alternate;for(d!==null&&(d.lanes|=a),d=s,s=s.return;s!==null;)s.childLanes|=a,d=s.alternate,d!==null&&(d.childLanes|=a),d=s,s=s.return;return d.tag===3?d.stateNode:null}var $a=!1;function Qx(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function tC(s,a){s=s.updateQueue,a.updateQueue===s&&(a.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,effects:s.effects})}function Eo(s,a){return{eventTime:s,lane:a,tag:0,payload:null,callback:null,next:null}}function Wa(s,a,d){var y=s.updateQueue;if(y===null)return null;if(y=y.shared,(oe&2)!==0){var w=y.pending;return w===null?a.next=a:(a.next=w.next,w.next=a),y.pending=a,So(s,d)}return w=y.interleaved,w===null?(a.next=a,qx(y)):(a.next=w.next,w.next=a),y.interleaved=a,So(s,d)}function _y(s,a,d){if(a=a.updateQueue,a!==null&&(a=a.shared,(d&4194240)!==0)){var y=a.lanes;y&=s.pendingLanes,d|=y,a.lanes=d,Ap(s,d)}}function eC(s,a){var d=s.updateQueue,y=s.alternate;if(y!==null&&(y=y.updateQueue,d===y)){var w=null,S=null;if(d=d.firstBaseUpdate,d!==null){do{var D={eventTime:d.eventTime,lane:d.lane,tag:d.tag,payload:d.payload,callback:d.callback,next:null};S===null?w=S=D:S=S.next=D,d=d.next}while(d!==null);S===null?w=S=a:S=S.next=a}else w=S=a;d={baseState:y.baseState,firstBaseUpdate:w,lastBaseUpdate:S,shared:y.shared,effects:y.effects},s.updateQueue=d;return}s=d.lastBaseUpdate,s===null?d.firstBaseUpdate=a:s.next=a,d.lastBaseUpdate=a}function Py(s,a,d,y){var w=s.updateQueue;$a=!1;var S=w.firstBaseUpdate,D=w.lastBaseUpdate,V=w.shared.pending;if(V!==null){w.shared.pending=null;var H=V,J=H.next;H.next=null,D===null?S=J:D.next=J,D=H;var ot=s.alternate;ot!==null&&(ot=ot.updateQueue,V=ot.lastBaseUpdate,V!==D&&(V===null?ot.firstBaseUpdate=J:V.next=J,ot.lastBaseUpdate=H))}if(S!==null){var ut=w.baseState;D=0,ot=J=H=null,V=S;do{var rt=V.lane,wt=V.eventTime;if((y&rt)===rt){ot!==null&&(ot=ot.next={eventTime:wt,lane:0,tag:V.tag,payload:V.payload,callback:V.callback,next:null});t:{var kt=s,Tt=V;switch(rt=a,wt=d,Tt.tag){case 1:if(kt=Tt.payload,typeof kt=="function"){ut=kt.call(wt,ut,rt);break t}ut=kt;break t;case 3:kt.flags=kt.flags&-65537|128;case 0:if(kt=Tt.payload,rt=typeof kt=="function"?kt.call(wt,ut,rt):kt,rt==null)break t;ut=ht({},ut,rt);break t;case 2:$a=!0}}V.callback!==null&&V.lane!==0&&(s.flags|=64,rt=w.effects,rt===null?w.effects=[V]:rt.push(V))}else wt={eventTime:wt,lane:rt,tag:V.tag,payload:V.payload,callback:V.callback,next:null},ot===null?(J=ot=wt,H=ut):ot=ot.next=wt,D|=rt;if(V=V.next,V===null){if(V=w.shared.pending,V===null)break;rt=V,V=rt.next,rt.next=null,w.lastBaseUpdate=rt,w.shared.pending=null}}while(!0);if(ot===null&&(H=ut),w.baseState=H,w.firstBaseUpdate=J,w.lastBaseUpdate=ot,a=w.shared.interleaved,a!==null){w=a;do D|=w.lane,w=w.next;while(w!==a)}else S===null&&(w.shared.lanes=0);Lc|=D,s.lanes=D,s.memoizedState=ut}}function nC(s,a,d){if(s=a.effects,a.effects=null,s!==null)for(a=0;a<s.length;a++){var y=s[a],w=y.callback;if(w!==null){if(y.callback=null,y=d,typeof w!="function")throw Error(e(191,w));w.call(y)}}}var Op={},Mr=Va(Op),jp=Va(Op),Bp=Va(Op);function Dc(s){if(s===Op)throw Error(e(174));return s}function Zx(s,a){switch(Pe(Bp,a),Pe(jp,s),Pe(Mr,Op),s=a.nodeType,s){case 9:case 11:a=(a=a.documentElement)?a.namespaceURI:ic(null,"");break;default:s=s===8?a.parentNode:a,a=s.namespaceURI||null,s=s.tagName,a=ic(a,s)}Ie(Mr),Pe(Mr,a)}function nd(){Ie(Mr),Ie(jp),Ie(Bp)}function iC(s){Dc(Bp.current);var a=Dc(Mr.current),d=ic(a,s.type);a!==d&&(Pe(jp,s),Pe(Mr,d))}function Jx(s){jp.current===s&&(Ie(Mr),Ie(jp))}var ze=Va(0);function Ry(s){for(var a=s;a!==null;){if(a.tag===13){var d=a.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||d.data==="$?"||d.data==="$!"))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var tb=[];function eb(){for(var s=0;s<tb.length;s++)tb[s]._workInProgressVersionPrimary=null;tb.length=0}var My=F.ReactCurrentDispatcher,nb=F.ReactCurrentBatchConfig,Nc=0,He=null,yn=null,kn=null,Dy=!1,Up=!1,Vp=0,rD=0;function Jn(){throw Error(e(321))}function ib(s,a){if(a===null)return!1;for(var d=0;d<a.length&&d<s.length;d++)if(!tr(s[d],a[d]))return!1;return!0}function sb(s,a,d,y,w,S){if(Nc=S,He=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,My.current=s===null||s.memoizedState===null?cD:uD,s=d(y,w),Up){S=0;do{if(Up=!1,Vp=0,25<=S)throw Error(e(301));S+=1,kn=yn=null,a.updateQueue=null,My.current=hD,s=d(y,w)}while(Up)}if(My.current=Iy,a=yn!==null&&yn.next!==null,Nc=0,kn=yn=He=null,Dy=!1,a)throw Error(e(300));return s}function rb(){var s=Vp!==0;return Vp=0,s}function Dr(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return kn===null?He.memoizedState=kn=s:kn=kn.next=s,kn}function _s(){if(yn===null){var s=He.alternate;s=s!==null?s.memoizedState:null}else s=yn.next;var a=kn===null?He.memoizedState:kn.next;if(a!==null)kn=a,yn=s;else{if(s===null)throw Error(e(310));yn=s,s={memoizedState:yn.memoizedState,baseState:yn.baseState,baseQueue:yn.baseQueue,queue:yn.queue,next:null},kn===null?He.memoizedState=kn=s:kn=kn.next=s}return kn}function zp(s,a){return typeof a=="function"?a(s):a}function ob(s){var a=_s(),d=a.queue;if(d===null)throw Error(e(311));d.lastRenderedReducer=s;var y=yn,w=y.baseQueue,S=d.pending;if(S!==null){if(w!==null){var D=w.next;w.next=S.next,S.next=D}y.baseQueue=w=S,d.pending=null}if(w!==null){S=w.next,y=y.baseState;var V=D=null,H=null,J=S;do{var ot=J.lane;if((Nc&ot)===ot)H!==null&&(H=H.next={lane:0,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null}),y=J.hasEagerState?J.eagerState:s(y,J.action);else{var ut={lane:ot,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null};H===null?(V=H=ut,D=y):H=H.next=ut,He.lanes|=ot,Lc|=ot}J=J.next}while(J!==null&&J!==S);H===null?D=y:H.next=V,tr(y,a.memoizedState)||(Li=!0),a.memoizedState=y,a.baseState=D,a.baseQueue=H,d.lastRenderedState=y}if(s=d.interleaved,s!==null){w=s;do S=w.lane,He.lanes|=S,Lc|=S,w=w.next;while(w!==s)}else w===null&&(d.lanes=0);return[a.memoizedState,d.dispatch]}function ab(s){var a=_s(),d=a.queue;if(d===null)throw Error(e(311));d.lastRenderedReducer=s;var y=d.dispatch,w=d.pending,S=a.memoizedState;if(w!==null){d.pending=null;var D=w=w.next;do S=s(S,D.action),D=D.next;while(D!==w);tr(S,a.memoizedState)||(Li=!0),a.memoizedState=S,a.baseQueue===null&&(a.baseState=S),d.lastRenderedState=S}return[S,y]}function sC(){}function rC(s,a){var d=He,y=_s(),w=a(),S=!tr(y.memoizedState,w);if(S&&(y.memoizedState=w,Li=!0),y=y.queue,lb(lC.bind(null,d,y,s),[s]),y.getSnapshot!==a||S||kn!==null&&kn.memoizedState.tag&1){if(d.flags|=2048,Hp(9,aC.bind(null,d,y,w,a),void 0,null),Tn===null)throw Error(e(349));(Nc&30)!==0||oC(d,a,w)}return w}function oC(s,a,d){s.flags|=16384,s={getSnapshot:a,value:d},a=He.updateQueue,a===null?(a={lastEffect:null,stores:null},He.updateQueue=a,a.stores=[s]):(d=a.stores,d===null?a.stores=[s]:d.push(s))}function aC(s,a,d,y){a.value=d,a.getSnapshot=y,cC(a)&&uC(s)}function lC(s,a,d){return d(function(){cC(a)&&uC(s)})}function cC(s){var a=s.getSnapshot;s=s.value;try{var d=a();return!tr(s,d)}catch{return!0}}function uC(s){var a=So(s,1);a!==null&&rr(a,s,1,-1)}function hC(s){var a=Dr();return typeof s=="function"&&(s=s()),a.memoizedState=a.baseState=s,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:zp,lastRenderedState:s},a.queue=s,s=s.dispatch=lD.bind(null,He,s),[a.memoizedState,s]}function Hp(s,a,d,y){return s={tag:s,create:a,destroy:d,deps:y,next:null},a=He.updateQueue,a===null?(a={lastEffect:null,stores:null},He.updateQueue=a,a.lastEffect=s.next=s):(d=a.lastEffect,d===null?a.lastEffect=s.next=s:(y=d.next,d.next=s,s.next=y,a.lastEffect=s)),s}function dC(){return _s().memoizedState}function Ny(s,a,d,y){var w=Dr();He.flags|=s,w.memoizedState=Hp(1|a,d,void 0,y===void 0?null:y)}function Ly(s,a,d,y){var w=_s();y=y===void 0?null:y;var S=void 0;if(yn!==null){var D=yn.memoizedState;if(S=D.destroy,y!==null&&ib(y,D.deps)){w.memoizedState=Hp(a,d,S,y);return}}He.flags|=s,w.memoizedState=Hp(1|a,d,S,y)}function fC(s,a){return Ny(8390656,8,s,a)}function lb(s,a){return Ly(2048,8,s,a)}function pC(s,a){return Ly(4,2,s,a)}function mC(s,a){return Ly(4,4,s,a)}function gC(s,a){if(typeof a=="function")return s=s(),a(s),function(){a(null)};if(a!=null)return s=s(),a.current=s,function(){a.current=null}}function yC(s,a,d){return d=d!=null?d.concat([s]):null,Ly(4,4,gC.bind(null,a,s),d)}function cb(){}function vC(s,a){var d=_s();a=a===void 0?null:a;var y=d.memoizedState;return y!==null&&a!==null&&ib(a,y[1])?y[0]:(d.memoizedState=[s,a],s)}function wC(s,a){var d=_s();a=a===void 0?null:a;var y=d.memoizedState;return y!==null&&a!==null&&ib(a,y[1])?y[0]:(s=s(),d.memoizedState=[s,a],s)}function xC(s,a,d){return(Nc&21)===0?(s.baseState&&(s.baseState=!1,Li=!0),s.memoizedState=d):(tr(d,a)||(d=yc(),He.lanes|=d,Lc|=d,s.baseState=!0),a)}function oD(s,a){var d=ce;ce=d!==0&&4>d?d:4,s(!0);var y=nb.transition;nb.transition={};try{s(!1),a()}finally{ce=d,nb.transition=y}}function bC(){return _s().memoizedState}function aD(s,a,d){var y=Ya(s);if(d={lane:y,action:d,hasEagerState:!1,eagerState:null,next:null},AC(s))SC(a,d);else if(d=JE(s,a,d,y),d!==null){var w=gi();rr(d,s,y,w),EC(d,a,y)}}function lD(s,a,d){var y=Ya(s),w={lane:y,action:d,hasEagerState:!1,eagerState:null,next:null};if(AC(s))SC(a,w);else{var S=s.alternate;if(s.lanes===0&&(S===null||S.lanes===0)&&(S=a.lastRenderedReducer,S!==null))try{var D=a.lastRenderedState,V=S(D,d);if(w.hasEagerState=!0,w.eagerState=V,tr(V,D)){var H=a.interleaved;H===null?(w.next=w,qx(a)):(w.next=H.next,H.next=w),a.interleaved=w;return}}catch{}finally{}d=JE(s,a,w,y),d!==null&&(w=gi(),rr(d,s,y,w),EC(d,a,y))}}function AC(s){var a=s.alternate;return s===He||a!==null&&a===He}function SC(s,a){Up=Dy=!0;var d=s.pending;d===null?a.next=a:(a.next=d.next,d.next=a),s.pending=a}function EC(s,a,d){if((d&4194240)!==0){var y=a.lanes;y&=s.pendingLanes,d|=y,a.lanes=d,Ap(s,d)}}var Iy={readContext:Ts,useCallback:Jn,useContext:Jn,useEffect:Jn,useImperativeHandle:Jn,useInsertionEffect:Jn,useLayoutEffect:Jn,useMemo:Jn,useReducer:Jn,useRef:Jn,useState:Jn,useDebugValue:Jn,useDeferredValue:Jn,useTransition:Jn,useMutableSource:Jn,useSyncExternalStore:Jn,useId:Jn,unstable_isNewReconciler:!1},cD={readContext:Ts,useCallback:function(s,a){return Dr().memoizedState=[s,a===void 0?null:a],s},useContext:Ts,useEffect:fC,useImperativeHandle:function(s,a,d){return d=d!=null?d.concat([s]):null,Ny(4194308,4,gC.bind(null,a,s),d)},useLayoutEffect:function(s,a){return Ny(4194308,4,s,a)},useInsertionEffect:function(s,a){return Ny(4,2,s,a)},useMemo:function(s,a){var d=Dr();return a=a===void 0?null:a,s=s(),d.memoizedState=[s,a],s},useReducer:function(s,a,d){var y=Dr();return a=d!==void 0?d(a):a,y.memoizedState=y.baseState=a,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:a},y.queue=s,s=s.dispatch=aD.bind(null,He,s),[y.memoizedState,s]},useRef:function(s){var a=Dr();return s={current:s},a.memoizedState=s},useState:hC,useDebugValue:cb,useDeferredValue:function(s){return Dr().memoizedState=s},useTransition:function(){var s=hC(!1),a=s[0];return s=oD.bind(null,s[1]),Dr().memoizedState=s,[a,s]},useMutableSource:function(){},useSyncExternalStore:function(s,a,d){var y=He,w=Dr();if(je){if(d===void 0)throw Error(e(407));d=d()}else{if(d=a(),Tn===null)throw Error(e(349));(Nc&30)!==0||oC(y,a,d)}w.memoizedState=d;var S={value:d,getSnapshot:a};return w.queue=S,fC(lC.bind(null,y,S,s),[s]),y.flags|=2048,Hp(9,aC.bind(null,y,S,d,a),void 0,null),d},useId:function(){var s=Dr(),a=Tn.identifierPrefix;if(je){var d=Ao,y=bo;d=(y&~(1<<32-Ri(y)-1)).toString(32)+d,a=":"+a+"R"+d,d=Vp++,0<d&&(a+="H"+d.toString(32)),a+=":"}else d=rD++,a=":"+a+"r"+d.toString(32)+":";return s.memoizedState=a},unstable_isNewReconciler:!1},uD={readContext:Ts,useCallback:vC,useContext:Ts,useEffect:lb,useImperativeHandle:yC,useInsertionEffect:pC,useLayoutEffect:mC,useMemo:wC,useReducer:ob,useRef:dC,useState:function(){return ob(zp)},useDebugValue:cb,useDeferredValue:function(s){var a=_s();return xC(a,yn.memoizedState,s)},useTransition:function(){var s=ob(zp)[0],a=_s().memoizedState;return[s,a]},useMutableSource:sC,useSyncExternalStore:rC,useId:bC,unstable_isNewReconciler:!1},hD={readContext:Ts,useCallback:vC,useContext:Ts,useEffect:lb,useImperativeHandle:yC,useInsertionEffect:pC,useLayoutEffect:mC,useMemo:wC,useReducer:ab,useRef:dC,useState:function(){return ab(zp)},useDebugValue:cb,useDeferredValue:function(s){var a=_s();return yn===null?a.memoizedState=s:xC(a,yn.memoizedState,s)},useTransition:function(){var s=ab(zp)[0],a=_s().memoizedState;return[s,a]},useMutableSource:sC,useSyncExternalStore:rC,useId:bC,unstable_isNewReconciler:!1};function nr(s,a){if(s&&s.defaultProps){a=ht({},a),s=s.defaultProps;for(var d in s)a[d]===void 0&&(a[d]=s[d]);return a}return a}function ub(s,a,d,y){a=s.memoizedState,d=d(y,a),d=d==null?a:ht({},a,d),s.memoizedState=d,s.lanes===0&&(s.updateQueue.baseState=d)}var Fy={isMounted:function(s){return(s=s._reactInternals)?Zs(s)===s:!1},enqueueSetState:function(s,a,d){s=s._reactInternals;var y=gi(),w=Ya(s),S=Eo(y,w);S.payload=a,d!=null&&(S.callback=d),a=Wa(s,S,w),a!==null&&(rr(a,s,w,y),_y(a,s,w))},enqueueReplaceState:function(s,a,d){s=s._reactInternals;var y=gi(),w=Ya(s),S=Eo(y,w);S.tag=1,S.payload=a,d!=null&&(S.callback=d),a=Wa(s,S,w),a!==null&&(rr(a,s,w,y),_y(a,s,w))},enqueueForceUpdate:function(s,a){s=s._reactInternals;var d=gi(),y=Ya(s),w=Eo(d,y);w.tag=2,a!=null&&(w.callback=a),a=Wa(s,w,y),a!==null&&(rr(a,s,y,d),_y(a,s,y))}};function CC(s,a,d,y,w,S,D){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(y,S,D):a.prototype&&a.prototype.isPureReactComponent?!Pp(d,y)||!Pp(w,S):!0}function kC(s,a,d){var y=!1,w=za,S=a.contextType;return typeof S=="object"&&S!==null?S=Ts(S):(w=Ni(a)?_c:Zn.current,y=a.contextTypes,S=(y=y!=null)?Yh(s,w):za),a=new a(d,S),s.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=Fy,s.stateNode=a,a._reactInternals=s,y&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=w,s.__reactInternalMemoizedMaskedChildContext=S),a}function TC(s,a,d,y){s=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(d,y),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(d,y),a.state!==s&&Fy.enqueueReplaceState(a,a.state,null)}function hb(s,a,d,y){var w=s.stateNode;w.props=d,w.state=s.memoizedState,w.refs={},Qx(s);var S=a.contextType;typeof S=="object"&&S!==null?w.context=Ts(S):(S=Ni(a)?_c:Zn.current,w.context=Yh(s,S)),w.state=s.memoizedState,S=a.getDerivedStateFromProps,typeof S=="function"&&(ub(s,a,S,d),w.state=s.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(a=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),a!==w.state&&Fy.enqueueReplaceState(w,w.state,null),Py(s,d,w,y),w.state=s.memoizedState),typeof w.componentDidMount=="function"&&(s.flags|=4194308)}function id(s,a){try{var d="",y=a;do d+=Vt(y),y=y.return;while(y);var w=d}catch(S){w=`
Error generating stack: `+S.message+`
`+S.stack}return{value:s,source:a,stack:w,digest:null}}function db(s,a,d){return{value:s,source:null,stack:d??null,digest:a??null}}function fb(s,a){try{console.error(a.value)}catch(d){setTimeout(function(){throw d})}}var dD=typeof WeakMap=="function"?WeakMap:Map;function _C(s,a,d){d=Eo(-1,d),d.tag=3,d.payload={element:null};var y=a.value;return d.callback=function(){Hy||(Hy=!0,_b=y),fb(s,a)},d}function PC(s,a,d){d=Eo(-1,d),d.tag=3;var y=s.type.getDerivedStateFromError;if(typeof y=="function"){var w=a.value;d.payload=function(){return y(w)},d.callback=function(){fb(s,a)}}var S=s.stateNode;return S!==null&&typeof S.componentDidCatch=="function"&&(d.callback=function(){fb(s,a),typeof y!="function"&&(Xa===null?Xa=new Set([this]):Xa.add(this));var D=a.stack;this.componentDidCatch(a.value,{componentStack:D!==null?D:""})}),d}function RC(s,a,d){var y=s.pingCache;if(y===null){y=s.pingCache=new dD;var w=new Set;y.set(a,w)}else w=y.get(a),w===void 0&&(w=new Set,y.set(a,w));w.has(d)||(w.add(d),s=kD.bind(null,s,a,d),a.then(s,s))}function MC(s){do{var a;if((a=s.tag===13)&&(a=s.memoizedState,a=a!==null?a.dehydrated!==null:!0),a)return s;s=s.return}while(s!==null);return null}function DC(s,a,d,y,w){return(s.mode&1)===0?(s===a?s.flags|=65536:(s.flags|=128,d.flags|=131072,d.flags&=-52805,d.tag===1&&(d.alternate===null?d.tag=17:(a=Eo(-1,1),a.tag=2,Wa(d,a,1))),d.lanes|=1),s):(s.flags|=65536,s.lanes=w,s)}var fD=F.ReactCurrentOwner,Li=!1;function mi(s,a,d,y){a.child=s===null?ZE(a,null,d,y):Jh(a,s.child,d,y)}function NC(s,a,d,y,w){d=d.render;var S=a.ref;return ed(a,w),y=sb(s,a,d,y,S,w),d=rb(),s!==null&&!Li?(a.updateQueue=s.updateQueue,a.flags&=-2053,s.lanes&=~w,Co(s,a,w)):(je&&d&&Vx(a),a.flags|=1,mi(s,a,y,w),a.child)}function LC(s,a,d,y,w){if(s===null){var S=d.type;return typeof S=="function"&&!Ib(S)&&S.defaultProps===void 0&&d.compare===null&&d.defaultProps===void 0?(a.tag=15,a.type=S,IC(s,a,S,y,w)):(s=Yy(d.type,null,y,a,a.mode,w),s.ref=a.ref,s.return=a,a.child=s)}if(S=s.child,(s.lanes&w)===0){var D=S.memoizedProps;if(d=d.compare,d=d!==null?d:Pp,d(D,y)&&s.ref===a.ref)return Co(s,a,w)}return a.flags|=1,s=Qa(S,y),s.ref=a.ref,s.return=a,a.child=s}function IC(s,a,d,y,w){if(s!==null){var S=s.memoizedProps;if(Pp(S,y)&&s.ref===a.ref)if(Li=!1,a.pendingProps=y=S,(s.lanes&w)!==0)(s.flags&131072)!==0&&(Li=!0);else return a.lanes=s.lanes,Co(s,a,w)}return pb(s,a,d,y,w)}function FC(s,a,d){var y=a.pendingProps,w=y.children,S=s!==null?s.memoizedState:null;if(y.mode==="hidden")if((a.mode&1)===0)a.memoizedState={baseLanes:0,cachePool:null,transitions:null},Pe(rd,qi),qi|=d;else{if((d&1073741824)===0)return s=S!==null?S.baseLanes|d:d,a.lanes=a.childLanes=1073741824,a.memoizedState={baseLanes:s,cachePool:null,transitions:null},a.updateQueue=null,Pe(rd,qi),qi|=s,null;a.memoizedState={baseLanes:0,cachePool:null,transitions:null},y=S!==null?S.baseLanes:d,Pe(rd,qi),qi|=y}else S!==null?(y=S.baseLanes|d,a.memoizedState=null):y=d,Pe(rd,qi),qi|=y;return mi(s,a,w,d),a.child}function OC(s,a){var d=a.ref;(s===null&&d!==null||s!==null&&s.ref!==d)&&(a.flags|=512,a.flags|=2097152)}function pb(s,a,d,y,w){var S=Ni(d)?_c:Zn.current;return S=Yh(a,S),ed(a,w),d=sb(s,a,d,y,S,w),y=rb(),s!==null&&!Li?(a.updateQueue=s.updateQueue,a.flags&=-2053,s.lanes&=~w,Co(s,a,w)):(je&&y&&Vx(a),a.flags|=1,mi(s,a,d,w),a.child)}function jC(s,a,d,y,w){if(Ni(d)){var S=!0;xy(a)}else S=!1;if(ed(a,w),a.stateNode===null)jy(s,a),kC(a,d,y),hb(a,d,y,w),y=!0;else if(s===null){var D=a.stateNode,V=a.memoizedProps;D.props=V;var H=D.context,J=d.contextType;typeof J=="object"&&J!==null?J=Ts(J):(J=Ni(d)?_c:Zn.current,J=Yh(a,J));var ot=d.getDerivedStateFromProps,ut=typeof ot=="function"||typeof D.getSnapshotBeforeUpdate=="function";ut||typeof D.UNSAFE_componentWillReceiveProps!="function"&&typeof D.componentWillReceiveProps!="function"||(V!==y||H!==J)&&TC(a,D,y,J),$a=!1;var rt=a.memoizedState;D.state=rt,Py(a,y,D,w),H=a.memoizedState,V!==y||rt!==H||Di.current||$a?(typeof ot=="function"&&(ub(a,d,ot,y),H=a.memoizedState),(V=$a||CC(a,d,V,y,rt,H,J))?(ut||typeof D.UNSAFE_componentWillMount!="function"&&typeof D.componentWillMount!="function"||(typeof D.componentWillMount=="function"&&D.componentWillMount(),typeof D.UNSAFE_componentWillMount=="function"&&D.UNSAFE_componentWillMount()),typeof D.componentDidMount=="function"&&(a.flags|=4194308)):(typeof D.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=y,a.memoizedState=H),D.props=y,D.state=H,D.context=J,y=V):(typeof D.componentDidMount=="function"&&(a.flags|=4194308),y=!1)}else{D=a.stateNode,tC(s,a),V=a.memoizedProps,J=a.type===a.elementType?V:nr(a.type,V),D.props=J,ut=a.pendingProps,rt=D.context,H=d.contextType,typeof H=="object"&&H!==null?H=Ts(H):(H=Ni(d)?_c:Zn.current,H=Yh(a,H));var wt=d.getDerivedStateFromProps;(ot=typeof wt=="function"||typeof D.getSnapshotBeforeUpdate=="function")||typeof D.UNSAFE_componentWillReceiveProps!="function"&&typeof D.componentWillReceiveProps!="function"||(V!==ut||rt!==H)&&TC(a,D,y,H),$a=!1,rt=a.memoizedState,D.state=rt,Py(a,y,D,w);var kt=a.memoizedState;V!==ut||rt!==kt||Di.current||$a?(typeof wt=="function"&&(ub(a,d,wt,y),kt=a.memoizedState),(J=$a||CC(a,d,J,y,rt,kt,H)||!1)?(ot||typeof D.UNSAFE_componentWillUpdate!="function"&&typeof D.componentWillUpdate!="function"||(typeof D.componentWillUpdate=="function"&&D.componentWillUpdate(y,kt,H),typeof D.UNSAFE_componentWillUpdate=="function"&&D.UNSAFE_componentWillUpdate(y,kt,H)),typeof D.componentDidUpdate=="function"&&(a.flags|=4),typeof D.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof D.componentDidUpdate!="function"||V===s.memoizedProps&&rt===s.memoizedState||(a.flags|=4),typeof D.getSnapshotBeforeUpdate!="function"||V===s.memoizedProps&&rt===s.memoizedState||(a.flags|=1024),a.memoizedProps=y,a.memoizedState=kt),D.props=y,D.state=kt,D.context=H,y=J):(typeof D.componentDidUpdate!="function"||V===s.memoizedProps&&rt===s.memoizedState||(a.flags|=4),typeof D.getSnapshotBeforeUpdate!="function"||V===s.memoizedProps&&rt===s.memoizedState||(a.flags|=1024),y=!1)}return mb(s,a,d,y,S,w)}function mb(s,a,d,y,w,S){OC(s,a);var D=(a.flags&128)!==0;if(!y&&!D)return w&&HE(a,d,!1),Co(s,a,S);y=a.stateNode,fD.current=a;var V=D&&typeof d.getDerivedStateFromError!="function"?null:y.render();return a.flags|=1,s!==null&&D?(a.child=Jh(a,s.child,null,S),a.child=Jh(a,null,V,S)):mi(s,a,V,S),a.memoizedState=y.state,w&&HE(a,d,!0),a.child}function BC(s){var a=s.stateNode;a.pendingContext?VE(s,a.pendingContext,a.pendingContext!==a.context):a.context&&VE(s,a.context,!1),Zx(s,a.containerInfo)}function UC(s,a,d,y,w){return Zh(),Wx(w),a.flags|=256,mi(s,a,d,y),a.child}var gb={dehydrated:null,treeContext:null,retryLane:0};function yb(s){return{baseLanes:s,cachePool:null,transitions:null}}function VC(s,a,d){var y=a.pendingProps,w=ze.current,S=!1,D=(a.flags&128)!==0,V;if((V=D)||(V=s!==null&&s.memoizedState===null?!1:(w&2)!==0),V?(S=!0,a.flags&=-129):(s===null||s.memoizedState!==null)&&(w|=1),Pe(ze,w&1),s===null)return $x(a),s=a.memoizedState,s!==null&&(s=s.dehydrated,s!==null)?((a.mode&1)===0?a.lanes=1:s.data==="$!"?a.lanes=8:a.lanes=1073741824,null):(D=y.children,s=y.fallback,S?(y=a.mode,S=a.child,D={mode:"hidden",children:D},(y&1)===0&&S!==null?(S.childLanes=0,S.pendingProps=D):S=qy(D,y,0,null),s=jc(s,y,d,null),S.return=a,s.return=a,S.sibling=s,a.child=S,a.child.memoizedState=yb(d),a.memoizedState=gb,s):vb(a,D));if(w=s.memoizedState,w!==null&&(V=w.dehydrated,V!==null))return pD(s,a,D,y,V,w,d);if(S){S=y.fallback,D=a.mode,w=s.child,V=w.sibling;var H={mode:"hidden",children:y.children};return(D&1)===0&&a.child!==w?(y=a.child,y.childLanes=0,y.pendingProps=H,a.deletions=null):(y=Qa(w,H),y.subtreeFlags=w.subtreeFlags&14680064),V!==null?S=Qa(V,S):(S=jc(S,D,d,null),S.flags|=2),S.return=a,y.return=a,y.sibling=S,a.child=y,y=S,S=a.child,D=s.child.memoizedState,D=D===null?yb(d):{baseLanes:D.baseLanes|d,cachePool:null,transitions:D.transitions},S.memoizedState=D,S.childLanes=s.childLanes&~d,a.memoizedState=gb,y}return S=s.child,s=S.sibling,y=Qa(S,{mode:"visible",children:y.children}),(a.mode&1)===0&&(y.lanes=d),y.return=a,y.sibling=null,s!==null&&(d=a.deletions,d===null?(a.deletions=[s],a.flags|=16):d.push(s)),a.child=y,a.memoizedState=null,y}function vb(s,a){return a=qy({mode:"visible",children:a},s.mode,0,null),a.return=s,s.child=a}function Oy(s,a,d,y){return y!==null&&Wx(y),Jh(a,s.child,null,d),s=vb(a,a.pendingProps.children),s.flags|=2,a.memoizedState=null,s}function pD(s,a,d,y,w,S,D){if(d)return a.flags&256?(a.flags&=-257,y=db(Error(e(422))),Oy(s,a,D,y)):a.memoizedState!==null?(a.child=s.child,a.flags|=128,null):(S=y.fallback,w=a.mode,y=qy({mode:"visible",children:y.children},w,0,null),S=jc(S,w,D,null),S.flags|=2,y.return=a,S.return=a,y.sibling=S,a.child=y,(a.mode&1)!==0&&Jh(a,s.child,null,D),a.child.memoizedState=yb(D),a.memoizedState=gb,S);if((a.mode&1)===0)return Oy(s,a,D,null);if(w.data==="$!"){if(y=w.nextSibling&&w.nextSibling.dataset,y)var V=y.dgst;return y=V,S=Error(e(419)),y=db(S,y,void 0),Oy(s,a,D,y)}if(V=(D&s.childLanes)!==0,Li||V){if(y=Tn,y!==null){switch(D&-D){case 4:w=2;break;case 16:w=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:w=32;break;case 536870912:w=268435456;break;default:w=0}w=(w&(y.suspendedLanes|D))!==0?0:w,w!==0&&w!==S.retryLane&&(S.retryLane=w,So(s,w),rr(y,s,w,-1))}return Lb(),y=db(Error(e(421))),Oy(s,a,D,y)}return w.data==="$?"?(a.flags|=128,a.child=s.child,a=TD.bind(null,s),w._reactRetry=a,null):(s=S.treeContext,Yi=Ua(w.nextSibling),Ki=a,je=!0,er=null,s!==null&&(Cs[ks++]=bo,Cs[ks++]=Ao,Cs[ks++]=Pc,bo=s.id,Ao=s.overflow,Pc=a),a=vb(a,y.children),a.flags|=4096,a)}function zC(s,a,d){s.lanes|=a;var y=s.alternate;y!==null&&(y.lanes|=a),Yx(s.return,a,d)}function wb(s,a,d,y,w){var S=s.memoizedState;S===null?s.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:y,tail:d,tailMode:w}:(S.isBackwards=a,S.rendering=null,S.renderingStartTime=0,S.last=y,S.tail=d,S.tailMode=w)}function HC(s,a,d){var y=a.pendingProps,w=y.revealOrder,S=y.tail;if(mi(s,a,y.children,d),y=ze.current,(y&2)!==0)y=y&1|2,a.flags|=128;else{if(s!==null&&(s.flags&128)!==0)t:for(s=a.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&zC(s,d,a);else if(s.tag===19)zC(s,d,a);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===a)break t;for(;s.sibling===null;){if(s.return===null||s.return===a)break t;s=s.return}s.sibling.return=s.return,s=s.sibling}y&=1}if(Pe(ze,y),(a.mode&1)===0)a.memoizedState=null;else switch(w){case"forwards":for(d=a.child,w=null;d!==null;)s=d.alternate,s!==null&&Ry(s)===null&&(w=d),d=d.sibling;d=w,d===null?(w=a.child,a.child=null):(w=d.sibling,d.sibling=null),wb(a,!1,w,d,S);break;case"backwards":for(d=null,w=a.child,a.child=null;w!==null;){if(s=w.alternate,s!==null&&Ry(s)===null){a.child=w;break}s=w.sibling,w.sibling=d,d=w,w=s}wb(a,!0,d,null,S);break;case"together":wb(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function jy(s,a){(a.mode&1)===0&&s!==null&&(s.alternate=null,a.alternate=null,a.flags|=2)}function Co(s,a,d){if(s!==null&&(a.dependencies=s.dependencies),Lc|=a.lanes,(d&a.childLanes)===0)return null;if(s!==null&&a.child!==s.child)throw Error(e(153));if(a.child!==null){for(s=a.child,d=Qa(s,s.pendingProps),a.child=d,d.return=a;s.sibling!==null;)s=s.sibling,d=d.sibling=Qa(s,s.pendingProps),d.return=a;d.sibling=null}return a.child}function mD(s,a,d){switch(a.tag){case 3:BC(a),Zh();break;case 5:iC(a);break;case 1:Ni(a.type)&&xy(a);break;case 4:Zx(a,a.stateNode.containerInfo);break;case 10:var y=a.type._context,w=a.memoizedProps.value;Pe(ky,y._currentValue),y._currentValue=w;break;case 13:if(y=a.memoizedState,y!==null)return y.dehydrated!==null?(Pe(ze,ze.current&1),a.flags|=128,null):(d&a.child.childLanes)!==0?VC(s,a,d):(Pe(ze,ze.current&1),s=Co(s,a,d),s!==null?s.sibling:null);Pe(ze,ze.current&1);break;case 19:if(y=(d&a.childLanes)!==0,(s.flags&128)!==0){if(y)return HC(s,a,d);a.flags|=128}if(w=a.memoizedState,w!==null&&(w.rendering=null,w.tail=null,w.lastEffect=null),Pe(ze,ze.current),y)break;return null;case 22:case 23:return a.lanes=0,FC(s,a,d)}return Co(s,a,d)}var $C,xb,WC,GC;$C=function(s,a){for(var d=a.child;d!==null;){if(d.tag===5||d.tag===6)s.appendChild(d.stateNode);else if(d.tag!==4&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===a)break;for(;d.sibling===null;){if(d.return===null||d.return===a)return;d=d.return}d.sibling.return=d.return,d=d.sibling}},xb=function(){},WC=function(s,a,d,y){var w=s.memoizedProps;if(w!==y){s=a.stateNode,Dc(Mr.current);var S=null;switch(d){case"input":w=sn(s,w),y=sn(s,y),S=[];break;case"select":w=ht({},w,{value:void 0}),y=ht({},y,{value:void 0}),S=[];break;case"textarea":w=ec(s,w),y=ec(s,y),S=[];break;default:typeof w.onClick!="function"&&typeof y.onClick=="function"&&(s.onclick=yy)}mp(d,y);var D;d=null;for(J in w)if(!y.hasOwnProperty(J)&&w.hasOwnProperty(J)&&w[J]!=null)if(J==="style"){var V=w[J];for(D in V)V.hasOwnProperty(D)&&(d||(d={}),d[D]="")}else J!=="dangerouslySetInnerHTML"&&J!=="children"&&J!=="suppressContentEditableWarning"&&J!=="suppressHydrationWarning"&&J!=="autoFocus"&&(i.hasOwnProperty(J)?S||(S=[]):(S=S||[]).push(J,null));for(J in y){var H=y[J];if(V=w?.[J],y.hasOwnProperty(J)&&H!==V&&(H!=null||V!=null))if(J==="style")if(V){for(D in V)!V.hasOwnProperty(D)||H&&H.hasOwnProperty(D)||(d||(d={}),d[D]="");for(D in H)H.hasOwnProperty(D)&&V[D]!==H[D]&&(d||(d={}),d[D]=H[D])}else d||(S||(S=[]),S.push(J,d)),d=H;else J==="dangerouslySetInnerHTML"?(H=H?H.__html:void 0,V=V?V.__html:void 0,H!=null&&V!==H&&(S=S||[]).push(J,H)):J==="children"?typeof H!="string"&&typeof H!="number"||(S=S||[]).push(J,""+H):J!=="suppressContentEditableWarning"&&J!=="suppressHydrationWarning"&&(i.hasOwnProperty(J)?(H!=null&&J==="onScroll"&&Le("scroll",s),S||V===H||(S=[])):(S=S||[]).push(J,H))}d&&(S=S||[]).push("style",d);var J=S;(a.updateQueue=J)&&(a.flags|=4)}},GC=function(s,a,d,y){d!==y&&(a.flags|=4)};function $p(s,a){if(!je)switch(s.tailMode){case"hidden":a=s.tail;for(var d=null;a!==null;)a.alternate!==null&&(d=a),a=a.sibling;d===null?s.tail=null:d.sibling=null;break;case"collapsed":d=s.tail;for(var y=null;d!==null;)d.alternate!==null&&(y=d),d=d.sibling;y===null?a||s.tail===null?s.tail=null:s.tail.sibling=null:y.sibling=null}}function ti(s){var a=s.alternate!==null&&s.alternate.child===s.child,d=0,y=0;if(a)for(var w=s.child;w!==null;)d|=w.lanes|w.childLanes,y|=w.subtreeFlags&14680064,y|=w.flags&14680064,w.return=s,w=w.sibling;else for(w=s.child;w!==null;)d|=w.lanes|w.childLanes,y|=w.subtreeFlags,y|=w.flags,w.return=s,w=w.sibling;return s.subtreeFlags|=y,s.childLanes=d,a}function gD(s,a,d){var y=a.pendingProps;switch(zx(a),a.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ti(a),null;case 1:return Ni(a.type)&&wy(),ti(a),null;case 3:return y=a.stateNode,nd(),Ie(Di),Ie(Zn),eb(),y.pendingContext&&(y.context=y.pendingContext,y.pendingContext=null),(s===null||s.child===null)&&(Ey(a)?a.flags|=4:s===null||s.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,er!==null&&(Mb(er),er=null))),xb(s,a),ti(a),null;case 5:Jx(a);var w=Dc(Bp.current);if(d=a.type,s!==null&&a.stateNode!=null)WC(s,a,d,y,w),s.ref!==a.ref&&(a.flags|=512,a.flags|=2097152);else{if(!y){if(a.stateNode===null)throw Error(e(166));return ti(a),null}if(s=Dc(Mr.current),Ey(a)){y=a.stateNode,d=a.type;var S=a.memoizedProps;switch(y[Rr]=a,y[Lp]=S,s=(a.mode&1)!==0,d){case"dialog":Le("cancel",y),Le("close",y);break;case"iframe":case"object":case"embed":Le("load",y);break;case"video":case"audio":for(w=0;w<Mp.length;w++)Le(Mp[w],y);break;case"source":Le("error",y);break;case"img":case"image":case"link":Le("error",y),Le("load",y);break;case"details":Le("toggle",y);break;case"input":up(y,S),Le("invalid",y);break;case"select":y._wrapperState={wasMultiple:!!S.multiple},Le("invalid",y);break;case"textarea":dp(y,S),Le("invalid",y)}mp(d,S),w=null;for(var D in S)if(S.hasOwnProperty(D)){var V=S[D];D==="children"?typeof V=="string"?y.textContent!==V&&(S.suppressHydrationWarning!==!0&&gy(y.textContent,V,s),w=["children",V]):typeof V=="number"&&y.textContent!==""+V&&(S.suppressHydrationWarning!==!0&&gy(y.textContent,V,s),w=["children",""+V]):i.hasOwnProperty(D)&&V!=null&&D==="onScroll"&&Le("scroll",y)}switch(d){case"input":Ti(y),hp(y,S,!0);break;case"textarea":Ti(y),fp(y);break;case"select":case"option":break;default:typeof S.onClick=="function"&&(y.onclick=yy)}y=w,a.updateQueue=y,y!==null&&(a.flags|=4)}else{D=w.nodeType===9?w:w.ownerDocument,s==="http://www.w3.org/1999/xhtml"&&(s=nc(d)),s==="http://www.w3.org/1999/xhtml"?d==="script"?(s=D.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild)):typeof y.is=="string"?s=D.createElement(d,{is:y.is}):(s=D.createElement(d),d==="select"&&(D=s,y.multiple?D.multiple=!0:y.size&&(D.size=y.size))):s=D.createElementNS(s,d),s[Rr]=a,s[Lp]=y,$C(s,a,!1,!1),a.stateNode=s;t:{switch(D=Ah(d,y),d){case"dialog":Le("cancel",s),Le("close",s),w=y;break;case"iframe":case"object":case"embed":Le("load",s),w=y;break;case"video":case"audio":for(w=0;w<Mp.length;w++)Le(Mp[w],s);w=y;break;case"source":Le("error",s),w=y;break;case"img":case"image":case"link":Le("error",s),Le("load",s),w=y;break;case"details":Le("toggle",s),w=y;break;case"input":up(s,y),w=sn(s,y),Le("invalid",s);break;case"option":w=y;break;case"select":s._wrapperState={wasMultiple:!!y.multiple},w=ht({},y,{value:void 0}),Le("invalid",s);break;case"textarea":dp(s,y),w=ec(s,y),Le("invalid",s);break;default:w=y}mp(d,w),V=w;for(S in V)if(V.hasOwnProperty(S)){var H=V[S];S==="style"?bh(s,H):S==="dangerouslySetInnerHTML"?(H=H?H.__html:void 0,H!=null&&pp(s,H)):S==="children"?typeof H=="string"?(d!=="textarea"||H!=="")&&sc(s,H):typeof H=="number"&&sc(s,""+H):S!=="suppressContentEditableWarning"&&S!=="suppressHydrationWarning"&&S!=="autoFocus"&&(i.hasOwnProperty(S)?H!=null&&S==="onScroll"&&Le("scroll",s):H!=null&&L(s,S,H,D))}switch(d){case"input":Ti(s),hp(s,y,!1);break;case"textarea":Ti(s),fp(s);break;case"option":y.value!=null&&s.setAttribute("value",""+Jt(y.value));break;case"select":s.multiple=!!y.multiple,S=y.value,S!=null?ho(s,!!y.multiple,S,!1):y.defaultValue!=null&&ho(s,!!y.multiple,y.defaultValue,!0);break;default:typeof w.onClick=="function"&&(s.onclick=yy)}switch(d){case"button":case"input":case"select":case"textarea":y=!!y.autoFocus;break t;case"img":y=!0;break t;default:y=!1}}y&&(a.flags|=4)}a.ref!==null&&(a.flags|=512,a.flags|=2097152)}return ti(a),null;case 6:if(s&&a.stateNode!=null)GC(s,a,s.memoizedProps,y);else{if(typeof y!="string"&&a.stateNode===null)throw Error(e(166));if(d=Dc(Bp.current),Dc(Mr.current),Ey(a)){if(y=a.stateNode,d=a.memoizedProps,y[Rr]=a,(S=y.nodeValue!==d)&&(s=Ki,s!==null))switch(s.tag){case 3:gy(y.nodeValue,d,(s.mode&1)!==0);break;case 5:s.memoizedProps.suppressHydrationWarning!==!0&&gy(y.nodeValue,d,(s.mode&1)!==0)}S&&(a.flags|=4)}else y=(d.nodeType===9?d:d.ownerDocument).createTextNode(y),y[Rr]=a,a.stateNode=y}return ti(a),null;case 13:if(Ie(ze),y=a.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(je&&Yi!==null&&(a.mode&1)!==0&&(a.flags&128)===0)YE(),Zh(),a.flags|=98560,S=!1;else if(S=Ey(a),y!==null&&y.dehydrated!==null){if(s===null){if(!S)throw Error(e(318));if(S=a.memoizedState,S=S!==null?S.dehydrated:null,!S)throw Error(e(317));S[Rr]=a}else Zh(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;ti(a),S=!1}else er!==null&&(Mb(er),er=null),S=!0;if(!S)return a.flags&65536?a:null}return(a.flags&128)!==0?(a.lanes=d,a):(y=y!==null,y!==(s!==null&&s.memoizedState!==null)&&y&&(a.child.flags|=8192,(a.mode&1)!==0&&(s===null||(ze.current&1)!==0?vn===0&&(vn=3):Lb())),a.updateQueue!==null&&(a.flags|=4),ti(a),null);case 4:return nd(),xb(s,a),s===null&&Dp(a.stateNode.containerInfo),ti(a),null;case 10:return Kx(a.type._context),ti(a),null;case 17:return Ni(a.type)&&wy(),ti(a),null;case 19:if(Ie(ze),S=a.memoizedState,S===null)return ti(a),null;if(y=(a.flags&128)!==0,D=S.rendering,D===null)if(y)$p(S,!1);else{if(vn!==0||s!==null&&(s.flags&128)!==0)for(s=a.child;s!==null;){if(D=Ry(s),D!==null){for(a.flags|=128,$p(S,!1),y=D.updateQueue,y!==null&&(a.updateQueue=y,a.flags|=4),a.subtreeFlags=0,y=d,d=a.child;d!==null;)S=d,s=y,S.flags&=14680066,D=S.alternate,D===null?(S.childLanes=0,S.lanes=s,S.child=null,S.subtreeFlags=0,S.memoizedProps=null,S.memoizedState=null,S.updateQueue=null,S.dependencies=null,S.stateNode=null):(S.childLanes=D.childLanes,S.lanes=D.lanes,S.child=D.child,S.subtreeFlags=0,S.deletions=null,S.memoizedProps=D.memoizedProps,S.memoizedState=D.memoizedState,S.updateQueue=D.updateQueue,S.type=D.type,s=D.dependencies,S.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),d=d.sibling;return Pe(ze,ze.current&1|2),a.child}s=s.sibling}S.tail!==null&&Ne()>od&&(a.flags|=128,y=!0,$p(S,!1),a.lanes=4194304)}else{if(!y)if(s=Ry(D),s!==null){if(a.flags|=128,y=!0,d=s.updateQueue,d!==null&&(a.updateQueue=d,a.flags|=4),$p(S,!0),S.tail===null&&S.tailMode==="hidden"&&!D.alternate&&!je)return ti(a),null}else 2*Ne()-S.renderingStartTime>od&&d!==1073741824&&(a.flags|=128,y=!0,$p(S,!1),a.lanes=4194304);S.isBackwards?(D.sibling=a.child,a.child=D):(d=S.last,d!==null?d.sibling=D:a.child=D,S.last=D)}return S.tail!==null?(a=S.tail,S.rendering=a,S.tail=a.sibling,S.renderingStartTime=Ne(),a.sibling=null,d=ze.current,Pe(ze,y?d&1|2:d&1),a):(ti(a),null);case 22:case 23:return Nb(),y=a.memoizedState!==null,s!==null&&s.memoizedState!==null!==y&&(a.flags|=8192),y&&(a.mode&1)!==0?(qi&1073741824)!==0&&(ti(a),a.subtreeFlags&6&&(a.flags|=8192)):ti(a),null;case 24:return null;case 25:return null}throw Error(e(156,a.tag))}function yD(s,a){switch(zx(a),a.tag){case 1:return Ni(a.type)&&wy(),s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 3:return nd(),Ie(Di),Ie(Zn),eb(),s=a.flags,(s&65536)!==0&&(s&128)===0?(a.flags=s&-65537|128,a):null;case 5:return Jx(a),null;case 13:if(Ie(ze),s=a.memoizedState,s!==null&&s.dehydrated!==null){if(a.alternate===null)throw Error(e(340));Zh()}return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 19:return Ie(ze),null;case 4:return nd(),null;case 10:return Kx(a.type._context),null;case 22:case 23:return Nb(),null;case 24:return null;default:return null}}var By=!1,ei=!1,vD=typeof WeakSet=="function"?WeakSet:Set,Et=null;function sd(s,a){var d=s.ref;if(d!==null)if(typeof d=="function")try{d(null)}catch(y){Ye(s,a,y)}else d.current=null}function bb(s,a,d){try{d()}catch(y){Ye(s,a,y)}}var XC=!1;function wD(s,a){if(Nx=Fa,s=CE(),Cx(s)){if("selectionStart"in s)var d={start:s.selectionStart,end:s.selectionEnd};else t:{d=(d=s.ownerDocument)&&d.defaultView||window;var y=d.getSelection&&d.getSelection();if(y&&y.rangeCount!==0){d=y.anchorNode;var w=y.anchorOffset,S=y.focusNode;y=y.focusOffset;try{d.nodeType,S.nodeType}catch{d=null;break t}var D=0,V=-1,H=-1,J=0,ot=0,ut=s,rt=null;e:for(;;){for(var wt;ut!==d||w!==0&&ut.nodeType!==3||(V=D+w),ut!==S||y!==0&&ut.nodeType!==3||(H=D+y),ut.nodeType===3&&(D+=ut.nodeValue.length),(wt=ut.firstChild)!==null;)rt=ut,ut=wt;for(;;){if(ut===s)break e;if(rt===d&&++J===w&&(V=D),rt===S&&++ot===y&&(H=D),(wt=ut.nextSibling)!==null)break;ut=rt,rt=ut.parentNode}ut=wt}d=V===-1||H===-1?null:{start:V,end:H}}else d=null}d=d||{start:0,end:0}}else d=null;for(Lx={focusedElem:s,selectionRange:d},Fa=!1,Et=a;Et!==null;)if(a=Et,s=a.child,(a.subtreeFlags&1028)!==0&&s!==null)s.return=a,Et=s;else for(;Et!==null;){a=Et;try{var kt=a.alternate;if((a.flags&1024)!==0)switch(a.tag){case 0:case 11:case 15:break;case 1:if(kt!==null){var Tt=kt.memoizedProps,rn=kt.memoizedState,q=a.stateNode,X=q.getSnapshotBeforeUpdate(a.elementType===a.type?Tt:nr(a.type,Tt),rn);q.__reactInternalSnapshotBeforeUpdate=X}break;case 3:var Q=a.stateNode.containerInfo;Q.nodeType===1?Q.textContent="":Q.nodeType===9&&Q.documentElement&&Q.removeChild(Q.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(e(163))}}catch(dt){Ye(a,a.return,dt)}if(s=a.sibling,s!==null){s.return=a.return,Et=s;break}Et=a.return}return kt=XC,XC=!1,kt}function Wp(s,a,d){var y=a.updateQueue;if(y=y!==null?y.lastEffect:null,y!==null){var w=y=y.next;do{if((w.tag&s)===s){var S=w.destroy;w.destroy=void 0,S!==void 0&&bb(a,d,S)}w=w.next}while(w!==y)}}function Uy(s,a){if(a=a.updateQueue,a=a!==null?a.lastEffect:null,a!==null){var d=a=a.next;do{if((d.tag&s)===s){var y=d.create;d.destroy=y()}d=d.next}while(d!==a)}}function Ab(s){var a=s.ref;if(a!==null){var d=s.stateNode;switch(s.tag){case 5:s=d;break;default:s=d}typeof a=="function"?a(s):a.current=s}}function KC(s){var a=s.alternate;a!==null&&(s.alternate=null,KC(a)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(a=s.stateNode,a!==null&&(delete a[Rr],delete a[Lp],delete a[jx],delete a[eD],delete a[nD])),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}function YC(s){return s.tag===5||s.tag===3||s.tag===4}function qC(s){t:for(;;){for(;s.sibling===null;){if(s.return===null||YC(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue t;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Sb(s,a,d){var y=s.tag;if(y===5||y===6)s=s.stateNode,a?d.nodeType===8?d.parentNode.insertBefore(s,a):d.insertBefore(s,a):(d.nodeType===8?(a=d.parentNode,a.insertBefore(s,d)):(a=d,a.appendChild(s)),d=d._reactRootContainer,d!=null||a.onclick!==null||(a.onclick=yy));else if(y!==4&&(s=s.child,s!==null))for(Sb(s,a,d),s=s.sibling;s!==null;)Sb(s,a,d),s=s.sibling}function Eb(s,a,d){var y=s.tag;if(y===5||y===6)s=s.stateNode,a?d.insertBefore(s,a):d.appendChild(s);else if(y!==4&&(s=s.child,s!==null))for(Eb(s,a,d),s=s.sibling;s!==null;)Eb(s,a,d),s=s.sibling}var On=null,ir=!1;function Ga(s,a,d){for(d=d.child;d!==null;)QC(s,a,d),d=d.sibling}function QC(s,a,d){if(fi&&typeof fi.onCommitFiberUnmount=="function")try{fi.onCommitFiberUnmount(di,d)}catch{}switch(d.tag){case 5:ei||sd(d,a);case 6:var y=On,w=ir;On=null,Ga(s,a,d),On=y,ir=w,On!==null&&(ir?(s=On,d=d.stateNode,s.nodeType===8?s.parentNode.removeChild(d):s.removeChild(d)):On.removeChild(d.stateNode));break;case 18:On!==null&&(ir?(s=On,d=d.stateNode,s.nodeType===8?Ox(s.parentNode,d):s.nodeType===1&&Ox(s,d),Ia(s)):Ox(On,d.stateNode));break;case 4:y=On,w=ir,On=d.stateNode.containerInfo,ir=!0,Ga(s,a,d),On=y,ir=w;break;case 0:case 11:case 14:case 15:if(!ei&&(y=d.updateQueue,y!==null&&(y=y.lastEffect,y!==null))){w=y=y.next;do{var S=w,D=S.destroy;S=S.tag,D!==void 0&&((S&2)!==0||(S&4)!==0)&&bb(d,a,D),w=w.next}while(w!==y)}Ga(s,a,d);break;case 1:if(!ei&&(sd(d,a),y=d.stateNode,typeof y.componentWillUnmount=="function"))try{y.props=d.memoizedProps,y.state=d.memoizedState,y.componentWillUnmount()}catch(V){Ye(d,a,V)}Ga(s,a,d);break;case 21:Ga(s,a,d);break;case 22:d.mode&1?(ei=(y=ei)||d.memoizedState!==null,Ga(s,a,d),ei=y):Ga(s,a,d);break;default:Ga(s,a,d)}}function ZC(s){var a=s.updateQueue;if(a!==null){s.updateQueue=null;var d=s.stateNode;d===null&&(d=s.stateNode=new vD),a.forEach(function(y){var w=_D.bind(null,s,y);d.has(y)||(d.add(y),y.then(w,w))})}}function sr(s,a){var d=a.deletions;if(d!==null)for(var y=0;y<d.length;y++){var w=d[y];try{var S=s,D=a,V=D;t:for(;V!==null;){switch(V.tag){case 5:On=V.stateNode,ir=!1;break t;case 3:On=V.stateNode.containerInfo,ir=!0;break t;case 4:On=V.stateNode.containerInfo,ir=!0;break t}V=V.return}if(On===null)throw Error(e(160));QC(S,D,w),On=null,ir=!1;var H=w.alternate;H!==null&&(H.return=null),w.return=null}catch(J){Ye(w,a,J)}}if(a.subtreeFlags&12854)for(a=a.child;a!==null;)JC(a,s),a=a.sibling}function JC(s,a){var d=s.alternate,y=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:if(sr(a,s),Nr(s),y&4){try{Wp(3,s,s.return),Uy(3,s)}catch(Tt){Ye(s,s.return,Tt)}try{Wp(5,s,s.return)}catch(Tt){Ye(s,s.return,Tt)}}break;case 1:sr(a,s),Nr(s),y&512&&d!==null&&sd(d,d.return);break;case 5:if(sr(a,s),Nr(s),y&512&&d!==null&&sd(d,d.return),s.flags&32){var w=s.stateNode;try{sc(w,"")}catch(Tt){Ye(s,s.return,Tt)}}if(y&4&&(w=s.stateNode,w!=null)){var S=s.memoizedProps,D=d!==null?d.memoizedProps:S,V=s.type,H=s.updateQueue;if(s.updateQueue=null,H!==null)try{V==="input"&&S.type==="radio"&&S.name!=null&&X0(w,S),Ah(V,D);var J=Ah(V,S);for(D=0;D<H.length;D+=2){var ot=H[D],ut=H[D+1];ot==="style"?bh(w,ut):ot==="dangerouslySetInnerHTML"?pp(w,ut):ot==="children"?sc(w,ut):L(w,ot,ut,J)}switch(V){case"input":vh(w,S);break;case"textarea":Sr(w,S);break;case"select":var rt=w._wrapperState.wasMultiple;w._wrapperState.wasMultiple=!!S.multiple;var wt=S.value;wt!=null?ho(w,!!S.multiple,wt,!1):rt!==!!S.multiple&&(S.defaultValue!=null?ho(w,!!S.multiple,S.defaultValue,!0):ho(w,!!S.multiple,S.multiple?[]:"",!1))}w[Lp]=S}catch(Tt){Ye(s,s.return,Tt)}}break;case 6:if(sr(a,s),Nr(s),y&4){if(s.stateNode===null)throw Error(e(162));w=s.stateNode,S=s.memoizedProps;try{w.nodeValue=S}catch(Tt){Ye(s,s.return,Tt)}}break;case 3:if(sr(a,s),Nr(s),y&4&&d!==null&&d.memoizedState.isDehydrated)try{Ia(a.containerInfo)}catch(Tt){Ye(s,s.return,Tt)}break;case 4:sr(a,s),Nr(s);break;case 13:sr(a,s),Nr(s),w=s.child,w.flags&8192&&(S=w.memoizedState!==null,w.stateNode.isHidden=S,!S||w.alternate!==null&&w.alternate.memoizedState!==null||(Tb=Ne())),y&4&&ZC(s);break;case 22:if(ot=d!==null&&d.memoizedState!==null,s.mode&1?(ei=(J=ei)||ot,sr(a,s),ei=J):sr(a,s),Nr(s),y&8192){if(J=s.memoizedState!==null,(s.stateNode.isHidden=J)&&!ot&&(s.mode&1)!==0)for(Et=s,ot=s.child;ot!==null;){for(ut=Et=ot;Et!==null;){switch(rt=Et,wt=rt.child,rt.tag){case 0:case 11:case 14:case 15:Wp(4,rt,rt.return);break;case 1:sd(rt,rt.return);var kt=rt.stateNode;if(typeof kt.componentWillUnmount=="function"){y=rt,d=rt.return;try{a=y,kt.props=a.memoizedProps,kt.state=a.memoizedState,kt.componentWillUnmount()}catch(Tt){Ye(y,d,Tt)}}break;case 5:sd(rt,rt.return);break;case 22:if(rt.memoizedState!==null){nk(ut);continue}}wt!==null?(wt.return=rt,Et=wt):nk(ut)}ot=ot.sibling}t:for(ot=null,ut=s;;){if(ut.tag===5){if(ot===null){ot=ut;try{w=ut.stateNode,J?(S=w.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none"):(V=ut.stateNode,H=ut.memoizedProps.style,D=H!=null&&H.hasOwnProperty("display")?H.display:null,V.style.display=ka("display",D))}catch(Tt){Ye(s,s.return,Tt)}}}else if(ut.tag===6){if(ot===null)try{ut.stateNode.nodeValue=J?"":ut.memoizedProps}catch(Tt){Ye(s,s.return,Tt)}}else if((ut.tag!==22&&ut.tag!==23||ut.memoizedState===null||ut===s)&&ut.child!==null){ut.child.return=ut,ut=ut.child;continue}if(ut===s)break t;for(;ut.sibling===null;){if(ut.return===null||ut.return===s)break t;ot===ut&&(ot=null),ut=ut.return}ot===ut&&(ot=null),ut.sibling.return=ut.return,ut=ut.sibling}}break;case 19:sr(a,s),Nr(s),y&4&&ZC(s);break;case 21:break;default:sr(a,s),Nr(s)}}function Nr(s){var a=s.flags;if(a&2){try{t:{for(var d=s.return;d!==null;){if(YC(d)){var y=d;break t}d=d.return}throw Error(e(160))}switch(y.tag){case 5:var w=y.stateNode;y.flags&32&&(sc(w,""),y.flags&=-33);var S=qC(s);Eb(s,S,w);break;case 3:case 4:var D=y.stateNode.containerInfo,V=qC(s);Sb(s,V,D);break;default:throw Error(e(161))}}catch(H){Ye(s,s.return,H)}s.flags&=-3}a&4096&&(s.flags&=-4097)}function xD(s,a,d){Et=s,tk(s)}function tk(s,a,d){for(var y=(s.mode&1)!==0;Et!==null;){var w=Et,S=w.child;if(w.tag===22&&y){var D=w.memoizedState!==null||By;if(!D){var V=w.alternate,H=V!==null&&V.memoizedState!==null||ei;V=By;var J=ei;if(By=D,(ei=H)&&!J)for(Et=w;Et!==null;)D=Et,H=D.child,D.tag===22&&D.memoizedState!==null?ik(w):H!==null?(H.return=D,Et=H):ik(w);for(;S!==null;)Et=S,tk(S),S=S.sibling;Et=w,By=V,ei=J}ek(s)}else(w.subtreeFlags&8772)!==0&&S!==null?(S.return=w,Et=S):ek(s)}}function ek(s){for(;Et!==null;){var a=Et;if((a.flags&8772)!==0){var d=a.alternate;try{if((a.flags&8772)!==0)switch(a.tag){case 0:case 11:case 15:ei||Uy(5,a);break;case 1:var y=a.stateNode;if(a.flags&4&&!ei)if(d===null)y.componentDidMount();else{var w=a.elementType===a.type?d.memoizedProps:nr(a.type,d.memoizedProps);y.componentDidUpdate(w,d.memoizedState,y.__reactInternalSnapshotBeforeUpdate)}var S=a.updateQueue;S!==null&&nC(a,S,y);break;case 3:var D=a.updateQueue;if(D!==null){if(d=null,a.child!==null)switch(a.child.tag){case 5:d=a.child.stateNode;break;case 1:d=a.child.stateNode}nC(a,D,d)}break;case 5:var V=a.stateNode;if(d===null&&a.flags&4){d=V;var H=a.memoizedProps;switch(a.type){case"button":case"input":case"select":case"textarea":H.autoFocus&&d.focus();break;case"img":H.src&&(d.src=H.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(a.memoizedState===null){var J=a.alternate;if(J!==null){var ot=J.memoizedState;if(ot!==null){var ut=ot.dehydrated;ut!==null&&Ia(ut)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(e(163))}ei||a.flags&512&&Ab(a)}catch(rt){Ye(a,a.return,rt)}}if(a===s){Et=null;break}if(d=a.sibling,d!==null){d.return=a.return,Et=d;break}Et=a.return}}function nk(s){for(;Et!==null;){var a=Et;if(a===s){Et=null;break}var d=a.sibling;if(d!==null){d.return=a.return,Et=d;break}Et=a.return}}function ik(s){for(;Et!==null;){var a=Et;try{switch(a.tag){case 0:case 11:case 15:var d=a.return;try{Uy(4,a)}catch(H){Ye(a,d,H)}break;case 1:var y=a.stateNode;if(typeof y.componentDidMount=="function"){var w=a.return;try{y.componentDidMount()}catch(H){Ye(a,w,H)}}var S=a.return;try{Ab(a)}catch(H){Ye(a,S,H)}break;case 5:var D=a.return;try{Ab(a)}catch(H){Ye(a,D,H)}}}catch(H){Ye(a,a.return,H)}if(a===s){Et=null;break}var V=a.sibling;if(V!==null){V.return=a.return,Et=V;break}Et=a.return}}var bD=Math.ceil,Vy=F.ReactCurrentDispatcher,Cb=F.ReactCurrentOwner,Ps=F.ReactCurrentBatchConfig,oe=0,Tn=null,un=null,jn=0,qi=0,rd=Va(0),vn=0,Gp=null,Lc=0,zy=0,kb=0,Xp=null,Ii=null,Tb=0,od=1/0,ko=null,Hy=!1,_b=null,Xa=null,$y=!1,Ka=null,Wy=0,Kp=0,Pb=null,Gy=-1,Xy=0;function gi(){return(oe&6)!==0?Ne():Gy!==-1?Gy:Gy=Ne()}function Ya(s){return(s.mode&1)===0?1:(oe&2)!==0&&jn!==0?jn&-jn:sD.transition!==null?(Xy===0&&(Xy=yc()),Xy):(s=ce,s!==0||(s=window.event,s=s===void 0?16:go(s.type)),s)}function rr(s,a,d,y){if(50<Kp)throw Kp=0,Pb=null,Error(e(185));Ra(s,d,y),((oe&2)===0||s!==Tn)&&(s===Tn&&((oe&2)===0&&(zy|=d),vn===4&&qa(s,jn)),Fi(s,y),d===1&&oe===0&&(a.mode&1)===0&&(od=Ne()+500,by&&Ha()))}function Fi(s,a){var d=s.callbackNode;Z0(s,a);var y=gc(s,s===Tn?jn:0);if(y===0)d!==null&&Pi(d),s.callbackNode=null,s.callbackPriority=0;else if(a=y&-y,s.callbackPriority!==a){if(d!=null&&Pi(d),a===1)s.tag===0?iD(rk.bind(null,s)):$E(rk.bind(null,s)),JM(function(){(oe&6)===0&&Ha()}),d=null;else{switch(Sp(y)){case 1:d=_h;break;case 4:d=dc;break;case 16:d=hi;break;case 536870912:d=fc;break;default:d=hi}d=fk(d,sk.bind(null,s))}s.callbackPriority=a,s.callbackNode=d}}function sk(s,a){if(Gy=-1,Xy=0,(oe&6)!==0)throw Error(e(327));var d=s.callbackNode;if(ad()&&s.callbackNode!==d)return null;var y=gc(s,s===Tn?jn:0);if(y===0)return null;if((y&30)!==0||(y&s.expiredLanes)!==0||a)a=Ky(s,y);else{a=y;var w=oe;oe|=2;var S=ak();(Tn!==s||jn!==a)&&(ko=null,od=Ne()+500,Fc(s,a));do try{ED();break}catch(V){ok(s,V)}while(!0);Xx(),Vy.current=S,oe=w,un!==null?a=0:(Tn=null,jn=0,a=vn)}if(a!==0){if(a===2&&(w=Ph(s),w!==0&&(y=w,a=Rb(s,w))),a===1)throw d=Gp,Fc(s,0),qa(s,y),Fi(s,Ne()),d;if(a===6)qa(s,y);else{if(w=s.current.alternate,(y&30)===0&&!AD(w)&&(a=Ky(s,y),a===2&&(S=Ph(s),S!==0&&(y=S,a=Rb(s,S))),a===1))throw d=Gp,Fc(s,0),qa(s,y),Fi(s,Ne()),d;switch(s.finishedWork=w,s.finishedLanes=y,a){case 0:case 1:throw Error(e(345));case 2:Oc(s,Ii,ko);break;case 3:if(qa(s,y),(y&130023424)===y&&(a=Tb+500-Ne(),10<a)){if(gc(s,0)!==0)break;if(w=s.suspendedLanes,(w&y)!==y){gi(),s.pingedLanes|=s.suspendedLanes&w;break}s.timeoutHandle=Fx(Oc.bind(null,s,Ii,ko),a);break}Oc(s,Ii,ko);break;case 4:if(qa(s,y),(y&4194240)===y)break;for(a=s.eventTimes,w=-1;0<y;){var D=31-Ri(y);S=1<<D,D=a[D],D>w&&(w=D),y&=~S}if(y=w,y=Ne()-y,y=(120>y?120:480>y?480:1080>y?1080:1920>y?1920:3e3>y?3e3:4320>y?4320:1960*bD(y/1960))-y,10<y){s.timeoutHandle=Fx(Oc.bind(null,s,Ii,ko),y);break}Oc(s,Ii,ko);break;case 5:Oc(s,Ii,ko);break;default:throw Error(e(329))}}}return Fi(s,Ne()),s.callbackNode===d?sk.bind(null,s):null}function Rb(s,a){var d=Xp;return s.current.memoizedState.isDehydrated&&(Fc(s,a).flags|=256),s=Ky(s,a),s!==2&&(a=Ii,Ii=d,a!==null&&Mb(a)),s}function Mb(s){Ii===null?Ii=s:Ii.push.apply(Ii,s)}function AD(s){for(var a=s;;){if(a.flags&16384){var d=a.updateQueue;if(d!==null&&(d=d.stores,d!==null))for(var y=0;y<d.length;y++){var w=d[y],S=w.getSnapshot;w=w.value;try{if(!tr(S(),w))return!1}catch{return!1}}}if(d=a.child,a.subtreeFlags&16384&&d!==null)d.return=a,a=d;else{if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function qa(s,a){for(a&=~kb,a&=~zy,s.suspendedLanes|=a,s.pingedLanes&=~a,s=s.expirationTimes;0<a;){var d=31-Ri(a),y=1<<d;s[d]=-1,a&=~y}}function rk(s){if((oe&6)!==0)throw Error(e(327));ad();var a=gc(s,0);if((a&1)===0)return Fi(s,Ne()),null;var d=Ky(s,a);if(s.tag!==0&&d===2){var y=Ph(s);y!==0&&(a=y,d=Rb(s,y))}if(d===1)throw d=Gp,Fc(s,0),qa(s,a),Fi(s,Ne()),d;if(d===6)throw Error(e(345));return s.finishedWork=s.current.alternate,s.finishedLanes=a,Oc(s,Ii,ko),Fi(s,Ne()),null}function Db(s,a){var d=oe;oe|=1;try{return s(a)}finally{oe=d,oe===0&&(od=Ne()+500,by&&Ha())}}function Ic(s){Ka!==null&&Ka.tag===0&&(oe&6)===0&&ad();var a=oe;oe|=1;var d=Ps.transition,y=ce;try{if(Ps.transition=null,ce=1,s)return s()}finally{ce=y,Ps.transition=d,oe=a,(oe&6)===0&&Ha()}}function Nb(){qi=rd.current,Ie(rd)}function Fc(s,a){s.finishedWork=null,s.finishedLanes=0;var d=s.timeoutHandle;if(d!==-1&&(s.timeoutHandle=-1,ZM(d)),un!==null)for(d=un.return;d!==null;){var y=d;switch(zx(y),y.tag){case 1:y=y.type.childContextTypes,y!=null&&wy();break;case 3:nd(),Ie(Di),Ie(Zn),eb();break;case 5:Jx(y);break;case 4:nd();break;case 13:Ie(ze);break;case 19:Ie(ze);break;case 10:Kx(y.type._context);break;case 22:case 23:Nb()}d=d.return}if(Tn=s,un=s=Qa(s.current,null),jn=qi=a,vn=0,Gp=null,kb=zy=Lc=0,Ii=Xp=null,Mc!==null){for(a=0;a<Mc.length;a++)if(d=Mc[a],y=d.interleaved,y!==null){d.interleaved=null;var w=y.next,S=d.pending;if(S!==null){var D=S.next;S.next=w,y.next=D}d.pending=y}Mc=null}return s}function ok(s,a){do{var d=un;try{if(Xx(),My.current=Iy,Dy){for(var y=He.memoizedState;y!==null;){var w=y.queue;w!==null&&(w.pending=null),y=y.next}Dy=!1}if(Nc=0,kn=yn=He=null,Up=!1,Vp=0,Cb.current=null,d===null||d.return===null){vn=1,Gp=a,un=null;break}t:{var S=s,D=d.return,V=d,H=a;if(a=jn,V.flags|=32768,H!==null&&typeof H=="object"&&typeof H.then=="function"){var J=H,ot=V,ut=ot.tag;if((ot.mode&1)===0&&(ut===0||ut===11||ut===15)){var rt=ot.alternate;rt?(ot.updateQueue=rt.updateQueue,ot.memoizedState=rt.memoizedState,ot.lanes=rt.lanes):(ot.updateQueue=null,ot.memoizedState=null)}var wt=MC(D);if(wt!==null){wt.flags&=-257,DC(wt,D,V,S,a),wt.mode&1&&RC(S,J,a),a=wt,H=J;var kt=a.updateQueue;if(kt===null){var Tt=new Set;Tt.add(H),a.updateQueue=Tt}else kt.add(H);break t}else{if((a&1)===0){RC(S,J,a),Lb();break t}H=Error(e(426))}}else if(je&&V.mode&1){var rn=MC(D);if(rn!==null){(rn.flags&65536)===0&&(rn.flags|=256),DC(rn,D,V,S,a),Wx(id(H,V));break t}}S=H=id(H,V),vn!==4&&(vn=2),Xp===null?Xp=[S]:Xp.push(S),S=D;do{switch(S.tag){case 3:S.flags|=65536,a&=-a,S.lanes|=a;var q=_C(S,H,a);eC(S,q);break t;case 1:V=H;var X=S.type,Q=S.stateNode;if((S.flags&128)===0&&(typeof X.getDerivedStateFromError=="function"||Q!==null&&typeof Q.componentDidCatch=="function"&&(Xa===null||!Xa.has(Q)))){S.flags|=65536,a&=-a,S.lanes|=a;var dt=PC(S,V,a);eC(S,dt);break t}}S=S.return}while(S!==null)}ck(d)}catch(Pt){a=Pt,un===d&&d!==null&&(un=d=d.return);continue}break}while(!0)}function ak(){var s=Vy.current;return Vy.current=Iy,s===null?Iy:s}function Lb(){(vn===0||vn===3||vn===2)&&(vn=4),Tn===null||(Lc&268435455)===0&&(zy&268435455)===0||qa(Tn,jn)}function Ky(s,a){var d=oe;oe|=2;var y=ak();(Tn!==s||jn!==a)&&(ko=null,Fc(s,a));do try{SD();break}catch(w){ok(s,w)}while(!0);if(Xx(),oe=d,Vy.current=y,un!==null)throw Error(e(261));return Tn=null,jn=0,vn}function SD(){for(;un!==null;)lk(un)}function ED(){for(;un!==null&&!Ss();)lk(un)}function lk(s){var a=dk(s.alternate,s,qi);s.memoizedProps=s.pendingProps,a===null?ck(s):un=a,Cb.current=null}function ck(s){var a=s;do{var d=a.alternate;if(s=a.return,(a.flags&32768)===0){if(d=gD(d,a,qi),d!==null){un=d;return}}else{if(d=yD(d,a),d!==null){d.flags&=32767,un=d;return}if(s!==null)s.flags|=32768,s.subtreeFlags=0,s.deletions=null;else{vn=6,un=null;return}}if(a=a.sibling,a!==null){un=a;return}un=a=s}while(a!==null);vn===0&&(vn=5)}function Oc(s,a,d){var y=ce,w=Ps.transition;try{Ps.transition=null,ce=1,CD(s,a,d,y)}finally{Ps.transition=w,ce=y}return null}function CD(s,a,d,y){do ad();while(Ka!==null);if((oe&6)!==0)throw Error(e(327));d=s.finishedWork;var w=s.finishedLanes;if(d===null)return null;if(s.finishedWork=null,s.finishedLanes=0,d===s.current)throw Error(e(177));s.callbackNode=null,s.callbackPriority=0;var S=d.lanes|d.childLanes;if(dx(s,S),s===Tn&&(un=Tn=null,jn=0),(d.subtreeFlags&2064)===0&&(d.flags&2064)===0||$y||($y=!0,fk(hi,function(){return ad(),null})),S=(d.flags&15990)!==0,(d.subtreeFlags&15990)!==0||S){S=Ps.transition,Ps.transition=null;var D=ce;ce=1;var V=oe;oe|=4,Cb.current=null,wD(s,d),JC(d,s),WM(Lx),Fa=!!Nx,Lx=Nx=null,s.current=d,xD(d),hc(),oe=V,ce=D,Ps.transition=S}else s.current=d;if($y&&($y=!1,Ka=s,Wy=w),S=s.pendingLanes,S===0&&(Xa=null),cx(d.stateNode),Fi(s,Ne()),a!==null)for(y=s.onRecoverableError,d=0;d<a.length;d++)w=a[d],y(w.value,{componentStack:w.stack,digest:w.digest});if(Hy)throw Hy=!1,s=_b,_b=null,s;return(Wy&1)!==0&&s.tag!==0&&ad(),S=s.pendingLanes,(S&1)!==0?s===Pb?Kp++:(Kp=0,Pb=s):Kp=0,Ha(),null}function ad(){if(Ka!==null){var s=Sp(Wy),a=Ps.transition,d=ce;try{if(Ps.transition=null,ce=16>s?16:s,Ka===null)var y=!1;else{if(s=Ka,Ka=null,Wy=0,(oe&6)!==0)throw Error(e(331));var w=oe;for(oe|=4,Et=s.current;Et!==null;){var S=Et,D=S.child;if((Et.flags&16)!==0){var V=S.deletions;if(V!==null){for(var H=0;H<V.length;H++){var J=V[H];for(Et=J;Et!==null;){var ot=Et;switch(ot.tag){case 0:case 11:case 15:Wp(8,ot,S)}var ut=ot.child;if(ut!==null)ut.return=ot,Et=ut;else for(;Et!==null;){ot=Et;var rt=ot.sibling,wt=ot.return;if(KC(ot),ot===J){Et=null;break}if(rt!==null){rt.return=wt,Et=rt;break}Et=wt}}}var kt=S.alternate;if(kt!==null){var Tt=kt.child;if(Tt!==null){kt.child=null;do{var rn=Tt.sibling;Tt.sibling=null,Tt=rn}while(Tt!==null)}}Et=S}}if((S.subtreeFlags&2064)!==0&&D!==null)D.return=S,Et=D;else t:for(;Et!==null;){if(S=Et,(S.flags&2048)!==0)switch(S.tag){case 0:case 11:case 15:Wp(9,S,S.return)}var q=S.sibling;if(q!==null){q.return=S.return,Et=q;break t}Et=S.return}}var X=s.current;for(Et=X;Et!==null;){D=Et;var Q=D.child;if((D.subtreeFlags&2064)!==0&&Q!==null)Q.return=D,Et=Q;else t:for(D=X;Et!==null;){if(V=Et,(V.flags&2048)!==0)try{switch(V.tag){case 0:case 11:case 15:Uy(9,V)}}catch(Pt){Ye(V,V.return,Pt)}if(V===D){Et=null;break t}var dt=V.sibling;if(dt!==null){dt.return=V.return,Et=dt;break t}Et=V.return}}if(oe=w,Ha(),fi&&typeof fi.onPostCommitFiberRoot=="function")try{fi.onPostCommitFiberRoot(di,s)}catch{}y=!0}return y}finally{ce=d,Ps.transition=a}}return!1}function uk(s,a,d){a=id(d,a),a=_C(s,a,1),s=Wa(s,a,1),a=gi(),s!==null&&(Ra(s,1,a),Fi(s,a))}function Ye(s,a,d){if(s.tag===3)uk(s,s,d);else for(;a!==null;){if(a.tag===3){uk(a,s,d);break}else if(a.tag===1){var y=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof y.componentDidCatch=="function"&&(Xa===null||!Xa.has(y))){s=id(d,s),s=PC(a,s,1),a=Wa(a,s,1),s=gi(),a!==null&&(Ra(a,1,s),Fi(a,s));break}}a=a.return}}function kD(s,a,d){var y=s.pingCache;y!==null&&y.delete(a),a=gi(),s.pingedLanes|=s.suspendedLanes&d,Tn===s&&(jn&d)===d&&(vn===4||vn===3&&(jn&130023424)===jn&&500>Ne()-Tb?Fc(s,0):kb|=d),Fi(s,a)}function hk(s,a){a===0&&((s.mode&1)===0?a=1:(a=mc,mc<<=1,(mc&130023424)===0&&(mc=4194304)));var d=gi();s=So(s,a),s!==null&&(Ra(s,a,d),Fi(s,d))}function TD(s){var a=s.memoizedState,d=0;a!==null&&(d=a.retryLane),hk(s,d)}function _D(s,a){var d=0;switch(s.tag){case 13:var y=s.stateNode,w=s.memoizedState;w!==null&&(d=w.retryLane);break;case 19:y=s.stateNode;break;default:throw Error(e(314))}y!==null&&y.delete(a),hk(s,d)}var dk;dk=function(s,a,d){if(s!==null)if(s.memoizedProps!==a.pendingProps||Di.current)Li=!0;else{if((s.lanes&d)===0&&(a.flags&128)===0)return Li=!1,mD(s,a,d);Li=(s.flags&131072)!==0}else Li=!1,je&&(a.flags&1048576)!==0&&WE(a,Sy,a.index);switch(a.lanes=0,a.tag){case 2:var y=a.type;jy(s,a),s=a.pendingProps;var w=Yh(a,Zn.current);ed(a,d),w=sb(null,a,y,s,w,d);var S=rb();return a.flags|=1,typeof w=="object"&&w!==null&&typeof w.render=="function"&&w.$$typeof===void 0?(a.tag=1,a.memoizedState=null,a.updateQueue=null,Ni(y)?(S=!0,xy(a)):S=!1,a.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,Qx(a),w.updater=Fy,a.stateNode=w,w._reactInternals=a,hb(a,y,s,d),a=mb(null,a,y,!0,S,d)):(a.tag=0,je&&S&&Vx(a),mi(null,a,w,d),a=a.child),a;case 16:y=a.elementType;t:{switch(jy(s,a),s=a.pendingProps,w=y._init,y=w(y._payload),a.type=y,w=a.tag=RD(y),s=nr(y,s),w){case 0:a=pb(null,a,y,s,d);break t;case 1:a=jC(null,a,y,s,d);break t;case 11:a=NC(null,a,y,s,d);break t;case 14:a=LC(null,a,y,nr(y.type,s),d);break t}throw Error(e(306,y,""))}return a;case 0:return y=a.type,w=a.pendingProps,w=a.elementType===y?w:nr(y,w),pb(s,a,y,w,d);case 1:return y=a.type,w=a.pendingProps,w=a.elementType===y?w:nr(y,w),jC(s,a,y,w,d);case 3:t:{if(BC(a),s===null)throw Error(e(387));y=a.pendingProps,S=a.memoizedState,w=S.element,tC(s,a),Py(a,y,null,d);var D=a.memoizedState;if(y=D.element,S.isDehydrated)if(S={element:y,isDehydrated:!1,cache:D.cache,pendingSuspenseBoundaries:D.pendingSuspenseBoundaries,transitions:D.transitions},a.updateQueue.baseState=S,a.memoizedState=S,a.flags&256){w=id(Error(e(423)),a),a=UC(s,a,y,d,w);break t}else if(y!==w){w=id(Error(e(424)),a),a=UC(s,a,y,d,w);break t}else for(Yi=Ua(a.stateNode.containerInfo.firstChild),Ki=a,je=!0,er=null,d=ZE(a,null,y,d),a.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling;else{if(Zh(),y===w){a=Co(s,a,d);break t}mi(s,a,y,d)}a=a.child}return a;case 5:return iC(a),s===null&&$x(a),y=a.type,w=a.pendingProps,S=s!==null?s.memoizedProps:null,D=w.children,Ix(y,w)?D=null:S!==null&&Ix(y,S)&&(a.flags|=32),OC(s,a),mi(s,a,D,d),a.child;case 6:return s===null&&$x(a),null;case 13:return VC(s,a,d);case 4:return Zx(a,a.stateNode.containerInfo),y=a.pendingProps,s===null?a.child=Jh(a,null,y,d):mi(s,a,y,d),a.child;case 11:return y=a.type,w=a.pendingProps,w=a.elementType===y?w:nr(y,w),NC(s,a,y,w,d);case 7:return mi(s,a,a.pendingProps,d),a.child;case 8:return mi(s,a,a.pendingProps.children,d),a.child;case 12:return mi(s,a,a.pendingProps.children,d),a.child;case 10:t:{if(y=a.type._context,w=a.pendingProps,S=a.memoizedProps,D=w.value,Pe(ky,y._currentValue),y._currentValue=D,S!==null)if(tr(S.value,D)){if(S.children===w.children&&!Di.current){a=Co(s,a,d);break t}}else for(S=a.child,S!==null&&(S.return=a);S!==null;){var V=S.dependencies;if(V!==null){D=S.child;for(var H=V.firstContext;H!==null;){if(H.context===y){if(S.tag===1){H=Eo(-1,d&-d),H.tag=2;var J=S.updateQueue;if(J!==null){J=J.shared;var ot=J.pending;ot===null?H.next=H:(H.next=ot.next,ot.next=H),J.pending=H}}S.lanes|=d,H=S.alternate,H!==null&&(H.lanes|=d),Yx(S.return,d,a),V.lanes|=d;break}H=H.next}}else if(S.tag===10)D=S.type===a.type?null:S.child;else if(S.tag===18){if(D=S.return,D===null)throw Error(e(341));D.lanes|=d,V=D.alternate,V!==null&&(V.lanes|=d),Yx(D,d,a),D=S.sibling}else D=S.child;if(D!==null)D.return=S;else for(D=S;D!==null;){if(D===a){D=null;break}if(S=D.sibling,S!==null){S.return=D.return,D=S;break}D=D.return}S=D}mi(s,a,w.children,d),a=a.child}return a;case 9:return w=a.type,y=a.pendingProps.children,ed(a,d),w=Ts(w),y=y(w),a.flags|=1,mi(s,a,y,d),a.child;case 14:return y=a.type,w=nr(y,a.pendingProps),w=nr(y.type,w),LC(s,a,y,w,d);case 15:return IC(s,a,a.type,a.pendingProps,d);case 17:return y=a.type,w=a.pendingProps,w=a.elementType===y?w:nr(y,w),jy(s,a),a.tag=1,Ni(y)?(s=!0,xy(a)):s=!1,ed(a,d),kC(a,y,w),hb(a,y,w,d),mb(null,a,y,!0,s,d);case 19:return HC(s,a,d);case 22:return FC(s,a,d)}throw Error(e(156,a.tag))};function fk(s,a){return wp(s,a)}function PD(s,a,d,y){this.tag=s,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=y,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rs(s,a,d,y){return new PD(s,a,d,y)}function Ib(s){return s=s.prototype,!(!s||!s.isReactComponent)}function RD(s){if(typeof s=="function")return Ib(s)?1:0;if(s!=null){if(s=s.$$typeof,s===Mt)return 11;if(s===Qt)return 14}return 2}function Qa(s,a){var d=s.alternate;return d===null?(d=Rs(s.tag,a,s.key,s.mode),d.elementType=s.elementType,d.type=s.type,d.stateNode=s.stateNode,d.alternate=s,s.alternate=d):(d.pendingProps=a,d.type=s.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=s.flags&14680064,d.childLanes=s.childLanes,d.lanes=s.lanes,d.child=s.child,d.memoizedProps=s.memoizedProps,d.memoizedState=s.memoizedState,d.updateQueue=s.updateQueue,a=s.dependencies,d.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},d.sibling=s.sibling,d.index=s.index,d.ref=s.ref,d}function Yy(s,a,d,y,w,S){var D=2;if(y=s,typeof s=="function")Ib(s)&&(D=1);else if(typeof s=="string")D=5;else t:switch(s){case K:return jc(d.children,w,S,a);case Y:D=8,w|=8;break;case nt:return s=Rs(12,d,a,w|2),s.elementType=nt,s.lanes=S,s;case xt:return s=Rs(13,d,a,w),s.elementType=xt,s.lanes=S,s;case Ct:return s=Rs(19,d,a,w),s.elementType=Ct,s.lanes=S,s;case lt:return qy(d,w,S,a);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case st:D=10;break t;case it:D=9;break t;case Mt:D=11;break t;case Qt:D=14;break t;case ft:D=16,y=null;break t}throw Error(e(130,s==null?s:typeof s,""))}return a=Rs(D,d,a,w),a.elementType=s,a.type=y,a.lanes=S,a}function jc(s,a,d,y){return s=Rs(7,s,y,a),s.lanes=d,s}function qy(s,a,d,y){return s=Rs(22,s,y,a),s.elementType=lt,s.lanes=d,s.stateNode={isHidden:!1},s}function Fb(s,a,d){return s=Rs(6,s,null,a),s.lanes=d,s}function Ob(s,a,d){return a=Rs(4,s.children!==null?s.children:[],s.key,a),a.lanes=d,a.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},a}function MD(s,a,d,y,w){this.tag=a,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Rh(0),this.expirationTimes=Rh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Rh(0),this.identifierPrefix=y,this.onRecoverableError=w,this.mutableSourceEagerHydrationData=null}function jb(s,a,d,y,w,S,D,V,H){return s=new MD(s,a,d,V,H),a===1?(a=1,S===!0&&(a|=8)):a=0,S=Rs(3,null,null,a),s.current=S,S.stateNode=s,S.memoizedState={element:y,isDehydrated:d,cache:null,transitions:null,pendingSuspenseBoundaries:null},Qx(S),s}function DD(s,a,d){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:z,key:y==null?null:""+y,children:s,containerInfo:a,implementation:d}}function pk(s){if(!s)return za;s=s._reactInternals;t:{if(Zs(s)!==s||s.tag!==1)throw Error(e(170));var a=s;do{switch(a.tag){case 3:a=a.stateNode.context;break t;case 1:if(Ni(a.type)){a=a.stateNode.__reactInternalMemoizedMergedChildContext;break t}}a=a.return}while(a!==null);throw Error(e(171))}if(s.tag===1){var d=s.type;if(Ni(d))return zE(s,d,a)}return a}function mk(s,a,d,y,w,S,D,V,H){return s=jb(d,y,!0,s,w,S,D,V,H),s.context=pk(null),d=s.current,y=gi(),w=Ya(d),S=Eo(y,w),S.callback=a??null,Wa(d,S,w),s.current.lanes=w,Ra(s,w,y),Fi(s,y),s}function Qy(s,a,d,y){var w=a.current,S=gi(),D=Ya(w);return d=pk(d),a.context===null?a.context=d:a.pendingContext=d,a=Eo(S,D),a.payload={element:s},y=y===void 0?null:y,y!==null&&(a.callback=y),s=Wa(w,a,D),s!==null&&(rr(s,w,D,S),_y(s,w,D)),D}function Zy(s){if(s=s.current,!s.child)return null;switch(s.child.tag){case 5:return s.child.stateNode;default:return s.child.stateNode}}function gk(s,a){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var d=s.retryLane;s.retryLane=d!==0&&d<a?d:a}}function Bb(s,a){gk(s,a),(s=s.alternate)&&gk(s,a)}function ND(){return null}var yk=typeof reportError=="function"?reportError:function(s){console.error(s)};function Ub(s){this._internalRoot=s}Jy.prototype.render=Ub.prototype.render=function(s){var a=this._internalRoot;if(a===null)throw Error(e(409));Qy(s,a,null,null)},Jy.prototype.unmount=Ub.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var a=s.containerInfo;Ic(function(){Qy(null,s,null,null)}),a[wo]=null}};function Jy(s){this._internalRoot=s}Jy.prototype.unstable_scheduleHydration=function(s){if(s){var a=Ma();s={blockedOn:null,target:s,priority:a};for(var d=0;d<Tr.length&&a!==0&&a<Tr[d].priority;d++);Tr.splice(d,0,s),d===0&&Na(s)}};function Vb(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function tv(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11&&(s.nodeType!==8||s.nodeValue!==" react-mount-point-unstable "))}function vk(){}function LD(s,a,d,y,w){if(w){if(typeof y=="function"){var S=y;y=function(){var J=Zy(D);S.call(J)}}var D=mk(a,y,s,0,null,!1,!1,"",vk);return s._reactRootContainer=D,s[wo]=D.current,Dp(s.nodeType===8?s.parentNode:s),Ic(),D}for(;w=s.lastChild;)s.removeChild(w);if(typeof y=="function"){var V=y;y=function(){var J=Zy(H);V.call(J)}}var H=jb(s,0,!1,null,null,!1,!1,"",vk);return s._reactRootContainer=H,s[wo]=H.current,Dp(s.nodeType===8?s.parentNode:s),Ic(function(){Qy(a,H,d,y)}),H}function ev(s,a,d,y,w){var S=d._reactRootContainer;if(S){var D=S;if(typeof w=="function"){var V=w;w=function(){var H=Zy(D);V.call(H)}}Qy(a,D,s,w)}else D=LD(d,a,s,w,y);return Zy(D)}vc=function(s){switch(s.tag){case 3:var a=s.stateNode;if(a.current.memoizedState.isDehydrated){var d=Pa(a.pendingLanes);d!==0&&(Ap(a,d|1),Fi(a,Ne()),(oe&6)===0&&(od=Ne()+500,Ha()))}break;case 13:Ic(function(){var y=So(s,1);if(y!==null){var w=gi();rr(y,s,1,w)}}),Bb(s,1)}},Mh=function(s){if(s.tag===13){var a=So(s,134217728);if(a!==null){var d=gi();rr(a,s,134217728,d)}Bb(s,134217728)}},Ep=function(s){if(s.tag===13){var a=Ya(s),d=So(s,a);if(d!==null){var y=gi();rr(d,s,a,y)}Bb(s,a)}},Ma=function(){return ce},J0=function(s,a){var d=ce;try{return ce=s,a()}finally{ce=d}},fo=function(s,a,d){switch(a){case"input":if(vh(s,d),a=d.name,d.type==="radio"&&a!=null){for(d=s;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll("input[name="+JSON.stringify(""+a)+'][type="radio"]'),a=0;a<d.length;a++){var y=d[a];if(y!==s&&y.form===s.form){var w=vy(y);if(!w)throw Error(e(90));Sa(y),vh(y,w)}}}break;case"textarea":Sr(s,d);break;case"select":a=d.value,a!=null&&ho(s,!!d.multiple,a,!1)}},Eh=Db,yp=Ic;var ID={usingClientEntryPoint:!1,Events:[Ip,Xh,vy,gp,Er,Db]},Yp={findFiberByHostInstance:Tc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},FD={bundleType:Yp.bundleType,version:Yp.version,rendererPackageName:Yp.rendererPackageName,rendererConfig:Yp.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:F.ReactCurrentDispatcher,findHostInstanceByFiber:function(s){return s=kh(s),s===null?null:s.stateNode},findFiberByHostInstance:Yp.findFiberByHostInstance||ND,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var nv=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!nv.isDisabled&&nv.supportsFiber)try{di=nv.inject(FD),fi=nv}catch{}}return Oi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ID,Oi.createPortal=function(s,a){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Vb(a))throw Error(e(200));return DD(s,a,null,d)},Oi.createRoot=function(s,a){if(!Vb(s))throw Error(e(299));var d=!1,y="",w=yk;return a!=null&&(a.unstable_strictMode===!0&&(d=!0),a.identifierPrefix!==void 0&&(y=a.identifierPrefix),a.onRecoverableError!==void 0&&(w=a.onRecoverableError)),a=jb(s,1,!1,null,null,d,!1,y,w),s[wo]=a.current,Dp(s.nodeType===8?s.parentNode:s),new Ub(a)},Oi.findDOMNode=function(s){if(s==null)return null;if(s.nodeType===1)return s;var a=s._reactInternals;if(a===void 0)throw typeof s.render=="function"?Error(e(188)):(s=Object.keys(s).join(","),Error(e(268,s)));return s=kh(a),s=s===null?null:s.stateNode,s},Oi.flushSync=function(s){return Ic(s)},Oi.hydrate=function(s,a,d){if(!tv(a))throw Error(e(200));return ev(null,s,a,!0,d)},Oi.hydrateRoot=function(s,a,d){if(!Vb(s))throw Error(e(405));var y=d!=null&&d.hydratedSources||null,w=!1,S="",D=yk;if(d!=null&&(d.unstable_strictMode===!0&&(w=!0),d.identifierPrefix!==void 0&&(S=d.identifierPrefix),d.onRecoverableError!==void 0&&(D=d.onRecoverableError)),a=mk(a,null,s,1,d??null,w,!1,S,D),s[wo]=a.current,Dp(s),y)for(s=0;s<y.length;s++)d=y[s],w=d._getVersion,w=w(d._source),a.mutableSourceEagerHydrationData==null?a.mutableSourceEagerHydrationData=[d,w]:a.mutableSourceEagerHydrationData.push(d,w);return new Jy(a)},Oi.render=function(s,a,d){if(!tv(a))throw Error(e(200));return ev(null,s,a,!1,d)},Oi.unmountComponentAtNode=function(s){if(!tv(s))throw Error(e(40));return s._reactRootContainer?(Ic(function(){ev(null,null,s,!1,function(){s._reactRootContainer=null,s[wo]=null})}),!0):!1},Oi.unstable_batchedUpdates=Db,Oi.unstable_renderSubtreeIntoContainer=function(s,a,d,y){if(!tv(d))throw Error(e(200));if(s==null||s._reactInternals===void 0)throw Error(e(38));return ev(s,a,d,!1,y)},Oi.version="18.3.1-next-f1338f8080-20240426",Oi}var _k;function N_(){if(_k)return Wb.exports;_k=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),Wb.exports=XD(),Wb.exports}var Pk;function KD(){if(Pk)return iv;Pk=1;var r=N_();return iv.createRoot=r.createRoot,iv.hydrateRoot=r.hydrateRoot,iv}var YD=KD();const qD=y1(YD);N_();function Dm(){return Dm=Object.assign?Object.assign.bind():function(r){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n])}return r},Dm.apply(this,arguments)}var Gl;(function(r){r.Pop="POP",r.Push="PUSH",r.Replace="REPLACE"})(Gl||(Gl={}));const Rk="popstate";function QD(r){r===void 0&&(r={});function t(n,i){let{pathname:o,search:c,hash:u}=n.location;return AA("",{pathname:o,search:c,hash:u},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function e(n,i){return typeof i=="string"?i:ew(i)}return JD(t,e,null,r)}function Xe(r,t){if(r===!1||r===null||typeof r>"u")throw new Error(t)}function L_(r,t){if(!r){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function ZD(){return Math.random().toString(36).substr(2,8)}function Mk(r,t){return{usr:r.state,key:r.key,idx:t}}function AA(r,t,e,n){return e===void 0&&(e=null),Dm({pathname:typeof r=="string"?r:r.pathname,search:"",hash:""},typeof t=="string"?op(t):t,{state:e,key:t&&t.key||n||ZD()})}function ew(r){let{pathname:t="/",search:e="",hash:n=""}=r;return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function op(r){let t={};if(r){let e=r.indexOf("#");e>=0&&(t.hash=r.substr(e),r=r.substr(0,e));let n=r.indexOf("?");n>=0&&(t.search=r.substr(n),r=r.substr(0,n)),r&&(t.pathname=r)}return t}function JD(r,t,e,n){n===void 0&&(n={});let{window:i=document.defaultView,v5Compat:o=!1}=n,c=i.history,u=Gl.Pop,h=null,f=p();f==null&&(f=0,c.replaceState(Dm({},c.state,{idx:f}),""));function p(){return(c.state||{idx:null}).idx}function m(){u=Gl.Pop;let T=p(),P=T==null?null:T-f;f=T,h&&h({action:u,location:E.location,delta:P})}function v(T,P){u=Gl.Push;let N=AA(E.location,T,P);f=p()+1;let L=Mk(N,f),F=E.createHref(N);try{c.pushState(L,"",F)}catch(O){if(O instanceof DOMException&&O.name==="DataCloneError")throw O;i.location.assign(F)}o&&h&&h({action:u,location:E.location,delta:1})}function b(T,P){u=Gl.Replace;let N=AA(E.location,T,P);f=p();let L=Mk(N,f),F=E.createHref(N);c.replaceState(L,"",F),o&&h&&h({action:u,location:E.location,delta:0})}function C(T){let P=i.location.origin!=="null"?i.location.origin:i.location.href,N=typeof T=="string"?T:ew(T);return N=N.replace(/ $/,"%20"),Xe(P,"No window.location.(origin|href) available to create URL for href: "+N),new URL(N,P)}let E={get action(){return u},get location(){return r(i,c)},listen(T){if(h)throw new Error("A history only accepts one active listener");return i.addEventListener(Rk,m),h=T,()=>{i.removeEventListener(Rk,m),h=null}},createHref(T){return t(i,T)},createURL:C,encodeLocation(T){let P=C(T);return{pathname:P.pathname,search:P.search,hash:P.hash}},push:v,replace:b,go(T){return c.go(T)}};return E}var Dk;(function(r){r.data="data",r.deferred="deferred",r.redirect="redirect",r.error="error"})(Dk||(Dk={}));function tN(r,t,e){return e===void 0&&(e="/"),eN(r,t,e)}function eN(r,t,e,n){let i=typeof t=="string"?op(t):t,o=np(i.pathname||"/",e);if(o==null)return null;let c=I_(r);nN(c);let u=null;for(let h=0;u==null&&h<c.length;++h){let f=fN(o);u=hN(c[h],f)}return u}function I_(r,t,e,n){t===void 0&&(t=[]),e===void 0&&(e=[]),n===void 0&&(n="");let i=(o,c,u)=>{let h={relativePath:u===void 0?o.path||"":u,caseSensitive:o.caseSensitive===!0,childrenIndex:c,route:o};h.relativePath.startsWith("/")&&(Xe(h.relativePath.startsWith(n),'Absolute route path "'+h.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),h.relativePath=h.relativePath.slice(n.length));let f=Xl([n,h.relativePath]),p=e.concat(h);o.children&&o.children.length>0&&(Xe(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+f+'".')),I_(o.children,t,p,f)),!(o.path==null&&!o.index)&&t.push({path:f,score:cN(f,o.index),routesMeta:p})};return r.forEach((o,c)=>{var u;if(o.path===""||!((u=o.path)!=null&&u.includes("?")))i(o,c);else for(let h of F_(o.path))i(o,c,h)}),t}function F_(r){let t=r.split("/");if(t.length===0)return[];let[e,...n]=t,i=e.endsWith("?"),o=e.replace(/\?$/,"");if(n.length===0)return i?[o,""]:[o];let c=F_(n.join("/")),u=[];return u.push(...c.map(h=>h===""?o:[o,h].join("/"))),i&&u.push(...c),u.map(h=>r.startsWith("/")&&h===""?"/":h)}function nN(r){r.sort((t,e)=>t.score!==e.score?e.score-t.score:uN(t.routesMeta.map(n=>n.childrenIndex),e.routesMeta.map(n=>n.childrenIndex)))}const iN=/^:[\w-]+$/,sN=3,rN=2,oN=1,aN=10,lN=-2,Nk=r=>r==="*";function cN(r,t){let e=r.split("/"),n=e.length;return e.some(Nk)&&(n+=lN),t&&(n+=rN),e.filter(i=>!Nk(i)).reduce((i,o)=>i+(iN.test(o)?sN:o===""?oN:aN),n)}function uN(r,t){return r.length===t.length&&r.slice(0,-1).every((n,i)=>n===t[i])?r[r.length-1]-t[t.length-1]:0}function hN(r,t,e){let{routesMeta:n}=r,i={},o="/",c=[];for(let u=0;u<n.length;++u){let h=n[u],f=u===n.length-1,p=o==="/"?t:t.slice(o.length)||"/",m=SA({path:h.relativePath,caseSensitive:h.caseSensitive,end:f},p),v=h.route;if(!m)return null;Object.assign(i,m.params),c.push({params:i,pathname:Xl([o,m.pathname]),pathnameBase:yN(Xl([o,m.pathnameBase])),route:v}),m.pathnameBase!=="/"&&(o=Xl([o,m.pathnameBase]))}return c}function SA(r,t){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[e,n]=dN(r.path,r.caseSensitive,r.end),i=t.match(e);if(!i)return null;let o=i[0],c=o.replace(/(.)\/+$/,"$1"),u=i.slice(1);return{params:n.reduce((f,p,m)=>{let{paramName:v,isOptional:b}=p;if(v==="*"){let E=u[m]||"";c=o.slice(0,o.length-E.length).replace(/(.)\/+$/,"$1")}const C=u[m];return b&&!C?f[v]=void 0:f[v]=(C||"").replace(/%2F/g,"/"),f},{}),pathname:o,pathnameBase:c,pattern:r}}function dN(r,t,e){t===void 0&&(t=!1),e===void 0&&(e=!0),L_(r==="*"||!r.endsWith("*")||r.endsWith("/*"),'Route path "'+r+'" will be treated as if it were '+('"'+r.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+r.replace(/\*$/,"/*")+'".'));let n=[],i="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,u,h)=>(n.push({paramName:u,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(n.push({paramName:"*"}),i+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):e?i+="\\/*$":r!==""&&r!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),n]}function fN(r){try{return r.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return L_(!1,'The URL path "'+r+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),r}}function np(r,t){if(t==="/")return r;if(!r.toLowerCase().startsWith(t.toLowerCase()))return null;let e=t.endsWith("/")?t.length-1:t.length,n=r.charAt(e);return n&&n!=="/"?null:r.slice(e)||"/"}function pN(r,t){t===void 0&&(t="/");let{pathname:e,search:n="",hash:i=""}=typeof r=="string"?op(r):r;return{pathname:e?e.startsWith("/")?e:mN(e,t):t,search:vN(n),hash:wN(i)}}function mN(r,t){let e=t.replace(/\/+$/,"").split("/");return r.split("/").forEach(i=>{i===".."?e.length>1&&e.pop():i!=="."&&e.push(i)}),e.length>1?e.join("/"):"/"}function Kb(r,t,e,n){return"Cannot include a '"+r+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+e+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function gN(r){return r.filter((t,e)=>e===0||t.route.path&&t.route.path.length>0)}function w1(r,t){let e=gN(r);return t?e.map((n,i)=>i===e.length-1?n.pathname:n.pathnameBase):e.map(n=>n.pathnameBase)}function x1(r,t,e,n){n===void 0&&(n=!1);let i;typeof r=="string"?i=op(r):(i=Dm({},r),Xe(!i.pathname||!i.pathname.includes("?"),Kb("?","pathname","search",i)),Xe(!i.pathname||!i.pathname.includes("#"),Kb("#","pathname","hash",i)),Xe(!i.search||!i.search.includes("#"),Kb("#","search","hash",i)));let o=r===""||i.pathname==="",c=o?"/":i.pathname,u;if(c==null)u=e;else{let m=t.length-1;if(!n&&c.startsWith("..")){let v=c.split("/");for(;v[0]==="..";)v.shift(),m-=1;i.pathname=v.join("/")}u=m>=0?t[m]:"/"}let h=pN(i,u),f=c&&c!=="/"&&c.endsWith("/"),p=(o||c===".")&&e.endsWith("/");return!h.pathname.endsWith("/")&&(f||p)&&(h.pathname+="/"),h}const Xl=r=>r.join("/").replace(/\/\/+/g,"/"),yN=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),vN=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,wN=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function xN(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}const O_=["post","put","patch","delete"];new Set(O_);const bN=["get",...O_];new Set(bN);function Nm(){return Nm=Object.assign?Object.assign.bind():function(r){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n])}return r},Nm.apply(this,arguments)}const Hw=$.createContext(null),j_=$.createContext(null),ba=$.createContext(null),$w=$.createContext(null),Aa=$.createContext({outlet:null,matches:[],isDataRoute:!1}),B_=$.createContext(null);function AN(r,t){let{relative:e}=t===void 0?{}:t;ap()||Xe(!1);let{basename:n,navigator:i}=$.useContext(ba),{hash:o,pathname:c,search:u}=Ww(r,{relative:e}),h=c;return n!=="/"&&(h=c==="/"?n:Xl([n,c])),i.createHref({pathname:h,search:u,hash:o})}function ap(){return $.useContext($w)!=null}function Jl(){return ap()||Xe(!1),$.useContext($w).location}function U_(r){$.useContext(ba).static||$.useLayoutEffect(r)}function ph(){let{isDataRoute:r}=$.useContext(Aa);return r?FN():SN()}function SN(){ap()||Xe(!1);let r=$.useContext(Hw),{basename:t,future:e,navigator:n}=$.useContext(ba),{matches:i}=$.useContext(Aa),{pathname:o}=Jl(),c=JSON.stringify(w1(i,e.v7_relativeSplatPath)),u=$.useRef(!1);return U_(()=>{u.current=!0}),$.useCallback(function(f,p){if(p===void 0&&(p={}),!u.current)return;if(typeof f=="number"){n.go(f);return}let m=x1(f,JSON.parse(c),o,p.relative==="path");r==null&&t!=="/"&&(m.pathname=m.pathname==="/"?t:Xl([t,m.pathname])),(p.replace?n.replace:n.push)(m,p.state,p)},[t,n,c,o,r])}function EN(){let{matches:r}=$.useContext(Aa),t=r[r.length-1];return t?t.params:{}}function Ww(r,t){let{relative:e}=t===void 0?{}:t,{future:n}=$.useContext(ba),{matches:i}=$.useContext(Aa),{pathname:o}=Jl(),c=JSON.stringify(w1(i,n.v7_relativeSplatPath));return $.useMemo(()=>x1(r,JSON.parse(c),o,e==="path"),[r,c,o,e])}function CN(r,t){return kN(r,t)}function kN(r,t,e,n){ap()||Xe(!1);let{navigator:i}=$.useContext(ba),{matches:o}=$.useContext(Aa),c=o[o.length-1],u=c?c.params:{};c&&c.pathname;let h=c?c.pathnameBase:"/";c&&c.route;let f=Jl(),p;if(t){var m;let T=typeof t=="string"?op(t):t;h==="/"||(m=T.pathname)!=null&&m.startsWith(h)||Xe(!1),p=T}else p=f;let v=p.pathname||"/",b=v;if(h!=="/"){let T=h.replace(/^\//,"").split("/");b="/"+v.replace(/^\//,"").split("/").slice(T.length).join("/")}let C=tN(r,{pathname:b}),E=MN(C&&C.map(T=>Object.assign({},T,{params:Object.assign({},u,T.params),pathname:Xl([h,i.encodeLocation?i.encodeLocation(T.pathname).pathname:T.pathname]),pathnameBase:T.pathnameBase==="/"?h:Xl([h,i.encodeLocation?i.encodeLocation(T.pathnameBase).pathname:T.pathnameBase])})),o,e,n);return t&&E?$.createElement($w.Provider,{value:{location:Nm({pathname:"/",search:"",hash:"",state:null,key:"default"},p),navigationType:Gl.Pop}},E):E}function TN(){let r=IN(),t=xN(r)?r.status+" "+r.statusText:r instanceof Error?r.message:JSON.stringify(r),e=r instanceof Error?r.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return $.createElement($.Fragment,null,$.createElement("h2",null,"Unexpected Application Error!"),$.createElement("h3",{style:{fontStyle:"italic"}},t),e?$.createElement("pre",{style:i},e):null,null)}const _N=$.createElement(TN,null);class PN extends $.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?$.createElement(Aa.Provider,{value:this.props.routeContext},$.createElement(B_.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function RN(r){let{routeContext:t,match:e,children:n}=r,i=$.useContext(Hw);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),$.createElement(Aa.Provider,{value:t},n)}function MN(r,t,e,n){var i;if(t===void 0&&(t=[]),e===void 0&&(e=null),n===void 0&&(n=null),r==null){var o;if(!e)return null;if(e.errors)r=e.matches;else if((o=n)!=null&&o.v7_partialHydration&&t.length===0&&!e.initialized&&e.matches.length>0)r=e.matches;else return null}let c=r,u=(i=e)==null?void 0:i.errors;if(u!=null){let p=c.findIndex(m=>m.route.id&&u?.[m.route.id]!==void 0);p>=0||Xe(!1),c=c.slice(0,Math.min(c.length,p+1))}let h=!1,f=-1;if(e&&n&&n.v7_partialHydration)for(let p=0;p<c.length;p++){let m=c[p];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(f=p),m.route.id){let{loaderData:v,errors:b}=e,C=m.route.loader&&v[m.route.id]===void 0&&(!b||b[m.route.id]===void 0);if(m.route.lazy||C){h=!0,f>=0?c=c.slice(0,f+1):c=[c[0]];break}}}return c.reduceRight((p,m,v)=>{let b,C=!1,E=null,T=null;e&&(b=u&&m.route.id?u[m.route.id]:void 0,E=m.route.errorElement||_N,h&&(f<0&&v===0?(ON("route-fallback"),C=!0,T=null):f===v&&(C=!0,T=m.route.hydrateFallbackElement||null)));let P=t.concat(c.slice(0,v+1)),N=()=>{let L;return b?L=E:C?L=T:m.route.Component?L=$.createElement(m.route.Component,null):m.route.element?L=m.route.element:L=p,$.createElement(RN,{match:m,routeContext:{outlet:p,matches:P,isDataRoute:e!=null},children:L})};return e&&(m.route.ErrorBoundary||m.route.errorElement||v===0)?$.createElement(PN,{location:e.location,revalidation:e.revalidation,component:E,error:b,children:N(),routeContext:{outlet:null,matches:P,isDataRoute:!0}}):N()},null)}var V_=(function(r){return r.UseBlocker="useBlocker",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r})(V_||{}),z_=(function(r){return r.UseBlocker="useBlocker",r.UseLoaderData="useLoaderData",r.UseActionData="useActionData",r.UseRouteError="useRouteError",r.UseNavigation="useNavigation",r.UseRouteLoaderData="useRouteLoaderData",r.UseMatches="useMatches",r.UseRevalidator="useRevalidator",r.UseNavigateStable="useNavigate",r.UseRouteId="useRouteId",r})(z_||{});function DN(r){let t=$.useContext(Hw);return t||Xe(!1),t}function NN(r){let t=$.useContext(j_);return t||Xe(!1),t}function LN(r){let t=$.useContext(Aa);return t||Xe(!1),t}function H_(r){let t=LN(),e=t.matches[t.matches.length-1];return e.route.id||Xe(!1),e.route.id}function IN(){var r;let t=$.useContext(B_),e=NN(),n=H_();return t!==void 0?t:(r=e.errors)==null?void 0:r[n]}function FN(){let{router:r}=DN(V_.UseNavigateStable),t=H_(z_.UseNavigateStable),e=$.useRef(!1);return U_(()=>{e.current=!0}),$.useCallback(function(i,o){o===void 0&&(o={}),e.current&&(typeof i=="number"?r.navigate(i):r.navigate(i,Nm({fromRouteId:t},o)))},[r,t])}const Lk={};function ON(r,t,e){Lk[r]||(Lk[r]=!0)}function jN(r,t){r?.v7_startTransition,r?.v7_relativeSplatPath}function BN(r){let{to:t,replace:e,state:n,relative:i}=r;ap()||Xe(!1);let{future:o,static:c}=$.useContext(ba),{matches:u}=$.useContext(Aa),{pathname:h}=Jl(),f=ph(),p=x1(t,w1(u,o.v7_relativeSplatPath),h,i==="path"),m=JSON.stringify(p);return $.useEffect(()=>f(JSON.parse(m),{replace:e,state:n,relative:i}),[f,m,i,e,n]),null}function Fr(r){Xe(!1)}function UN(r){let{basename:t="/",children:e=null,location:n,navigationType:i=Gl.Pop,navigator:o,static:c=!1,future:u}=r;ap()&&Xe(!1);let h=t.replace(/^\/*/,"/"),f=$.useMemo(()=>({basename:h,navigator:o,static:c,future:Nm({v7_relativeSplatPath:!1},u)}),[h,u,o,c]);typeof n=="string"&&(n=op(n));let{pathname:p="/",search:m="",hash:v="",state:b=null,key:C="default"}=n,E=$.useMemo(()=>{let T=np(p,h);return T==null?null:{location:{pathname:T,search:m,hash:v,state:b,key:C},navigationType:i}},[h,p,m,v,b,C,i]);return E==null?null:$.createElement(ba.Provider,{value:f},$.createElement($w.Provider,{children:e,value:E}))}function VN(r){let{children:t,location:e}=r;return CN(EA(t),e)}new Promise(()=>{});function EA(r,t){t===void 0&&(t=[]);let e=[];return $.Children.forEach(r,(n,i)=>{if(!$.isValidElement(n))return;let o=[...t,i];if(n.type===$.Fragment){e.push.apply(e,EA(n.props.children,o));return}n.type!==Fr&&Xe(!1),!n.props.index||!n.props.children||Xe(!1);let c={id:n.props.id||o.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(c.children=EA(n.props.children,o)),e.push(c)}),e}function nw(){return nw=Object.assign?Object.assign.bind():function(r){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n])}return r},nw.apply(this,arguments)}function $_(r,t){if(r==null)return{};var e={},n=Object.keys(r),i,o;for(o=0;o<n.length;o++)i=n[o],!(t.indexOf(i)>=0)&&(e[i]=r[i]);return e}function zN(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function HN(r,t){return r.button===0&&(!t||t==="_self")&&!zN(r)}const $N=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],WN=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],GN="6";try{window.__reactRouterVersion=GN}catch{}const XN=$.createContext({isTransitioning:!1}),KN="startTransition",Ik=$D[KN];function YN(r){let{basename:t,children:e,future:n,window:i}=r,o=$.useRef();o.current==null&&(o.current=QD({window:i,v5Compat:!0}));let c=o.current,[u,h]=$.useState({action:c.action,location:c.location}),{v7_startTransition:f}=n||{},p=$.useCallback(m=>{f&&Ik?Ik(()=>h(m)):h(m)},[h,f]);return $.useLayoutEffect(()=>c.listen(p),[c,p]),$.useEffect(()=>jN(n),[n]),$.createElement(UN,{basename:t,children:e,location:u.location,navigationType:u.action,navigator:c,future:n})}const qN=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",QN=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ei=$.forwardRef(function(t,e){let{onClick:n,relative:i,reloadDocument:o,replace:c,state:u,target:h,to:f,preventScrollReset:p,viewTransition:m}=t,v=$_(t,$N),{basename:b}=$.useContext(ba),C,E=!1;if(typeof f=="string"&&QN.test(f)&&(C=f,qN))try{let L=new URL(window.location.href),F=f.startsWith("//")?new URL(L.protocol+f):new URL(f),O=np(F.pathname,b);F.origin===L.origin&&O!=null?f=O+F.search+F.hash:E=!0}catch{}let T=AN(f,{relative:i}),P=JN(f,{replace:c,state:u,target:h,preventScrollReset:p,relative:i,viewTransition:m});function N(L){n&&n(L),L.defaultPrevented||P(L)}return $.createElement("a",nw({},v,{href:C||T,onClick:E||o?n:N,ref:e,target:h}))}),sv=$.forwardRef(function(t,e){let{"aria-current":n="page",caseSensitive:i=!1,className:o="",end:c=!1,style:u,to:h,viewTransition:f,children:p}=t,m=$_(t,WN),v=Ww(h,{relative:m.relative}),b=Jl(),C=$.useContext(j_),{navigator:E,basename:T}=$.useContext(ba),P=C!=null&&tL(v)&&f===!0,N=E.encodeLocation?E.encodeLocation(v).pathname:v.pathname,L=b.pathname,F=C&&C.navigation&&C.navigation.location?C.navigation.location.pathname:null;i||(L=L.toLowerCase(),F=F?F.toLowerCase():null,N=N.toLowerCase()),F&&T&&(F=np(F,T)||F);const O=N!=="/"&&N.endsWith("/")?N.length-1:N.length;let z=L===N||!c&&L.startsWith(N)&&L.charAt(O)==="/",K=F!=null&&(F===N||!c&&F.startsWith(N)&&F.charAt(N.length)==="/"),Y={isActive:z,isPending:K,isTransitioning:P},nt=z?n:void 0,st;typeof o=="function"?st=o(Y):st=[o,z?"active":null,K?"pending":null,P?"transitioning":null].filter(Boolean).join(" ");let it=typeof u=="function"?u(Y):u;return $.createElement(Ei,nw({},m,{"aria-current":nt,className:st,ref:e,style:it,to:h,viewTransition:f}),typeof p=="function"?p(Y):p)});var CA;(function(r){r.UseScrollRestoration="useScrollRestoration",r.UseSubmit="useSubmit",r.UseSubmitFetcher="useSubmitFetcher",r.UseFetcher="useFetcher",r.useViewTransitionState="useViewTransitionState"})(CA||(CA={}));var Fk;(function(r){r.UseFetcher="useFetcher",r.UseFetchers="useFetchers",r.UseScrollRestoration="useScrollRestoration"})(Fk||(Fk={}));function ZN(r){let t=$.useContext(Hw);return t||Xe(!1),t}function JN(r,t){let{target:e,replace:n,state:i,preventScrollReset:o,relative:c,viewTransition:u}=t===void 0?{}:t,h=ph(),f=Jl(),p=Ww(r,{relative:c});return $.useCallback(m=>{if(HN(m,e)){m.preventDefault();let v=n!==void 0?n:ew(f)===ew(p);h(r,{replace:v,state:i,preventScrollReset:o,relative:c,viewTransition:u})}},[f,h,p,n,i,e,r,o,c,u])}function tL(r,t){t===void 0&&(t={});let e=$.useContext(XN);e==null&&Xe(!1);let{basename:n}=ZN(CA.useViewTransitionState),i=Ww(r,{relative:t.relative});if(!e.isTransitioning)return!1;let o=np(e.currentLocation.pathname,n)||e.currentLocation.pathname,c=np(e.nextLocation.pathname,n)||e.nextLocation.pathname;return SA(i.pathname,c)!=null||SA(i.pathname,o)!=null}const b1=$.createContext({});function A1(r){const t=$.useRef(null);return t.current===null&&(t.current=r()),t.current}const Gw=$.createContext(null),S1=$.createContext({transformPagePoint:r=>r,isStatic:!1,reducedMotion:"never"});class eL extends $.Component{getSnapshotBeforeUpdate(t){const e=this.props.childRef.current;if(e&&t.isPresent&&!this.props.isPresent){const n=this.props.sizeRef.current;n.height=e.offsetHeight||0,n.width=e.offsetWidth||0,n.top=e.offsetTop,n.left=e.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function nL({children:r,isPresent:t}){const e=$.useId(),n=$.useRef(null),i=$.useRef({width:0,height:0,top:0,left:0}),{nonce:o}=$.useContext(S1);return $.useInsertionEffect(()=>{const{width:c,height:u,top:h,left:f}=i.current;if(t||!n.current||!c||!u)return;n.current.dataset.motionPopId=e;const p=document.createElement("style");return o&&(p.nonce=o),document.head.appendChild(p),p.sheet&&p.sheet.insertRule(`
          [data-motion-pop-id="${e}"] {
            position: absolute !important;
            width: ${c}px !important;
            height: ${u}px !important;
            top: ${h}px !important;
            left: ${f}px !important;
          }
        `),()=>{document.head.removeChild(p)}},[t]),I.jsx(eL,{isPresent:t,childRef:n,sizeRef:i,children:$.cloneElement(r,{ref:n})})}const iL=({children:r,initial:t,isPresent:e,onExitComplete:n,custom:i,presenceAffectsLayout:o,mode:c})=>{const u=A1(sL),h=$.useId(),f=$.useCallback(m=>{u.set(m,!0);for(const v of u.values())if(!v)return;n&&n()},[u,n]),p=$.useMemo(()=>({id:h,initial:t,isPresent:e,custom:i,onExitComplete:f,register:m=>(u.set(m,!1),()=>u.delete(m))}),o?[Math.random(),f]:[e,f]);return $.useMemo(()=>{u.forEach((m,v)=>u.set(v,!1))},[e]),$.useEffect(()=>{!e&&!u.size&&n&&n()},[e]),c==="popLayout"&&(r=I.jsx(nL,{isPresent:e,children:r})),I.jsx(Gw.Provider,{value:p,children:r})};function sL(){return new Map}function W_(r=!0){const t=$.useContext(Gw);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:n,register:i}=t,o=$.useId();$.useEffect(()=>{r&&i(o)},[r]);const c=$.useCallback(()=>r&&n&&n(o),[o,n,r]);return!e&&n?[!1,c]:[!0]}const rv=r=>r.key||"";function Ok(r){const t=[];return $.Children.forEach(r,e=>{$.isValidElement(e)&&t.push(e)}),t}const E1=typeof window<"u",G_=E1?$.useLayoutEffect:$.useEffect,X_=({children:r,custom:t,initial:e=!0,onExitComplete:n,presenceAffectsLayout:i=!0,mode:o="sync",propagate:c=!1})=>{const[u,h]=W_(c),f=$.useMemo(()=>Ok(r),[r]),p=c&&!u?[]:f.map(rv),m=$.useRef(!0),v=$.useRef(f),b=A1(()=>new Map),[C,E]=$.useState(f),[T,P]=$.useState(f);G_(()=>{m.current=!1,v.current=f;for(let F=0;F<T.length;F++){const O=rv(T[F]);p.includes(O)?b.delete(O):b.get(O)!==!0&&b.set(O,!1)}},[T,p.length,p.join("-")]);const N=[];if(f!==C){let F=[...f];for(let O=0;O<T.length;O++){const z=T[O],K=rv(z);p.includes(K)||(F.splice(O,0,z),N.push(z))}o==="wait"&&N.length&&(F=N),P(Ok(F)),E(f);return}const{forceRender:L}=$.useContext(b1);return I.jsx(I.Fragment,{children:T.map(F=>{const O=rv(F),z=c&&!u?!1:f===T||p.includes(O),K=()=>{if(b.has(O))b.set(O,!0);else return;let Y=!0;b.forEach(nt=>{nt||(Y=!1)}),Y&&(L?.(),P(v.current),c&&h?.(),n&&n())};return I.jsx(iL,{isPresent:z,initial:!m.current||e?void 0:!1,custom:z?void 0:t,presenceAffectsLayout:i,mode:o,onExitComplete:z?void 0:K,children:F},O)})})},xs=r=>r;let K_=xs;function C1(r){let t;return()=>(t===void 0&&(t=r()),t)}const ip=(r,t,e)=>{const n=t-r;return n===0?1:(e-r)/n},fa=r=>r*1e3,pa=r=>r/1e3,rL={useManualTiming:!1};function oL(r){let t=new Set,e=new Set,n=!1,i=!1;const o=new WeakSet;let c={delta:0,timestamp:0,isProcessing:!1};function u(f){o.has(f)&&(h.schedule(f),r()),f(c)}const h={schedule:(f,p=!1,m=!1)=>{const b=m&&n?t:e;return p&&o.add(f),b.has(f)||b.add(f),f},cancel:f=>{e.delete(f),o.delete(f)},process:f=>{if(c=f,n){i=!0;return}n=!0,[t,e]=[e,t],t.forEach(u),t.clear(),n=!1,i&&(i=!1,h.process(f))}};return h}const ov=["read","resolveKeyframes","update","preRender","render","postRender"],aL=40;function Y_(r,t){let e=!1,n=!0;const i={delta:0,timestamp:0,isProcessing:!1},o=()=>e=!0,c=ov.reduce((P,N)=>(P[N]=oL(o),P),{}),{read:u,resolveKeyframes:h,update:f,preRender:p,render:m,postRender:v}=c,b=()=>{const P=performance.now();e=!1,i.delta=n?1e3/60:Math.max(Math.min(P-i.timestamp,aL),1),i.timestamp=P,i.isProcessing=!0,u.process(i),h.process(i),f.process(i),p.process(i),m.process(i),v.process(i),i.isProcessing=!1,e&&t&&(n=!1,r(b))},C=()=>{e=!0,n=!0,i.isProcessing||r(b)};return{schedule:ov.reduce((P,N)=>{const L=c[N];return P[N]=(F,O=!1,z=!1)=>(e||C(),L.schedule(F,O,z)),P},{}),cancel:P=>{for(let N=0;N<ov.length;N++)c[ov[N]].cancel(P)},state:i,steps:c}}const{schedule:Oe,cancel:Kl,state:Wn,steps:Yb}=Y_(typeof requestAnimationFrame<"u"?requestAnimationFrame:xs,!0),q_=$.createContext({strict:!1}),jk={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},sp={};for(const r in jk)sp[r]={isEnabled:t=>jk[r].some(e=>!!t[e])};function lL(r){for(const t in r)sp[t]={...sp[t],...r[t]}}const cL=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function iw(r){return r.startsWith("while")||r.startsWith("drag")&&r!=="draggable"||r.startsWith("layout")||r.startsWith("onTap")||r.startsWith("onPan")||r.startsWith("onLayout")||cL.has(r)}let Q_=r=>!iw(r);function uL(r){r&&(Q_=t=>t.startsWith("on")?!iw(t):r(t))}try{uL(require("@emotion/is-prop-valid").default)}catch{}function hL(r,t,e){const n={};for(const i in r)i==="values"&&typeof r.values=="object"||(Q_(i)||e===!0&&iw(i)||!t&&!iw(i)||r.draggable&&i.startsWith("onDrag"))&&(n[i]=r[i]);return n}function dL(r){if(typeof Proxy>"u")return r;const t=new Map,e=(...n)=>r(...n);return new Proxy(e,{get:(n,i)=>i==="create"?r:(t.has(i)||t.set(i,r(i)),t.get(i))})}const Xw=$.createContext({});function Lm(r){return typeof r=="string"||Array.isArray(r)}function Kw(r){return r!==null&&typeof r=="object"&&typeof r.start=="function"}const k1=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],T1=["initial",...k1];function Yw(r){return Kw(r.animate)||T1.some(t=>Lm(r[t]))}function Z_(r){return!!(Yw(r)||r.variants)}function fL(r,t){if(Yw(r)){const{initial:e,animate:n}=r;return{initial:e===!1||Lm(e)?e:void 0,animate:Lm(n)?n:void 0}}return r.inherit!==!1?t:{}}function pL(r){const{initial:t,animate:e}=fL(r,$.useContext(Xw));return $.useMemo(()=>({initial:t,animate:e}),[Bk(t),Bk(e)])}function Bk(r){return Array.isArray(r)?r.join(" "):r}const mL=Symbol.for("motionComponentSymbol");function yd(r){return r&&typeof r=="object"&&Object.prototype.hasOwnProperty.call(r,"current")}function gL(r,t,e){return $.useCallback(n=>{n&&r.onMount&&r.onMount(n),t&&(n?t.mount(n):t.unmount()),e&&(typeof e=="function"?e(n):yd(e)&&(e.current=n))},[t])}const _1=r=>r.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),yL="framerAppearId",J_="data-"+_1(yL),{schedule:P1}=Y_(queueMicrotask,!1),tP=$.createContext({});function vL(r,t,e,n,i){var o,c;const{visualElement:u}=$.useContext(Xw),h=$.useContext(q_),f=$.useContext(Gw),p=$.useContext(S1).reducedMotion,m=$.useRef(null);n=n||h.renderer,!m.current&&n&&(m.current=n(r,{visualState:t,parent:u,props:e,presenceContext:f,blockInitialAnimation:f?f.initial===!1:!1,reducedMotionConfig:p}));const v=m.current,b=$.useContext(tP);v&&!v.projection&&i&&(v.type==="html"||v.type==="svg")&&wL(m.current,e,i,b);const C=$.useRef(!1);$.useInsertionEffect(()=>{v&&C.current&&v.update(e,f)});const E=e[J_],T=$.useRef(!!E&&!(!((o=window.MotionHandoffIsComplete)===null||o===void 0)&&o.call(window,E))&&((c=window.MotionHasOptimisedAnimation)===null||c===void 0?void 0:c.call(window,E)));return G_(()=>{v&&(C.current=!0,window.MotionIsMounted=!0,v.updateFeatures(),P1.render(v.render),T.current&&v.animationState&&v.animationState.animateChanges())}),$.useEffect(()=>{v&&(!T.current&&v.animationState&&v.animationState.animateChanges(),T.current&&(queueMicrotask(()=>{var P;(P=window.MotionHandoffMarkAsComplete)===null||P===void 0||P.call(window,E)}),T.current=!1))}),v}function wL(r,t,e,n){const{layoutId:i,layout:o,drag:c,dragConstraints:u,layoutScroll:h,layoutRoot:f}=t;r.projection=new e(r.latestValues,t["data-framer-portal-id"]?void 0:eP(r.parent)),r.projection.setOptions({layoutId:i,layout:o,alwaysMeasureLayout:!!c||u&&yd(u),visualElement:r,animationType:typeof o=="string"?o:"both",initialPromotionConfig:n,layoutScroll:h,layoutRoot:f})}function eP(r){if(r)return r.options.allowProjection!==!1?r.projection:eP(r.parent)}function xL({preloadedFeatures:r,createVisualElement:t,useRender:e,useVisualState:n,Component:i}){var o,c;r&&lL(r);function u(f,p){let m;const v={...$.useContext(S1),...f,layoutId:bL(f)},{isStatic:b}=v,C=pL(f),E=n(f,b);if(!b&&E1){AL();const T=SL(v);m=T.MeasureLayout,C.visualElement=vL(i,E,v,t,T.ProjectionNode)}return I.jsxs(Xw.Provider,{value:C,children:[m&&C.visualElement?I.jsx(m,{visualElement:C.visualElement,...v}):null,e(i,f,gL(E,C.visualElement,p),E,b,C.visualElement)]})}u.displayName=`motion.${typeof i=="string"?i:`create(${(c=(o=i.displayName)!==null&&o!==void 0?o:i.name)!==null&&c!==void 0?c:""})`}`;const h=$.forwardRef(u);return h[mL]=i,h}function bL({layoutId:r}){const t=$.useContext(b1).id;return t&&r!==void 0?t+"-"+r:r}function AL(r,t){$.useContext(q_).strict}function SL(r){const{drag:t,layout:e}=sp;if(!t&&!e)return{};const n={...t,...e};return{MeasureLayout:t?.isEnabled(r)||e?.isEnabled(r)?n.MeasureLayout:void 0,ProjectionNode:n.ProjectionNode}}const EL=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function R1(r){return typeof r!="string"||r.includes("-")?!1:!!(EL.indexOf(r)>-1||/[A-Z]/u.test(r))}function Uk(r){const t=[{},{}];return r?.values.forEach((e,n)=>{t[0][n]=e.get(),t[1][n]=e.getVelocity()}),t}function M1(r,t,e,n){if(typeof t=="function"){const[i,o]=Uk(n);t=t(e!==void 0?e:r.custom,i,o)}if(typeof t=="string"&&(t=r.variants&&r.variants[t]),typeof t=="function"){const[i,o]=Uk(n);t=t(e!==void 0?e:r.custom,i,o)}return t}const kA=r=>Array.isArray(r),CL=r=>!!(r&&typeof r=="object"&&r.mix&&r.toValue),kL=r=>kA(r)?r[r.length-1]||0:r,ui=r=>!!(r&&r.getVelocity);function vv(r){const t=ui(r)?r.get():r;return CL(t)?t.toValue():t}function TL({scrapeMotionValuesFromProps:r,createRenderState:t,onUpdate:e},n,i,o){const c={latestValues:_L(n,i,o,r),renderState:t()};return e&&(c.onMount=u=>e({props:n,current:u,...c}),c.onUpdate=u=>e(u)),c}const nP=r=>(t,e)=>{const n=$.useContext(Xw),i=$.useContext(Gw),o=()=>TL(r,t,n,i);return e?o():A1(o)};function _L(r,t,e,n){const i={},o=n(r,{});for(const v in o)i[v]=vv(o[v]);let{initial:c,animate:u}=r;const h=Yw(r),f=Z_(r);t&&f&&!h&&r.inherit!==!1&&(c===void 0&&(c=t.initial),u===void 0&&(u=t.animate));let p=e?e.initial===!1:!1;p=p||c===!1;const m=p?u:c;if(m&&typeof m!="boolean"&&!Kw(m)){const v=Array.isArray(m)?m:[m];for(let b=0;b<v.length;b++){const C=M1(r,v[b]);if(C){const{transitionEnd:E,transition:T,...P}=C;for(const N in P){let L=P[N];if(Array.isArray(L)){const F=p?L.length-1:0;L=L[F]}L!==null&&(i[N]=L)}for(const N in E)i[N]=E[N]}}}return i}const lp=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],mh=new Set(lp),iP=r=>t=>typeof t=="string"&&t.startsWith(r),sP=iP("--"),PL=iP("var(--"),D1=r=>PL(r)?RL.test(r.split("/*")[0].trim()):!1,RL=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,rP=(r,t)=>t&&typeof r=="number"?t.transform(r):r,va=(r,t,e)=>e>t?t:e<r?r:e,cp={test:r=>typeof r=="number",parse:parseFloat,transform:r=>r},Im={...cp,transform:r=>va(0,1,r)},av={...cp,default:1},F0=r=>({test:t=>typeof t=="string"&&t.endsWith(r)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${r}`}),Ja=F0("deg"),ao=F0("%"),Ot=F0("px"),ML=F0("vh"),DL=F0("vw"),Vk={...ao,parse:r=>ao.parse(r)/100,transform:r=>ao.transform(r*100)},NL={borderWidth:Ot,borderTopWidth:Ot,borderRightWidth:Ot,borderBottomWidth:Ot,borderLeftWidth:Ot,borderRadius:Ot,radius:Ot,borderTopLeftRadius:Ot,borderTopRightRadius:Ot,borderBottomRightRadius:Ot,borderBottomLeftRadius:Ot,width:Ot,maxWidth:Ot,height:Ot,maxHeight:Ot,top:Ot,right:Ot,bottom:Ot,left:Ot,padding:Ot,paddingTop:Ot,paddingRight:Ot,paddingBottom:Ot,paddingLeft:Ot,margin:Ot,marginTop:Ot,marginRight:Ot,marginBottom:Ot,marginLeft:Ot,backgroundPositionX:Ot,backgroundPositionY:Ot},LL={rotate:Ja,rotateX:Ja,rotateY:Ja,rotateZ:Ja,scale:av,scaleX:av,scaleY:av,scaleZ:av,skew:Ja,skewX:Ja,skewY:Ja,distance:Ot,translateX:Ot,translateY:Ot,translateZ:Ot,x:Ot,y:Ot,z:Ot,perspective:Ot,transformPerspective:Ot,opacity:Im,originX:Vk,originY:Vk,originZ:Ot},zk={...cp,transform:Math.round},N1={...NL,...LL,zIndex:zk,size:Ot,fillOpacity:Im,strokeOpacity:Im,numOctaves:zk},IL={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},FL=lp.length;function OL(r,t,e){let n="",i=!0;for(let o=0;o<FL;o++){const c=lp[o],u=r[c];if(u===void 0)continue;let h=!0;if(typeof u=="number"?h=u===(c.startsWith("scale")?1:0):h=parseFloat(u)===0,!h||e){const f=rP(u,N1[c]);if(!h){i=!1;const p=IL[c]||c;n+=`${p}(${f}) `}e&&(t[c]=f)}}return n=n.trim(),e?n=e(t,i?"":n):i&&(n="none"),n}function L1(r,t,e){const{style:n,vars:i,transformOrigin:o}=r;let c=!1,u=!1;for(const h in t){const f=t[h];if(mh.has(h)){c=!0;continue}else if(sP(h)){i[h]=f;continue}else{const p=rP(f,N1[h]);h.startsWith("origin")?(u=!0,o[h]=p):n[h]=p}}if(t.transform||(c||e?n.transform=OL(t,r.transform,e):n.transform&&(n.transform="none")),u){const{originX:h="50%",originY:f="50%",originZ:p=0}=o;n.transformOrigin=`${h} ${f} ${p}`}}const jL={offset:"stroke-dashoffset",array:"stroke-dasharray"},BL={offset:"strokeDashoffset",array:"strokeDasharray"};function UL(r,t,e=1,n=0,i=!0){r.pathLength=1;const o=i?jL:BL;r[o.offset]=Ot.transform(-n);const c=Ot.transform(t),u=Ot.transform(e);r[o.array]=`${c} ${u}`}function Hk(r,t,e){return typeof r=="string"?r:Ot.transform(t+e*r)}function VL(r,t,e){const n=Hk(t,r.x,r.width),i=Hk(e,r.y,r.height);return`${n} ${i}`}function I1(r,{attrX:t,attrY:e,attrScale:n,originX:i,originY:o,pathLength:c,pathSpacing:u=1,pathOffset:h=0,...f},p,m){if(L1(r,f,m),p){r.style.viewBox&&(r.attrs.viewBox=r.style.viewBox);return}r.attrs=r.style,r.style={};const{attrs:v,style:b,dimensions:C}=r;v.transform&&(C&&(b.transform=v.transform),delete v.transform),C&&(i!==void 0||o!==void 0||b.transform)&&(b.transformOrigin=VL(C,i!==void 0?i:.5,o!==void 0?o:.5)),t!==void 0&&(v.x=t),e!==void 0&&(v.y=e),n!==void 0&&(v.scale=n),c!==void 0&&UL(v,c,u,h,!1)}const F1=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),oP=()=>({...F1(),attrs:{}}),O1=r=>typeof r=="string"&&r.toLowerCase()==="svg";function aP(r,{style:t,vars:e},n,i){Object.assign(r.style,t,i&&i.getProjectionStyles(n));for(const o in e)r.style.setProperty(o,e[o])}const lP=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function cP(r,t,e,n){aP(r,t,void 0,n);for(const i in t.attrs)r.setAttribute(lP.has(i)?i:_1(i),t.attrs[i])}const sw={};function zL(r){Object.assign(sw,r)}function uP(r,{layout:t,layoutId:e}){return mh.has(r)||r.startsWith("origin")||(t||e!==void 0)&&(!!sw[r]||r==="opacity")}function j1(r,t,e){var n;const{style:i}=r,o={};for(const c in i)(ui(i[c])||t.style&&ui(t.style[c])||uP(c,r)||((n=e?.getValue(c))===null||n===void 0?void 0:n.liveStyle)!==void 0)&&(o[c]=i[c]);return o}function hP(r,t,e){const n=j1(r,t,e);for(const i in r)if(ui(r[i])||ui(t[i])){const o=lp.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;n[o]=r[i]}return n}function HL(r,t){try{t.dimensions=typeof r.getBBox=="function"?r.getBBox():r.getBoundingClientRect()}catch{t.dimensions={x:0,y:0,width:0,height:0}}}const $k=["x","y","width","height","cx","cy","r"],$L={useVisualState:nP({scrapeMotionValuesFromProps:hP,createRenderState:oP,onUpdate:({props:r,prevProps:t,current:e,renderState:n,latestValues:i})=>{if(!e)return;let o=!!r.drag;if(!o){for(const u in i)if(mh.has(u)){o=!0;break}}if(!o)return;let c=!t;if(t)for(let u=0;u<$k.length;u++){const h=$k[u];r[h]!==t[h]&&(c=!0)}c&&Oe.read(()=>{HL(e,n),Oe.render(()=>{I1(n,i,O1(e.tagName),r.transformTemplate),cP(e,n)})})}})},WL={useVisualState:nP({scrapeMotionValuesFromProps:j1,createRenderState:F1})};function dP(r,t,e){for(const n in t)!ui(t[n])&&!uP(n,e)&&(r[n]=t[n])}function GL({transformTemplate:r},t){return $.useMemo(()=>{const e=F1();return L1(e,t,r),Object.assign({},e.vars,e.style)},[t])}function XL(r,t){const e=r.style||{},n={};return dP(n,e,r),Object.assign(n,GL(r,t)),n}function KL(r,t){const e={},n=XL(r,t);return r.drag&&r.dragListener!==!1&&(e.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=r.drag===!0?"none":`pan-${r.drag==="x"?"y":"x"}`),r.tabIndex===void 0&&(r.onTap||r.onTapStart||r.whileTap)&&(e.tabIndex=0),e.style=n,e}function YL(r,t,e,n){const i=$.useMemo(()=>{const o=oP();return I1(o,t,O1(n),r.transformTemplate),{...o.attrs,style:{...o.style}}},[t]);if(r.style){const o={};dP(o,r.style,r),i.style={...o,...i.style}}return i}function qL(r=!1){return(e,n,i,{latestValues:o},c)=>{const h=(R1(e)?YL:KL)(n,o,c,e),f=hL(n,typeof e=="string",r),p=e!==$.Fragment?{...f,...h,ref:i}:{},{children:m}=n,v=$.useMemo(()=>ui(m)?m.get():m,[m]);return $.createElement(e,{...p,children:v})}}function QL(r,t){return function(n,{forwardMotionProps:i}={forwardMotionProps:!1}){const c={...R1(n)?$L:WL,preloadedFeatures:r,useRender:qL(i),createVisualElement:t,Component:n};return xL(c)}}function fP(r,t){if(!Array.isArray(t))return!1;const e=t.length;if(e!==r.length)return!1;for(let n=0;n<e;n++)if(t[n]!==r[n])return!1;return!0}function qw(r,t,e){const n=r.getProps();return M1(n,t,e!==void 0?e:n.custom,r)}const ZL=C1(()=>window.ScrollTimeline!==void 0);class JL{constructor(t){this.stop=()=>this.runAll("stop"),this.animations=t.filter(Boolean)}get finished(){return Promise.all(this.animations.map(t=>"finished"in t?t.finished:t))}getAll(t){return this.animations[0][t]}setAll(t,e){for(let n=0;n<this.animations.length;n++)this.animations[n][t]=e}attachTimeline(t,e){const n=this.animations.map(i=>{if(ZL()&&i.attachTimeline)return i.attachTimeline(t);if(typeof e=="function")return e(i)});return()=>{n.forEach((i,o)=>{i&&i(),this.animations[o].stop()})}}get time(){return this.getAll("time")}set time(t){this.setAll("time",t)}get speed(){return this.getAll("speed")}set speed(t){this.setAll("speed",t)}get startTime(){return this.getAll("startTime")}get duration(){let t=0;for(let e=0;e<this.animations.length;e++)t=Math.max(t,this.animations[e].duration);return t}runAll(t){this.animations.forEach(e=>e[t]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class tI extends JL{then(t,e){return Promise.all(this.animations).then(t).catch(e)}}function B1(r,t){return r?r[t]||r.default||r:void 0}const TA=2e4;function pP(r){let t=0;const e=50;let n=r.next(t);for(;!n.done&&t<TA;)t+=e,n=r.next(t);return t>=TA?1/0:t}function U1(r){return typeof r=="function"}function Wk(r,t){r.timeline=t,r.onfinish=null}const V1=r=>Array.isArray(r)&&typeof r[0]=="number",eI={linearEasing:void 0};function nI(r,t){const e=C1(r);return()=>{var n;return(n=eI[t])!==null&&n!==void 0?n:e()}}const rw=nI(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),mP=(r,t,e=10)=>{let n="";const i=Math.max(Math.round(t/e),2);for(let o=0;o<i;o++)n+=r(ip(0,i-1,o))+", ";return`linear(${n.substring(0,n.length-2)})`};function gP(r){return!!(typeof r=="function"&&rw()||!r||typeof r=="string"&&(r in _A||rw())||V1(r)||Array.isArray(r)&&r.every(gP))}const im=([r,t,e,n])=>`cubic-bezier(${r}, ${t}, ${e}, ${n})`,_A={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:im([0,.65,.55,1]),circOut:im([.55,0,1,.45]),backIn:im([.31,.01,.66,-.59]),backOut:im([.33,1.53,.69,.99])};function yP(r,t){if(r)return typeof r=="function"&&rw()?mP(r,t):V1(r)?im(r):Array.isArray(r)?r.map(e=>yP(e,t)||_A.easeOut):_A[r]}const ar={x:!1,y:!1};function vP(){return ar.x||ar.y}function iI(r,t,e){var n;if(r instanceof Element)return[r];if(typeof r=="string"){let i=document;const o=(n=void 0)!==null&&n!==void 0?n:i.querySelectorAll(r);return o?Array.from(o):[]}return Array.from(r)}function wP(r,t){const e=iI(r),n=new AbortController,i={passive:!0,...t,signal:n.signal};return[e,i,()=>n.abort()]}function Gk(r){return t=>{t.pointerType==="touch"||vP()||r(t)}}function sI(r,t,e={}){const[n,i,o]=wP(r,e),c=Gk(u=>{const{target:h}=u,f=t(u);if(typeof f!="function"||!h)return;const p=Gk(m=>{f(m),h.removeEventListener("pointerleave",p)});h.addEventListener("pointerleave",p,i)});return n.forEach(u=>{u.addEventListener("pointerenter",c,i)}),o}const xP=(r,t)=>t?r===t?!0:xP(r,t.parentElement):!1,z1=r=>r.pointerType==="mouse"?typeof r.button!="number"||r.button<=0:r.isPrimary!==!1,rI=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function oI(r){return rI.has(r.tagName)||r.tabIndex!==-1}const sm=new WeakSet;function Xk(r){return t=>{t.key==="Enter"&&r(t)}}function qb(r,t){r.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const aI=(r,t)=>{const e=r.currentTarget;if(!e)return;const n=Xk(()=>{if(sm.has(e))return;qb(e,"down");const i=Xk(()=>{qb(e,"up")}),o=()=>qb(e,"cancel");e.addEventListener("keyup",i,t),e.addEventListener("blur",o,t)});e.addEventListener("keydown",n,t),e.addEventListener("blur",()=>e.removeEventListener("keydown",n),t)};function Kk(r){return z1(r)&&!vP()}function lI(r,t,e={}){const[n,i,o]=wP(r,e),c=u=>{const h=u.currentTarget;if(!Kk(u)||sm.has(h))return;sm.add(h);const f=t(u),p=(b,C)=>{window.removeEventListener("pointerup",m),window.removeEventListener("pointercancel",v),!(!Kk(b)||!sm.has(h))&&(sm.delete(h),typeof f=="function"&&f(b,{success:C}))},m=b=>{p(b,e.useGlobalTarget||xP(h,b.target))},v=b=>{p(b,!1)};window.addEventListener("pointerup",m,i),window.addEventListener("pointercancel",v,i)};return n.forEach(u=>{!oI(u)&&u.getAttribute("tabindex")===null&&(u.tabIndex=0),(e.useGlobalTarget?window:u).addEventListener("pointerdown",c,i),u.addEventListener("focus",f=>aI(f,i),i)}),o}function cI(r){return r==="x"||r==="y"?ar[r]?null:(ar[r]=!0,()=>{ar[r]=!1}):ar.x||ar.y?null:(ar.x=ar.y=!0,()=>{ar.x=ar.y=!1})}const bP=new Set(["width","height","top","left","right","bottom",...lp]);let wv;function uI(){wv=void 0}const lo={now:()=>(wv===void 0&&lo.set(Wn.isProcessing||rL.useManualTiming?Wn.timestamp:performance.now()),wv),set:r=>{wv=r,queueMicrotask(uI)}};function H1(r,t){r.indexOf(t)===-1&&r.push(t)}function $1(r,t){const e=r.indexOf(t);e>-1&&r.splice(e,1)}class W1{constructor(){this.subscriptions=[]}add(t){return H1(this.subscriptions,t),()=>$1(this.subscriptions,t)}notify(t,e,n){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](t,e,n);else for(let o=0;o<i;o++){const c=this.subscriptions[o];c&&c(t,e,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function AP(r,t){return t?r*(1e3/t):0}const Yk=30,hI=r=>!isNaN(parseFloat(r));class dI{constructor(t,e={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(n,i=!0)=>{const o=lo.now();this.updatedAt!==o&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(n),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(t),this.owner=e.owner}setCurrent(t){this.current=t,this.updatedAt=lo.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=hI(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,e){this.events[t]||(this.events[t]=new W1);const n=this.events[t].add(e);return t==="change"?()=>{n(),Oe.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,e){this.passiveEffect=t,this.stopPassiveEffect=e}set(t,e=!0){!e||!this.passiveEffect?this.updateAndNotify(t,e):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,e,n){this.set(e),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-n}jump(t,e=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,e&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=lo.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>Yk)return 0;const e=Math.min(this.updatedAt-this.prevUpdatedAt,Yk);return AP(parseFloat(this.current)-parseFloat(this.prevFrameValue),e)}start(t){return this.stop(),new Promise(e=>{this.hasAnimated=!0,this.animation=t(e),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Fm(r,t){return new dI(r,t)}function fI(r,t,e){r.hasValue(t)?r.getValue(t).set(e):r.addValue(t,Fm(e))}function pI(r,t){const e=qw(r,t);let{transitionEnd:n={},transition:i={},...o}=e||{};o={...o,...n};for(const c in o){const u=kL(o[c]);fI(r,c,u)}}function mI(r){return!!(ui(r)&&r.add)}function PA(r,t){const e=r.getValue("willChange");if(mI(e))return e.add(t)}function SP(r){return r.props[J_]}const EP=(r,t,e)=>(((1-3*e+3*t)*r+(3*e-6*t))*r+3*t)*r,gI=1e-7,yI=12;function vI(r,t,e,n,i){let o,c,u=0;do c=t+(e-t)/2,o=EP(c,n,i)-r,o>0?e=c:t=c;while(Math.abs(o)>gI&&++u<yI);return c}function O0(r,t,e,n){if(r===t&&e===n)return xs;const i=o=>vI(o,0,1,r,e);return o=>o===0||o===1?o:EP(i(o),t,n)}const CP=r=>t=>t<=.5?r(2*t)/2:(2-r(2*(1-t)))/2,kP=r=>t=>1-r(1-t),TP=O0(.33,1.53,.69,.99),G1=kP(TP),_P=CP(G1),PP=r=>(r*=2)<1?.5*G1(r):.5*(2-Math.pow(2,-10*(r-1))),X1=r=>1-Math.sin(Math.acos(r)),RP=kP(X1),MP=CP(X1),DP=r=>/^0[^.\s]+$/u.test(r);function wI(r){return typeof r=="number"?r===0:r!==null?r==="none"||r==="0"||DP(r):!0}const Tm=r=>Math.round(r*1e5)/1e5,K1=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function xI(r){return r==null}const bI=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Y1=(r,t)=>e=>!!(typeof e=="string"&&bI.test(e)&&e.startsWith(r)||t&&!xI(e)&&Object.prototype.hasOwnProperty.call(e,t)),NP=(r,t,e)=>n=>{if(typeof n!="string")return n;const[i,o,c,u]=n.match(K1);return{[r]:parseFloat(i),[t]:parseFloat(o),[e]:parseFloat(c),alpha:u!==void 0?parseFloat(u):1}},AI=r=>va(0,255,r),Qb={...cp,transform:r=>Math.round(AI(r))},Kc={test:Y1("rgb","red"),parse:NP("red","green","blue"),transform:({red:r,green:t,blue:e,alpha:n=1})=>"rgba("+Qb.transform(r)+", "+Qb.transform(t)+", "+Qb.transform(e)+", "+Tm(Im.transform(n))+")"};function SI(r){let t="",e="",n="",i="";return r.length>5?(t=r.substring(1,3),e=r.substring(3,5),n=r.substring(5,7),i=r.substring(7,9)):(t=r.substring(1,2),e=r.substring(2,3),n=r.substring(3,4),i=r.substring(4,5),t+=t,e+=e,n+=n,i+=i),{red:parseInt(t,16),green:parseInt(e,16),blue:parseInt(n,16),alpha:i?parseInt(i,16)/255:1}}const RA={test:Y1("#"),parse:SI,transform:Kc.transform},vd={test:Y1("hsl","hue"),parse:NP("hue","saturation","lightness"),transform:({hue:r,saturation:t,lightness:e,alpha:n=1})=>"hsla("+Math.round(r)+", "+ao.transform(Tm(t))+", "+ao.transform(Tm(e))+", "+Tm(Im.transform(n))+")"},ci={test:r=>Kc.test(r)||RA.test(r)||vd.test(r),parse:r=>Kc.test(r)?Kc.parse(r):vd.test(r)?vd.parse(r):RA.parse(r),transform:r=>typeof r=="string"?r:r.hasOwnProperty("red")?Kc.transform(r):vd.transform(r)},EI=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function CI(r){var t,e;return isNaN(r)&&typeof r=="string"&&(((t=r.match(K1))===null||t===void 0?void 0:t.length)||0)+(((e=r.match(EI))===null||e===void 0?void 0:e.length)||0)>0}const LP="number",IP="color",kI="var",TI="var(",qk="${}",_I=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Om(r){const t=r.toString(),e=[],n={color:[],number:[],var:[]},i=[];let o=0;const u=t.replace(_I,h=>(ci.test(h)?(n.color.push(o),i.push(IP),e.push(ci.parse(h))):h.startsWith(TI)?(n.var.push(o),i.push(kI),e.push(h)):(n.number.push(o),i.push(LP),e.push(parseFloat(h))),++o,qk)).split(qk);return{values:e,split:u,indexes:n,types:i}}function FP(r){return Om(r).values}function OP(r){const{split:t,types:e}=Om(r),n=t.length;return i=>{let o="";for(let c=0;c<n;c++)if(o+=t[c],i[c]!==void 0){const u=e[c];u===LP?o+=Tm(i[c]):u===IP?o+=ci.transform(i[c]):o+=i[c]}return o}}const PI=r=>typeof r=="number"?0:r;function RI(r){const t=FP(r);return OP(r)(t.map(PI))}const Yl={test:CI,parse:FP,createTransformer:OP,getAnimatableNone:RI},MI=new Set(["brightness","contrast","saturate","opacity"]);function DI(r){const[t,e]=r.slice(0,-1).split("(");if(t==="drop-shadow")return r;const[n]=e.match(K1)||[];if(!n)return r;const i=e.replace(n,"");let o=MI.has(t)?1:0;return n!==e&&(o*=100),t+"("+o+i+")"}const NI=/\b([a-z-]*)\(.*?\)/gu,MA={...Yl,getAnimatableNone:r=>{const t=r.match(NI);return t?t.map(DI).join(" "):r}},LI={...N1,color:ci,backgroundColor:ci,outlineColor:ci,fill:ci,stroke:ci,borderColor:ci,borderTopColor:ci,borderRightColor:ci,borderBottomColor:ci,borderLeftColor:ci,filter:MA,WebkitFilter:MA},q1=r=>LI[r];function jP(r,t){let e=q1(r);return e!==MA&&(e=Yl),e.getAnimatableNone?e.getAnimatableNone(t):void 0}const II=new Set(["auto","none","0"]);function FI(r,t,e){let n=0,i;for(;n<r.length&&!i;){const o=r[n];typeof o=="string"&&!II.has(o)&&Om(o).values.length&&(i=r[n]),n++}if(i&&e)for(const o of t)r[o]=jP(e,i)}const Qk=r=>r===cp||r===Ot,Zk=(r,t)=>parseFloat(r.split(", ")[t]),Jk=(r,t)=>(e,{transform:n})=>{if(n==="none"||!n)return 0;const i=n.match(/^matrix3d\((.+)\)$/u);if(i)return Zk(i[1],t);{const o=n.match(/^matrix\((.+)\)$/u);return o?Zk(o[1],r):0}},OI=new Set(["x","y","z"]),jI=lp.filter(r=>!OI.has(r));function BI(r){const t=[];return jI.forEach(e=>{const n=r.getValue(e);n!==void 0&&(t.push([e,n.get()]),n.set(e.startsWith("scale")?1:0))}),t}const rp={width:({x:r},{paddingLeft:t="0",paddingRight:e="0"})=>r.max-r.min-parseFloat(t)-parseFloat(e),height:({y:r},{paddingTop:t="0",paddingBottom:e="0"})=>r.max-r.min-parseFloat(t)-parseFloat(e),top:(r,{top:t})=>parseFloat(t),left:(r,{left:t})=>parseFloat(t),bottom:({y:r},{top:t})=>parseFloat(t)+(r.max-r.min),right:({x:r},{left:t})=>parseFloat(t)+(r.max-r.min),x:Jk(4,13),y:Jk(5,14)};rp.translateX=rp.x;rp.translateY=rp.y;const uh=new Set;let DA=!1,NA=!1;function BP(){if(NA){const r=Array.from(uh).filter(n=>n.needsMeasurement),t=new Set(r.map(n=>n.element)),e=new Map;t.forEach(n=>{const i=BI(n);i.length&&(e.set(n,i),n.render())}),r.forEach(n=>n.measureInitialState()),t.forEach(n=>{n.render();const i=e.get(n);i&&i.forEach(([o,c])=>{var u;(u=n.getValue(o))===null||u===void 0||u.set(c)})}),r.forEach(n=>n.measureEndState()),r.forEach(n=>{n.suspendedScrollY!==void 0&&window.scrollTo(0,n.suspendedScrollY)})}NA=!1,DA=!1,uh.forEach(r=>r.complete()),uh.clear()}function UP(){uh.forEach(r=>{r.readKeyframes(),r.needsMeasurement&&(NA=!0)})}function UI(){UP(),BP()}class Q1{constructor(t,e,n,i,o,c=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...t],this.onComplete=e,this.name=n,this.motionValue=i,this.element=o,this.isAsync=c}scheduleResolve(){this.isScheduled=!0,this.isAsync?(uh.add(this),DA||(DA=!0,Oe.read(UP),Oe.resolveKeyframes(BP))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:e,element:n,motionValue:i}=this;for(let o=0;o<t.length;o++)if(t[o]===null)if(o===0){const c=i?.get(),u=t[t.length-1];if(c!==void 0)t[0]=c;else if(n&&e){const h=n.readValue(e,u);h!=null&&(t[0]=h)}t[0]===void 0&&(t[0]=u),i&&c===void 0&&i.set(t[0])}else t[o]=t[o-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),uh.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,uh.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const VP=r=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(r),VI=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function zI(r){const t=VI.exec(r);if(!t)return[,];const[,e,n,i]=t;return[`--${e??n}`,i]}function zP(r,t,e=1){const[n,i]=zI(r);if(!n)return;const o=window.getComputedStyle(t).getPropertyValue(n);if(o){const c=o.trim();return VP(c)?parseFloat(c):c}return D1(i)?zP(i,t,e+1):i}const HP=r=>t=>t.test(r),HI={test:r=>r==="auto",parse:r=>r},$P=[cp,Ot,ao,Ja,DL,ML,HI],tT=r=>$P.find(HP(r));class WP extends Q1{constructor(t,e,n,i,o){super(t,e,n,i,o,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:e,name:n}=this;if(!e||!e.current)return;super.readKeyframes();for(let h=0;h<t.length;h++){let f=t[h];if(typeof f=="string"&&(f=f.trim(),D1(f))){const p=zP(f,e.current);p!==void 0&&(t[h]=p),h===t.length-1&&(this.finalKeyframe=f)}}if(this.resolveNoneKeyframes(),!bP.has(n)||t.length!==2)return;const[i,o]=t,c=tT(i),u=tT(o);if(c!==u)if(Qk(c)&&Qk(u))for(let h=0;h<t.length;h++){const f=t[h];typeof f=="string"&&(t[h]=parseFloat(f))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:e}=this,n=[];for(let i=0;i<t.length;i++)wI(t[i])&&n.push(i);n.length&&FI(t,n,e)}measureInitialState(){const{element:t,unresolvedKeyframes:e,name:n}=this;if(!t||!t.current)return;n==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=rp[n](t.measureViewportBox(),window.getComputedStyle(t.current)),e[0]=this.measuredOrigin;const i=e[e.length-1];i!==void 0&&t.getValue(n,i).jump(i,!1)}measureEndState(){var t;const{element:e,name:n,unresolvedKeyframes:i}=this;if(!e||!e.current)return;const o=e.getValue(n);o&&o.jump(this.measuredOrigin,!1);const c=i.length-1,u=i[c];i[c]=rp[n](e.measureViewportBox(),window.getComputedStyle(e.current)),u!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=u),!((t=this.removedTransforms)===null||t===void 0)&&t.length&&this.removedTransforms.forEach(([h,f])=>{e.getValue(h).set(f)}),this.resolveNoneKeyframes()}}const eT=(r,t)=>t==="zIndex"?!1:!!(typeof r=="number"||Array.isArray(r)||typeof r=="string"&&(Yl.test(r)||r==="0")&&!r.startsWith("url("));function $I(r){const t=r[0];if(r.length===1)return!0;for(let e=0;e<r.length;e++)if(r[e]!==t)return!0}function WI(r,t,e,n){const i=r[0];if(i===null)return!1;if(t==="display"||t==="visibility")return!0;const o=r[r.length-1],c=eT(i,t),u=eT(o,t);return!c||!u?!1:$I(r)||(e==="spring"||U1(e))&&n}const GI=r=>r!==null;function Qw(r,{repeat:t,repeatType:e="loop"},n){const i=r.filter(GI),o=t&&e!=="loop"&&t%2===1?0:i.length-1;return!o||n===void 0?i[o]:n}const XI=40;class GP{constructor({autoplay:t=!0,delay:e=0,type:n="keyframes",repeat:i=0,repeatDelay:o=0,repeatType:c="loop",...u}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=lo.now(),this.options={autoplay:t,delay:e,type:n,repeat:i,repeatDelay:o,repeatType:c,...u},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>XI?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&UI(),this._resolved}onKeyframesResolved(t,e){this.resolvedAt=lo.now(),this.hasAttemptedResolve=!0;const{name:n,type:i,velocity:o,delay:c,onComplete:u,onUpdate:h,isGenerator:f}=this.options;if(!f&&!WI(t,n,i,o))if(c)this.options.duration=0;else{h&&h(Qw(t,this.options,e)),u&&u(),this.resolveFinishedPromise();return}const p=this.initPlayback(t,e);p!==!1&&(this._resolved={keyframes:t,finalKeyframe:e,...p},this.onPostResolved())}onPostResolved(){}then(t,e){return this.currentFinishedPromise.then(t,e)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(t=>{this.resolveFinishedPromise=t})}}const Ge=(r,t,e)=>r+(t-r)*e;function Zb(r,t,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?r+(t-r)*6*e:e<1/2?t:e<2/3?r+(t-r)*(2/3-e)*6:r}function KI({hue:r,saturation:t,lightness:e,alpha:n}){r/=360,t/=100,e/=100;let i=0,o=0,c=0;if(!t)i=o=c=e;else{const u=e<.5?e*(1+t):e+t-e*t,h=2*e-u;i=Zb(h,u,r+1/3),o=Zb(h,u,r),c=Zb(h,u,r-1/3)}return{red:Math.round(i*255),green:Math.round(o*255),blue:Math.round(c*255),alpha:n}}function ow(r,t){return e=>e>0?t:r}const Jb=(r,t,e)=>{const n=r*r,i=e*(t*t-n)+n;return i<0?0:Math.sqrt(i)},YI=[RA,Kc,vd],qI=r=>YI.find(t=>t.test(r));function nT(r){const t=qI(r);if(!t)return!1;let e=t.parse(r);return t===vd&&(e=KI(e)),e}const iT=(r,t)=>{const e=nT(r),n=nT(t);if(!e||!n)return ow(r,t);const i={...e};return o=>(i.red=Jb(e.red,n.red,o),i.green=Jb(e.green,n.green,o),i.blue=Jb(e.blue,n.blue,o),i.alpha=Ge(e.alpha,n.alpha,o),Kc.transform(i))},QI=(r,t)=>e=>t(r(e)),j0=(...r)=>r.reduce(QI),LA=new Set(["none","hidden"]);function ZI(r,t){return LA.has(r)?e=>e<=0?r:t:e=>e>=1?t:r}function JI(r,t){return e=>Ge(r,t,e)}function Z1(r){return typeof r=="number"?JI:typeof r=="string"?D1(r)?ow:ci.test(r)?iT:nF:Array.isArray(r)?XP:typeof r=="object"?ci.test(r)?iT:tF:ow}function XP(r,t){const e=[...r],n=e.length,i=r.map((o,c)=>Z1(o)(o,t[c]));return o=>{for(let c=0;c<n;c++)e[c]=i[c](o);return e}}function tF(r,t){const e={...r,...t},n={};for(const i in e)r[i]!==void 0&&t[i]!==void 0&&(n[i]=Z1(r[i])(r[i],t[i]));return i=>{for(const o in n)e[o]=n[o](i);return e}}function eF(r,t){var e;const n=[],i={color:0,var:0,number:0};for(let o=0;o<t.values.length;o++){const c=t.types[o],u=r.indexes[c][i[c]],h=(e=r.values[u])!==null&&e!==void 0?e:0;n[o]=h,i[c]++}return n}const nF=(r,t)=>{const e=Yl.createTransformer(t),n=Om(r),i=Om(t);return n.indexes.var.length===i.indexes.var.length&&n.indexes.color.length===i.indexes.color.length&&n.indexes.number.length>=i.indexes.number.length?LA.has(r)&&!i.values.length||LA.has(t)&&!n.values.length?ZI(r,t):j0(XP(eF(n,i),i.values),e):ow(r,t)};function KP(r,t,e){return typeof r=="number"&&typeof t=="number"&&typeof e=="number"?Ge(r,t,e):Z1(r)(r,t)}const iF=5;function YP(r,t,e){const n=Math.max(t-iF,0);return AP(e-r(n),t-n)}const tn={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},tA=.001;function sF({duration:r=tn.duration,bounce:t=tn.bounce,velocity:e=tn.velocity,mass:n=tn.mass}){let i,o,c=1-t;c=va(tn.minDamping,tn.maxDamping,c),r=va(tn.minDuration,tn.maxDuration,pa(r)),c<1?(i=f=>{const p=f*c,m=p*r,v=p-e,b=IA(f,c),C=Math.exp(-m);return tA-v/b*C},o=f=>{const m=f*c*r,v=m*e+e,b=Math.pow(c,2)*Math.pow(f,2)*r,C=Math.exp(-m),E=IA(Math.pow(f,2),c);return(-i(f)+tA>0?-1:1)*((v-b)*C)/E}):(i=f=>{const p=Math.exp(-f*r),m=(f-e)*r+1;return-tA+p*m},o=f=>{const p=Math.exp(-f*r),m=(e-f)*(r*r);return p*m});const u=5/r,h=oF(i,o,u);if(r=fa(r),isNaN(h))return{stiffness:tn.stiffness,damping:tn.damping,duration:r};{const f=Math.pow(h,2)*n;return{stiffness:f,damping:c*2*Math.sqrt(n*f),duration:r}}}const rF=12;function oF(r,t,e){let n=e;for(let i=1;i<rF;i++)n=n-r(n)/t(n);return n}function IA(r,t){return r*Math.sqrt(1-t*t)}const aF=["duration","bounce"],lF=["stiffness","damping","mass"];function sT(r,t){return t.some(e=>r[e]!==void 0)}function cF(r){let t={velocity:tn.velocity,stiffness:tn.stiffness,damping:tn.damping,mass:tn.mass,isResolvedFromDuration:!1,...r};if(!sT(r,lF)&&sT(r,aF))if(r.visualDuration){const e=r.visualDuration,n=2*Math.PI/(e*1.2),i=n*n,o=2*va(.05,1,1-(r.bounce||0))*Math.sqrt(i);t={...t,mass:tn.mass,stiffness:i,damping:o}}else{const e=sF(r);t={...t,...e,mass:tn.mass},t.isResolvedFromDuration=!0}return t}function qP(r=tn.visualDuration,t=tn.bounce){const e=typeof r!="object"?{visualDuration:r,keyframes:[0,1],bounce:t}:r;let{restSpeed:n,restDelta:i}=e;const o=e.keyframes[0],c=e.keyframes[e.keyframes.length-1],u={done:!1,value:o},{stiffness:h,damping:f,mass:p,duration:m,velocity:v,isResolvedFromDuration:b}=cF({...e,velocity:-pa(e.velocity||0)}),C=v||0,E=f/(2*Math.sqrt(h*p)),T=c-o,P=pa(Math.sqrt(h/p)),N=Math.abs(T)<5;n||(n=N?tn.restSpeed.granular:tn.restSpeed.default),i||(i=N?tn.restDelta.granular:tn.restDelta.default);let L;if(E<1){const O=IA(P,E);L=z=>{const K=Math.exp(-E*P*z);return c-K*((C+E*P*T)/O*Math.sin(O*z)+T*Math.cos(O*z))}}else if(E===1)L=O=>c-Math.exp(-P*O)*(T+(C+P*T)*O);else{const O=P*Math.sqrt(E*E-1);L=z=>{const K=Math.exp(-E*P*z),Y=Math.min(O*z,300);return c-K*((C+E*P*T)*Math.sinh(Y)+O*T*Math.cosh(Y))/O}}const F={calculatedDuration:b&&m||null,next:O=>{const z=L(O);if(b)u.done=O>=m;else{let K=0;E<1&&(K=O===0?fa(C):YP(L,O,z));const Y=Math.abs(K)<=n,nt=Math.abs(c-z)<=i;u.done=Y&&nt}return u.value=u.done?c:z,u},toString:()=>{const O=Math.min(pP(F),TA),z=mP(K=>F.next(O*K).value,O,30);return O+"ms "+z}};return F}function rT({keyframes:r,velocity:t=0,power:e=.8,timeConstant:n=325,bounceDamping:i=10,bounceStiffness:o=500,modifyTarget:c,min:u,max:h,restDelta:f=.5,restSpeed:p}){const m=r[0],v={done:!1,value:m},b=Y=>u!==void 0&&Y<u||h!==void 0&&Y>h,C=Y=>u===void 0?h:h===void 0||Math.abs(u-Y)<Math.abs(h-Y)?u:h;let E=e*t;const T=m+E,P=c===void 0?T:c(T);P!==T&&(E=P-m);const N=Y=>-E*Math.exp(-Y/n),L=Y=>P+N(Y),F=Y=>{const nt=N(Y),st=L(Y);v.done=Math.abs(nt)<=f,v.value=v.done?P:st};let O,z;const K=Y=>{b(v.value)&&(O=Y,z=qP({keyframes:[v.value,C(v.value)],velocity:YP(L,Y,v.value),damping:i,stiffness:o,restDelta:f,restSpeed:p}))};return K(0),{calculatedDuration:null,next:Y=>{let nt=!1;return!z&&O===void 0&&(nt=!0,F(Y),K(Y)),O!==void 0&&Y>=O?z.next(Y-O):(!nt&&F(Y),v)}}}const uF=O0(.42,0,1,1),hF=O0(0,0,.58,1),QP=O0(.42,0,.58,1),dF=r=>Array.isArray(r)&&typeof r[0]!="number",fF={linear:xs,easeIn:uF,easeInOut:QP,easeOut:hF,circIn:X1,circInOut:MP,circOut:RP,backIn:G1,backInOut:_P,backOut:TP,anticipate:PP},oT=r=>{if(V1(r)){K_(r.length===4);const[t,e,n,i]=r;return O0(t,e,n,i)}else if(typeof r=="string")return fF[r];return r};function pF(r,t,e){const n=[],i=e||KP,o=r.length-1;for(let c=0;c<o;c++){let u=i(r[c],r[c+1]);if(t){const h=Array.isArray(t)?t[c]||xs:t;u=j0(h,u)}n.push(u)}return n}function mF(r,t,{clamp:e=!0,ease:n,mixer:i}={}){const o=r.length;if(K_(o===t.length),o===1)return()=>t[0];if(o===2&&t[0]===t[1])return()=>t[1];const c=r[0]===r[1];r[0]>r[o-1]&&(r=[...r].reverse(),t=[...t].reverse());const u=pF(t,n,i),h=u.length,f=p=>{if(c&&p<r[0])return t[0];let m=0;if(h>1)for(;m<r.length-2&&!(p<r[m+1]);m++);const v=ip(r[m],r[m+1],p);return u[m](v)};return e?p=>f(va(r[0],r[o-1],p)):f}function gF(r,t){const e=r[r.length-1];for(let n=1;n<=t;n++){const i=ip(0,t,n);r.push(Ge(e,1,i))}}function yF(r){const t=[0];return gF(t,r.length-1),t}function vF(r,t){return r.map(e=>e*t)}function wF(r,t){return r.map(()=>t||QP).splice(0,r.length-1)}function aw({duration:r=300,keyframes:t,times:e,ease:n="easeInOut"}){const i=dF(n)?n.map(oT):oT(n),o={done:!1,value:t[0]},c=vF(e&&e.length===t.length?e:yF(t),r),u=mF(c,t,{ease:Array.isArray(i)?i:wF(t,i)});return{calculatedDuration:r,next:h=>(o.value=u(h),o.done=h>=r,o)}}const xF=r=>{const t=({timestamp:e})=>r(e);return{start:()=>Oe.update(t,!0),stop:()=>Kl(t),now:()=>Wn.isProcessing?Wn.timestamp:lo.now()}},bF={decay:rT,inertia:rT,tween:aw,keyframes:aw,spring:qP},AF=r=>r/100;class J1 extends GP{constructor(t){super(t),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:h}=this.options;h&&h()};const{name:e,motionValue:n,element:i,keyframes:o}=this.options,c=i?.KeyframeResolver||Q1,u=(h,f)=>this.onKeyframesResolved(h,f);this.resolver=new c(o,u,e,n,i),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(t){const{type:e="keyframes",repeat:n=0,repeatDelay:i=0,repeatType:o,velocity:c=0}=this.options,u=U1(e)?e:bF[e]||aw;let h,f;u!==aw&&typeof t[0]!="number"&&(h=j0(AF,KP(t[0],t[1])),t=[0,100]);const p=u({...this.options,keyframes:t});o==="mirror"&&(f=u({...this.options,keyframes:[...t].reverse(),velocity:-c})),p.calculatedDuration===null&&(p.calculatedDuration=pP(p));const{calculatedDuration:m}=p,v=m+i,b=v*(n+1)-i;return{generator:p,mirroredGenerator:f,mapPercentToKeyframes:h,calculatedDuration:m,resolvedDuration:v,totalDuration:b}}onPostResolved(){const{autoplay:t=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!t?this.pause():this.state=this.pendingPlayState}tick(t,e=!1){const{resolved:n}=this;if(!n){const{keyframes:Y}=this.options;return{done:!0,value:Y[Y.length-1]}}const{finalKeyframe:i,generator:o,mirroredGenerator:c,mapPercentToKeyframes:u,keyframes:h,calculatedDuration:f,totalDuration:p,resolvedDuration:m}=n;if(this.startTime===null)return o.next(0);const{delay:v,repeat:b,repeatType:C,repeatDelay:E,onUpdate:T}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-p/this.speed,this.startTime)),e?this.currentTime=t:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(t-this.startTime)*this.speed;const P=this.currentTime-v*(this.speed>=0?1:-1),N=this.speed>=0?P<0:P>p;this.currentTime=Math.max(P,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=p);let L=this.currentTime,F=o;if(b){const Y=Math.min(this.currentTime,p)/m;let nt=Math.floor(Y),st=Y%1;!st&&Y>=1&&(st=1),st===1&&nt--,nt=Math.min(nt,b+1),!!(nt%2)&&(C==="reverse"?(st=1-st,E&&(st-=E/m)):C==="mirror"&&(F=c)),L=va(0,1,st)*m}const O=N?{done:!1,value:h[0]}:F.next(L);u&&(O.value=u(O.value));let{done:z}=O;!N&&f!==null&&(z=this.speed>=0?this.currentTime>=p:this.currentTime<=0);const K=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&z);return K&&i!==void 0&&(O.value=Qw(h,this.options,i)),T&&T(O.value),K&&this.finish(),O}get duration(){const{resolved:t}=this;return t?pa(t.calculatedDuration):0}get time(){return pa(this.currentTime)}set time(t){t=fa(t),this.currentTime=t,this.holdTime!==null||this.speed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.speed)}get speed(){return this.playbackSpeed}set speed(t){const e=this.playbackSpeed!==t;this.playbackSpeed=t,e&&(this.time=pa(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:t=xF,onPlay:e,startTime:n}=this.options;this.driver||(this.driver=t(o=>this.tick(o))),e&&e();const i=this.driver.now();this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=i):this.startTime=n??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var t;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(t=this.currentTime)!==null&&t!==void 0?t:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:t}=this.options;t&&t()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}}const SF=new Set(["opacity","clipPath","filter","transform"]);function EF(r,t,e,{delay:n=0,duration:i=300,repeat:o=0,repeatType:c="loop",ease:u="easeInOut",times:h}={}){const f={[t]:e};h&&(f.offset=h);const p=yP(u,i);return Array.isArray(p)&&(f.easing=p),r.animate(f,{delay:n,duration:i,easing:Array.isArray(p)?"linear":p,fill:"both",iterations:o+1,direction:c==="reverse"?"alternate":"normal"})}const CF=C1(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),lw=10,kF=2e4;function TF(r){return U1(r.type)||r.type==="spring"||!gP(r.ease)}function _F(r,t){const e=new J1({...t,keyframes:r,repeat:0,delay:0,isGenerator:!0});let n={done:!1,value:r[0]};const i=[];let o=0;for(;!n.done&&o<kF;)n=e.sample(o),i.push(n.value),o+=lw;return{times:void 0,keyframes:i,duration:o-lw,ease:"linear"}}const ZP={anticipate:PP,backInOut:_P,circInOut:MP};function PF(r){return r in ZP}class aT extends GP{constructor(t){super(t);const{name:e,motionValue:n,element:i,keyframes:o}=this.options;this.resolver=new WP(o,(c,u)=>this.onKeyframesResolved(c,u),e,n,i),this.resolver.scheduleResolve()}initPlayback(t,e){let{duration:n=300,times:i,ease:o,type:c,motionValue:u,name:h,startTime:f}=this.options;if(!u.owner||!u.owner.current)return!1;if(typeof o=="string"&&rw()&&PF(o)&&(o=ZP[o]),TF(this.options)){const{onComplete:m,onUpdate:v,motionValue:b,element:C,...E}=this.options,T=_F(t,E);t=T.keyframes,t.length===1&&(t[1]=t[0]),n=T.duration,i=T.times,o=T.ease,c="keyframes"}const p=EF(u.owner.current,h,t,{...this.options,duration:n,times:i,ease:o});return p.startTime=f??this.calcStartTime(),this.pendingTimeline?(Wk(p,this.pendingTimeline),this.pendingTimeline=void 0):p.onfinish=()=>{const{onComplete:m}=this.options;u.set(Qw(t,this.options,e)),m&&m(),this.cancel(),this.resolveFinishedPromise()},{animation:p,duration:n,times:i,type:c,ease:o,keyframes:t}}get duration(){const{resolved:t}=this;if(!t)return 0;const{duration:e}=t;return pa(e)}get time(){const{resolved:t}=this;if(!t)return 0;const{animation:e}=t;return pa(e.currentTime||0)}set time(t){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.currentTime=fa(t)}get speed(){const{resolved:t}=this;if(!t)return 1;const{animation:e}=t;return e.playbackRate}set speed(t){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playbackRate=t}get state(){const{resolved:t}=this;if(!t)return"idle";const{animation:e}=t;return e.playState}get startTime(){const{resolved:t}=this;if(!t)return null;const{animation:e}=t;return e.startTime}attachTimeline(t){if(!this._resolved)this.pendingTimeline=t;else{const{resolved:e}=this;if(!e)return xs;const{animation:n}=e;Wk(n,t)}return xs}play(){if(this.isStopped)return;const{resolved:t}=this;if(!t)return;const{animation:e}=t;e.playState==="finished"&&this.updateFinishedPromise(),e.play()}pause(){const{resolved:t}=this;if(!t)return;const{animation:e}=t;e.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:t}=this;if(!t)return;const{animation:e,keyframes:n,duration:i,type:o,ease:c,times:u}=t;if(e.playState==="idle"||e.playState==="finished")return;if(this.time){const{motionValue:f,onUpdate:p,onComplete:m,element:v,...b}=this.options,C=new J1({...b,keyframes:n,duration:i,type:o,ease:c,times:u,isGenerator:!0}),E=fa(this.time);f.setWithVelocity(C.sample(E-lw).value,C.sample(E).value,lw)}const{onStop:h}=this.options;h&&h(),this.cancel()}complete(){const{resolved:t}=this;t&&t.animation.finish()}cancel(){const{resolved:t}=this;t&&t.animation.cancel()}static supports(t){const{motionValue:e,name:n,repeatDelay:i,repeatType:o,damping:c,type:u}=t;if(!e||!e.owner||!(e.owner.current instanceof HTMLElement))return!1;const{onUpdate:h,transformTemplate:f}=e.owner.getProps();return CF()&&n&&SF.has(n)&&!h&&!f&&!i&&o!=="mirror"&&c!==0&&u!=="inertia"}}const RF={type:"spring",stiffness:500,damping:25,restSpeed:10},MF=r=>({type:"spring",stiffness:550,damping:r===0?2*Math.sqrt(550):30,restSpeed:10}),DF={type:"keyframes",duration:.8},NF={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},LF=(r,{keyframes:t})=>t.length>2?DF:mh.has(r)?r.startsWith("scale")?MF(t[1]):RF:NF;function IF({when:r,delay:t,delayChildren:e,staggerChildren:n,staggerDirection:i,repeat:o,repeatType:c,repeatDelay:u,from:h,elapsed:f,...p}){return!!Object.keys(p).length}const tE=(r,t,e,n={},i,o)=>c=>{const u=B1(n,r)||{},h=u.delay||n.delay||0;let{elapsed:f=0}=n;f=f-fa(h);let p={keyframes:Array.isArray(e)?e:[null,e],ease:"easeOut",velocity:t.getVelocity(),...u,delay:-f,onUpdate:v=>{t.set(v),u.onUpdate&&u.onUpdate(v)},onComplete:()=>{c(),u.onComplete&&u.onComplete()},name:r,motionValue:t,element:o?void 0:i};IF(u)||(p={...p,...LF(r,p)}),p.duration&&(p.duration=fa(p.duration)),p.repeatDelay&&(p.repeatDelay=fa(p.repeatDelay)),p.from!==void 0&&(p.keyframes[0]=p.from);let m=!1;if((p.type===!1||p.duration===0&&!p.repeatDelay)&&(p.duration=0,p.delay===0&&(m=!0)),m&&!o&&t.get()!==void 0){const v=Qw(p.keyframes,u);if(v!==void 0)return Oe.update(()=>{p.onUpdate(v),p.onComplete()}),new tI([])}return!o&&aT.supports(p)?new aT(p):new J1(p)};function FF({protectedKeys:r,needsAnimating:t},e){const n=r.hasOwnProperty(e)&&t[e]!==!0;return t[e]=!1,n}function JP(r,t,{delay:e=0,transitionOverride:n,type:i}={}){var o;let{transition:c=r.getDefaultTransition(),transitionEnd:u,...h}=t;n&&(c=n);const f=[],p=i&&r.animationState&&r.animationState.getState()[i];for(const m in h){const v=r.getValue(m,(o=r.latestValues[m])!==null&&o!==void 0?o:null),b=h[m];if(b===void 0||p&&FF(p,m))continue;const C={delay:e,...B1(c||{},m)};let E=!1;if(window.MotionHandoffAnimation){const P=SP(r);if(P){const N=window.MotionHandoffAnimation(P,m,Oe);N!==null&&(C.startTime=N,E=!0)}}PA(r,m),v.start(tE(m,v,b,r.shouldReduceMotion&&bP.has(m)?{type:!1}:C,r,E));const T=v.animation;T&&f.push(T)}return u&&Promise.all(f).then(()=>{Oe.update(()=>{u&&pI(r,u)})}),f}function FA(r,t,e={}){var n;const i=qw(r,t,e.type==="exit"?(n=r.presenceContext)===null||n===void 0?void 0:n.custom:void 0);let{transition:o=r.getDefaultTransition()||{}}=i||{};e.transitionOverride&&(o=e.transitionOverride);const c=i?()=>Promise.all(JP(r,i,e)):()=>Promise.resolve(),u=r.variantChildren&&r.variantChildren.size?(f=0)=>{const{delayChildren:p=0,staggerChildren:m,staggerDirection:v}=o;return OF(r,t,p+f,m,v,e)}:()=>Promise.resolve(),{when:h}=o;if(h){const[f,p]=h==="beforeChildren"?[c,u]:[u,c];return f().then(()=>p())}else return Promise.all([c(),u(e.delay)])}function OF(r,t,e=0,n=0,i=1,o){const c=[],u=(r.variantChildren.size-1)*n,h=i===1?(f=0)=>f*n:(f=0)=>u-f*n;return Array.from(r.variantChildren).sort(jF).forEach((f,p)=>{f.notify("AnimationStart",t),c.push(FA(f,t,{...o,delay:e+h(p)}).then(()=>f.notify("AnimationComplete",t)))}),Promise.all(c)}function jF(r,t){return r.sortNodePosition(t)}function BF(r,t,e={}){r.notify("AnimationStart",t);let n;if(Array.isArray(t)){const i=t.map(o=>FA(r,o,e));n=Promise.all(i)}else if(typeof t=="string")n=FA(r,t,e);else{const i=typeof t=="function"?qw(r,t,e.custom):t;n=Promise.all(JP(r,i,e))}return n.then(()=>{r.notify("AnimationComplete",t)})}const UF=T1.length;function t2(r){if(!r)return;if(!r.isControllingVariants){const e=r.parent?t2(r.parent)||{}:{};return r.props.initial!==void 0&&(e.initial=r.props.initial),e}const t={};for(let e=0;e<UF;e++){const n=T1[e],i=r.props[n];(Lm(i)||i===!1)&&(t[n]=i)}return t}const VF=[...k1].reverse(),zF=k1.length;function HF(r){return t=>Promise.all(t.map(({animation:e,options:n})=>BF(r,e,n)))}function $F(r){let t=HF(r),e=lT(),n=!0;const i=h=>(f,p)=>{var m;const v=qw(r,p,h==="exit"?(m=r.presenceContext)===null||m===void 0?void 0:m.custom:void 0);if(v){const{transition:b,transitionEnd:C,...E}=v;f={...f,...E,...C}}return f};function o(h){t=h(r)}function c(h){const{props:f}=r,p=t2(r.parent)||{},m=[],v=new Set;let b={},C=1/0;for(let T=0;T<zF;T++){const P=VF[T],N=e[P],L=f[P]!==void 0?f[P]:p[P],F=Lm(L),O=P===h?N.isActive:null;O===!1&&(C=T);let z=L===p[P]&&L!==f[P]&&F;if(z&&n&&r.manuallyAnimateOnMount&&(z=!1),N.protectedKeys={...b},!N.isActive&&O===null||!L&&!N.prevProp||Kw(L)||typeof L=="boolean")continue;const K=WF(N.prevProp,L);let Y=K||P===h&&N.isActive&&!z&&F||T>C&&F,nt=!1;const st=Array.isArray(L)?L:[L];let it=st.reduce(i(P),{});O===!1&&(it={});const{prevResolvedValues:Mt={}}=N,xt={...Mt,...it},Ct=lt=>{Y=!0,v.has(lt)&&(nt=!0,v.delete(lt)),N.needsAnimating[lt]=!0;const et=r.getValue(lt);et&&(et.liveStyle=!1)};for(const lt in xt){const et=it[lt],mt=Mt[lt];if(b.hasOwnProperty(lt))continue;let ht=!1;kA(et)&&kA(mt)?ht=!fP(et,mt):ht=et!==mt,ht?et!=null?Ct(lt):v.add(lt):et!==void 0&&v.has(lt)?Ct(lt):N.protectedKeys[lt]=!0}N.prevProp=L,N.prevResolvedValues=it,N.isActive&&(b={...b,...it}),n&&r.blockInitialAnimation&&(Y=!1),Y&&(!(z&&K)||nt)&&m.push(...st.map(lt=>({animation:lt,options:{type:P}})))}if(v.size){const T={};v.forEach(P=>{const N=r.getBaseTarget(P),L=r.getValue(P);L&&(L.liveStyle=!0),T[P]=N??null}),m.push({animation:T})}let E=!!m.length;return n&&(f.initial===!1||f.initial===f.animate)&&!r.manuallyAnimateOnMount&&(E=!1),n=!1,E?t(m):Promise.resolve()}function u(h,f){var p;if(e[h].isActive===f)return Promise.resolve();(p=r.variantChildren)===null||p===void 0||p.forEach(v=>{var b;return(b=v.animationState)===null||b===void 0?void 0:b.setActive(h,f)}),e[h].isActive=f;const m=c(h);for(const v in e)e[v].protectedKeys={};return m}return{animateChanges:c,setActive:u,setAnimateFunction:o,getState:()=>e,reset:()=>{e=lT(),n=!0}}}function WF(r,t){return typeof t=="string"?t!==r:Array.isArray(t)?!fP(t,r):!1}function Bc(r=!1){return{isActive:r,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function lT(){return{animate:Bc(!0),whileInView:Bc(),whileHover:Bc(),whileTap:Bc(),whileDrag:Bc(),whileFocus:Bc(),exit:Bc()}}class tc{constructor(t){this.isMounted=!1,this.node=t}update(){}}class GF extends tc{constructor(t){super(t),t.animationState||(t.animationState=$F(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();Kw(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:e}=this.node.prevProps||{};t!==e&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)===null||t===void 0||t.call(this)}}let XF=0;class KF extends tc{constructor(){super(...arguments),this.id=XF++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:e}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===n)return;const i=this.node.animationState.setActive("exit",!t);e&&!t&&i.then(()=>e(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const YF={animation:{Feature:GF},exit:{Feature:KF}};function jm(r,t,e,n={passive:!0}){return r.addEventListener(t,e,n),()=>r.removeEventListener(t,e)}function B0(r){return{point:{x:r.pageX,y:r.pageY}}}const qF=r=>t=>z1(t)&&r(t,B0(t));function _m(r,t,e,n){return jm(r,t,qF(e),n)}const cT=(r,t)=>Math.abs(r-t);function QF(r,t){const e=cT(r.x,t.x),n=cT(r.y,t.y);return Math.sqrt(e**2+n**2)}class e2{constructor(t,e,{transformPagePoint:n,contextWindow:i,dragSnapToOrigin:o=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const m=nA(this.lastMoveEventInfo,this.history),v=this.startEvent!==null,b=QF(m.offset,{x:0,y:0})>=3;if(!v&&!b)return;const{point:C}=m,{timestamp:E}=Wn;this.history.push({...C,timestamp:E});const{onStart:T,onMove:P}=this.handlers;v||(T&&T(this.lastMoveEvent,m),this.startEvent=this.lastMoveEvent),P&&P(this.lastMoveEvent,m)},this.handlePointerMove=(m,v)=>{this.lastMoveEvent=m,this.lastMoveEventInfo=eA(v,this.transformPagePoint),Oe.update(this.updatePoint,!0)},this.handlePointerUp=(m,v)=>{this.end();const{onEnd:b,onSessionEnd:C,resumeAnimation:E}=this.handlers;if(this.dragSnapToOrigin&&E&&E(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const T=nA(m.type==="pointercancel"?this.lastMoveEventInfo:eA(v,this.transformPagePoint),this.history);this.startEvent&&b&&b(m,T),C&&C(m,T)},!z1(t))return;this.dragSnapToOrigin=o,this.handlers=e,this.transformPagePoint=n,this.contextWindow=i||window;const c=B0(t),u=eA(c,this.transformPagePoint),{point:h}=u,{timestamp:f}=Wn;this.history=[{...h,timestamp:f}];const{onSessionStart:p}=e;p&&p(t,nA(u,this.history)),this.removeListeners=j0(_m(this.contextWindow,"pointermove",this.handlePointerMove),_m(this.contextWindow,"pointerup",this.handlePointerUp),_m(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Kl(this.updatePoint)}}function eA(r,t){return t?{point:t(r.point)}:r}function uT(r,t){return{x:r.x-t.x,y:r.y-t.y}}function nA({point:r},t){return{point:r,delta:uT(r,n2(t)),offset:uT(r,ZF(t)),velocity:JF(t,.1)}}function ZF(r){return r[0]}function n2(r){return r[r.length-1]}function JF(r,t){if(r.length<2)return{x:0,y:0};let e=r.length-1,n=null;const i=n2(r);for(;e>=0&&(n=r[e],!(i.timestamp-n.timestamp>fa(t)));)e--;if(!n)return{x:0,y:0};const o=pa(i.timestamp-n.timestamp);if(o===0)return{x:0,y:0};const c={x:(i.x-n.x)/o,y:(i.y-n.y)/o};return c.x===1/0&&(c.x=0),c.y===1/0&&(c.y=0),c}const i2=1e-4,tO=1-i2,eO=1+i2,s2=.01,nO=0-s2,iO=0+s2;function As(r){return r.max-r.min}function sO(r,t,e){return Math.abs(r-t)<=e}function hT(r,t,e,n=.5){r.origin=n,r.originPoint=Ge(t.min,t.max,r.origin),r.scale=As(e)/As(t),r.translate=Ge(e.min,e.max,r.origin)-r.originPoint,(r.scale>=tO&&r.scale<=eO||isNaN(r.scale))&&(r.scale=1),(r.translate>=nO&&r.translate<=iO||isNaN(r.translate))&&(r.translate=0)}function Pm(r,t,e,n){hT(r.x,t.x,e.x,n?n.originX:void 0),hT(r.y,t.y,e.y,n?n.originY:void 0)}function dT(r,t,e){r.min=e.min+t.min,r.max=r.min+As(t)}function rO(r,t,e){dT(r.x,t.x,e.x),dT(r.y,t.y,e.y)}function fT(r,t,e){r.min=t.min-e.min,r.max=r.min+As(t)}function Rm(r,t,e){fT(r.x,t.x,e.x),fT(r.y,t.y,e.y)}function oO(r,{min:t,max:e},n){return t!==void 0&&r<t?r=n?Ge(t,r,n.min):Math.max(r,t):e!==void 0&&r>e&&(r=n?Ge(e,r,n.max):Math.min(r,e)),r}function pT(r,t,e){return{min:t!==void 0?r.min+t:void 0,max:e!==void 0?r.max+e-(r.max-r.min):void 0}}function aO(r,{top:t,left:e,bottom:n,right:i}){return{x:pT(r.x,e,i),y:pT(r.y,t,n)}}function mT(r,t){let e=t.min-r.min,n=t.max-r.max;return t.max-t.min<r.max-r.min&&([e,n]=[n,e]),{min:e,max:n}}function lO(r,t){return{x:mT(r.x,t.x),y:mT(r.y,t.y)}}function cO(r,t){let e=.5;const n=As(r),i=As(t);return i>n?e=ip(t.min,t.max-n,r.min):n>i&&(e=ip(r.min,r.max-i,t.min)),va(0,1,e)}function uO(r,t){const e={};return t.min!==void 0&&(e.min=t.min-r.min),t.max!==void 0&&(e.max=t.max-r.min),e}const OA=.35;function hO(r=OA){return r===!1?r=0:r===!0&&(r=OA),{x:gT(r,"left","right"),y:gT(r,"top","bottom")}}function gT(r,t,e){return{min:yT(r,t),max:yT(r,e)}}function yT(r,t){return typeof r=="number"?r:r[t]||0}const vT=()=>({translate:0,scale:1,origin:0,originPoint:0}),wd=()=>({x:vT(),y:vT()}),wT=()=>({min:0,max:0}),ln=()=>({x:wT(),y:wT()});function Ls(r){return[r("x"),r("y")]}function r2({top:r,left:t,right:e,bottom:n}){return{x:{min:t,max:e},y:{min:r,max:n}}}function dO({x:r,y:t}){return{top:t.min,right:r.max,bottom:t.max,left:r.min}}function fO(r,t){if(!t)return r;const e=t({x:r.left,y:r.top}),n=t({x:r.right,y:r.bottom});return{top:e.y,left:e.x,bottom:n.y,right:n.x}}function iA(r){return r===void 0||r===1}function jA({scale:r,scaleX:t,scaleY:e}){return!iA(r)||!iA(t)||!iA(e)}function Uc(r){return jA(r)||o2(r)||r.z||r.rotate||r.rotateX||r.rotateY||r.skewX||r.skewY}function o2(r){return xT(r.x)||xT(r.y)}function xT(r){return r&&r!=="0%"}function cw(r,t,e){const n=r-e,i=t*n;return e+i}function bT(r,t,e,n,i){return i!==void 0&&(r=cw(r,i,n)),cw(r,e,n)+t}function BA(r,t=0,e=1,n,i){r.min=bT(r.min,t,e,n,i),r.max=bT(r.max,t,e,n,i)}function a2(r,{x:t,y:e}){BA(r.x,t.translate,t.scale,t.originPoint),BA(r.y,e.translate,e.scale,e.originPoint)}const AT=.999999999999,ST=1.0000000000001;function pO(r,t,e,n=!1){const i=e.length;if(!i)return;t.x=t.y=1;let o,c;for(let u=0;u<i;u++){o=e[u],c=o.projectionDelta;const{visualElement:h}=o.options;h&&h.props.style&&h.props.style.display==="contents"||(n&&o.options.layoutScroll&&o.scroll&&o!==o.root&&bd(r,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),c&&(t.x*=c.x.scale,t.y*=c.y.scale,a2(r,c)),n&&Uc(o.latestValues)&&bd(r,o.latestValues))}t.x<ST&&t.x>AT&&(t.x=1),t.y<ST&&t.y>AT&&(t.y=1)}function xd(r,t){r.min=r.min+t,r.max=r.max+t}function ET(r,t,e,n,i=.5){const o=Ge(r.min,r.max,i);BA(r,t,e,o,n)}function bd(r,t){ET(r.x,t.x,t.scaleX,t.scale,t.originX),ET(r.y,t.y,t.scaleY,t.scale,t.originY)}function l2(r,t){return r2(fO(r.getBoundingClientRect(),t))}function mO(r,t,e){const n=l2(r,e),{scroll:i}=t;return i&&(xd(n.x,i.offset.x),xd(n.y,i.offset.y)),n}const c2=({current:r})=>r?r.ownerDocument.defaultView:null,gO=new WeakMap;class yO{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=ln(),this.visualElement=t}start(t,{snapToCursor:e=!1}={}){const{presenceContext:n}=this.visualElement;if(n&&n.isPresent===!1)return;const i=p=>{const{dragSnapToOrigin:m}=this.getProps();m?this.pauseAnimation():this.stopAnimation(),e&&this.snapToCursor(B0(p).point)},o=(p,m)=>{const{drag:v,dragPropagation:b,onDragStart:C}=this.getProps();if(v&&!b&&(this.openDragLock&&this.openDragLock(),this.openDragLock=cI(v),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Ls(T=>{let P=this.getAxisMotionValue(T).get()||0;if(ao.test(P)){const{projection:N}=this.visualElement;if(N&&N.layout){const L=N.layout.layoutBox[T];L&&(P=As(L)*(parseFloat(P)/100))}}this.originPoint[T]=P}),C&&Oe.postRender(()=>C(p,m)),PA(this.visualElement,"transform");const{animationState:E}=this.visualElement;E&&E.setActive("whileDrag",!0)},c=(p,m)=>{const{dragPropagation:v,dragDirectionLock:b,onDirectionLock:C,onDrag:E}=this.getProps();if(!v&&!this.openDragLock)return;const{offset:T}=m;if(b&&this.currentDirection===null){this.currentDirection=vO(T),this.currentDirection!==null&&C&&C(this.currentDirection);return}this.updateAxis("x",m.point,T),this.updateAxis("y",m.point,T),this.visualElement.render(),E&&E(p,m)},u=(p,m)=>this.stop(p,m),h=()=>Ls(p=>{var m;return this.getAnimationState(p)==="paused"&&((m=this.getAxisMotionValue(p).animation)===null||m===void 0?void 0:m.play())}),{dragSnapToOrigin:f}=this.getProps();this.panSession=new e2(t,{onSessionStart:i,onStart:o,onMove:c,onSessionEnd:u,resumeAnimation:h},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:f,contextWindow:c2(this.visualElement)})}stop(t,e){const n=this.isDragging;if(this.cancel(),!n)return;const{velocity:i}=e;this.startAnimation(i);const{onDragEnd:o}=this.getProps();o&&Oe.postRender(()=>o(t,e))}cancel(){this.isDragging=!1;const{projection:t,animationState:e}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),e&&e.setActive("whileDrag",!1)}updateAxis(t,e,n){const{drag:i}=this.getProps();if(!n||!lv(t,i,this.currentDirection))return;const o=this.getAxisMotionValue(t);let c=this.originPoint[t]+n[t];this.constraints&&this.constraints[t]&&(c=oO(c,this.constraints[t],this.elastic[t])),o.set(c)}resolveConstraints(){var t;const{dragConstraints:e,dragElastic:n}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)===null||t===void 0?void 0:t.layout,o=this.constraints;e&&yd(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&i?this.constraints=aO(i.layoutBox,e):this.constraints=!1,this.elastic=hO(n),o!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&Ls(c=>{this.constraints!==!1&&this.getAxisMotionValue(c)&&(this.constraints[c]=uO(i.layoutBox[c],this.constraints[c]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:e}=this.getProps();if(!t||!yd(t))return!1;const n=t.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const o=mO(n,i.root,this.visualElement.getTransformPagePoint());let c=lO(i.layout.layoutBox,o);if(e){const u=e(dO(c));this.hasMutatedConstraints=!!u,u&&(c=r2(u))}return c}startAnimation(t){const{drag:e,dragMomentum:n,dragElastic:i,dragTransition:o,dragSnapToOrigin:c,onDragTransitionEnd:u}=this.getProps(),h=this.constraints||{},f=Ls(p=>{if(!lv(p,e,this.currentDirection))return;let m=h&&h[p]||{};c&&(m={min:0,max:0});const v=i?200:1e6,b=i?40:1e7,C={type:"inertia",velocity:n?t[p]:0,bounceStiffness:v,bounceDamping:b,timeConstant:750,restDelta:1,restSpeed:10,...o,...m};return this.startAxisValueAnimation(p,C)});return Promise.all(f).then(u)}startAxisValueAnimation(t,e){const n=this.getAxisMotionValue(t);return PA(this.visualElement,t),n.start(tE(t,n,0,e,this.visualElement,!1))}stopAnimation(){Ls(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){Ls(t=>{var e;return(e=this.getAxisMotionValue(t).animation)===null||e===void 0?void 0:e.pause()})}getAnimationState(t){var e;return(e=this.getAxisMotionValue(t).animation)===null||e===void 0?void 0:e.state}getAxisMotionValue(t){const e=`_drag${t.toUpperCase()}`,n=this.visualElement.getProps(),i=n[e];return i||this.visualElement.getValue(t,(n.initial?n.initial[t]:void 0)||0)}snapToCursor(t){Ls(e=>{const{drag:n}=this.getProps();if(!lv(e,n,this.currentDirection))return;const{projection:i}=this.visualElement,o=this.getAxisMotionValue(e);if(i&&i.layout){const{min:c,max:u}=i.layout.layoutBox[e];o.set(t[e]-Ge(c,u,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:e}=this.getProps(),{projection:n}=this.visualElement;if(!yd(e)||!n||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Ls(c=>{const u=this.getAxisMotionValue(c);if(u&&this.constraints!==!1){const h=u.get();i[c]=cO({min:h,max:h},this.constraints[c])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),Ls(c=>{if(!lv(c,t,null))return;const u=this.getAxisMotionValue(c),{min:h,max:f}=this.constraints[c];u.set(Ge(h,f,i[c]))})}addListeners(){if(!this.visualElement.current)return;gO.set(this.visualElement,this);const t=this.visualElement.current,e=_m(t,"pointerdown",h=>{const{drag:f,dragListener:p=!0}=this.getProps();f&&p&&this.start(h)}),n=()=>{const{dragConstraints:h}=this.getProps();yd(h)&&h.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,o=i.addEventListener("measure",n);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),Oe.read(n);const c=jm(window,"resize",()=>this.scalePositionWithinConstraints()),u=i.addEventListener("didUpdate",(({delta:h,hasLayoutChanged:f})=>{this.isDragging&&f&&(Ls(p=>{const m=this.getAxisMotionValue(p);m&&(this.originPoint[p]+=h[p].translate,m.set(m.get()+h[p].translate))}),this.visualElement.render())}));return()=>{c(),e(),o(),u&&u()}}getProps(){const t=this.visualElement.getProps(),{drag:e=!1,dragDirectionLock:n=!1,dragPropagation:i=!1,dragConstraints:o=!1,dragElastic:c=OA,dragMomentum:u=!0}=t;return{...t,drag:e,dragDirectionLock:n,dragPropagation:i,dragConstraints:o,dragElastic:c,dragMomentum:u}}}function lv(r,t,e){return(t===!0||t===r)&&(e===null||e===r)}function vO(r,t=10){let e=null;return Math.abs(r.y)>t?e="y":Math.abs(r.x)>t&&(e="x"),e}class wO extends tc{constructor(t){super(t),this.removeGroupControls=xs,this.removeListeners=xs,this.controls=new yO(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||xs}unmount(){this.removeGroupControls(),this.removeListeners()}}const CT=r=>(t,e)=>{r&&Oe.postRender(()=>r(t,e))};class xO extends tc{constructor(){super(...arguments),this.removePointerDownListener=xs}onPointerDown(t){this.session=new e2(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:c2(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:e,onPan:n,onPanEnd:i}=this.node.getProps();return{onSessionStart:CT(t),onStart:CT(e),onMove:n,onEnd:(o,c)=>{delete this.session,i&&Oe.postRender(()=>i(o,c))}}}mount(){this.removePointerDownListener=_m(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const xv={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function kT(r,t){return t.max===t.min?0:r/(t.max-t.min)*100}const Qp={correct:(r,t)=>{if(!t.target)return r;if(typeof r=="string")if(Ot.test(r))r=parseFloat(r);else return r;const e=kT(r,t.target.x),n=kT(r,t.target.y);return`${e}% ${n}%`}},bO={correct:(r,{treeScale:t,projectionDelta:e})=>{const n=r,i=Yl.parse(r);if(i.length>5)return n;const o=Yl.createTransformer(r),c=typeof i[0]!="number"?1:0,u=e.x.scale*t.x,h=e.y.scale*t.y;i[0+c]/=u,i[1+c]/=h;const f=Ge(u,h,.5);return typeof i[2+c]=="number"&&(i[2+c]/=f),typeof i[3+c]=="number"&&(i[3+c]/=f),o(i)}};class AO extends $.Component{componentDidMount(){const{visualElement:t,layoutGroup:e,switchLayoutGroup:n,layoutId:i}=this.props,{projection:o}=t;zL(SO),o&&(e.group&&e.group.add(o),n&&n.register&&i&&n.register(o),o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),xv.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:e,visualElement:n,drag:i,isPresent:o}=this.props,c=n.projection;return c&&(c.isPresent=o,i||t.layoutDependency!==e||e===void 0?c.willUpdate():this.safeToRemove(),t.isPresent!==o&&(o?c.promote():c.relegate()||Oe.postRender(()=>{const u=c.getStack();(!u||!u.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),P1.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:e,switchLayoutGroup:n}=this.props,{projection:i}=t;i&&(i.scheduleCheckAfterUnmount(),e&&e.group&&e.group.remove(i),n&&n.deregister&&n.deregister(i))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function u2(r){const[t,e]=W_(),n=$.useContext(b1);return I.jsx(AO,{...r,layoutGroup:n,switchLayoutGroup:$.useContext(tP),isPresent:t,safeToRemove:e})}const SO={borderRadius:{...Qp,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Qp,borderTopRightRadius:Qp,borderBottomLeftRadius:Qp,borderBottomRightRadius:Qp,boxShadow:bO};function EO(r,t,e){const n=ui(r)?r:Fm(r);return n.start(tE("",n,t,e)),n.animation}function CO(r){return r instanceof SVGElement&&r.tagName!=="svg"}const kO=(r,t)=>r.depth-t.depth;class TO{constructor(){this.children=[],this.isDirty=!1}add(t){H1(this.children,t),this.isDirty=!0}remove(t){$1(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(kO),this.isDirty=!1,this.children.forEach(t)}}function _O(r,t){const e=lo.now(),n=({timestamp:i})=>{const o=i-e;o>=t&&(Kl(n),r(o-t))};return Oe.read(n,!0),()=>Kl(n)}const h2=["TopLeft","TopRight","BottomLeft","BottomRight"],PO=h2.length,TT=r=>typeof r=="string"?parseFloat(r):r,_T=r=>typeof r=="number"||Ot.test(r);function RO(r,t,e,n,i,o){i?(r.opacity=Ge(0,e.opacity!==void 0?e.opacity:1,MO(n)),r.opacityExit=Ge(t.opacity!==void 0?t.opacity:1,0,DO(n))):o&&(r.opacity=Ge(t.opacity!==void 0?t.opacity:1,e.opacity!==void 0?e.opacity:1,n));for(let c=0;c<PO;c++){const u=`border${h2[c]}Radius`;let h=PT(t,u),f=PT(e,u);if(h===void 0&&f===void 0)continue;h||(h=0),f||(f=0),h===0||f===0||_T(h)===_T(f)?(r[u]=Math.max(Ge(TT(h),TT(f),n),0),(ao.test(f)||ao.test(h))&&(r[u]+="%")):r[u]=f}(t.rotate||e.rotate)&&(r.rotate=Ge(t.rotate||0,e.rotate||0,n))}function PT(r,t){return r[t]!==void 0?r[t]:r.borderRadius}const MO=d2(0,.5,RP),DO=d2(.5,.95,xs);function d2(r,t,e){return n=>n<r?0:n>t?1:e(ip(r,t,n))}function RT(r,t){r.min=t.min,r.max=t.max}function Ms(r,t){RT(r.x,t.x),RT(r.y,t.y)}function MT(r,t){r.translate=t.translate,r.scale=t.scale,r.originPoint=t.originPoint,r.origin=t.origin}function DT(r,t,e,n,i){return r-=t,r=cw(r,1/e,n),i!==void 0&&(r=cw(r,1/i,n)),r}function NO(r,t=0,e=1,n=.5,i,o=r,c=r){if(ao.test(t)&&(t=parseFloat(t),t=Ge(c.min,c.max,t/100)-c.min),typeof t!="number")return;let u=Ge(o.min,o.max,n);r===o&&(u-=t),r.min=DT(r.min,t,e,u,i),r.max=DT(r.max,t,e,u,i)}function NT(r,t,[e,n,i],o,c){NO(r,t[e],t[n],t[i],t.scale,o,c)}const LO=["x","scaleX","originX"],IO=["y","scaleY","originY"];function LT(r,t,e,n){NT(r.x,t,LO,e?e.x:void 0,n?n.x:void 0),NT(r.y,t,IO,e?e.y:void 0,n?n.y:void 0)}function IT(r){return r.translate===0&&r.scale===1}function f2(r){return IT(r.x)&&IT(r.y)}function FT(r,t){return r.min===t.min&&r.max===t.max}function FO(r,t){return FT(r.x,t.x)&&FT(r.y,t.y)}function OT(r,t){return Math.round(r.min)===Math.round(t.min)&&Math.round(r.max)===Math.round(t.max)}function p2(r,t){return OT(r.x,t.x)&&OT(r.y,t.y)}function jT(r){return As(r.x)/As(r.y)}function BT(r,t){return r.translate===t.translate&&r.scale===t.scale&&r.originPoint===t.originPoint}class OO{constructor(){this.members=[]}add(t){H1(this.members,t),t.scheduleRender()}remove(t){if($1(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const e=this.members[this.members.length-1];e&&this.promote(e)}}relegate(t){const e=this.members.findIndex(i=>t===i);if(e===0)return!1;let n;for(let i=e;i>=0;i--){const o=this.members[i];if(o.isPresent!==!1){n=o;break}}return n?(this.promote(n),!0):!1}promote(t,e){const n=this.lead;if(t!==n&&(this.prevLead=n,this.lead=t,t.show(),n)){n.instance&&n.scheduleRender(),t.scheduleRender(),t.resumeFrom=n,e&&(t.resumeFrom.preserveOpacity=!0),n.snapshot&&(t.snapshot=n.snapshot,t.snapshot.latestValues=n.animationValues||n.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:i}=t.options;i===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:e,resumingFrom:n}=t;e.onExitComplete&&e.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function jO(r,t,e){let n="";const i=r.x.translate/t.x,o=r.y.translate/t.y,c=e?.z||0;if((i||o||c)&&(n=`translate3d(${i}px, ${o}px, ${c}px) `),(t.x!==1||t.y!==1)&&(n+=`scale(${1/t.x}, ${1/t.y}) `),e){const{transformPerspective:f,rotate:p,rotateX:m,rotateY:v,skewX:b,skewY:C}=e;f&&(n=`perspective(${f}px) ${n}`),p&&(n+=`rotate(${p}deg) `),m&&(n+=`rotateX(${m}deg) `),v&&(n+=`rotateY(${v}deg) `),b&&(n+=`skewX(${b}deg) `),C&&(n+=`skewY(${C}deg) `)}const u=r.x.scale*t.x,h=r.y.scale*t.y;return(u!==1||h!==1)&&(n+=`scale(${u}, ${h})`),n||"none"}const Vc={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},rm=typeof window<"u"&&window.MotionDebug!==void 0,sA=["","X","Y","Z"],BO={visibility:"hidden"},UT=1e3;let UO=0;function rA(r,t,e,n){const{latestValues:i}=t;i[r]&&(e[r]=i[r],t.setStaticValue(r,0),n&&(n[r]=0))}function m2(r){if(r.hasCheckedOptimisedAppear=!0,r.root===r)return;const{visualElement:t}=r.options;if(!t)return;const e=SP(t);if(window.MotionHasOptimisedAnimation(e,"transform")){const{layout:i,layoutId:o}=r.options;window.MotionCancelOptimisedAnimation(e,"transform",Oe,!(i||o))}const{parent:n}=r;n&&!n.hasCheckedOptimisedAppear&&m2(n)}function g2({attachResizeListener:r,defaultParent:t,measureScroll:e,checkIsScrollRoot:n,resetTransform:i}){return class{constructor(c={},u=t?.()){this.id=UO++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,rm&&(Vc.totalNodes=Vc.resolvedTargetDeltas=Vc.recalculatedProjection=0),this.nodes.forEach(HO),this.nodes.forEach(KO),this.nodes.forEach(YO),this.nodes.forEach($O),rm&&window.MotionDebug.record(Vc)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=c,this.root=u?u.root||u:this,this.path=u?[...u.path,u]:[],this.parent=u,this.depth=u?u.depth+1:0;for(let h=0;h<this.path.length;h++)this.path[h].shouldResetTransform=!0;this.root===this&&(this.nodes=new TO)}addEventListener(c,u){return this.eventHandlers.has(c)||this.eventHandlers.set(c,new W1),this.eventHandlers.get(c).add(u)}notifyListeners(c,...u){const h=this.eventHandlers.get(c);h&&h.notify(...u)}hasListeners(c){return this.eventHandlers.has(c)}mount(c,u=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=CO(c),this.instance=c;const{layoutId:h,layout:f,visualElement:p}=this.options;if(p&&!p.current&&p.mount(c),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),u&&(f||h)&&(this.isLayoutDirty=!0),r){let m;const v=()=>this.root.updateBlockedByResize=!1;r(c,()=>{this.root.updateBlockedByResize=!0,m&&m(),m=_O(v,250),xv.hasAnimatedSinceResize&&(xv.hasAnimatedSinceResize=!1,this.nodes.forEach(zT))})}h&&this.root.registerSharedNode(h,this),this.options.animate!==!1&&p&&(h||f)&&this.addEventListener("didUpdate",({delta:m,hasLayoutChanged:v,hasRelativeTargetChanged:b,layout:C})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const E=this.options.transition||p.getDefaultTransition()||tj,{onLayoutAnimationStart:T,onLayoutAnimationComplete:P}=p.getProps(),N=!this.targetLayout||!p2(this.targetLayout,C)||b,L=!v&&b;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||L||v&&(N||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(m,L);const F={...B1(E,"layout"),onPlay:T,onComplete:P};(p.shouldReduceMotion||this.options.layoutRoot)&&(F.delay=0,F.type=!1),this.startAnimation(F)}else v||zT(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=C})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const c=this.getStack();c&&c.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Kl(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(qO),this.animationId++)}getTransformTemplate(){const{visualElement:c}=this.options;return c&&c.getProps().transformTemplate}willUpdate(c=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&m2(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let p=0;p<this.path.length;p++){const m=this.path[p];m.shouldResetTransform=!0,m.updateScroll("snapshot"),m.options.layoutRoot&&m.willUpdate(!1)}const{layoutId:u,layout:h}=this.options;if(u===void 0&&!h)return;const f=this.getTransformTemplate();this.prevTransformTemplateValue=f?f(this.latestValues,""):void 0,this.updateSnapshot(),c&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(VT);return}this.isUpdating||this.nodes.forEach(GO),this.isUpdating=!1,this.nodes.forEach(XO),this.nodes.forEach(VO),this.nodes.forEach(zO),this.clearAllSnapshots();const u=lo.now();Wn.delta=va(0,1e3/60,u-Wn.timestamp),Wn.timestamp=u,Wn.isProcessing=!0,Yb.update.process(Wn),Yb.preRender.process(Wn),Yb.render.process(Wn),Wn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,P1.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(WO),this.sharedNodes.forEach(QO)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Oe.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Oe.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let h=0;h<this.path.length;h++)this.path[h].updateScroll();const c=this.layout;this.layout=this.measure(!1),this.layoutCorrected=ln(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:u}=this.options;u&&u.notify("LayoutMeasure",this.layout.layoutBox,c?c.layoutBox:void 0)}updateScroll(c="measure"){let u=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===c&&(u=!1),u){const h=n(this.instance);this.scroll={animationId:this.root.animationId,phase:c,isRoot:h,offset:e(this.instance),wasRoot:this.scroll?this.scroll.isRoot:h}}}resetTransform(){if(!i)return;const c=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,u=this.projectionDelta&&!f2(this.projectionDelta),h=this.getTransformTemplate(),f=h?h(this.latestValues,""):void 0,p=f!==this.prevTransformTemplateValue;c&&(u||Uc(this.latestValues)||p)&&(i(this.instance,f),this.shouldResetTransform=!1,this.scheduleRender())}measure(c=!0){const u=this.measurePageBox();let h=this.removeElementScroll(u);return c&&(h=this.removeTransform(h)),ej(h),{animationId:this.root.animationId,measuredBox:u,layoutBox:h,latestValues:{},source:this.id}}measurePageBox(){var c;const{visualElement:u}=this.options;if(!u)return ln();const h=u.measureViewportBox();if(!(((c=this.scroll)===null||c===void 0?void 0:c.wasRoot)||this.path.some(nj))){const{scroll:p}=this.root;p&&(xd(h.x,p.offset.x),xd(h.y,p.offset.y))}return h}removeElementScroll(c){var u;const h=ln();if(Ms(h,c),!((u=this.scroll)===null||u===void 0)&&u.wasRoot)return h;for(let f=0;f<this.path.length;f++){const p=this.path[f],{scroll:m,options:v}=p;p!==this.root&&m&&v.layoutScroll&&(m.wasRoot&&Ms(h,c),xd(h.x,m.offset.x),xd(h.y,m.offset.y))}return h}applyTransform(c,u=!1){const h=ln();Ms(h,c);for(let f=0;f<this.path.length;f++){const p=this.path[f];!u&&p.options.layoutScroll&&p.scroll&&p!==p.root&&bd(h,{x:-p.scroll.offset.x,y:-p.scroll.offset.y}),Uc(p.latestValues)&&bd(h,p.latestValues)}return Uc(this.latestValues)&&bd(h,this.latestValues),h}removeTransform(c){const u=ln();Ms(u,c);for(let h=0;h<this.path.length;h++){const f=this.path[h];if(!f.instance||!Uc(f.latestValues))continue;jA(f.latestValues)&&f.updateSnapshot();const p=ln(),m=f.measurePageBox();Ms(p,m),LT(u,f.latestValues,f.snapshot?f.snapshot.layoutBox:void 0,p)}return Uc(this.latestValues)&&LT(u,this.latestValues),u}setTargetDelta(c){this.targetDelta=c,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(c){this.options={...this.options,...c,crossfade:c.crossfade!==void 0?c.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Wn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(c=!1){var u;const h=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=h.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=h.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=h.isSharedProjectionDirty);const f=!!this.resumingFrom||this!==h;if(!(c||f&&this.isSharedProjectionDirty||this.isProjectionDirty||!((u=this.parent)===null||u===void 0)&&u.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:m,layoutId:v}=this.options;if(!(!this.layout||!(m||v))){if(this.resolvedRelativeTargetAt=Wn.timestamp,!this.targetDelta&&!this.relativeTarget){const b=this.getClosestProjectingParent();b&&b.layout&&this.animationProgress!==1?(this.relativeParent=b,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ln(),this.relativeTargetOrigin=ln(),Rm(this.relativeTargetOrigin,this.layout.layoutBox,b.layout.layoutBox),Ms(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=ln(),this.targetWithTransforms=ln()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),rO(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Ms(this.target,this.layout.layoutBox),a2(this.target,this.targetDelta)):Ms(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const b=this.getClosestProjectingParent();b&&!!b.resumingFrom==!!this.resumingFrom&&!b.options.layoutScroll&&b.target&&this.animationProgress!==1?(this.relativeParent=b,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ln(),this.relativeTargetOrigin=ln(),Rm(this.relativeTargetOrigin,this.target,b.target),Ms(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}rm&&Vc.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||jA(this.parent.latestValues)||o2(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var c;const u=this.getLead(),h=!!this.resumingFrom||this!==u;let f=!0;if((this.isProjectionDirty||!((c=this.parent)===null||c===void 0)&&c.isProjectionDirty)&&(f=!1),h&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(f=!1),this.resolvedRelativeTargetAt===Wn.timestamp&&(f=!1),f)return;const{layout:p,layoutId:m}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(p||m))return;Ms(this.layoutCorrected,this.layout.layoutBox);const v=this.treeScale.x,b=this.treeScale.y;pO(this.layoutCorrected,this.treeScale,this.path,h),u.layout&&!u.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(u.target=u.layout.layoutBox,u.targetWithTransforms=ln());const{target:C}=u;if(!C){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(MT(this.prevProjectionDelta.x,this.projectionDelta.x),MT(this.prevProjectionDelta.y,this.projectionDelta.y)),Pm(this.projectionDelta,this.layoutCorrected,C,this.latestValues),(this.treeScale.x!==v||this.treeScale.y!==b||!BT(this.projectionDelta.x,this.prevProjectionDelta.x)||!BT(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",C)),rm&&Vc.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(c=!0){var u;if((u=this.options.visualElement)===null||u===void 0||u.scheduleRender(),c){const h=this.getStack();h&&h.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=wd(),this.projectionDelta=wd(),this.projectionDeltaWithTransform=wd()}setAnimationOrigin(c,u=!1){const h=this.snapshot,f=h?h.latestValues:{},p={...this.latestValues},m=wd();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!u;const v=ln(),b=h?h.source:void 0,C=this.layout?this.layout.source:void 0,E=b!==C,T=this.getStack(),P=!T||T.members.length<=1,N=!!(E&&!P&&this.options.crossfade===!0&&!this.path.some(JO));this.animationProgress=0;let L;this.mixTargetDelta=F=>{const O=F/1e3;HT(m.x,c.x,O),HT(m.y,c.y,O),this.setTargetDelta(m),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Rm(v,this.layout.layoutBox,this.relativeParent.layout.layoutBox),ZO(this.relativeTarget,this.relativeTargetOrigin,v,O),L&&FO(this.relativeTarget,L)&&(this.isProjectionDirty=!1),L||(L=ln()),Ms(L,this.relativeTarget)),E&&(this.animationValues=p,RO(p,f,this.latestValues,O,N,P)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=O},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(c){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Kl(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Oe.update(()=>{xv.hasAnimatedSinceResize=!0,this.currentAnimation=EO(0,UT,{...c,onUpdate:u=>{this.mixTargetDelta(u),c.onUpdate&&c.onUpdate(u)},onComplete:()=>{c.onComplete&&c.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const c=this.getStack();c&&c.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(UT),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const c=this.getLead();let{targetWithTransforms:u,target:h,layout:f,latestValues:p}=c;if(!(!u||!h||!f)){if(this!==c&&this.layout&&f&&y2(this.options.animationType,this.layout.layoutBox,f.layoutBox)){h=this.target||ln();const m=As(this.layout.layoutBox.x);h.x.min=c.target.x.min,h.x.max=h.x.min+m;const v=As(this.layout.layoutBox.y);h.y.min=c.target.y.min,h.y.max=h.y.min+v}Ms(u,h),bd(u,p),Pm(this.projectionDeltaWithTransform,this.layoutCorrected,u,p)}}registerSharedNode(c,u){this.sharedNodes.has(c)||this.sharedNodes.set(c,new OO),this.sharedNodes.get(c).add(u);const f=u.options.initialPromotionConfig;u.promote({transition:f?f.transition:void 0,preserveFollowOpacity:f&&f.shouldPreserveFollowOpacity?f.shouldPreserveFollowOpacity(u):void 0})}isLead(){const c=this.getStack();return c?c.lead===this:!0}getLead(){var c;const{layoutId:u}=this.options;return u?((c=this.getStack())===null||c===void 0?void 0:c.lead)||this:this}getPrevLead(){var c;const{layoutId:u}=this.options;return u?(c=this.getStack())===null||c===void 0?void 0:c.prevLead:void 0}getStack(){const{layoutId:c}=this.options;if(c)return this.root.sharedNodes.get(c)}promote({needsReset:c,transition:u,preserveFollowOpacity:h}={}){const f=this.getStack();f&&f.promote(this,h),c&&(this.projectionDelta=void 0,this.needsReset=!0),u&&this.setOptions({transition:u})}relegate(){const c=this.getStack();return c?c.relegate(this):!1}resetSkewAndRotation(){const{visualElement:c}=this.options;if(!c)return;let u=!1;const{latestValues:h}=c;if((h.z||h.rotate||h.rotateX||h.rotateY||h.rotateZ||h.skewX||h.skewY)&&(u=!0),!u)return;const f={};h.z&&rA("z",c,f,this.animationValues);for(let p=0;p<sA.length;p++)rA(`rotate${sA[p]}`,c,f,this.animationValues),rA(`skew${sA[p]}`,c,f,this.animationValues);c.render();for(const p in f)c.setStaticValue(p,f[p]),this.animationValues&&(this.animationValues[p]=f[p]);c.scheduleRender()}getProjectionStyles(c){var u,h;if(!this.instance||this.isSVG)return;if(!this.isVisible)return BO;const f={visibility:""},p=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,f.opacity="",f.pointerEvents=vv(c?.pointerEvents)||"",f.transform=p?p(this.latestValues,""):"none",f;const m=this.getLead();if(!this.projectionDelta||!this.layout||!m.target){const E={};return this.options.layoutId&&(E.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,E.pointerEvents=vv(c?.pointerEvents)||""),this.hasProjected&&!Uc(this.latestValues)&&(E.transform=p?p({},""):"none",this.hasProjected=!1),E}const v=m.animationValues||m.latestValues;this.applyTransformsToTarget(),f.transform=jO(this.projectionDeltaWithTransform,this.treeScale,v),p&&(f.transform=p(v,f.transform));const{x:b,y:C}=this.projectionDelta;f.transformOrigin=`${b.origin*100}% ${C.origin*100}% 0`,m.animationValues?f.opacity=m===this?(h=(u=v.opacity)!==null&&u!==void 0?u:this.latestValues.opacity)!==null&&h!==void 0?h:1:this.preserveOpacity?this.latestValues.opacity:v.opacityExit:f.opacity=m===this?v.opacity!==void 0?v.opacity:"":v.opacityExit!==void 0?v.opacityExit:0;for(const E in sw){if(v[E]===void 0)continue;const{correct:T,applyTo:P}=sw[E],N=f.transform==="none"?v[E]:T(v[E],m);if(P){const L=P.length;for(let F=0;F<L;F++)f[P[F]]=N}else f[E]=N}return this.options.layoutId&&(f.pointerEvents=m===this?vv(c?.pointerEvents)||"":"none"),f}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(c=>{var u;return(u=c.currentAnimation)===null||u===void 0?void 0:u.stop()}),this.root.nodes.forEach(VT),this.root.sharedNodes.clear()}}}function VO(r){r.updateLayout()}function zO(r){var t;const e=((t=r.resumeFrom)===null||t===void 0?void 0:t.snapshot)||r.snapshot;if(r.isLead()&&r.layout&&e&&r.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:i}=r.layout,{animationType:o}=r.options,c=e.source!==r.layout.source;o==="size"?Ls(m=>{const v=c?e.measuredBox[m]:e.layoutBox[m],b=As(v);v.min=n[m].min,v.max=v.min+b}):y2(o,e.layoutBox,n)&&Ls(m=>{const v=c?e.measuredBox[m]:e.layoutBox[m],b=As(n[m]);v.max=v.min+b,r.relativeTarget&&!r.currentAnimation&&(r.isProjectionDirty=!0,r.relativeTarget[m].max=r.relativeTarget[m].min+b)});const u=wd();Pm(u,n,e.layoutBox);const h=wd();c?Pm(h,r.applyTransform(i,!0),e.measuredBox):Pm(h,n,e.layoutBox);const f=!f2(u);let p=!1;if(!r.resumeFrom){const m=r.getClosestProjectingParent();if(m&&!m.resumeFrom){const{snapshot:v,layout:b}=m;if(v&&b){const C=ln();Rm(C,e.layoutBox,v.layoutBox);const E=ln();Rm(E,n,b.layoutBox),p2(C,E)||(p=!0),m.options.layoutRoot&&(r.relativeTarget=E,r.relativeTargetOrigin=C,r.relativeParent=m)}}}r.notifyListeners("didUpdate",{layout:n,snapshot:e,delta:h,layoutDelta:u,hasLayoutChanged:f,hasRelativeTargetChanged:p})}else if(r.isLead()){const{onExitComplete:n}=r.options;n&&n()}r.options.transition=void 0}function HO(r){rm&&Vc.totalNodes++,r.parent&&(r.isProjecting()||(r.isProjectionDirty=r.parent.isProjectionDirty),r.isSharedProjectionDirty||(r.isSharedProjectionDirty=!!(r.isProjectionDirty||r.parent.isProjectionDirty||r.parent.isSharedProjectionDirty)),r.isTransformDirty||(r.isTransformDirty=r.parent.isTransformDirty))}function $O(r){r.isProjectionDirty=r.isSharedProjectionDirty=r.isTransformDirty=!1}function WO(r){r.clearSnapshot()}function VT(r){r.clearMeasurements()}function GO(r){r.isLayoutDirty=!1}function XO(r){const{visualElement:t}=r.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),r.resetTransform()}function zT(r){r.finishAnimation(),r.targetDelta=r.relativeTarget=r.target=void 0,r.isProjectionDirty=!0}function KO(r){r.resolveTargetDelta()}function YO(r){r.calcProjection()}function qO(r){r.resetSkewAndRotation()}function QO(r){r.removeLeadSnapshot()}function HT(r,t,e){r.translate=Ge(t.translate,0,e),r.scale=Ge(t.scale,1,e),r.origin=t.origin,r.originPoint=t.originPoint}function $T(r,t,e,n){r.min=Ge(t.min,e.min,n),r.max=Ge(t.max,e.max,n)}function ZO(r,t,e,n){$T(r.x,t.x,e.x,n),$T(r.y,t.y,e.y,n)}function JO(r){return r.animationValues&&r.animationValues.opacityExit!==void 0}const tj={duration:.45,ease:[.4,0,.1,1]},WT=r=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(r),GT=WT("applewebkit/")&&!WT("chrome/")?Math.round:xs;function XT(r){r.min=GT(r.min),r.max=GT(r.max)}function ej(r){XT(r.x),XT(r.y)}function y2(r,t,e){return r==="position"||r==="preserve-aspect"&&!sO(jT(t),jT(e),.2)}function nj(r){var t;return r!==r.root&&((t=r.scroll)===null||t===void 0?void 0:t.wasRoot)}const ij=g2({attachResizeListener:(r,t)=>jm(r,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),oA={current:void 0},v2=g2({measureScroll:r=>({x:r.scrollLeft,y:r.scrollTop}),defaultParent:()=>{if(!oA.current){const r=new ij({});r.mount(window),r.setOptions({layoutScroll:!0}),oA.current=r}return oA.current},resetTransform:(r,t)=>{r.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:r=>window.getComputedStyle(r).position==="fixed"}),sj={pan:{Feature:xO},drag:{Feature:wO,ProjectionNode:v2,MeasureLayout:u2}};function KT(r,t,e){const{props:n}=r;r.animationState&&n.whileHover&&r.animationState.setActive("whileHover",e==="Start");const i="onHover"+e,o=n[i];o&&Oe.postRender(()=>o(t,B0(t)))}class rj extends tc{mount(){const{current:t}=this.node;t&&(this.unmount=sI(t,e=>(KT(this.node,e,"Start"),n=>KT(this.node,n,"End"))))}unmount(){}}class oj extends tc{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=j0(jm(this.node.current,"focus",()=>this.onFocus()),jm(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function YT(r,t,e){const{props:n}=r;r.animationState&&n.whileTap&&r.animationState.setActive("whileTap",e==="Start");const i="onTap"+(e==="End"?"":e),o=n[i];o&&Oe.postRender(()=>o(t,B0(t)))}class aj extends tc{mount(){const{current:t}=this.node;t&&(this.unmount=lI(t,e=>(YT(this.node,e,"Start"),(n,{success:i})=>YT(this.node,n,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const UA=new WeakMap,aA=new WeakMap,lj=r=>{const t=UA.get(r.target);t&&t(r)},cj=r=>{r.forEach(lj)};function uj({root:r,...t}){const e=r||document;aA.has(e)||aA.set(e,{});const n=aA.get(e),i=JSON.stringify(t);return n[i]||(n[i]=new IntersectionObserver(cj,{root:r,...t})),n[i]}function hj(r,t,e){const n=uj(t);return UA.set(r,e),n.observe(r),()=>{UA.delete(r),n.unobserve(r)}}const dj={some:0,all:1};class fj extends tc{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:e,margin:n,amount:i="some",once:o}=t,c={root:e?e.current:void 0,rootMargin:n,threshold:typeof i=="number"?i:dj[i]},u=h=>{const{isIntersecting:f}=h;if(this.isInView===f||(this.isInView=f,o&&!f&&this.hasEnteredView))return;f&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",f);const{onViewportEnter:p,onViewportLeave:m}=this.node.getProps(),v=f?p:m;v&&v(h)};return hj(this.node.current,c,u)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:e}=this.node;["amount","margin","root"].some(pj(t,e))&&this.startObserver()}unmount(){}}function pj({viewport:r={}},{viewport:t={}}={}){return e=>r[e]!==t[e]}const mj={inView:{Feature:fj},tap:{Feature:aj},focus:{Feature:oj},hover:{Feature:rj}},gj={layout:{ProjectionNode:v2,MeasureLayout:u2}},VA={current:null},w2={current:!1};function yj(){if(w2.current=!0,!!E1)if(window.matchMedia){const r=window.matchMedia("(prefers-reduced-motion)"),t=()=>VA.current=r.matches;r.addListener(t),t()}else VA.current=!1}const vj=[...$P,ci,Yl],wj=r=>vj.find(HP(r)),qT=new WeakMap;function xj(r,t,e){for(const n in t){const i=t[n],o=e[n];if(ui(i))r.addValue(n,i);else if(ui(o))r.addValue(n,Fm(i,{owner:r}));else if(o!==i)if(r.hasValue(n)){const c=r.getValue(n);c.liveStyle===!0?c.jump(i):c.hasAnimated||c.set(i)}else{const c=r.getStaticValue(n);r.addValue(n,Fm(c!==void 0?c:i,{owner:r}))}}for(const n in e)t[n]===void 0&&r.removeValue(n);return t}const QT=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class bj{scrapeMotionValuesFromProps(t,e,n){return{}}constructor({parent:t,props:e,presenceContext:n,reducedMotionConfig:i,blockInitialAnimation:o,visualState:c},u={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Q1,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const b=lo.now();this.renderScheduledAt<b&&(this.renderScheduledAt=b,Oe.render(this.render,!1,!0))};const{latestValues:h,renderState:f,onUpdate:p}=c;this.onUpdate=p,this.latestValues=h,this.baseTarget={...h},this.initialValues=e.initial?{...h}:{},this.renderState=f,this.parent=t,this.props=e,this.presenceContext=n,this.depth=t?t.depth+1:0,this.reducedMotionConfig=i,this.options=u,this.blockInitialAnimation=!!o,this.isControllingVariants=Yw(e),this.isVariantNode=Z_(e),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:m,...v}=this.scrapeMotionValuesFromProps(e,{},this);for(const b in v){const C=v[b];h[b]!==void 0&&ui(C)&&C.set(h[b],!1)}}mount(t){this.current=t,qT.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((e,n)=>this.bindToMotionValue(n,e)),w2.current||yj(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:VA.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){qT.delete(this.current),this.projection&&this.projection.unmount(),Kl(this.notifyUpdate),Kl(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const e=this.features[t];e&&(e.unmount(),e.isMounted=!1)}this.current=null}bindToMotionValue(t,e){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const n=mh.has(t),i=e.on("change",u=>{this.latestValues[t]=u,this.props.onUpdate&&Oe.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0)}),o=e.on("renderRequest",this.scheduleRender);let c;window.MotionCheckAppearSync&&(c=window.MotionCheckAppearSync(this,t,e)),this.valueSubscriptions.set(t,()=>{i(),o(),c&&c(),e.owner&&e.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in sp){const e=sp[t];if(!e)continue;const{isEnabled:n,Feature:i}=e;if(!this.features[t]&&i&&n(this.props)&&(this.features[t]=new i(this)),this.features[t]){const o=this.features[t];o.isMounted?o.update():(o.mount(),o.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):ln()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,e){this.latestValues[t]=e}update(t,e){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=e;for(let n=0;n<QT.length;n++){const i=QT[n];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const o="on"+i,c=t[o];c&&(this.propEventSubscriptions[i]=this.on(i,c))}this.prevMotionValues=xj(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const e=this.getClosestVariantNode();if(e)return e.variantChildren&&e.variantChildren.add(t),()=>e.variantChildren.delete(t)}addValue(t,e){const n=this.values.get(t);e!==n&&(n&&this.removeValue(t),this.bindToMotionValue(t,e),this.values.set(t,e),this.latestValues[t]=e.get())}removeValue(t){this.values.delete(t);const e=this.valueSubscriptions.get(t);e&&(e(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,e){if(this.props.values&&this.props.values[t])return this.props.values[t];let n=this.values.get(t);return n===void 0&&e!==void 0&&(n=Fm(e===null?void 0:e,{owner:this}),this.addValue(t,n)),n}readValue(t,e){var n;let i=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(n=this.getBaseTargetFromProps(this.props,t))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,t,this.options);return i!=null&&(typeof i=="string"&&(VP(i)||DP(i))?i=parseFloat(i):!wj(i)&&Yl.test(e)&&(i=jP(t,e)),this.setBaseTarget(t,ui(i)?i.get():i)),ui(i)?i.get():i}setBaseTarget(t,e){this.baseTarget[t]=e}getBaseTarget(t){var e;const{initial:n}=this.props;let i;if(typeof n=="string"||typeof n=="object"){const c=M1(this.props,n,(e=this.presenceContext)===null||e===void 0?void 0:e.custom);c&&(i=c[t])}if(n&&i!==void 0)return i;const o=this.getBaseTargetFromProps(this.props,t);return o!==void 0&&!ui(o)?o:this.initialValues[t]!==void 0&&i===void 0?void 0:this.baseTarget[t]}on(t,e){return this.events[t]||(this.events[t]=new W1),this.events[t].add(e)}notify(t,...e){this.events[t]&&this.events[t].notify(...e)}}class x2 extends bj{constructor(){super(...arguments),this.KeyframeResolver=WP}sortInstanceNodePosition(t,e){return t.compareDocumentPosition(e)&2?1:-1}getBaseTargetFromProps(t,e){return t.style?t.style[e]:void 0}removeValueFromRenderState(t,{vars:e,style:n}){delete e[t],delete n[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;ui(t)&&(this.childSubscription=t.on("change",e=>{this.current&&(this.current.textContent=`${e}`)}))}}function Aj(r){return window.getComputedStyle(r)}class Sj extends x2{constructor(){super(...arguments),this.type="html",this.renderInstance=aP}readValueFromInstance(t,e){if(mh.has(e)){const n=q1(e);return n&&n.default||0}else{const n=Aj(t),i=(sP(e)?n.getPropertyValue(e):n[e])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(t,{transformPagePoint:e}){return l2(t,e)}build(t,e,n){L1(t,e,n.transformTemplate)}scrapeMotionValuesFromProps(t,e,n){return j1(t,e,n)}}class Ej extends x2{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=ln}getBaseTargetFromProps(t,e){return t[e]}readValueFromInstance(t,e){if(mh.has(e)){const n=q1(e);return n&&n.default||0}return e=lP.has(e)?e:_1(e),t.getAttribute(e)}scrapeMotionValuesFromProps(t,e,n){return hP(t,e,n)}build(t,e,n){I1(t,e,this.isSVGTag,n.transformTemplate)}renderInstance(t,e,n,i){cP(t,e,n,i)}mount(t){this.isSVGTag=O1(t.tagName),super.mount(t)}}const Cj=(r,t)=>R1(r)?new Ej(t):new Sj(t,{allowProjection:r!==$.Fragment}),kj=QL({...YF,...mj,...sj,...gj},Cj),eE=dL(kj),Tj=[{title:"Gesture-first navigation",description:"Move through steps with palm, fist, and victory gesturesno messy taps."},{title:"Smart timers",description:"PalmChef recognizes cook times and launches the perfect timer on cue."},{title:"Voice-guided cooking",description:"Hear every step, adjust rate or pitch, and repeat instructions on demand."},{title:"Works offline",description:"Install the PWA and keep your kitchen workflow reliable without Wi-Fi."}],_j=[{title:"Import any recipe",description:"Paste a URL or upload a PDF to instantly build structured steps."},{title:"Start a guided session",description:"PalmChef narrates each instruction while showing your current step."},{title:"Cook hands-free",description:"Wave to move forward, pause timers, or repeat a detail anytime."}],Pj=()=>I.jsxs(eE.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.4},className:"space-y-16",children:[I.jsxs("section",{className:"relative overflow-hidden rounded-3xl bg-gradient-to-br from-sky-200 via-blue-200 to-indigo-200 px-6 py-16 text-slate-900 shadow-xl shadow-sky-200/60",children:[I.jsxs("div",{className:"relative z-10 mx-auto flex max-w-5xl flex-col items-start gap-6",children:[I.jsx("span",{className:"inline-flex items-center rounded-full bg-white/70 px-4 py-1 text-sm font-semibold uppercase tracking-wide text-slate-600",children:"Hands-free cooking, elevated"}),I.jsx("h1",{className:"text-4xl font-semibold leading-tight md:text-5xl",children:"Welcome to PalmChef  your smart, gesture-powered kitchen assistant."}),I.jsx("p",{className:"max-w-2xl text-lg text-slate-700",children:"Bring pro-level flow to your kitchen. PalmChef keeps recipes, timers, and step narration in sync so you can focus on the dish, not the screen."}),I.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[I.jsx(Ei,{to:"/recipes",className:"rounded-full bg-slate-900 px-6 py-3 text-sm font-semibold text-white shadow-md transition hover:-translate-y-0.5 hover:bg-slate-800",children:"Start cooking"}),I.jsx(Ei,{to:"/about",className:"rounded-full border border-white/80 bg-white/60 px-6 py-3 text-sm font-semibold text-slate-700 transition hover:bg-white",children:"See the gestures"})]})]}),I.jsxs("div",{className:"pointer-events-none absolute inset-0 opacity-30",children:[I.jsx("div",{className:"absolute -right-20 -top-20 h-64 w-64 rounded-full bg-white/60 blur-3xl"}),I.jsx("div",{className:"absolute bottom-0 left-1/3 h-72 w-72 rounded-full bg-indigo-200/50 blur-3xl"})]})]}),I.jsxs("section",{className:"grid gap-6 lg:grid-cols-3",children:[I.jsxs("div",{className:"rounded-2xl border border-slate-200/70 bg-white/80 p-6 shadow-sm backdrop-blur dark:border-slate-800 dark:bg-slate-900/70",children:[I.jsx("p",{className:"text-sm uppercase tracking-wide text-slate-500",children:"Trusted kitchen flow"}),I.jsx("h2",{className:"mt-2 text-3xl font-semibold",children:"Everything a modern cooking session needs."}),I.jsx("p",{className:"mt-3 text-slate-600 dark:text-slate-300",children:"PalmChef unifies guidance, timers, and hands-free controls into one beautiful workflow."}),I.jsx(Ei,{to:"/recipes",className:"mt-5 inline-flex items-center text-sm font-semibold text-sky-600 hover:text-sky-500",children:"Explore the recipe dashboard "})]}),I.jsx("div",{className:"grid gap-6 lg:col-span-2 lg:grid-cols-2",children:Tj.map(r=>I.jsxs("div",{className:"rounded-2xl border border-slate-200/70 bg-white/80 p-6 shadow-sm backdrop-blur transition duration-300 hover:-translate-y-1 hover:shadow-xl hover:shadow-slate-200/60 dark:border-slate-800 dark:bg-slate-900/70 dark:hover:shadow-none",children:[I.jsx("h3",{className:"text-lg font-semibold",children:r.title}),I.jsx("p",{className:"mt-2 text-sm text-slate-600 dark:text-slate-300",children:r.description})]},r.title))})]}),I.jsxs("section",{className:"grid gap-8 rounded-3xl border border-slate-200/70 bg-white/70 p-8 shadow-sm backdrop-blur dark:border-slate-800 dark:bg-slate-900/60 lg:grid-cols-2",children:[I.jsxs("div",{children:[I.jsx("h2",{className:"text-3xl font-semibold",children:"A guided experience from prep to plate."}),I.jsx("p",{className:"mt-3 text-slate-600 dark:text-slate-300",children:"Whether you are simmering a sauce or baking a cake, PalmChef keeps every step front and center with accessible guidance and instant control."}),I.jsxs("div",{className:"mt-6 grid gap-4 sm:grid-cols-2",children:[I.jsxs("div",{className:"rounded-2xl bg-white/90 p-4 shadow-sm backdrop-blur dark:bg-slate-900/70",children:[I.jsx("p",{className:"text-sm uppercase tracking-wide text-slate-500",children:"Step clarity"}),I.jsx("p",{className:"mt-2 text-2xl font-semibold",children:"100%"}),I.jsx("p",{className:"text-sm text-slate-500",children:"Always know what to do next."})]}),I.jsxs("div",{className:"rounded-2xl bg-white/90 p-4 shadow-sm backdrop-blur dark:bg-slate-900/70",children:[I.jsx("p",{className:"text-sm uppercase tracking-wide text-slate-500",children:"Hands-free time"}),I.jsx("p",{className:"mt-2 text-2xl font-semibold",children:"+40%"}),I.jsx("p",{className:"text-sm text-slate-500",children:"More focus on cooking."})]})]})]}),I.jsx("div",{className:"space-y-4",children:_j.map(r=>I.jsxs("div",{className:"rounded-2xl border border-slate-200/70 bg-white/80 p-5 shadow-sm backdrop-blur dark:border-slate-800 dark:bg-slate-900/70",children:[I.jsx("h3",{className:"text-lg font-semibold",children:r.title}),I.jsx("p",{className:"mt-2 text-sm text-slate-600 dark:text-slate-300",children:r.description})]},r.title))})]}),I.jsxs("section",{className:"grid gap-8 lg:grid-cols-3",children:[I.jsxs("div",{className:"rounded-2xl border border-slate-200/70 bg-white/80 p-6 shadow-sm backdrop-blur dark:border-slate-800 dark:bg-slate-900/70",children:[I.jsx("h3",{className:"text-lg font-semibold",children:"Live kitchen HUD"}),I.jsx("p",{className:"mt-2 text-sm text-slate-600 dark:text-slate-300",children:"Keep gesture feedback, timers, and spoken guidance in view while you move around the kitchen."})]}),I.jsxs("div",{className:"rounded-2xl border border-slate-200/70 bg-white/80 p-6 shadow-sm backdrop-blur dark:border-slate-800 dark:bg-slate-900/70",children:[I.jsx("h3",{className:"text-lg font-semibold",children:"Personalized settings"}),I.jsx("p",{className:"mt-2 text-sm text-slate-600 dark:text-slate-300",children:"Tune narration speed, pitch, and themes to match your cooking rhythm."})]}),I.jsxs("div",{className:"rounded-2xl border border-slate-200/70 bg-white/80 p-6 shadow-sm backdrop-blur dark:border-slate-800 dark:bg-slate-900/70",children:[I.jsx("h3",{className:"text-lg font-semibold",children:"Private by design"}),I.jsx("p",{className:"mt-2 text-sm text-slate-600 dark:text-slate-300",children:"All hand tracking and recipe parsing stays in your browserno data leaves your device."})]})]}),I.jsx("section",{className:"rounded-3xl bg-gradient-to-br from-slate-900 to-slate-800 px-8 py-12 text-white shadow-xl shadow-slate-300/30",children:I.jsxs("div",{className:"mx-auto flex max-w-4xl flex-col items-center text-center gap-4",children:[I.jsx("h2",{className:"text-3xl font-semibold",children:"Ready to cook with confidence?"}),I.jsx("p",{className:"text-slate-200",children:"Build your recipe library and let PalmChef guide every step with touch-free control."}),I.jsx(Ei,{to:"/recipes",className:"rounded-md bg-white px-6 py-3 text-sm font-semibold text-slate-900 transition hover:bg-slate-100",children:"Build your recipe library"})]})})]}),Rj={},ZT=r=>{let t;const e=new Set,n=(p,m)=>{const v=typeof p=="function"?p(t):p;if(!Object.is(v,t)){const b=t;t=m??(typeof v!="object"||v===null)?v:Object.assign({},t,v),e.forEach(C=>C(t,b))}},i=()=>t,h={setState:n,getState:i,getInitialState:()=>f,subscribe:p=>(e.add(p),()=>e.delete(p)),destroy:()=>{(Rj?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),e.clear()}},f=t=r(n,i,h);return h},Mj=r=>r?ZT(r):ZT;var lA={exports:{}},cA={},uA={exports:{}},hA={};var JT;function Dj(){if(JT)return hA;JT=1;var r=I0();function t(m,v){return m===v&&(m!==0||1/m===1/v)||m!==m&&v!==v}var e=typeof Object.is=="function"?Object.is:t,n=r.useState,i=r.useEffect,o=r.useLayoutEffect,c=r.useDebugValue;function u(m,v){var b=v(),C=n({inst:{value:b,getSnapshot:v}}),E=C[0].inst,T=C[1];return o(function(){E.value=b,E.getSnapshot=v,h(E)&&T({inst:E})},[m,b,v]),i(function(){return h(E)&&T({inst:E}),m(function(){h(E)&&T({inst:E})})},[m]),c(b),b}function h(m){var v=m.getSnapshot;m=m.value;try{var b=v();return!e(m,b)}catch{return!0}}function f(m,v){return v()}var p=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?f:u;return hA.useSyncExternalStore=r.useSyncExternalStore!==void 0?r.useSyncExternalStore:p,hA}var t_;function Nj(){return t_||(t_=1,uA.exports=Dj()),uA.exports}var e_;function Lj(){if(e_)return cA;e_=1;var r=I0(),t=Nj();function e(f,p){return f===p&&(f!==0||1/f===1/p)||f!==f&&p!==p}var n=typeof Object.is=="function"?Object.is:e,i=t.useSyncExternalStore,o=r.useRef,c=r.useEffect,u=r.useMemo,h=r.useDebugValue;return cA.useSyncExternalStoreWithSelector=function(f,p,m,v,b){var C=o(null);if(C.current===null){var E={hasValue:!1,value:null};C.current=E}else E=C.current;C=u(function(){function P(z){if(!N){if(N=!0,L=z,z=v(z),b!==void 0&&E.hasValue){var K=E.value;if(b(K,z))return F=K}return F=z}if(K=F,n(L,z))return K;var Y=v(z);return b!==void 0&&b(K,Y)?(L=z,K):(L=z,F=Y)}var N=!1,L,F,O=m===void 0?null:m;return[function(){return P(p())},O===null?void 0:function(){return P(O())}]},[p,m,v,b]);var T=i(f,C[0],C[1]);return c(function(){E.hasValue=!0,E.value=T},[T]),h(T),T},cA}var n_;function Ij(){return n_||(n_=1,lA.exports=Lj()),lA.exports}var Fj=Ij();const Oj=y1(Fj),b2={},{useDebugValue:jj}=v1,{useSyncExternalStoreWithSelector:Bj}=Oj;let i_=!1;const Uj=r=>r;function Vj(r,t=Uj,e){(b2?"production":void 0)!=="production"&&e&&!i_&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),i_=!0);const n=Bj(r.subscribe,r.getState,r.getServerState||r.getInitialState,t,e);return jj(n),n}const zj=r=>{(b2?"production":void 0)!=="production"&&typeof r!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t=typeof r=="function"?Mj(r):r,e=(n,i)=>Vj(t,n,i);return Object.assign(e,t),e},Zw=r=>zj,Hj={};function $j(r,t){let e;try{e=r()}catch{return}return{getItem:i=>{var o;const c=h=>h===null?null:JSON.parse(h,void 0),u=(o=e.getItem(i))!=null?o:null;return u instanceof Promise?u.then(c):c(u)},setItem:(i,o)=>e.setItem(i,JSON.stringify(o,void 0)),removeItem:i=>e.removeItem(i)}}const Bm=r=>t=>{try{const e=r(t);return e instanceof Promise?e:{then(n){return Bm(n)(e)},catch(n){return this}}}catch(e){return{then(n){return this},catch(n){return Bm(n)(e)}}}},Wj=(r,t)=>(e,n,i)=>{let o={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:T=>T,version:0,merge:(T,P)=>({...P,...T}),...t},c=!1;const u=new Set,h=new Set;let f;try{f=o.getStorage()}catch{}if(!f)return r((...T)=>{console.warn(`[zustand persist middleware] Unable to update item '${o.name}', the given storage is currently unavailable.`),e(...T)},n,i);const p=Bm(o.serialize),m=()=>{const T=o.partialize({...n()});let P;const N=p({state:T,version:o.version}).then(L=>f.setItem(o.name,L)).catch(L=>{P=L});if(P)throw P;return N},v=i.setState;i.setState=(T,P)=>{v(T,P),m()};const b=r((...T)=>{e(...T),m()},n,i);let C;const E=()=>{var T;if(!f)return;c=!1,u.forEach(N=>N(n()));const P=((T=o.onRehydrateStorage)==null?void 0:T.call(o,n()))||void 0;return Bm(f.getItem.bind(f))(o.name).then(N=>{if(N)return o.deserialize(N)}).then(N=>{if(N)if(typeof N.version=="number"&&N.version!==o.version){if(o.migrate)return o.migrate(N.state,N.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return N.state}).then(N=>{var L;return C=o.merge(N,(L=n())!=null?L:b),e(C,!0),m()}).then(()=>{P?.(C,void 0),c=!0,h.forEach(N=>N(C))}).catch(N=>{P?.(void 0,N)})};return i.persist={setOptions:T=>{o={...o,...T},T.getStorage&&(f=T.getStorage())},clearStorage:()=>{f?.removeItem(o.name)},getOptions:()=>o,rehydrate:()=>E(),hasHydrated:()=>c,onHydrate:T=>(u.add(T),()=>{u.delete(T)}),onFinishHydration:T=>(h.add(T),()=>{h.delete(T)})},E(),C||b},Gj=(r,t)=>(e,n,i)=>{let o={storage:$j(()=>localStorage),partialize:E=>E,version:0,merge:(E,T)=>({...T,...E}),...t},c=!1;const u=new Set,h=new Set;let f=o.storage;if(!f)return r((...E)=>{console.warn(`[zustand persist middleware] Unable to update item '${o.name}', the given storage is currently unavailable.`),e(...E)},n,i);const p=()=>{const E=o.partialize({...n()});return f.setItem(o.name,{state:E,version:o.version})},m=i.setState;i.setState=(E,T)=>{m(E,T),p()};const v=r((...E)=>{e(...E),p()},n,i);i.getInitialState=()=>v;let b;const C=()=>{var E,T;if(!f)return;c=!1,u.forEach(N=>{var L;return N((L=n())!=null?L:v)});const P=((T=o.onRehydrateStorage)==null?void 0:T.call(o,(E=n())!=null?E:v))||void 0;return Bm(f.getItem.bind(f))(o.name).then(N=>{if(N)if(typeof N.version=="number"&&N.version!==o.version){if(o.migrate)return[!0,o.migrate(N.state,N.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,N.state];return[!1,void 0]}).then(N=>{var L;const[F,O]=N;if(b=o.merge(O,(L=n())!=null?L:v),e(b,!0),F)return p()}).then(()=>{P?.(b,void 0),b=n(),c=!0,h.forEach(N=>N(b))}).catch(N=>{P?.(void 0,N)})};return i.persist={setOptions:E=>{o={...o,...E},E.storage&&(f=E.storage)},clearStorage:()=>{f?.removeItem(o.name)},getOptions:()=>o,rehydrate:()=>C(),hasHydrated:()=>c,onHydrate:E=>(u.add(E),()=>{u.delete(E)}),onFinishHydration:E=>(h.add(E),()=>{h.delete(E)})},o.skipHydration||C(),b||v},Xj=(r,t)=>"getStorage"in t||"serialize"in t||"deserialize"in t?((Hj?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),Wj(r,t)):Gj(r,t),Jw=Xj,Mm=Zw()(Jw(r=>({recipes:[],addRecipe:t=>r(e=>({recipes:[...e.recipes,t]})),removeRecipe:t=>r(e=>({recipes:e.recipes.filter(n=>n.id!==t)})),updateRecipe:(t,e)=>r(n=>({recipes:n.recipes.map(i=>i.id===t?{...i,...e}:i)}))}),{name:"palmchef-recipes"})),Ai=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),zA=[.001,0,0,.001,0,0],dA=1.35,ys={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},el={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},Um="pdfjs_internal_editor_",Gt={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},ie={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},Kj={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},HA={TRIANGLES:1,LATTICE:2},xn={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},bv={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},dn={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},cd={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},tx={ERRORS:0,WARNINGS:1,INFOS:5},Vm={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},Zp={moveTo:0,lineTo:1,curveTo:2,quadraticCurveTo:3,closePath:4},Yj={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let ex=tx.WARNINGS;function qj(r){Number.isInteger(r)&&(ex=r)}function Qj(){return ex}function nx(r){ex>=tx.INFOS&&console.info(`Info: ${r}`)}function Ht(r){ex>=tx.WARNINGS&&console.warn(`Warning: ${r}`)}function Te(r){throw new Error(r)}function se(r,t){r||Te(t)}function Zj(r){switch(r?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function A2(r,t=null,e=null){if(!r)return null;if(e&&typeof r=="string"&&(e.addDefaultProtocol&&r.startsWith("www.")&&r.match(/\./g)?.length>=2&&(r=`http://${r}`),e.tryConvertEncoding))try{r=iB(r)}catch{}const n=t?URL.parse(r,t):URL.parse(r);return Zj(n)?n:null}function S2(r,t,e=!1){const n=URL.parse(r);return n?(n.hash=t,n.href):e&&A2(r,"http://example.com")?r.split("#",1)[0]+`${t?`#${t}`:""}`:""}function $t(r,t,e,n=!1){return Object.defineProperty(r,t,{value:e,enumerable:!n,configurable:!0,writable:!1}),e}const gh=(function(){function t(e,n){this.message=e,this.name=n}return t.prototype=new Error,t.constructor=t,t})();class s_ extends gh{constructor(t,e){super(t,"PasswordException"),this.code=e}}class fA extends gh{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}}class $A extends gh{constructor(t){super(t,"InvalidPDFException")}}class uw extends gh{constructor(t,e,n){super(t,"ResponseException"),this.status=e,this.missing=n}}class Jj extends gh{constructor(t){super(t,"FormatError")}}class ql extends gh{constructor(t){super(t,"AbortException")}}function E2(r){(typeof r!="object"||r?.length===void 0)&&Te("Invalid argument for bytesToString");const t=r.length,e=8192;if(t<e)return String.fromCharCode.apply(null,r);const n=[];for(let i=0;i<t;i+=e){const o=Math.min(i+e,t),c=r.subarray(i,o);n.push(String.fromCharCode.apply(null,c))}return n.join("")}function U0(r){typeof r!="string"&&Te("Invalid argument for stringToBytes");const t=r.length,e=new Uint8Array(t);for(let n=0;n<t;++n)e[n]=r.charCodeAt(n)&255;return e}function tB(r){return String.fromCharCode(r>>24&255,r>>16&255,r>>8&255,r&255)}function eB(){const r=new Uint8Array(4);return r[0]=1,new Uint32Array(r.buffer,0,1)[0]===1}function nB(){try{return new Function(""),!0}catch{return!1}}class Cn{static get isLittleEndian(){return $t(this,"isLittleEndian",eB())}static get isEvalSupported(){return $t(this,"isEvalSupported",nB())}static get isOffscreenCanvasSupported(){return $t(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return $t(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get isFloat16ArraySupported(){return $t(this,"isFloat16ArraySupported",typeof Float16Array<"u")}static get isSanitizerSupported(){return $t(this,"isSanitizerSupported",typeof Sanitizer<"u")}static get platform(){const{platform:t,userAgent:e}=navigator;return $t(this,"platform",{isAndroid:e.includes("Android"),isLinux:t.includes("Linux"),isMac:t.includes("Mac"),isWindows:t.includes("Win"),isFirefox:e.includes("Firefox")})}static get isCSSRoundSupported(){return $t(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}const pA=Array.from(Array(256).keys(),r=>r.toString(16).padStart(2,"0"));var ma,Av,WA;class vt{static makeHexColor(t,e,n){return`#${pA[t]}${pA[e]}${pA[n]}`}static domMatrixToTransform(t){return[t.a,t.b,t.c,t.d,t.e,t.f]}static scaleMinMax(t,e){let n;t[0]?(t[0]<0&&(n=e[0],e[0]=e[2],e[2]=n),e[0]*=t[0],e[2]*=t[0],t[3]<0&&(n=e[1],e[1]=e[3],e[3]=n),e[1]*=t[3],e[3]*=t[3]):(n=e[0],e[0]=e[1],e[1]=n,n=e[2],e[2]=e[3],e[3]=n,t[1]<0&&(n=e[1],e[1]=e[3],e[3]=n),e[1]*=t[1],e[3]*=t[1],t[2]<0&&(n=e[0],e[0]=e[2],e[2]=n),e[0]*=t[2],e[2]*=t[2]),e[0]+=t[4],e[1]+=t[5],e[2]+=t[4],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static multiplyByDOMMatrix(t,e){return[t[0]*e.a+t[2]*e.b,t[1]*e.a+t[3]*e.b,t[0]*e.c+t[2]*e.d,t[1]*e.c+t[3]*e.d,t[0]*e.e+t[2]*e.f+t[4],t[1]*e.e+t[3]*e.f+t[5]]}static applyTransform(t,e,n=0){const i=t[n],o=t[n+1];t[n]=i*e[0]+o*e[2]+e[4],t[n+1]=i*e[1]+o*e[3]+e[5]}static applyTransformToBezier(t,e,n=0){const i=e[0],o=e[1],c=e[2],u=e[3],h=e[4],f=e[5];for(let p=0;p<6;p+=2){const m=t[n+p],v=t[n+p+1];t[n+p]=m*i+v*c+h,t[n+p+1]=m*o+v*u+f}}static applyInverseTransform(t,e){const n=t[0],i=t[1],o=e[0]*e[3]-e[1]*e[2];t[0]=(n*e[3]-i*e[2]+e[2]*e[5]-e[4]*e[3])/o,t[1]=(-n*e[1]+i*e[0]+e[4]*e[1]-e[5]*e[0])/o}static axialAlignedBoundingBox(t,e,n){const i=e[0],o=e[1],c=e[2],u=e[3],h=e[4],f=e[5],p=t[0],m=t[1],v=t[2],b=t[3];let C=i*p+h,E=C,T=i*v+h,P=T,N=u*m+f,L=N,F=u*b+f,O=F;if(o!==0||c!==0){const z=o*p,K=o*v,Y=c*m,nt=c*b;C+=Y,P+=Y,T+=nt,E+=nt,N+=z,O+=z,F+=K,L+=K}n[0]=Math.min(n[0],C,T,E,P),n[1]=Math.min(n[1],N,F,L,O),n[2]=Math.max(n[2],C,T,E,P),n[3]=Math.max(n[3],N,F,L,O)}static inverseTransform(t){const e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t,e){const n=t[0],i=t[1],o=t[2],c=t[3],u=n**2+i**2,h=n*o+i*c,f=o**2+c**2,p=(u+f)/2,m=Math.sqrt(p**2-(u*f-h**2));e[0]=Math.sqrt(p+m||1),e[1]=Math.sqrt(p-m||1)}static normalizeRect(t){const e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){const n=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),i=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(n>i)return null;const o=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),c=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return o>c?null:[n,o,i,c]}static pointBoundingBox(t,e,n){n[0]=Math.min(n[0],t),n[1]=Math.min(n[1],e),n[2]=Math.max(n[2],t),n[3]=Math.max(n[3],e)}static rectBoundingBox(t,e,n,i,o){o[0]=Math.min(o[0],t,n),o[1]=Math.min(o[1],e,i),o[2]=Math.max(o[2],t,n),o[3]=Math.max(o[3],e,i)}static bezierBoundingBox(t,e,n,i,o,c,u,h,f){f[0]=Math.min(f[0],t,u),f[1]=Math.min(f[1],e,h),f[2]=Math.max(f[2],t,u),f[3]=Math.max(f[3],e,h),R(this,ma,WA).call(this,t,n,o,u,e,i,c,h,3*(-t+3*(n-o)+u),6*(t-2*n+o),3*(n-t),f),R(this,ma,WA).call(this,t,n,o,u,e,i,c,h,3*(-e+3*(i-c)+h),6*(e-2*i+c),3*(i-e),f)}}ma=new WeakSet,Av=function(t,e,n,i,o,c,u,h,f,p){if(f<=0||f>=1)return;const m=1-f,v=f*f,b=v*f,C=m*(m*(m*t+3*f*e)+3*v*n)+b*i,E=m*(m*(m*o+3*f*c)+3*v*u)+b*h;p[0]=Math.min(p[0],C),p[1]=Math.min(p[1],E),p[2]=Math.max(p[2],C),p[3]=Math.max(p[3],E)},WA=function(t,e,n,i,o,c,u,h,f,p,m,v){if(Math.abs(f)<1e-12){Math.abs(p)>=1e-12&&R(this,ma,Av).call(this,t,e,n,i,o,c,u,h,-m/p,v);return}const b=p**2-4*m*f;if(b<0)return;const C=Math.sqrt(b),E=2*f;R(this,ma,Av).call(this,t,e,n,i,o,c,u,h,(-p+C)/E,v),R(this,ma,Av).call(this,t,e,n,i,o,c,u,h,(-p-C)/E,v)},_(vt,ma);function iB(r){return decodeURIComponent(escape(r))}let mA=null,r_=null;function sB(r){return mA||(mA=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,r_=new Map([["","t"]])),r.replaceAll(mA,(t,e,n)=>e?e.normalize("NFKC"):r_.get(n))}function C2(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const r=new Uint8Array(32);return crypto.getRandomValues(r),E2(r)}const Ad="pdfjs_internal_id_";function rB(r,t,e){if(!Array.isArray(e)||e.length<2)return!1;const[n,i,...o]=e;if(!r(n)&&!Number.isInteger(n)||!t(i))return!1;const c=o.length;let u=!0;switch(i.name){case"XYZ":if(c<2||c>3)return!1;break;case"Fit":case"FitB":return c===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(c>1)return!1;break;case"FitR":if(c!==4)return!1;u=!1;break;default:return!1}for(const h of o)if(!(typeof h=="number"||u&&h===null))return!1;return!0}function Si(r,t,e){return Math.min(Math.max(r,t),e)}function k2(r){return Uint8Array.prototype.toBase64?r.toBase64():btoa(E2(r))}function oB(r){return Uint8Array.fromBase64?Uint8Array.fromBase64(r):U0(atob(r))}typeof Promise.try!="function"&&(Promise.try=function(r,...t){return new Promise(e=>{e(r(...t))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(r){return r.reduce((t,e)=>t+e,0)});class zm{static textContent(t){const e=[],n={items:e,styles:Object.create(null)};function i(o){if(!o)return;let c=null;const u=o.name;if(u==="#text")c=o.value;else if(zm.shouldBuildText(u))o?.attributes?.textContent?c=o.attributes.textContent:o.value&&(c=o.value);else return;if(c!==null&&e.push({str:c}),!!o.children)for(const h of o.children)i(h)}return i(t),n}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}class T2{static setupStorage(t,e,n,i,o){const c=i.getValue(e,{value:null});switch(n.name){case"textarea":if(c.value!==null&&(t.textContent=c.value),o==="print")break;t.addEventListener("input",u=>{i.setValue(e,{value:u.target.value})});break;case"input":if(n.attributes.type==="radio"||n.attributes.type==="checkbox"){if(c.value===n.attributes.xfaOn?t.setAttribute("checked",!0):c.value===n.attributes.xfaOff&&t.removeAttribute("checked"),o==="print")break;t.addEventListener("change",u=>{i.setValue(e,{value:u.target.checked?u.target.getAttribute("xfaOn"):u.target.getAttribute("xfaOff")})})}else{if(c.value!==null&&t.setAttribute("value",c.value),o==="print")break;t.addEventListener("input",u=>{i.setValue(e,{value:u.target.value})})}break;case"select":if(c.value!==null){t.setAttribute("value",c.value);for(const u of n.children)u.attributes.value===c.value?u.attributes.selected=!0:u.attributes.hasOwnProperty("selected")&&delete u.attributes.selected}t.addEventListener("input",u=>{const h=u.target.options,f=h.selectedIndex===-1?"":h[h.selectedIndex].value;i.setValue(e,{value:f})});break}}static setAttributes({html:t,element:e,storage:n=null,intent:i,linkService:o}){const{attributes:c}=e,u=t instanceof HTMLAnchorElement;c.type==="radio"&&(c.name=`${c.name}-${i}`);for(const[h,f]of Object.entries(c))if(f!=null)switch(h){case"class":f.length&&t.setAttribute(h,f.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",f);break;case"style":Object.assign(t.style,f);break;case"textContent":t.textContent=f;break;default:(!u||h!=="href"&&h!=="newWindow")&&t.setAttribute(h,f)}u&&o.addLinkAttributes(t,c.href,c.newWindow),n&&c.dataId&&this.setupStorage(t,c.dataId,e,n)}static render(t){const e=t.annotationStorage,n=t.linkService,i=t.xfaHtml,o=t.intent||"display",c=document.createElement(i.name);i.attributes&&this.setAttributes({html:c,element:i,intent:o,linkService:n});const u=o!=="richText",h=t.div;if(h.append(c),t.viewport){const m=`matrix(${t.viewport.transform.join(",")})`;h.style.transform=m}u&&h.setAttribute("class","xfaLayer xfaFont");const f=[];if(i.children.length===0){if(i.value){const m=document.createTextNode(i.value);c.append(m),u&&zm.shouldBuildText(i.name)&&f.push(m)}return{textDivs:f}}const p=[[i,-1,c]];for(;p.length>0;){const[m,v,b]=p.at(-1);if(v+1===m.children.length){p.pop();continue}const C=m.children[++p.at(-1)[1]];if(C===null)continue;const{name:E}=C;if(E==="#text"){const P=document.createTextNode(C.value);f.push(P),b.append(P);continue}const T=C?.attributes?.xmlns?document.createElementNS(C.attributes.xmlns,E):document.createElement(E);if(b.append(T),C.attributes&&this.setAttributes({html:T,element:C,storage:e,intent:o,linkService:n}),C.children?.length>0)p.push([C,-1,T]);else if(C.value){const P=document.createTextNode(C.value);u&&zm.shouldBuildText(E)&&f.push(P),T.append(P)}}for(const m of h.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))m.setAttribute("readOnly",!0);return{textDivs:f}}static update(t){const e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e,t.div.hidden=!1}}const To="http://www.w3.org/2000/svg",Wc=class Wc{};ct(Wc,"CSS",96),ct(Wc,"PDF",72),ct(Wc,"PDF_TO_CSS_UNITS",Wc.CSS/Wc.PDF);let Ql=Wc;async function V0(r,t="text"){if(om(r,document.baseURI)){const e=await fetch(r);if(!e.ok)throw new Error(e.statusText);switch(t){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"json":return e.json()}return e.text()}return new Promise((e,n)=>{const i=new XMLHttpRequest;i.open("GET",r,!0),i.responseType=t,i.onreadystatechange=()=>{if(i.readyState===XMLHttpRequest.DONE){if(i.status===200||i.status===0){switch(t){case"arraybuffer":case"blob":case"json":e(i.response);return}e(i.responseText);return}n(new Error(i.statusText))}},i.send(null)})}class z0{constructor({viewBox:t,userUnit:e,scale:n,rotation:i,offsetX:o=0,offsetY:c=0,dontFlip:u=!1}){this.viewBox=t,this.userUnit=e,this.scale=n,this.rotation=i,this.offsetX=o,this.offsetY=c,n*=e;const h=(t[2]+t[0])/2,f=(t[3]+t[1])/2;let p,m,v,b;switch(i%=360,i<0&&(i+=360),i){case 180:p=-1,m=0,v=0,b=1;break;case 90:p=0,m=1,v=1,b=0;break;case 270:p=0,m=-1,v=-1,b=0;break;case 0:p=1,m=0,v=0,b=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}u&&(v=-v,b=-b);let C,E,T,P;p===0?(C=Math.abs(f-t[1])*n+o,E=Math.abs(h-t[0])*n+c,T=(t[3]-t[1])*n,P=(t[2]-t[0])*n):(C=Math.abs(h-t[0])*n+o,E=Math.abs(f-t[1])*n+c,T=(t[2]-t[0])*n,P=(t[3]-t[1])*n),this.transform=[p*n,m*n,v*n,b*n,C-p*n*h-v*n*f,E-m*n*h-b*n*f],this.width=T,this.height=P}get rawDims(){const t=this.viewBox;return $t(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone({scale:t=this.scale,rotation:e=this.rotation,offsetX:n=this.offsetX,offsetY:i=this.offsetY,dontFlip:o=!1}={}){return new z0({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:t,rotation:e,offsetX:n,offsetY:i,dontFlip:o})}convertToViewportPoint(t,e){const n=[t,e];return vt.applyTransform(n,this.transform),n}convertToViewportRectangle(t){const e=[t[0],t[1]];vt.applyTransform(e,this.transform);const n=[t[2],t[3]];return vt.applyTransform(n,this.transform),[e[0],e[1],n[0],n[1]]}convertToPdfPoint(t,e){const n=[t,e];return vt.applyInverseTransform(n,this.transform),n}}class nE extends gh{constructor(t,e=0){super(t,"RenderingCancelledException"),this.extraDelay=e}}function ix(r){const t=r.length;let e=0;for(;e<t&&r[e].trim()==="";)e++;return r.substring(e,e+5).toLowerCase()==="data:"}function iE(r){return typeof r=="string"&&/\.pdf$/i.test(r)}function aB(r){return[r]=r.split(/[#?]/,1),r.substring(r.lastIndexOf("/")+1)}function lB(r,t="document.pdf"){if(typeof r!="string")return t;if(ix(r))return Ht('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const n=(u=>{try{return new URL(u)}catch{try{return new URL(decodeURIComponent(u))}catch{try{return new URL(u,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(u),"https://foo.bar")}catch{return null}}}}})(r);if(!n)return t;const i=u=>{try{let h=decodeURIComponent(u);return h.includes("/")?(h=h.split("/").at(-1),h.test(/^\.pdf$/i)?h:u):h}catch{return u}},o=/\.pdf$/i,c=n.pathname.split("/").at(-1);if(o.test(c))return i(c);if(n.searchParams.size>0){const u=Array.from(n.searchParams.values()).reverse();for(const f of u)if(o.test(f))return i(f);const h=Array.from(n.searchParams.keys()).reverse();for(const f of h)if(o.test(f))return i(f)}if(n.hash){const h=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(n.hash);if(h)return i(h[0])}return t}class o_{constructor(){ct(this,"started",Object.create(null));ct(this,"times",[])}time(t){t in this.started&&Ht(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||Ht(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let e=0;for(const{name:n}of this.times)e=Math.max(n.length,e);for(const{name:n,start:i,end:o}of this.times)t.push(`${n.padEnd(e)} ${o-i}ms
`);return t.join("")}}function om(r,t){const e=t?URL.parse(r,t):URL.parse(r);return e?.protocol==="http:"||e?.protocol==="https:"}function Ys(r){r.preventDefault()}function nn(r){r.preventDefault(),r.stopPropagation()}function cB(r){console.log("Deprecated API usage: "+r)}var Wm;class hw{static toDateObject(t){if(t instanceof Date)return t;if(!t||typeof t!="string")return null;l(this,Wm)||A(this,Wm,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const e=l(this,Wm).exec(t);if(!e)return null;const n=parseInt(e[1],10);let i=parseInt(e[2],10);i=i>=1&&i<=12?i-1:0;let o=parseInt(e[3],10);o=o>=1&&o<=31?o:1;let c=parseInt(e[4],10);c=c>=0&&c<=23?c:0;let u=parseInt(e[5],10);u=u>=0&&u<=59?u:0;let h=parseInt(e[6],10);h=h>=0&&h<=59?h:0;const f=e[7]||"Z";let p=parseInt(e[8],10);p=p>=0&&p<=23?p:0;let m=parseInt(e[9],10)||0;return m=m>=0&&m<=59?m:0,f==="-"?(c+=p,u+=m):f==="+"&&(c-=p,u-=m),new Date(Date.UTC(n,i,o,c,u,h))}}Wm=new WeakMap,_(hw,Wm);function uB(r,{scale:t=1,rotation:e=0}){const{width:n,height:i}=r.attributes.style,o=[0,0,parseInt(n),parseInt(i)];return new z0({viewBox:o,userUnit:1,scale:t,rotation:e})}function H0(r){if(r.startsWith("#")){const t=parseInt(r.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return r.startsWith("rgb(")?r.slice(4,-1).split(",").map(t=>parseInt(t)):r.startsWith("rgba(")?r.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(Ht(`Not a valid color format: "${r}"`),[0,0,0])}function hB(r){const t=document.createElement("span");t.style.visibility="hidden",t.style.colorScheme="only light",document.body.append(t);for(const e of r.keys()){t.style.color=e;const n=window.getComputedStyle(t).color;r.set(e,H0(n))}t.remove()}function We(r){const{a:t,b:e,c:n,d:i,e:o,f:c}=r.getTransform();return[t,e,n,i,o,c]}function Lr(r){const{a:t,b:e,c:n,d:i,e:o,f:c}=r.getTransform().invertSelf();return[t,e,n,i,o,c]}function hh(r,t,e=!1,n=!0){if(t instanceof z0){const{pageWidth:i,pageHeight:o}=t.rawDims,{style:c}=r,u=Cn.isCSSRoundSupported,h=`var(--total-scale-factor) * ${i}px`,f=`var(--total-scale-factor) * ${o}px`,p=u?`round(down, ${h}, var(--scale-round-x))`:`calc(${h})`,m=u?`round(down, ${f}, var(--scale-round-y))`:`calc(${f})`;!e||t.rotation%180===0?(c.width=p,c.height=m):(c.width=m,c.height=p)}n&&r.setAttribute("data-main-rotation",t.rotation)}class co{constructor(){const{pixelRatio:t}=co;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(t,e,n,i,o=-1){let c=1/0,u=1/0,h=1/0;n=co.capPixels(n,o),n>0&&(c=Math.sqrt(n/(t*e))),i!==-1&&(u=i/t,h=i/e);const f=Math.min(c,u,h);return this.sx>f||this.sy>f?(this.sx=f,this.sy=f,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(t,e){if(e>=0){const n=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+e/100));return t>0?Math.min(t,n):n}return t}}const GA=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class dB{static get isDarkMode(){return $t(this,"isDarkMode",!!window?.matchMedia?.("(prefers-color-scheme: dark)").matches)}}class fB{static get commentForegroundColor(){const t=document.createElement("span");t.classList.add("comment","sidebar");const{style:e}=t;e.width=e.height="0",e.display="none",e.color="var(--comment-fg-color)",document.body.append(t);const{color:n}=window.getComputedStyle(t);return t.remove(),$t(this,"commentForegroundColor",H0(n))}}function pB(r,t,e,n){n=Math.min(Math.max(n??1,0),1);const i=255*(1-n);return r=Math.round(r*n+i),t=Math.round(t*n+i),e=Math.round(e*n+i),[r,t,e]}function a_(r,t){const e=r[0]/255,n=r[1]/255,i=r[2]/255,o=Math.max(e,n,i),c=Math.min(e,n,i),u=(o+c)/2;if(o===c)t[0]=t[1]=0;else{const h=o-c;switch(t[1]=u<.5?h/(o+c):h/(2-o-c),o){case e:t[0]=((n-i)/h+(n<i?6:0))*60;break;case n:t[0]=((i-e)/h+2)*60;break;case i:t[0]=((e-n)/h+4)*60;break}}t[2]=u}function XA(r,t){const e=r[0],n=r[1],i=r[2],o=(1-Math.abs(2*i-1))*n,c=o*(1-Math.abs(e/60%2-1)),u=i-o/2;switch(Math.floor(e/60)){case 0:t[0]=o+u,t[1]=c+u,t[2]=u;break;case 1:t[0]=c+u,t[1]=o+u,t[2]=u;break;case 2:t[0]=u,t[1]=o+u,t[2]=c+u;break;case 3:t[0]=u,t[1]=c+u,t[2]=o+u;break;case 4:t[0]=c+u,t[1]=u,t[2]=o+u;break;case 5:case 6:t[0]=o+u,t[1]=u,t[2]=c+u;break}}function l_(r){return r<=.03928?r/12.92:((r+.055)/1.055)**2.4}function c_(r,t,e){XA(r,e),e.map(l_);const n=.2126*e[0]+.7152*e[1]+.0722*e[2];XA(t,e),e.map(l_);const i=.2126*e[0]+.7152*e[1]+.0722*e[2];return n>i?(n+.05)/(i+.05):(i+.05)/(n+.05)}const u_=new Map;function mB(r,t){const e=r[0]+r[1]*256+r[2]*65536+t[0]*16777216+t[1]*4294967296+t[2]*1099511627776;let n=u_.get(e);if(n)return n;const i=new Float32Array(9),o=i.subarray(0,3),c=i.subarray(3,6);a_(r,c);const u=i.subarray(6,9);a_(t,u);const h=u[2]<.5,f=h?12:4.5;if(c[2]=h?Math.sqrt(c[2]):1-Math.sqrt(1-c[2]),c_(c,u,o)<f){let p,m;h?(p=c[2],m=1):(p=0,m=c[2]);const v=.005;for(;m-p>v;){const b=c[2]=(p+m)/2;h===c_(c,u,o)<f?p=b:m=b}c[2]=h?m:p}return XA(c,o),n=vt.makeHexColor(Math.round(o[0]*255),Math.round(o[1]*255),Math.round(o[2]*255)),u_.set(e,n),n}function _2({html:r,dir:t,className:e},n){const i=document.createDocumentFragment();if(typeof r=="string"){const o=document.createElement("p");o.dir=t||"auto";const c=r.split(/(?:\r\n?|\n)/);for(let u=0,h=c.length;u<h;++u){const f=c[u];o.append(document.createTextNode(f)),u<h-1&&o.append(document.createElement("br"))}i.append(o)}else T2.render({xfaHtml:r,div:i,intent:"richText"});i.firstElementChild.classList.add("richText",e),n.append(i)}function P2(r){const t=new Path2D;if(!r)return t;for(let e=0,n=r.length;e<n;)switch(r[e++]){case Zp.moveTo:t.moveTo(r[e++],r[e++]);break;case Zp.lineTo:t.lineTo(r[e++],r[e++]);break;case Zp.curveTo:t.bezierCurveTo(r[e++],r[e++],r[e++],r[e++],r[e++],r[e++]);break;case Zp.quadraticCurveTo:t.quadraticCurveTo(r[e++],r[e++],r[e++],r[e++]);break;case Zp.closePath:t.closePath();break;default:Ht(`Unrecognized drawing path operator: ${r[e-1]}`);break}return t}var nl,il,Is,Fs,Gm,sl,Pd,Rd,Xm,Ew,R2,Kn,M2,D2,ud,am;const Ro=class Ro{constructor(t){_(this,Kn);_(this,nl,null);_(this,il,null);_(this,Is);_(this,Fs,null);_(this,Gm,null);_(this,sl,null);_(this,Pd,null);_(this,Rd,null);A(this,Is,t),l(Ro,Xm)||A(Ro,Xm,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"}))}render(){const t=A(this,nl,document.createElement("div"));t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");const e=l(this,Is)._uiManager._signal;e instanceof AbortSignal&&!e.aborted&&(t.addEventListener("contextmenu",Ys,{signal:e}),t.addEventListener("pointerdown",R(Ro,Ew,R2),{signal:e}));const n=A(this,Fs,document.createElement("div"));n.className="buttons",t.append(n);const i=l(this,Is).toolbarPosition;if(i){const{style:o}=t,c=l(this,Is)._uiManager.direction==="ltr"?1-i[0]:i[0];o.insetInlineEnd=`${100*c}%`,o.top=`calc(${100*i[1]}% + var(--editor-toolbar-vert-offset))`}return t}get div(){return l(this,nl)}hide(){l(this,nl).classList.add("hidden"),l(this,il)?.hideDropdown()}show(){l(this,nl).classList.remove("hidden"),l(this,Gm)?.shown(),l(this,sl)?.shown()}addDeleteButton(){const{editorType:t,_uiManager:e}=l(this,Is),n=document.createElement("button");n.classList.add("basic","deleteButton"),n.tabIndex=0,n.setAttribute("data-l10n-id",l(Ro,Xm)[t]),R(this,Kn,ud).call(this,n)&&n.addEventListener("click",i=>{e.delete()},{signal:e._signal}),l(this,Fs).append(n)}async addAltText(t){const e=await t.render();R(this,Kn,ud).call(this,e),l(this,Fs).append(e,l(this,Kn,am)),A(this,Gm,t)}addComment(t,e=null){if(l(this,sl))return;const n=t.renderForToolbar();if(!n)return;R(this,Kn,ud).call(this,n);const i=A(this,Pd,l(this,Kn,am));e?(l(this,Fs).insertBefore(n,e),l(this,Fs).insertBefore(i,e)):l(this,Fs).append(n,i),A(this,sl,t),t.toolbar=this}addColorPicker(t){if(l(this,il))return;A(this,il,t);const e=t.renderButton();R(this,Kn,ud).call(this,e),l(this,Fs).append(e,l(this,Kn,am))}async addEditSignatureButton(t){const e=A(this,Rd,await t.renderEditButton(l(this,Is)));R(this,Kn,ud).call(this,e),l(this,Fs).append(e,l(this,Kn,am))}removeButton(t){switch(t){case"comment":l(this,sl)?.removeToolbarCommentButton(),A(this,sl,null),l(this,Pd)?.remove(),A(this,Pd,null);break}}async addButton(t,e){switch(t){case"colorPicker":e&&this.addColorPicker(e);break;case"altText":e&&await this.addAltText(e);break;case"editSignature":e&&await this.addEditSignatureButton(e);break;case"delete":this.addDeleteButton();break;case"comment":e&&this.addComment(e);break}}async addButtonBefore(t,e,n){if(!e&&t==="comment")return;const i=l(this,Fs).querySelector(n);i&&t==="comment"&&this.addComment(e,i)}updateEditSignatureButton(t){l(this,Rd)&&(l(this,Rd).title=t)}remove(){l(this,nl).remove(),l(this,il)?.destroy(),A(this,il,null)}};nl=new WeakMap,il=new WeakMap,Is=new WeakMap,Fs=new WeakMap,Gm=new WeakMap,sl=new WeakMap,Pd=new WeakMap,Rd=new WeakMap,Xm=new WeakMap,Ew=new WeakSet,R2=function(t){t.stopPropagation()},Kn=new WeakSet,M2=function(t){l(this,Is)._focusEventsAllowed=!1,nn(t)},D2=function(t){l(this,Is)._focusEventsAllowed=!0,nn(t)},ud=function(t){const e=l(this,Is)._uiManager._signal;return!(e instanceof AbortSignal)||e.aborted?!1:(t.addEventListener("focusin",R(this,Kn,M2).bind(this),{capture:!0,signal:e}),t.addEventListener("focusout",R(this,Kn,D2).bind(this),{capture:!0,signal:e}),t.addEventListener("contextmenu",Ys,{signal:e}),!0)},am=function(){const t=document.createElement("div");return t.className="divider",t},_(Ro,Ew),_(Ro,Xm,null);let KA=Ro;var Km,Yc,Do,wa,N2,L2,YA;class gB{constructor(t){_(this,wa);_(this,Km,null);_(this,Yc,null);_(this,Do);A(this,Do,t)}show(t,e,n){const[i,o]=R(this,wa,L2).call(this,e,n),{style:c}=l(this,Yc)||A(this,Yc,R(this,wa,N2).call(this));t.append(l(this,Yc)),c.insetInlineEnd=`${100*i}%`,c.top=`calc(${100*o}% + var(--editor-toolbar-vert-offset))`}hide(){l(this,Yc).remove()}}Km=new WeakMap,Yc=new WeakMap,Do=new WeakMap,wa=new WeakSet,N2=function(){const t=A(this,Yc,document.createElement("div"));t.className="editToolbar",t.setAttribute("role","toolbar");const e=l(this,Do)._signal;e instanceof AbortSignal&&!e.aborted&&t.addEventListener("contextmenu",Ys,{signal:e});const n=A(this,Km,document.createElement("div"));return n.className="buttons",t.append(n),l(this,Do).hasCommentManager()&&R(this,wa,YA).call(this,"commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{l(this,Do).commentSelection("floating_button")}),R(this,wa,YA).call(this,"highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{l(this,Do).highlightSelection("floating_button")}),t},L2=function(t,e){let n=0,i=0;for(const o of t){const c=o.y+o.height;if(c<n)continue;const u=o.x+(e?o.width:0);if(c>n){i=u,n=c;continue}e?u>i&&(i=u):u<i&&(i=u)}return[e?1-i:i,n]},YA=function(t,e,n,i){const o=document.createElement("button");o.classList.add("basic",t),o.tabIndex=0,o.setAttribute("data-l10n-id",e);const c=document.createElement("span");o.append(c),c.className="visuallyHidden",c.setAttribute("data-l10n-id",n);const u=l(this,Do)._signal;u instanceof AbortSignal&&!u.aborted&&(o.addEventListener("contextmenu",Ys,{signal:u}),o.addEventListener("click",i,{signal:u})),l(this,Km).append(o)};function I2(r,t,e){for(const n of e)t.addEventListener(n,r[n].bind(r))}var qc,Qc,Md,Zc;const ye=class ye{static initializeAndAddPointerId(t){(l(ye,Qc)||A(ye,Qc,new Set)).add(t)}static setPointer(t,e){l(ye,qc)||A(ye,qc,e),l(ye,Zc)??A(ye,Zc,t)}static setTimeStamp(t){A(ye,Md,t)}static isSamePointerId(t){return l(ye,qc)===t}static isSamePointerIdOrRemove(t){return l(ye,qc)===t?!0:(l(ye,Qc)?.delete(t),!1)}static isSamePointerType(t){return l(ye,Zc)===t}static isInitializedAndDifferentPointerType(t){return l(ye,Zc)!==null&&!ye.isSamePointerType(t)}static isSameTimeStamp(t){return l(ye,Md)===t}static isUsingMultiplePointers(){return l(ye,Qc)?.size>=1}static clearPointerType(){A(ye,Zc,null)}static clearPointerIds(){A(ye,qc,NaN),A(ye,Qc,null)}static clearTimeStamp(){A(ye,Md,NaN)}};qc=new WeakMap,Qc=new WeakMap,Md=new WeakMap,Zc=new WeakMap,_(ye,qc,NaN),_(ye,Qc,null),_(ye,Md,NaN),_(ye,Zc,null);let ii=ye;var Cw;class yB{constructor(){_(this,Cw,0)}get id(){return`${Um}${wn(this,Cw)._++}`}}Cw=new WeakMap;var Dd,Ym,si,Nd,Sv;const dE=class dE{constructor(){_(this,Nd);_(this,Dd,C2());_(this,Ym,0);_(this,si,null)}static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',n=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),i=new Image;i.src=t;const o=i.decode().then(()=>(n.drawImage(i,0,0,1,1,0,0,1,3),new Uint32Array(n.getImageData(0,0,1,1).data.buffer)[0]===0));return $t(this,"_isSVGFittingCanvas",o)}async getFromFile(t){const{lastModified:e,name:n,size:i,type:o}=t;return R(this,Nd,Sv).call(this,`${e}_${n}_${i}_${o}`,t)}async getFromUrl(t){return R(this,Nd,Sv).call(this,t,t)}async getFromBlob(t,e){const n=await e;return R(this,Nd,Sv).call(this,t,n)}async getFromId(t){l(this,si)||A(this,si,new Map);const e=l(this,si).get(t);if(!e)return null;if(e.bitmap)return e.refCounter+=1,e;if(e.file)return this.getFromFile(e.file);if(e.blobPromise){const{blobPromise:n}=e;return delete e.blobPromise,this.getFromBlob(e.id,n)}return this.getFromUrl(e.url)}getFromCanvas(t,e){l(this,si)||A(this,si,new Map);let n=l(this,si).get(t);if(n?.bitmap)return n.refCounter+=1,n;const i=new OffscreenCanvas(e.width,e.height);return i.getContext("2d").drawImage(e,0,0),n={bitmap:i.transferToImageBitmap(),id:`image_${l(this,Dd)}_${wn(this,Ym)._++}`,refCounter:1,isSvg:!1},l(this,si).set(t,n),l(this,si).set(n.id,n),n}getSvgUrl(t){const e=l(this,si).get(t);return e?.isSvg?e.svgUrl:null}deleteId(t){l(this,si)||A(this,si,new Map);const e=l(this,si).get(t);if(!e||(e.refCounter-=1,e.refCounter!==0))return;const{bitmap:n}=e;if(!e.url&&!e.file){const i=new OffscreenCanvas(n.width,n.height);i.getContext("bitmaprenderer").transferFromImageBitmap(n),e.blobPromise=i.convertToBlob()}n.close?.(),e.bitmap=null}isValidId(t){return t.startsWith(`image_${l(this,Dd)}_`)}};Dd=new WeakMap,Ym=new WeakMap,si=new WeakMap,Nd=new WeakSet,Sv=async function(t,e){l(this,si)||A(this,si,new Map);let n=l(this,si).get(t);if(n===null)return null;if(n?.bitmap)return n.refCounter+=1,n;try{n||(n={bitmap:null,id:`image_${l(this,Dd)}_${wn(this,Ym)._++}`,refCounter:0,isSvg:!1});let i;if(typeof e=="string"?(n.url=e,i=await V0(e,"blob")):e instanceof File?i=n.file=e:e instanceof Blob&&(i=e),i.type==="image/svg+xml"){const o=dE._isSVGFittingCanvas,c=new FileReader,u=new Image,h=new Promise((f,p)=>{u.onload=()=>{n.bitmap=u,n.isSvg=!0,f()},c.onload=async()=>{const m=n.svgUrl=c.result;u.src=await o?`${m}#svgView(preserveAspectRatio(none))`:m},u.onerror=c.onerror=p});c.readAsDataURL(i),await h}else n.bitmap=await createImageBitmap(i);n.refCounter=1}catch(i){Ht(i),n=null}return l(this,si).set(t,n),n&&l(this,si).set(n.id,n),n};let qA=dE;var on,rl,qm,$e;class vB{constructor(t=128){_(this,on,[]);_(this,rl,!1);_(this,qm);_(this,$e,-1);A(this,qm,t)}add({cmd:t,undo:e,post:n,mustExec:i,type:o=NaN,overwriteIfSameType:c=!1,keepUndo:u=!1}){if(i&&t(),l(this,rl))return;const h={cmd:t,undo:e,post:n,type:o};if(l(this,$e)===-1){l(this,on).length>0&&(l(this,on).length=0),A(this,$e,0),l(this,on).push(h);return}if(c&&l(this,on)[l(this,$e)].type===o){u&&(h.undo=l(this,on)[l(this,$e)].undo),l(this,on)[l(this,$e)]=h;return}const f=l(this,$e)+1;f===l(this,qm)?l(this,on).splice(0,1):(A(this,$e,f),f<l(this,on).length&&l(this,on).splice(f)),l(this,on).push(h)}undo(){if(l(this,$e)===-1)return;A(this,rl,!0);const{undo:t,post:e}=l(this,on)[l(this,$e)];t(),e?.(),A(this,rl,!1),A(this,$e,l(this,$e)-1)}redo(){if(l(this,$e)<l(this,on).length-1){A(this,$e,l(this,$e)+1),A(this,rl,!0);const{cmd:t,post:e}=l(this,on)[l(this,$e)];t(),e?.(),A(this,rl,!1)}}hasSomethingToUndo(){return l(this,$e)!==-1}hasSomethingToRedo(){return l(this,$e)<l(this,on).length-1}cleanType(t){if(l(this,$e)!==-1){for(let e=l(this,$e);e>=0;e--)if(l(this,on)[e].type!==t){l(this,on).splice(e+1,l(this,$e)-e),A(this,$e,e);return}l(this,on).length=0,A(this,$e,-1)}}destroy(){A(this,on,null)}}on=new WeakMap,rl=new WeakMap,qm=new WeakMap,$e=new WeakMap;var kw,F2;class $0{constructor(t){_(this,kw);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:e}=Cn.platform;for(const[n,i,o={}]of t)for(const c of n){const u=c.startsWith("mac+");e&&u?(this.callbacks.set(c.slice(4),{callback:i,options:o}),this.allKeys.add(c.split("+").at(-1))):!e&&!u&&(this.callbacks.set(c,{callback:i,options:o}),this.allKeys.add(c.split("+").at(-1)))}}exec(t,e){if(!this.allKeys.has(e.key))return;const n=this.callbacks.get(R(this,kw,F2).call(this,e));if(!n)return;const{callback:i,options:{bubbles:o=!1,args:c=[],checker:u=null}}=n;u&&!u(t,e)||(i.bind(t,...c,e)(),o||nn(e))}}kw=new WeakSet,F2=function(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const e=this.buffer.join("+");return this.buffer.length=0,e};const Tw=class Tw{get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return hB(t),$t(this,"_colors",t)}convert(t){const e=H0(t);if(!window.matchMedia("(forced-colors: active)").matches)return e;for(const[n,i]of this._colors)if(i.every((o,c)=>o===e[c]))return Tw._colorsMapping.get(n);return e}getHexCode(t){const e=this._colors.get(t);return e?vt.makeHexColor(...e):t}};ct(Tw,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let QA=Tw;var Ld,Zi,Id,qe,An,Fd,Os,Od,js,ri,ol,al,jd,ll,jr,Bs,Jc,Qm,Zm,Bd,Jm,Br,cl,Ud,ul,Ur,_w,hl,Vd,tg,dl,tu,zd,fl,eg,fn,pe,No,pl,ml,ng,Hd,ig,gl,Vr,Lo,sg,rg,Us,yt,Ev,ZA,O2,j2,lm,B2,U2,V2,JA,z2,H2,$2,W2,yi,_o,G2,X2,tS,K2,cm,eS;const Ed=class Ed{constructor(t,e,n,i,o,c,u,h,f,p,m,v,b,C,E,T){_(this,yt);_(this,Ld,new AbortController);_(this,Zi,null);_(this,Id,null);_(this,qe,new Map);_(this,An,new Map);_(this,Fd,null);_(this,Os,null);_(this,Od,null);_(this,js,new vB);_(this,ri,null);_(this,ol,null);_(this,al,null);_(this,jd,0);_(this,ll,new Set);_(this,jr,null);_(this,Bs,null);_(this,Jc,new Set);ct(this,"_editorUndoBar",null);_(this,Qm,!1);_(this,Zm,!1);_(this,Bd,!1);_(this,Jm,null);_(this,Br,null);_(this,cl,null);_(this,Ud,null);_(this,ul,!1);_(this,Ur,null);_(this,_w,new yB);_(this,hl,!1);_(this,Vd,!1);_(this,tg,!1);_(this,dl,null);_(this,tu,null);_(this,zd,null);_(this,fl,null);_(this,eg,null);_(this,fn,Gt.NONE);_(this,pe,new Set);_(this,No,null);_(this,pl,null);_(this,ml,null);_(this,ng,null);_(this,Hd,null);_(this,ig,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});_(this,gl,[0,0]);_(this,Vr,null);_(this,Lo,null);_(this,sg,null);_(this,rg,null);_(this,Us,null);const P=this._signal=l(this,Ld).signal;A(this,Lo,t),A(this,sg,e),A(this,rg,n),A(this,Fd,i),A(this,ri,o),A(this,pl,c),A(this,Hd,h),this._eventBus=u,u._on("editingaction",this.onEditingAction.bind(this),{signal:P}),u._on("pagechanging",this.onPageChanging.bind(this),{signal:P}),u._on("scalechanging",this.onScaleChanging.bind(this),{signal:P}),u._on("rotationchanging",this.onRotationChanging.bind(this),{signal:P}),u._on("setpreference",this.onSetPreference.bind(this),{signal:P}),u._on("switchannotationeditorparams",N=>this.updateParams(N.type,N.value),{signal:P}),window.addEventListener("pointerdown",()=>{A(this,Vd,!0)},{capture:!0,signal:P}),window.addEventListener("pointerup",()=>{A(this,Vd,!1)},{capture:!0,signal:P}),R(this,yt,B2).call(this),R(this,yt,W2).call(this),R(this,yt,JA).call(this),A(this,Os,h.annotationStorage),A(this,Jm,h.filterFactory),A(this,ml,f),A(this,Ud,p||null),A(this,Qm,m),A(this,Zm,v),A(this,Bd,b),A(this,eg,C||null),this.viewParameters={realScale:Ql.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=E||null,this._supportsPinchToZoom=T!==!1,o?.setSidebarUiManager(this)}static get _keyboardManager(){const t=Ed.prototype,e=c=>l(c,Lo).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&c.hasSomethingToControl(),n=(c,{target:u})=>{if(u instanceof HTMLInputElement){const{type:h}=u;return h!=="text"&&h!=="number"}return!0},i=this.TRANSLATE_SMALL,o=this.TRANSLATE_BIG;return $t(this,"_keyboardManager",new $0([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:n}],[["ctrl+z","mac+meta+z"],t.undo,{checker:n}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:n}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:n}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(c,{target:u})=>!(u instanceof HTMLButtonElement)&&l(c,Lo).contains(u)&&!c.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(c,{target:u})=>!(u instanceof HTMLButtonElement)&&l(c,Lo).contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-i,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-o,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[i,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[o,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-i],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-o],checker:e}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,i],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,o],checker:e}]]))}destroy(){l(this,Us)?.resolve(),A(this,Us,null),l(this,Ld)?.abort(),A(this,Ld,null),this._signal=null;for(const t of l(this,An).values())t.destroy();l(this,An).clear(),l(this,qe).clear(),l(this,Jc).clear(),l(this,fl)?.clear(),A(this,Zi,null),l(this,pe).clear(),l(this,js).destroy(),l(this,Fd)?.destroy(),l(this,ri)?.destroy(),l(this,pl)?.destroy(),l(this,Ur)?.hide(),A(this,Ur,null),l(this,zd)?.destroy(),A(this,zd,null),A(this,Id,null),l(this,Br)&&(clearTimeout(l(this,Br)),A(this,Br,null)),l(this,Vr)&&(clearTimeout(l(this,Vr)),A(this,Vr,null)),this._editorUndoBar?.destroy(),A(this,Hd,null)}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return l(this,eg)}get useNewAltTextFlow(){return l(this,Zm)}get useNewAltTextWhenAddingImage(){return l(this,Bd)}get hcmFilter(){return $t(this,"hcmFilter",l(this,ml)?l(this,Jm).addHCMFilter(l(this,ml).foreground,l(this,ml).background):"none")}get direction(){return $t(this,"direction",getComputedStyle(l(this,Lo)).direction)}get _highlightColors(){return $t(this,"_highlightColors",l(this,Ud)?new Map(l(this,Ud).split(",").map(t=>(t=t.split("=").map(e=>e.trim()),t[1]=t[1].toUpperCase(),t))):null)}get highlightColors(){const{_highlightColors:t}=this;if(!t)return $t(this,"highlightColors",null);const e=new Map,n=!!l(this,ml);for(const[i,o]of t){const c=i.endsWith("_HCM");if(n&&c){e.set(i.replace("_HCM",""),o);continue}!n&&!c&&e.set(i,o)}return $t(this,"highlightColors",e)}get highlightColorNames(){return $t(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}getNonHCMColor(t){if(!this._highlightColors)return t;const e=this.highlightColorNames.get(t);return this._highlightColors.get(e)||t}getNonHCMColorName(t){return this.highlightColorNames.get(t)||t}setCurrentDrawingSession(t){t?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),A(this,al,t)}setMainHighlightColorPicker(t){A(this,zd,t)}editAltText(t,e=!1){l(this,Fd)?.editAltText(this,t,e)}hasCommentManager(){return!!l(this,ri)}editComment(t,e,n,i){l(this,ri)?.showDialog(this,t,e,n,i)}selectComment(t,e){l(this,An).get(t)?.getEditorByUID(e)?.toggleComment(!0,!0)}updateComment(t){l(this,ri)?.updateComment(t.getData())}updatePopupColor(t){l(this,ri)?.updatePopupColor(t)}removeComment(t){l(this,ri)?.removeComments([t.uid])}toggleComment(t,e,n=void 0){l(this,ri)?.toggleCommentPopup(t,e,n)}makeCommentColor(t,e){return t&&l(this,ri)?.makeCommentColor(t,e)||null}getCommentDialogElement(){return l(this,ri)?.dialogElement||null}async waitForEditorsRendered(t){if(l(this,An).has(t-1))return;const{resolve:e,promise:n}=Promise.withResolvers(),i=o=>{o.pageNumber===t&&(this._eventBus._off("editorsrendered",i),e())};this._eventBus.on("editorsrendered",i),await n}getSignature(t){l(this,pl)?.getSignature({uiManager:this,editor:t})}get signatureManager(){return l(this,pl)}switchToMode(t,e){this._eventBus.on("annotationeditormodechanged",e,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,e){this._eventBus.dispatch("setpreference",{source:this,name:t,value:e})}onSetPreference({name:t,value:e}){switch(t){case"enableNewAltTextWhenAddingImage":A(this,Bd,e);break}}onPageChanging({pageNumber:t}){A(this,jd,t-1)}focusMainContainer(){l(this,Lo).focus()}findParent(t,e){for(const n of l(this,An).values()){const{x:i,y:o,width:c,height:u}=n.div.getBoundingClientRect();if(t>=i&&t<=i+c&&e>=o&&e<=o+u)return n}return null}disableUserSelect(t=!1){l(this,sg).classList.toggle("noUserSelect",t)}addShouldRescale(t){l(this,Jc).add(t)}removeShouldRescale(t){l(this,Jc).delete(t)}onScaleChanging({scale:t}){this.commitOrRemove(),this.viewParameters.realScale=t*Ql.PDF_TO_CSS_UNITS;for(const e of l(this,Jc))e.onScaleChanging();l(this,al)?.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}highlightSelection(t="",e=!1){const n=document.getSelection();if(!n||n.isCollapsed)return;const{anchorNode:i,anchorOffset:o,focusNode:c,focusOffset:u}=n,h=n.toString(),p=R(this,yt,Ev).call(this,n).closest(".textLayer"),m=this.getSelectionBoxes(p);if(!m)return;n.empty();const v=R(this,yt,ZA).call(this,p),b=l(this,fn)===Gt.NONE,C=()=>{const E=v?.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:m,anchorNode:i,anchorOffset:o,focusNode:c,focusOffset:u,text:h});b&&this.showAllEditors("highlight",!0,!0),e&&E?.editComment()};if(b){this.switchToMode(Gt.HIGHLIGHT,C);return}C()}commentSelection(t=""){this.highlightSelection(t,!0)}getAndRemoveDataFromAnnotationStorage(t){if(!l(this,Os))return null;const e=`${Um}${t}`,n=l(this,Os).getRawValue(e);return n&&l(this,Os).remove(e),n}addToAnnotationStorage(t){!t.isEmpty()&&l(this,Os)&&!l(this,Os).has(t.id)&&l(this,Os).setValue(t.id,t)}a11yAlert(t,e=null){const n=l(this,rg);n&&(n.setAttribute("data-l10n-id",t),e?n.setAttribute("data-l10n-args",JSON.stringify(e)):n.removeAttribute("data-l10n-args"))}blur(){if(this.isShiftKeyDown=!1,l(this,ul)&&(A(this,ul,!1),R(this,yt,lm).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const e of l(this,pe))if(e.div.contains(t)){A(this,tu,[e,t]),e._focusEventsAllowed=!1;break}}focus(){if(!l(this,tu))return;const[t,e]=l(this,tu);A(this,tu,null),e.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),e.focus()}addEditListeners(){R(this,yt,JA).call(this),this.setEditingState(!0)}removeEditListeners(){R(this,yt,z2).call(this),this.setEditingState(!1)}dragOver(t){for(const{type:e}of t.dataTransfer.items)for(const n of l(this,Bs))if(n.isHandlingMimeForPasting(e)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(const e of t.dataTransfer.items)for(const n of l(this,Bs))if(n.isHandlingMimeForPasting(e.type)){n.paste(e,this.currentLayer),t.preventDefault();return}}copy(t){if(t.preventDefault(),l(this,Zi)?.commitOrRemove(),!this.hasSelection)return;const e=[];for(const n of l(this,pe)){const i=n.serialize(!0);i&&e.push(i)}e.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(e))}cut(t){this.copy(t),this.delete()}async paste(t){t.preventDefault();const{clipboardData:e}=t;for(const o of e.items)for(const c of l(this,Bs))if(c.isHandlingMimeForPasting(o.type)){c.paste(o,this.currentLayer);return}let n=e.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(o){Ht(`paste: "${o.message}".`);return}if(!Array.isArray(n))return;this.unselectAll();const i=this.currentLayer;try{const o=[];for(const h of n){const f=await i.deserialize(h);if(!f)return;o.push(f)}const c=()=>{for(const h of o)R(this,yt,tS).call(this,h);R(this,yt,eS).call(this,o)},u=()=>{for(const h of o)h.remove()};this.addCommands({cmd:c,undo:u,mustExec:!0})}catch(o){Ht(`paste: "${o.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),l(this,fn)!==Gt.NONE&&!this.isEditorHandlingKeyboard&&Ed._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,l(this,ul)&&(A(this,ul,!1),R(this,yt,lm).call(this,"main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}setEditingState(t){t?(R(this,yt,U2).call(this),R(this,yt,H2).call(this),R(this,yt,yi).call(this,{isEditing:l(this,fn)!==Gt.NONE,isEmpty:R(this,yt,cm).call(this),hasSomethingToUndo:l(this,js).hasSomethingToUndo(),hasSomethingToRedo:l(this,js).hasSomethingToRedo(),hasSelectedEditor:!1})):(R(this,yt,V2).call(this),R(this,yt,$2).call(this),R(this,yt,yi).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!l(this,Bs)){A(this,Bs,t);for(const e of l(this,Bs))R(this,yt,_o).call(this,e.defaultPropertiesToUpdate)}}getId(){return l(this,_w).id}get currentLayer(){return l(this,An).get(l(this,jd))}getLayer(t){return l(this,An).get(t)}get currentPageIndex(){return l(this,jd)}addLayer(t){l(this,An).set(t.pageIndex,t),l(this,hl)?t.enable():t.disable()}removeLayer(t){l(this,An).delete(t.pageIndex)}async updateMode(t,e=null,n=!1,i=!1,o=!1,c=!1){if(l(this,fn)!==t&&!(l(this,Us)&&(await l(this,Us).promise,!l(this,Us)))){if(A(this,Us,Promise.withResolvers()),l(this,al)?.commitOrRemove(),l(this,fn)===Gt.POPUP&&l(this,ri)?.hideSidebar(),l(this,ri)?.destroyPopup(),A(this,fn,t),t===Gt.NONE){this.setEditingState(!1),R(this,yt,X2).call(this);for(const u of l(this,qe).values())u.hideStandaloneCommentButton();this._editorUndoBar?.hide(),this.toggleComment(null),l(this,Us).resolve();return}for(const u of l(this,qe).values())u.addStandaloneCommentButton();t===Gt.SIGNATURE&&await l(this,pl)?.loadSignatures(),n&&ii.clearPointerType(),this.setEditingState(!0),await R(this,yt,G2).call(this),this.unselectAll();for(const u of l(this,An).values())u.updateMode(t);if(t===Gt.POPUP){l(this,Id)||A(this,Id,await l(this,Hd).getAnnotationsByType(new Set(l(this,Bs).map(f=>f._editorType))));const u=new Set,h=[];for(const f of l(this,qe).values()){const{annotationElementId:p,hasComment:m,deleted:v}=f;p&&u.add(p),m&&!v&&h.push(f.getData())}for(const f of l(this,Id)){const{id:p,popupRef:m,contentsObj:v}=f;m&&v?.str&&!u.has(p)&&!l(this,ll).has(p)&&h.push(f)}l(this,ri)?.showSidebar(h)}if(!e){i&&this.addNewEditorFromKeyboard(),l(this,Us).resolve();return}for(const u of l(this,qe).values())u.uid===e?(this.setSelected(u),c?u.editComment():o?u.enterInEditMode():u.focus()):u.unselect();l(this,Us).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t.mode!==l(this,fn)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...t})}updateParams(t,e){if(l(this,Bs)){switch(t){case ie.CREATE:this.currentLayer.addNewEditor(e);return;case ie.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(l(this,ng)||A(this,ng,new Map)).set(t,e),this.showAllEditors("highlight",e);break}if(this.hasSelection)for(const n of l(this,pe))n.updateParams(t,e);else for(const n of l(this,Bs))n.updateDefaultParams(t,e)}}showAllEditors(t,e,n=!1){for(const o of l(this,qe).values())o.editorType===t&&o.show(e);(l(this,ng)?.get(ie.HIGHLIGHT_SHOW_ALL)??!0)!==e&&R(this,yt,_o).call(this,[[ie.HIGHLIGHT_SHOW_ALL,e]])}enableWaiting(t=!1){if(l(this,tg)!==t){A(this,tg,t);for(const e of l(this,An).values())t?e.disableClick():e.enableClick(),e.div.classList.toggle("waiting",t)}}*getEditors(t){for(const e of l(this,qe).values())e.pageIndex===t&&(yield e)}getEditor(t){return l(this,qe).get(t)}addEditor(t){l(this,qe).set(t.id,t)}removeEditor(t){t.div.contains(document.activeElement)&&(l(this,Br)&&clearTimeout(l(this,Br)),A(this,Br,setTimeout(()=>{this.focusMainContainer(),A(this,Br,null)},0))),l(this,qe).delete(t.id),t.annotationElementId&&l(this,fl)?.delete(t.annotationElementId),this.unselect(t),(!t.annotationElementId||!l(this,ll).has(t.annotationElementId))&&l(this,Os)?.remove(t.id)}addDeletedAnnotationElement(t){l(this,ll).add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return l(this,ll).has(t)}removeDeletedAnnotationElement(t){l(this,ll).delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}setActiveEditor(t){l(this,Zi)!==t&&(A(this,Zi,t),t&&R(this,yt,_o).call(this,t.propertiesToUpdate))}updateUI(t){l(this,yt,K2)===t&&R(this,yt,_o).call(this,t.propertiesToUpdate)}updateUIForDefaultProperties(t){R(this,yt,_o).call(this,t.defaultPropertiesToUpdate)}toggleSelected(t){if(l(this,pe).has(t)){l(this,pe).delete(t),t.unselect(),R(this,yt,yi).call(this,{hasSelectedEditor:this.hasSelection});return}l(this,pe).add(t),t.select(),R(this,yt,_o).call(this,t.propertiesToUpdate),R(this,yt,yi).call(this,{hasSelectedEditor:!0})}setSelected(t){this.updateToolbar({mode:t.mode,editId:t.uid}),l(this,al)?.commitOrRemove();for(const e of l(this,pe))e!==t&&e.unselect();l(this,pe).clear(),l(this,pe).add(t),t.select(),R(this,yt,_o).call(this,t.propertiesToUpdate),R(this,yt,yi).call(this,{hasSelectedEditor:!0})}isSelected(t){return l(this,pe).has(t)}get firstSelectedEditor(){return l(this,pe).values().next().value}unselect(t){t.unselect(),l(this,pe).delete(t),R(this,yt,yi).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return l(this,pe).size!==0}get isEnterHandled(){return l(this,pe).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){l(this,js).undo(),R(this,yt,yi).call(this,{hasSomethingToUndo:l(this,js).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:R(this,yt,cm).call(this)}),this._editorUndoBar?.hide()}redo(){l(this,js).redo(),R(this,yt,yi).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:l(this,js).hasSomethingToRedo(),isEmpty:R(this,yt,cm).call(this)})}addCommands(t){l(this,js).add(t),R(this,yt,yi).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:R(this,yt,cm).call(this)})}cleanUndoStack(t){l(this,js).cleanType(t)}delete(){this.commitOrRemove();const t=this.currentLayer?.endDrawingSession(!0);if(!this.hasSelection&&!t)return;const e=t?[t]:[...l(this,pe)],n=()=>{this._editorUndoBar?.show(i,e.length===1?e[0].editorType:e.length);for(const o of e)o.remove()},i=()=>{for(const o of e)R(this,yt,tS).call(this,o)};this.addCommands({cmd:n,undo:i,mustExec:!0})}commitOrRemove(){l(this,Zi)?.commitOrRemove()}hasSomethingToControl(){return l(this,Zi)||this.hasSelection}selectAll(){for(const t of l(this,pe))t.commit();R(this,yt,eS).call(this,l(this,qe).values())}unselectAll(){if(!(l(this,Zi)&&(l(this,Zi).commitOrRemove(),l(this,fn)!==Gt.NONE))&&!l(this,al)?.commitOrRemove()&&this.hasSelection){for(const t of l(this,pe))t.unselect();l(this,pe).clear(),R(this,yt,yi).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(t,e,n=!1){if(n||this.commitOrRemove(),!this.hasSelection)return;l(this,gl)[0]+=t,l(this,gl)[1]+=e;const[i,o]=l(this,gl),c=[...l(this,pe)],u=1e3;l(this,Vr)&&clearTimeout(l(this,Vr)),A(this,Vr,setTimeout(()=>{A(this,Vr,null),l(this,gl)[0]=l(this,gl)[1]=0,this.addCommands({cmd:()=>{for(const h of c)l(this,qe).has(h.id)&&(h.translateInPage(i,o),h.translationDone())},undo:()=>{for(const h of c)l(this,qe).has(h.id)&&(h.translateInPage(-i,-o),h.translationDone())},mustExec:!1})},u));for(const h of c)h.translateInPage(t,e),h.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),A(this,jr,new Map);for(const t of l(this,pe))l(this,jr).set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!l(this,jr))return!1;this.disableUserSelect(!1);const t=l(this,jr);A(this,jr,null);let e=!1;for(const[{x:i,y:o,pageIndex:c},u]of t)u.newX=i,u.newY=o,u.newPageIndex=c,e||(e=i!==u.savedX||o!==u.savedY||c!==u.savedPageIndex);if(!e)return!1;const n=(i,o,c,u)=>{if(l(this,qe).has(i.id)){const h=l(this,An).get(u);h?i._setParentAndPosition(h,o,c):(i.pageIndex=u,i.x=o,i.y=c)}};return this.addCommands({cmd:()=>{for(const[i,{newX:o,newY:c,newPageIndex:u}]of t)n(i,o,c,u)},undo:()=>{for(const[i,{savedX:o,savedY:c,savedPageIndex:u}]of t)n(i,o,c,u)},mustExec:!0}),!0}dragSelectedEditors(t,e){if(l(this,jr))for(const n of l(this,jr).keys())n.drag(t,e)}rebuild(t){if(t.parent===null){const e=this.getLayer(t.pageIndex);e?(e.changeParent(t),e.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||l(this,pe).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return l(this,Zi)===t}getActive(){return l(this,Zi)}getMode(){return l(this,fn)}isEditingMode(){return l(this,fn)!==Gt.NONE}get imageManager(){return $t(this,"imageManager",new qA)}getSelectionBoxes(t){if(!t)return null;const e=document.getSelection();for(let f=0,p=e.rangeCount;f<p;f++)if(!t.contains(e.getRangeAt(f).commonAncestorContainer))return null;const{x:n,y:i,width:o,height:c}=t.getBoundingClientRect();let u;switch(t.getAttribute("data-main-rotation")){case"90":u=(f,p,m,v)=>({x:(p-i)/c,y:1-(f+m-n)/o,width:v/c,height:m/o});break;case"180":u=(f,p,m,v)=>({x:1-(f+m-n)/o,y:1-(p+v-i)/c,width:m/o,height:v/c});break;case"270":u=(f,p,m,v)=>({x:1-(p+v-i)/c,y:(f-n)/o,width:v/c,height:m/o});break;default:u=(f,p,m,v)=>({x:(f-n)/o,y:(p-i)/c,width:m/o,height:v/c});break}const h=[];for(let f=0,p=e.rangeCount;f<p;f++){const m=e.getRangeAt(f);if(!m.collapsed)for(const{x:v,y:b,width:C,height:E}of m.getClientRects())C===0||E===0||h.push(u(v,b,C,E))}return h.length===0?null:h}addChangedExistingAnnotation({annotationElementId:t,id:e}){(l(this,Od)||A(this,Od,new Map)).set(t,e)}removeChangedExistingAnnotation({annotationElementId:t}){l(this,Od)?.delete(t)}renderAnnotationElement(t){const e=l(this,Od)?.get(t.data.id);if(!e)return;const n=l(this,Os).getRawValue(e);n&&(l(this,fn)===Gt.NONE&&!n.hasBeenModified||n.renderAnnotationElement(t))}setMissingCanvas(t,e,n){const i=l(this,fl)?.get(t);i&&(i.setCanvas(e,n),l(this,fl).delete(t))}addMissingCanvas(t,e){(l(this,fl)||A(this,fl,new Map)).set(t,e)}};Ld=new WeakMap,Zi=new WeakMap,Id=new WeakMap,qe=new WeakMap,An=new WeakMap,Fd=new WeakMap,Os=new WeakMap,Od=new WeakMap,js=new WeakMap,ri=new WeakMap,ol=new WeakMap,al=new WeakMap,jd=new WeakMap,ll=new WeakMap,jr=new WeakMap,Bs=new WeakMap,Jc=new WeakMap,Qm=new WeakMap,Zm=new WeakMap,Bd=new WeakMap,Jm=new WeakMap,Br=new WeakMap,cl=new WeakMap,Ud=new WeakMap,ul=new WeakMap,Ur=new WeakMap,_w=new WeakMap,hl=new WeakMap,Vd=new WeakMap,tg=new WeakMap,dl=new WeakMap,tu=new WeakMap,zd=new WeakMap,fl=new WeakMap,eg=new WeakMap,fn=new WeakMap,pe=new WeakMap,No=new WeakMap,pl=new WeakMap,ml=new WeakMap,ng=new WeakMap,Hd=new WeakMap,ig=new WeakMap,gl=new WeakMap,Vr=new WeakMap,Lo=new WeakMap,sg=new WeakMap,rg=new WeakMap,Us=new WeakMap,yt=new WeakSet,Ev=function({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t},ZA=function(t){const{currentLayer:e}=this;if(e.hasTextLayer(t))return e;for(const n of l(this,An).values())if(n.hasTextLayer(t))return n;return null},O2=function(){const t=document.getSelection();if(!t||t.isCollapsed)return;const n=R(this,yt,Ev).call(this,t).closest(".textLayer"),i=this.getSelectionBoxes(n);i&&(l(this,Ur)||A(this,Ur,new gB(this)),l(this,Ur).show(n,i,this.direction==="ltr"))},j2=function(){const t=document.getSelection();if(!t||t.isCollapsed){l(this,No)&&(l(this,Ur)?.hide(),A(this,No,null),R(this,yt,yi).call(this,{hasSelectedText:!1}));return}const{anchorNode:e}=t;if(e===l(this,No))return;const i=R(this,yt,Ev).call(this,t).closest(".textLayer");if(!i){l(this,No)&&(l(this,Ur)?.hide(),A(this,No,null),R(this,yt,yi).call(this,{hasSelectedText:!1}));return}if(l(this,Ur)?.hide(),A(this,No,e),R(this,yt,yi).call(this,{hasSelectedText:!0}),!(l(this,fn)!==Gt.HIGHLIGHT&&l(this,fn)!==Gt.NONE)&&(l(this,fn)===Gt.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),A(this,ul,this.isShiftKeyDown),!this.isShiftKeyDown)){const o=l(this,fn)===Gt.HIGHLIGHT?R(this,yt,ZA).call(this,i):null;if(o?.toggleDrawing(),l(this,Vd)){const c=new AbortController,u=this.combinedSignal(c),h=f=>{f.type==="pointerup"&&f.button!==0||(c.abort(),o?.toggleDrawing(!0),f.type==="pointerup"&&R(this,yt,lm).call(this,"main_toolbar"))};window.addEventListener("pointerup",h,{signal:u}),window.addEventListener("blur",h,{signal:u})}else o?.toggleDrawing(!0),R(this,yt,lm).call(this,"main_toolbar")}},lm=function(t=""){l(this,fn)===Gt.HIGHLIGHT?this.highlightSelection(t):l(this,Qm)&&R(this,yt,O2).call(this)},B2=function(){document.addEventListener("selectionchange",R(this,yt,j2).bind(this),{signal:this._signal})},U2=function(){if(l(this,cl))return;A(this,cl,new AbortController);const t=this.combinedSignal(l(this,cl));window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})},V2=function(){l(this,cl)?.abort(),A(this,cl,null)},JA=function(){if(l(this,dl))return;A(this,dl,new AbortController);const t=this.combinedSignal(l(this,dl));window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})},z2=function(){l(this,dl)?.abort(),A(this,dl,null)},H2=function(){if(l(this,ol))return;A(this,ol,new AbortController);const t=this.combinedSignal(l(this,ol));document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})},$2=function(){l(this,ol)?.abort(),A(this,ol,null)},W2=function(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})},yi=function(t){Object.entries(t).some(([n,i])=>l(this,ig)[n]!==i)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(l(this,ig),t)}),l(this,fn)===Gt.HIGHLIGHT&&t.hasSelectedEditor===!1&&R(this,yt,_o).call(this,[[ie.HIGHLIGHT_FREE,!0]]))},_o=function(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})},G2=async function(){if(!l(this,hl)){A(this,hl,!0);const t=[];for(const e of l(this,An).values())t.push(e.enable());await Promise.all(t);for(const e of l(this,qe).values())e.enable()}},X2=function(){if(this.unselectAll(),l(this,hl)){A(this,hl,!1);for(const t of l(this,An).values())t.disable();for(const t of l(this,qe).values())t.disable()}},tS=function(t){const e=l(this,An).get(t.pageIndex);e?e.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))},K2=function(){let t=null;for(t of l(this,pe));return t},cm=function(){if(l(this,qe).size===0)return!0;if(l(this,qe).size===1)for(const t of l(this,qe).values())return t.isEmpty();return!1},eS=function(t){for(const e of l(this,pe))e.unselect();l(this,pe).clear();for(const e of t)e.isEmpty()||(l(this,pe).add(e),e.select());R(this,yt,yi).call(this,{hasSelectedEditor:this.hasSelection})},ct(Ed,"TRANSLATE_SMALL",1),ct(Ed,"TRANSLATE_BIG",10);let dh=Ed;var Pn,zr,cr,$d,Hr,Ji,Wd,$r,Ui,Io,eu,Wr,yl,br,um,Cv;const vi=class vi{constructor(t){_(this,br);_(this,Pn,null);_(this,zr,!1);_(this,cr,null);_(this,$d,null);_(this,Hr,null);_(this,Ji,null);_(this,Wd,!1);_(this,$r,null);_(this,Ui,null);_(this,Io,null);_(this,eu,null);_(this,Wr,!1);A(this,Ui,t),A(this,Wr,t._uiManager.useNewAltTextFlow),l(vi,yl)||A(vi,yl,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(t){vi._l10n??(vi._l10n=t)}async render(){const t=A(this,cr,document.createElement("button"));t.className="altText",t.tabIndex="0";const e=A(this,$d,document.createElement("span"));t.append(e),l(this,Wr)?(t.classList.add("new"),t.setAttribute("data-l10n-id",l(vi,yl).missing),e.setAttribute("data-l10n-id",l(vi,yl)["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const n=l(this,Ui)._uiManager._signal;t.addEventListener("contextmenu",Ys,{signal:n}),t.addEventListener("pointerdown",o=>o.stopPropagation(),{signal:n});const i=o=>{o.preventDefault(),l(this,Ui)._uiManager.editAltText(l(this,Ui)),l(this,Wr)&&l(this,Ui)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:l(this,br,um)}})};return t.addEventListener("click",i,{capture:!0,signal:n}),t.addEventListener("keydown",o=>{o.target===t&&o.key==="Enter"&&(A(this,Wd,!0),i(o))},{signal:n}),await R(this,br,Cv).call(this),t}finish(){l(this,cr)&&(l(this,cr).focus({focusVisible:l(this,Wd)}),A(this,Wd,!1))}isEmpty(){return l(this,Wr)?l(this,Pn)===null:!l(this,Pn)&&!l(this,zr)}hasData(){return l(this,Wr)?l(this,Pn)!==null||!!l(this,Io):this.isEmpty()}get guessedText(){return l(this,Io)}async setGuessedText(t){l(this,Pn)===null&&(A(this,Io,t),A(this,eu,await vi._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t})),R(this,br,Cv).call(this))}toggleAltTextBadge(t=!1){if(!l(this,Wr)||l(this,Pn)){l(this,$r)?.remove(),A(this,$r,null);return}if(!l(this,$r)){const e=A(this,$r,document.createElement("div"));e.className="noAltTextBadge",l(this,Ui).div.append(e)}l(this,$r).classList.toggle("hidden",!t)}serialize(t){let e=l(this,Pn);return!t&&l(this,Io)===e&&(e=l(this,eu)),{altText:e,decorative:l(this,zr),guessedText:l(this,Io),textWithDisclaimer:l(this,eu)}}get data(){return{altText:l(this,Pn),decorative:l(this,zr)}}set data({altText:t,decorative:e,guessedText:n,textWithDisclaimer:i,cancel:o=!1}){n&&(A(this,Io,n),A(this,eu,i)),!(l(this,Pn)===t&&l(this,zr)===e)&&(o||(A(this,Pn,t),A(this,zr,e)),R(this,br,Cv).call(this))}toggle(t=!1){l(this,cr)&&(!t&&l(this,Ji)&&(clearTimeout(l(this,Ji)),A(this,Ji,null)),l(this,cr).disabled=!t)}shown(){l(this,Ui)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:l(this,br,um)}})}destroy(){l(this,cr)?.remove(),A(this,cr,null),A(this,$d,null),A(this,Hr,null),l(this,$r)?.remove(),A(this,$r,null)}};Pn=new WeakMap,zr=new WeakMap,cr=new WeakMap,$d=new WeakMap,Hr=new WeakMap,Ji=new WeakMap,Wd=new WeakMap,$r=new WeakMap,Ui=new WeakMap,Io=new WeakMap,eu=new WeakMap,Wr=new WeakMap,yl=new WeakMap,br=new WeakSet,um=function(){return l(this,Pn)&&"added"||l(this,Pn)===null&&this.guessedText&&"review"||"missing"},Cv=async function(){const t=l(this,cr);if(!t)return;if(l(this,Wr)){if(t.classList.toggle("done",!!l(this,Pn)),t.setAttribute("data-l10n-id",l(vi,yl)[l(this,br,um)]),l(this,$d)?.setAttribute("data-l10n-id",l(vi,yl)[`${l(this,br,um)}-label`]),!l(this,Pn)){l(this,Hr)?.remove();return}}else{if(!l(this,Pn)&&!l(this,zr)){t.classList.remove("done"),l(this,Hr)?.remove();return}t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let e=l(this,Hr);if(!e){A(this,Hr,e=document.createElement("span")),e.className="tooltip",e.setAttribute("role","tooltip"),e.id=`alt-text-tooltip-${l(this,Ui).id}`;const i=100,o=l(this,Ui)._uiManager._signal;o.addEventListener("abort",()=>{clearTimeout(l(this,Ji)),A(this,Ji,null)},{once:!0}),t.addEventListener("mouseenter",()=>{A(this,Ji,setTimeout(()=>{A(this,Ji,null),l(this,Hr).classList.add("show"),l(this,Ui)._reportTelemetry({action:"alt_text_tooltip"})},i))},{signal:o}),t.addEventListener("mouseleave",()=>{l(this,Ji)&&(clearTimeout(l(this,Ji)),A(this,Ji,null)),l(this,Hr)?.classList.remove("show")},{signal:o})}l(this,zr)?e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(e.removeAttribute("data-l10n-id"),e.textContent=l(this,Pn)),e.parentNode||t.append(e),l(this,Ui).getElementForAltText()?.setAttribute("aria-describedby",e.id)},_(vi,yl,null),ct(vi,"_l10n",null);let dw=vi;var Un,Vs,nu,Me,og,iu,ur,su,ru,ou,ag,nS;class cv{constructor(t){_(this,ag);_(this,Un,null);_(this,Vs,null);_(this,nu,!1);_(this,Me,null);_(this,og,null);_(this,iu,null);_(this,ur,null);_(this,su,null);_(this,ru,!1);_(this,ou,null);A(this,Me,t)}renderForToolbar(){const t=A(this,Vs,document.createElement("button"));return t.className="comment",R(this,ag,nS).call(this,t,!1)}renderForStandalone(){const t=A(this,Un,document.createElement("button"));t.className="annotationCommentButton";const e=l(this,Me).commentButtonPosition;if(e){const{style:n}=t;n.insetInlineEnd=`calc(${100*(l(this,Me)._uiManager.direction==="ltr"?1-e[0]:e[0])}% - var(--comment-button-dim))`,n.top=`calc(${100*e[1]}% - var(--comment-button-dim))`;const i=l(this,Me).commentButtonColor;i&&(n.backgroundColor=i)}return R(this,ag,nS).call(this,t,!0)}focusButton(){setTimeout(()=>{(l(this,Un)??l(this,Vs))?.focus()},0)}onUpdatedColor(){if(!l(this,Un))return;const t=l(this,Me).commentButtonColor;t&&(l(this,Un).style.backgroundColor=t),l(this,Me)._uiManager.updatePopupColor(l(this,Me))}get commentButtonWidth(){return(l(this,Un)?.getBoundingClientRect().width??0)/l(this,Me).parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(l(this,ou))return l(this,ou);if(!l(this,Un))return null;const{x:t,y:e,height:n}=l(this,Un).getBoundingClientRect(),{x:i,y:o,width:c,height:u}=l(this,Me).parent.boundingClientRect;return[(t-i)/c,(e+n-o)/u]}set commentPopupPositionInLayer(t){A(this,ou,t)}hasDefaultPopupPosition(){return l(this,ou)===null}removeStandaloneCommentButton(){l(this,Un)?.remove(),A(this,Un,null)}removeToolbarCommentButton(){l(this,Vs)?.remove(),A(this,Vs,null)}setCommentButtonStates({selected:t,hasPopup:e}){l(this,Un)&&(l(this,Un).classList.toggle("selected",t),l(this,Un).ariaExpanded=e)}edit(t){const e=this.commentPopupPositionInLayer;let n,i;if(e)[n,i]=e;else{[n,i]=l(this,Me).commentButtonPosition;const{width:p,height:m,x:v,y:b}=l(this,Me);n=v+n*p,i=b+i*m}const o=l(this,Me).parent.boundingClientRect,{x:c,y:u,width:h,height:f}=o;l(this,Me)._uiManager.editComment(l(this,Me),c+n*h,u+i*f,{...t,parentDimensions:o})}finish(){l(this,Vs)&&(l(this,Vs).focus({focusVisible:l(this,nu)}),A(this,nu,!1))}isDeleted(){return l(this,ru)||l(this,ur)===""}isEmpty(){return l(this,ur)===null}hasBeenEdited(){return this.isDeleted()||l(this,ur)!==l(this,og)}serialize(){return this.data}get data(){return{text:l(this,ur),richText:l(this,iu),date:l(this,su),deleted:this.isDeleted()}}set data(t){if(t!==l(this,ur)&&A(this,iu,null),t===null){A(this,ur,""),A(this,ru,!0);return}A(this,ur,t),A(this,su,new Date),A(this,ru,!1)}setInitialText(t,e=null){A(this,og,t),this.data=t,A(this,su,null),A(this,iu,e)}shown(){}destroy(){l(this,Vs)?.remove(),A(this,Vs,null),l(this,Un)?.remove(),A(this,Un,null),A(this,ur,""),A(this,iu,null),A(this,su,null),A(this,Me,null),A(this,nu,!1),A(this,ru,!1)}}Un=new WeakMap,Vs=new WeakMap,nu=new WeakMap,Me=new WeakMap,og=new WeakMap,iu=new WeakMap,ur=new WeakMap,su=new WeakMap,ru=new WeakMap,ou=new WeakMap,ag=new WeakSet,nS=function(t,e){if(!l(this,Me)._uiManager.hasCommentManager())return null;t.tabIndex="0",t.ariaHasPopup="dialog",e?(t.ariaControls="commentPopup",t.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(t.ariaControlsElements=[l(this,Me)._uiManager.getCommentDialogElement()],t.setAttribute("data-l10n-id","pdfjs-editor-add-comment-button"));const n=l(this,Me)._uiManager._signal;if(!(n instanceof AbortSignal)||n.aborted)return t;t.addEventListener("contextmenu",Ys,{signal:n}),e&&(t.addEventListener("focusin",o=>{l(this,Me)._focusEventsAllowed=!1,nn(o)},{capture:!0,signal:n}),t.addEventListener("focusout",o=>{l(this,Me)._focusEventsAllowed=!0,nn(o)},{capture:!0,signal:n})),t.addEventListener("pointerdown",o=>o.stopPropagation(),{signal:n});const i=o=>{o.preventDefault(),t===l(this,Vs)?this.edit():l(this,Me).toggleComment(!0)};return t.addEventListener("click",i,{capture:!0,signal:n}),t.addEventListener("keydown",o=>{o.target===t&&o.key==="Enter"&&(A(this,nu,!0),i(o))},{signal:n}),t.addEventListener("pointerenter",()=>{l(this,Me).toggleComment(!1,!0)},{signal:n}),t.addEventListener("pointerleave",()=>{l(this,Me).toggleComment(!1,!1)},{signal:n}),t};var Gd,au,lg,cg,ug,hg,dg,Fo,lu,Oo,cu,jo,Zl,Y2,q2,Q2;const fE=class fE{constructor({container:t,isPinchingDisabled:e=null,isPinchingStopped:n=null,onPinchStart:i=null,onPinching:o=null,onPinchEnd:c=null,signal:u}){_(this,Zl);_(this,Gd);_(this,au,!1);_(this,lg,null);_(this,cg);_(this,ug);_(this,hg);_(this,dg);_(this,Fo,null);_(this,lu);_(this,Oo,null);_(this,cu);_(this,jo,null);A(this,Gd,t),A(this,lg,n),A(this,cg,e),A(this,ug,i),A(this,hg,o),A(this,dg,c),A(this,cu,new AbortController),A(this,lu,AbortSignal.any([u,l(this,cu).signal])),t.addEventListener("touchstart",R(this,Zl,Y2).bind(this),{passive:!1,signal:l(this,lu)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/co.pixelRatio}destroy(){l(this,cu)?.abort(),A(this,cu,null),l(this,Fo)?.abort(),A(this,Fo,null)}};Gd=new WeakMap,au=new WeakMap,lg=new WeakMap,cg=new WeakMap,ug=new WeakMap,hg=new WeakMap,dg=new WeakMap,Fo=new WeakMap,lu=new WeakMap,Oo=new WeakMap,cu=new WeakMap,jo=new WeakMap,Zl=new WeakSet,Y2=function(t){var i,o,c;if((i=l(this,cg))!=null&&i.call(this))return;if(t.touches.length===1){if(l(this,Fo))return;const u=A(this,Fo,new AbortController),h=AbortSignal.any([l(this,lu),u.signal]),f=l(this,Gd),p={capture:!0,signal:h,passive:!1},m=v=>{v.pointerType==="touch"&&(l(this,Fo)?.abort(),A(this,Fo,null))};f.addEventListener("pointerdown",v=>{v.pointerType==="touch"&&(nn(v),m(v))},p),f.addEventListener("pointerup",m,p),f.addEventListener("pointercancel",m,p);return}if(!l(this,jo)){A(this,jo,new AbortController);const u=AbortSignal.any([l(this,lu),l(this,jo).signal]),h=l(this,Gd),f={signal:u,capture:!1,passive:!1};h.addEventListener("touchmove",R(this,Zl,q2).bind(this),f);const p=R(this,Zl,Q2).bind(this);h.addEventListener("touchend",p,f),h.addEventListener("touchcancel",p,f),f.capture=!0,h.addEventListener("pointerdown",nn,f),h.addEventListener("pointermove",nn,f),h.addEventListener("pointercancel",nn,f),h.addEventListener("pointerup",nn,f),(o=l(this,ug))==null||o.call(this)}if(nn(t),t.touches.length!==2||(c=l(this,lg))!=null&&c.call(this)){A(this,Oo,null);return}let[e,n]=t.touches;e.identifier>n.identifier&&([e,n]=[n,e]),A(this,Oo,{touch0X:e.screenX,touch0Y:e.screenY,touch1X:n.screenX,touch1Y:n.screenY})},q2=function(t){var F;if(!l(this,Oo)||t.touches.length!==2)return;nn(t);let[e,n]=t.touches;e.identifier>n.identifier&&([e,n]=[n,e]);const{screenX:i,screenY:o}=e,{screenX:c,screenY:u}=n,h=l(this,Oo),{touch0X:f,touch0Y:p,touch1X:m,touch1Y:v}=h,b=m-f,C=v-p,E=c-i,T=u-o,P=Math.hypot(E,T)||1,N=Math.hypot(b,C)||1;if(!l(this,au)&&Math.abs(N-P)<=fE.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(h.touch0X=i,h.touch0Y=o,h.touch1X=c,h.touch1Y=u,!l(this,au)){A(this,au,!0);return}const L=[(i+c)/2,(o+u)/2];(F=l(this,hg))==null||F.call(this,L,N,P)},Q2=function(t){var e;t.touches.length>=2||(l(this,jo)&&(l(this,jo).abort(),A(this,jo,null),(e=l(this,dg))==null||e.call(this)),l(this,Oo)&&(nn(t),A(this,Oo,null),A(this,au,!1)))};let fw=fE;var uu,hr,Ue,Ee,Bo,Xd,vl,fg,Vn,hu,Uo,zs,wl,pg,du,ts,mg,fu,Vo,Gr,Kd,Yd,Hs,pu,gg,Pw,It,iS,yg,sS,kv,Z2,J2,rS,Tv,oS,tR,eR,nR,aS,iR,lS,sR,rR,oR,cS,hm;const Wt=class Wt{constructor(t){_(this,It);_(this,uu,null);_(this,hr,null);_(this,Ue,null);_(this,Ee,null);_(this,Bo,null);_(this,Xd,!1);_(this,vl,null);_(this,fg,"");_(this,Vn,null);_(this,hu,null);_(this,Uo,null);_(this,zs,null);_(this,wl,null);_(this,pg,"");_(this,du,!1);_(this,ts,null);_(this,mg,!1);_(this,fu,!1);_(this,Vo,!1);_(this,Gr,null);_(this,Kd,0);_(this,Yd,0);_(this,Hs,null);_(this,pu,null);ct(this,"isSelected",!1);ct(this,"_isCopy",!1);ct(this,"_editToolbar",null);ct(this,"_initialOptions",Object.create(null));ct(this,"_initialData",null);ct(this,"_isVisible",!0);ct(this,"_uiManager",null);ct(this,"_focusEventsAllowed",!0);_(this,gg,!1);_(this,Pw,Wt._zIndex++);this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null,this.annotationElementId=t.annotationElementId||null,this.creationDate=t.creationDate||new Date,this.modificationDate=t.modificationDate||null,this.canAddComment=!0;const{rotation:e,rawDims:{pageWidth:n,pageHeight:i,pageX:o,pageY:c}}=this.parent.viewport;this.rotation=e,this.pageRotation=(360+e-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,i],this.pageTranslation=[o,c];const[u,h]=this.parentDimensions;this.x=t.x/u,this.y=t.y/h,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const t=Wt.prototype._resizeWithKeyboard,e=dh.TRANSLATE_SMALL,n=dh.TRANSLATE_BIG;return $t(this,"_resizerKeyboardManager",new $0([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-e,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-n,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[e,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[n,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-e]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-n]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,e]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,n]}],[["Escape","mac+Escape"],Wt.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return $t(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const e=new wB({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(t,e){if(Wt._l10n??(Wt._l10n=t),Wt._l10nResizer||(Wt._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),Wt._borderLineWidth!==-1)return;const n=getComputedStyle(document.documentElement);Wt._borderLineWidth=parseFloat(n.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,e){Te("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return l(this,gg)}set _isDraggable(t){A(this,gg,t),this.div?.classList.toggle("draggable",t)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){const[t,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(t*2),this.y+=this.width*t/(e*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(t*2),this.y-=this.width*t/(e*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=l(this,Pw)}setParent(t){t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):(R(this,It,hm).call(this),l(this,zs)?.remove(),A(this,zs,null)),this.parent=t}focusin(t){this._focusEventsAllowed&&(l(this,du)?A(this,du,!1):this.parent.setSelected(this))}focusout(t){!this._focusEventsAllowed||!this.isAttachedToDOM||t.relatedTarget?.closest(`#${this.id}`)||(t.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,e,n,i){const[o,c]=this.parentDimensions;[n,i]=this.screenToPageTranslation(n,i),this.x=(t+n)/o,this.y=(e+i)/c,this.fixAndSetPosition()}_moveAfterPaste(t,e){const[n,i]=this.parentDimensions;this.setAt(t*n,e*i,this.width*n,this.height*i),this._onTranslated()}translate(t,e){R(this,It,iS).call(this,this.parentDimensions,t,e)}translateInPage(t,e){l(this,ts)||A(this,ts,[this.x,this.y,this.width,this.height]),R(this,It,iS).call(this,this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(t,e){l(this,ts)||A(this,ts,[this.x,this.y,this.width,this.height]);const{div:n,parentDimensions:[i,o]}=this;if(this.x+=t/i,this.y+=e/o,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:m,y:v}=this.div.getBoundingClientRect();this.parent.findNewParent(this,m,v)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:c,y:u}=this;const[h,f]=this.getBaseTranslation();c+=h,u+=f;const{style:p}=n;p.left=`${(100*c).toFixed(2)}%`,p.top=`${(100*u).toFixed(2)}%`,this._onTranslating(c,u),n.scrollIntoView({block:"nearest"})}_onTranslating(t,e){}_onTranslated(t,e){}get _hasBeenMoved(){return!!l(this,ts)&&(l(this,ts)[0]!==this.x||l(this,ts)[1]!==this.y)}get _hasBeenResized(){return!!l(this,ts)&&(l(this,ts)[2]!==this.width||l(this,ts)[3]!==this.height)}getBaseTranslation(){const[t,e]=this.parentDimensions,{_borderLineWidth:n}=Wt,i=n/t,o=n/e;switch(this.rotation){case 90:return[-i,o];case 180:return[i,o];case 270:return[i,-o];default:return[-i,-o]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const{div:{style:e},pageDimensions:[n,i]}=this;let{x:o,y:c,width:u,height:h}=this;if(u*=n,h*=i,o*=n,c*=i,this._mustFixPosition)switch(t){case 0:o=Si(o,0,n-u),c=Si(c,0,i-h);break;case 90:o=Si(o,0,n-h),c=Si(c,u,i);break;case 180:o=Si(o,u,n),c=Si(c,h,i);break;case 270:o=Si(o,h,n),c=Si(c,0,i-u);break}this.x=o/=n,this.y=c/=i;const[f,p]=this.getBaseTranslation();o+=f,c+=p,e.left=`${(100*o).toFixed(2)}%`,e.top=`${(100*c).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(t,e){var n;return R(n=Wt,yg,sS).call(n,t,e,this.parentRotation)}pageTranslationToScreen(t,e){var n;return R(n=Wt,yg,sS).call(n,t,e,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[e,n]}=this;return[e*t,n*t]}setDims(){const{div:{style:t},width:e,height:n}=this;t.width=`${(100*e).toFixed(2)}%`,t.height=`${(100*n).toFixed(2)}%`}getInitialTranslation(){return[0,0]}_onResized(){}static _round(t){return Math.round(t*1e4)/1e4}_onResizing(){}altTextFinish(){l(this,Ue)?.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||l(this,fu))return this._editToolbar;this._editToolbar=new KA(this),this.div.append(this._editToolbar.render());const{toolbarButtons:t}=this;if(t)for(const[e,n]of t)await this._editToolbar.addButton(e,n);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){this._editToolbar?.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){this._editToolbar?.removeButton("comment")}removeEditToolbar(){this._editToolbar?.remove(),this._editToolbar=null,l(this,Ue)?.destroy()}addContainer(t){const e=this._editToolbar?.div;e?e.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return l(this,Ue)||(dw.initialize(Wt._l10n),A(this,Ue,new dw(this)),l(this,uu)&&(l(this,Ue).data=l(this,uu),A(this,uu,null))),l(this,Ue)}get altTextData(){return l(this,Ue)?.data}set altTextData(t){l(this,Ue)&&(l(this,Ue).data=t)}get guessedAltText(){return l(this,Ue)?.guessedText}async setGuessedAltText(t){await l(this,Ue)?.setGuessedText(t)}serializeAltText(t){return l(this,Ue)?.serialize(t)}hasAltText(){return!!l(this,Ue)&&!l(this,Ue).isEmpty()}hasAltTextData(){return l(this,Ue)?.hasData()??!1}focusCommentButton(){l(this,Ee)?.focusButton()}addCommentButton(){return this.canAddComment?l(this,Ee)||A(this,Ee,new cv(this)):null}addStandaloneCommentButton(){if(this._uiManager.hasCommentManager()){if(l(this,Bo)){this._uiManager.isEditingMode()&&l(this,Bo).classList.remove("hidden");return}this.hasComment&&(A(this,Bo,l(this,Ee).renderForStandalone()),this.div.append(l(this,Bo)))}}removeStandaloneCommentButton(){l(this,Ee).removeStandaloneCommentButton(),A(this,Bo,null)}hideStandaloneCommentButton(){l(this,Bo)?.classList.add("hidden")}get comment(){const{data:{richText:t,text:e,date:n,deleted:i}}=l(this,Ee);return{text:e,richText:t,date:n,deleted:i,color:this.getNonHCMColor(),opacity:this.opacity??1}}set comment(t){l(this,Ee)||A(this,Ee,new cv(this)),l(this,Ee).data=t,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData({comment:t,popupRef:e,richText:n}){if(!e||(l(this,Ee)||A(this,Ee,new cv(this)),l(this,Ee).setInitialText(t,n),!this.annotationElementId))return;const i=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);i&&this.updateFromAnnotationLayer(i)}get hasEditedComment(){return l(this,Ee)?.hasBeenEdited()}get hasDeletedComment(){return l(this,Ee)?.isDeleted()}get hasComment(){return!!l(this,Ee)&&!l(this,Ee).isEmpty()&&!l(this,Ee).isDeleted()}async editComment(t){l(this,Ee)||A(this,Ee,new cv(this)),l(this,Ee).edit(t)}toggleComment(t,e=void 0){this.hasComment&&this._uiManager.toggleComment(this,t,e)}setSelectedCommentButton(t){l(this,Ee).setSelectedButton(t)}addComment(t){if(this.hasEditedComment){const[,,,i]=t.rect,[o]=this.pageDimensions,[c]=this.pageTranslation,u=c+o+1,h=i-100,f=u+180;t.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[u,h,f,i]}}}updateFromAnnotationLayer({popup:{contents:t,deleted:e}}){l(this,Ee).data=e?null:t}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){const t=this.div=document.createElement("div");t.setAttribute("data-editor-rotation",(360-this.rotation)%360),t.className=this.name,t.setAttribute("id",this.id),t.tabIndex=l(this,Xd)?-1:0,t.setAttribute("role","application"),this.defaultL10nId&&t.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||t.classList.add("hidden"),this.setInForeground(),R(this,It,lS).call(this);const[e,n]=this.parentDimensions;this.parentRotation%180!==0&&(t.style.maxWidth=`${(100*n/e).toFixed(2)}%`,t.style.maxHeight=`${(100*e/n).toFixed(2)}%`);const[i,o]=this.getInitialTranslation();return this.translate(i,o),I2(this,t,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(l(this,pu)||A(this,pu,new fw({container:t,isPinchingDisabled:()=>!this.isSelected,onPinchStart:R(this,It,tR).bind(this),onPinching:R(this,It,eR).bind(this),onPinchEnd:R(this,It,nR).bind(this),signal:this._uiManager._signal}))),this.addStandaloneCommentButton(),this._uiManager._editorUndoBar?.hide(),t}pointerdown(t){const{isMac:e}=Cn.platform;if(t.button!==0||t.ctrlKey&&e){t.preventDefault();return}if(A(this,du,!0),this._isDraggable){R(this,It,iR).call(this,t);return}R(this,It,aS).call(this,t)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){l(this,Gr)&&clearTimeout(l(this,Gr)),A(this,Gr,setTimeout(()=>{A(this,Gr,null),this.parent?.moveEditorInDOM(this)},0))}_setParentAndPosition(t,e,n){t.changeParent(this),this.x=e,this.y=n,this.fixAndSetPosition(),this._onTranslated()}getRect(t,e,n=this.rotation){const i=this.parentScale,[o,c]=this.pageDimensions,[u,h]=this.pageTranslation,f=t/i,p=e/i,m=this.x*o,v=this.y*c,b=this.width*o,C=this.height*c;switch(n){case 0:return[m+f+u,c-v-p-C+h,m+f+b+u,c-v-p+h];case 90:return[m+p+u,c-v+f+h,m+p+C+u,c-v+f+b+h];case 180:return[m-f-b+u,c-v+p+h,m-f+u,c-v+p+C+h];case 270:return[m-p-C+u,c-v-f-b+h,m-p+u,c-v-f+h];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){const[n,i,o,c]=t,u=o-n,h=c-i;switch(this.rotation){case 0:return[n,e-c,u,h];case 90:return[n,e-i,h,u];case 180:return[o,e-i,u,h];case 270:return[o,e-c,h,u];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&Wt._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){l(this,Ee)?.onUpdatedColor()}getData(){const{comment:{text:t,color:e,date:n,opacity:i,deleted:o,richText:c},uid:u,pageIndex:h,creationDate:f,modificationDate:p}=this;return{id:u,pageIndex:h,rect:this.getPDFRect(),richText:c,contentsObj:{str:t},creationDate:f,modificationDate:n||p,popupRef:!o,color:e,opacity:i}}onceAdded(t){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),A(this,fu,!0),!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),A(this,fu,!1),!0):!1}isInEditMode(){return l(this,fu)}shouldGetKeyboardEvents(){return l(this,Vo)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:t,left:e,bottom:n,right:i}=this.getClientDimensions(),{innerHeight:o,innerWidth:c}=window;return e<c&&i>0&&t<o&&n>0}rebuild(){R(this,It,lS).call(this)}rotate(t){}resize(){}serializeDeleted(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:this._initialData?.popupRef||""}}serialize(t=!1,e=null){return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:this._initialData?.popupRef||""}}static async deserialize(t,e,n){const i=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:n,annotationElementId:t.annotationElementId,creationDate:t.creationDate,modificationDate:t.modificationDate});i.rotation=t.rotation,A(i,uu,t.accessibilityData),i._isCopy=t.isCopy||!1;const[o,c]=i.pageDimensions,[u,h,f,p]=i.getRectInCurrentCoords(t.rect,c);return i.x=u/o,i.y=h/c,i.width=f/o,i.height=p/c,i}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(l(this,wl)?.abort(),A(this,wl,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.hideCommentPopup(),l(this,Gr)&&(clearTimeout(l(this,Gr)),A(this,Gr,null)),R(this,It,hm).call(this),this.removeEditToolbar(),l(this,Hs)){for(const t of l(this,Hs).values())clearTimeout(t);A(this,Hs,null)}this.parent=null,l(this,pu)?.destroy(),A(this,pu,null),l(this,zs)?.remove(),A(this,zs,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(R(this,It,Z2).call(this),l(this,Vn).classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return this._uiManager.direction==="ltr"?[1,0]:[0,0]}get commentButtonPositionInPage(){const{commentButtonPosition:[t,e]}=this,[n,i,o,c]=this.getPDFRect();return[Wt._round(n+(o-n)*t),Wt._round(i+(c-i)*(1-e))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return l(this,Ee).commentPopupPositionInLayer}set commentPopupPosition(t){l(this,Ee).commentPopupPositionInLayer=t}hasDefaultPopupPosition(){return l(this,Ee).hasDefaultPopupPosition()}get commentButtonWidth(){return l(this,Ee).commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(t){l(this,Ee)?.setCommentButtonStates(t)}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),A(this,Uo,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const e=l(this,Vn).children;if(!l(this,hr)){A(this,hr,Array.from(e));const c=R(this,It,sR).bind(this),u=R(this,It,rR).bind(this),h=this._uiManager._signal;for(const f of l(this,hr)){const p=f.getAttribute("data-resizer-name");f.setAttribute("role","spinbutton"),f.addEventListener("keydown",c,{signal:h}),f.addEventListener("blur",u,{signal:h}),f.addEventListener("focus",R(this,It,oR).bind(this,p),{signal:h}),f.setAttribute("data-l10n-id",Wt._l10nResizer[p])}}const n=l(this,hr)[0];let i=0;for(const c of e){if(c===n)break;i++}const o=(360-this.rotation+this.parentRotation)%360/90*(l(this,hr).length/4);if(o!==i){if(o<i)for(let u=0;u<i-o;u++)l(this,Vn).append(l(this,Vn).firstElementChild);else if(o>i)for(let u=0;u<o-i;u++)l(this,Vn).firstElementChild.before(l(this,Vn).lastElementChild);let c=0;for(const u of e){const f=l(this,hr)[c++].getAttribute("data-resizer-name");u.setAttribute("data-l10n-id",Wt._l10nResizer[f])}}R(this,It,cS).call(this,0),A(this,Vo,!0),l(this,Vn).firstElementChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}_resizeWithKeyboard(t,e){l(this,Vo)&&R(this,It,oS).call(this,l(this,pg),{deltaX:t,deltaY:e,fromKeyboard:!0})}_stopResizingWithKeyboard(){R(this,It,hm).call(this),this.div.focus()}select(){if(this.isSelected&&this._editToolbar){this._editToolbar.show();return}if(this.isSelected=!0,this.makeResizable(),this.div?.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{this.div?.classList.contains("selectedEditor")&&this._editToolbar?.show()});return}this._editToolbar?.show(),l(this,Ue)?.toggleAltTextBadge(!1)}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>this.div?.focus({preventScroll:!0}),0)}unselect(){this.isSelected&&(this.isSelected=!1,l(this,Vn)?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),this._editToolbar?.hide(),l(this,Ue)?.toggleAltTextBadge(!0),this.hideCommentPopup())}hideCommentPopup(){this.hasComment&&this._uiManager.toggleComment(null)}updateParams(t,e){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(t){t.target.nodeName!=="BUTTON"&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.uid}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return l(this,mg)}set isEditing(t){A(this,mg,t),this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,e=!1){if(e){l(this,Hs)||A(this,Hs,new Map);const{action:n}=t;let i=l(this,Hs).get(n);i&&clearTimeout(i),i=setTimeout(()=>{this._reportTelemetry(t),l(this,Hs).delete(n),l(this,Hs).size===0&&A(this,Hs,null)},Wt._telemetryTimeout),l(this,Hs).set(n,i);return}t.type||(t.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),A(this,Xd,!1)}disable(){this.div&&(this.div.tabIndex=-1),A(this,Xd,!0)}updateFakeAnnotationElement(t){if(!l(this,zs)&&!this.deleted){A(this,zs,t.addFakeAnnotation(this));return}if(this.deleted){l(this,zs).remove(),A(this,zs,null);return}(this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&l(this,zs).updateEdited({rect:this.getPDFRect(),popup:this.comment})}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;let e=t.container.querySelector(".annotationContent");if(!e)e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.container.prepend(e);else if(e.nodeName==="CANVAS"){const n=e;e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),n.before(e)}return e}resetAnnotationElement(t){const{firstElementChild:e}=t.container;e?.nodeName==="DIV"&&e.classList.contains("annotationContent")&&e.remove()}};uu=new WeakMap,hr=new WeakMap,Ue=new WeakMap,Ee=new WeakMap,Bo=new WeakMap,Xd=new WeakMap,vl=new WeakMap,fg=new WeakMap,Vn=new WeakMap,hu=new WeakMap,Uo=new WeakMap,zs=new WeakMap,wl=new WeakMap,pg=new WeakMap,du=new WeakMap,ts=new WeakMap,mg=new WeakMap,fu=new WeakMap,Vo=new WeakMap,Gr=new WeakMap,Kd=new WeakMap,Yd=new WeakMap,Hs=new WeakMap,pu=new WeakMap,gg=new WeakMap,Pw=new WeakMap,It=new WeakSet,iS=function([t,e],n,i){[n,i]=this.screenToPageTranslation(n,i),this.x+=n/t,this.y+=i/e,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},yg=new WeakSet,sS=function(t,e,n){switch(n){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}},kv=function(t){switch(t){case 90:{const[e,n]=this.pageDimensions;return[0,-e/n,n/e,0]}case 180:return[-1,0,0,-1];case 270:{const[e,n]=this.pageDimensions;return[0,e/n,-n/e,0]}default:return[1,0,0,1]}},Z2=function(){if(l(this,Vn))return;A(this,Vn,document.createElement("div")),l(this,Vn).classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],e=this._uiManager._signal;for(const n of t){const i=document.createElement("div");l(this,Vn).append(i),i.classList.add("resizer",n),i.setAttribute("data-resizer-name",n),i.addEventListener("pointerdown",R(this,It,J2).bind(this,n),{signal:e}),i.addEventListener("contextmenu",Ys,{signal:e}),i.tabIndex=-1}this.div.prepend(l(this,Vn))},J2=function(t,e){e.preventDefault();const{isMac:n}=Cn.platform;if(e.button!==0||e.ctrlKey&&n)return;l(this,Ue)?.toggle(!1);const i=this._isDraggable;this._isDraggable=!1,A(this,hu,[e.screenX,e.screenY]);const o=new AbortController,c=this._uiManager.combinedSignal(o);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",R(this,It,oS).bind(this,t),{passive:!0,capture:!0,signal:c}),window.addEventListener("touchmove",nn,{passive:!1,signal:c}),window.addEventListener("contextmenu",Ys,{signal:c}),A(this,Uo,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const u=this.parent.div.style.cursor,h=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;const f=()=>{o.abort(),this.parent.togglePointerEvents(!0),l(this,Ue)?.toggle(!0),this._isDraggable=i,this.parent.div.style.cursor=u,this.div.style.cursor=h,R(this,It,Tv).call(this)};window.addEventListener("pointerup",f,{signal:c}),window.addEventListener("blur",f,{signal:c})},rS=function(t,e,n,i){this.width=n,this.height=i,this.x=t,this.y=e,this.setDims(),this.fixAndSetPosition(),this._onResized()},Tv=function(){if(!l(this,Uo))return;const{savedX:t,savedY:e,savedWidth:n,savedHeight:i}=l(this,Uo);A(this,Uo,null);const o=this.x,c=this.y,u=this.width,h=this.height;o===t&&c===e&&u===n&&h===i||this.addCommands({cmd:R(this,It,rS).bind(this,o,c,u,h),undo:R(this,It,rS).bind(this,t,e,n,i),mustExec:!0})},oS=function(t,e){const[n,i]=this.parentDimensions,o=this.x,c=this.y,u=this.width,h=this.height,f=Wt.MIN_SIZE/n,p=Wt.MIN_SIZE/i,m=R(this,It,kv).call(this,this.rotation),v=(ft,lt)=>[m[0]*ft+m[2]*lt,m[1]*ft+m[3]*lt],b=R(this,It,kv).call(this,360-this.rotation),C=(ft,lt)=>[b[0]*ft+b[2]*lt,b[1]*ft+b[3]*lt];let E,T,P=!1,N=!1;switch(t){case"topLeft":P=!0,E=(ft,lt)=>[0,0],T=(ft,lt)=>[ft,lt];break;case"topMiddle":E=(ft,lt)=>[ft/2,0],T=(ft,lt)=>[ft/2,lt];break;case"topRight":P=!0,E=(ft,lt)=>[ft,0],T=(ft,lt)=>[0,lt];break;case"middleRight":N=!0,E=(ft,lt)=>[ft,lt/2],T=(ft,lt)=>[0,lt/2];break;case"bottomRight":P=!0,E=(ft,lt)=>[ft,lt],T=(ft,lt)=>[0,0];break;case"bottomMiddle":E=(ft,lt)=>[ft/2,lt],T=(ft,lt)=>[ft/2,0];break;case"bottomLeft":P=!0,E=(ft,lt)=>[0,lt],T=(ft,lt)=>[ft,0];break;case"middleLeft":N=!0,E=(ft,lt)=>[0,lt/2],T=(ft,lt)=>[ft,lt/2];break}const L=E(u,h),F=T(u,h);let O=v(...F);const z=Wt._round(o+O[0]),K=Wt._round(c+O[1]);let Y=1,nt=1,st,it;if(e.fromKeyboard)({deltaX:st,deltaY:it}=e);else{const{screenX:ft,screenY:lt}=e,[et,mt]=l(this,hu);[st,it]=this.screenToPageTranslation(ft-et,lt-mt),l(this,hu)[0]=ft,l(this,hu)[1]=lt}if([st,it]=C(st/n,it/i),P){const ft=Math.hypot(u,h);Y=nt=Math.max(Math.min(Math.hypot(F[0]-L[0]-st,F[1]-L[1]-it)/ft,1/u,1/h),f/u,p/h)}else N?Y=Si(Math.abs(F[0]-L[0]-st),f,1)/u:nt=Si(Math.abs(F[1]-L[1]-it),p,1)/h;const Mt=Wt._round(u*Y),xt=Wt._round(h*nt);O=v(...T(Mt,xt));const Ct=z-O[0],Qt=K-O[1];l(this,ts)||A(this,ts,[this.x,this.y,this.width,this.height]),this.width=Mt,this.height=xt,this.x=Ct,this.y=Qt,this.setDims(),this.fixAndSetPosition(),this._onResizing()},tR=function(){A(this,Uo,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),l(this,Ue)?.toggle(!1),this.parent.togglePointerEvents(!1)},eR=function(t,e,n){let o=.7*(n/e)+1-.7;if(o===1)return;const c=R(this,It,kv).call(this,this.rotation),u=(z,K)=>[c[0]*z+c[2]*K,c[1]*z+c[3]*K],[h,f]=this.parentDimensions,p=this.x,m=this.y,v=this.width,b=this.height,C=Wt.MIN_SIZE/h,E=Wt.MIN_SIZE/f;o=Math.max(Math.min(o,1/v,1/b),C/v,E/b);const T=Wt._round(v*o),P=Wt._round(b*o);if(T===v&&P===b)return;l(this,ts)||A(this,ts,[p,m,v,b]);const N=u(v/2,b/2),L=Wt._round(p+N[0]),F=Wt._round(m+N[1]),O=u(T/2,P/2);this.x=L-O[0],this.y=F-O[1],this.width=T,this.height=P,this.setDims(),this.fixAndSetPosition(),this._onResizing()},nR=function(){l(this,Ue)?.toggle(!0),this.parent.togglePointerEvents(!0),R(this,It,Tv).call(this)},aS=function(t){const{isMac:e}=Cn.platform;t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)},iR=function(t){const{isSelected:e}=this;this._uiManager.setUpDragSession();let n=!1;const i=new AbortController,o=this._uiManager.combinedSignal(i),c={capture:!0,passive:!1,signal:o},u=f=>{i.abort(),A(this,vl,null),A(this,du,!1),this._uiManager.endDragSession()||R(this,It,aS).call(this,f),n&&this._onStopDragging()};e&&(A(this,Kd,t.clientX),A(this,Yd,t.clientY),A(this,vl,t.pointerId),A(this,fg,t.pointerType),window.addEventListener("pointermove",f=>{n||(n=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());const{clientX:p,clientY:m,pointerId:v}=f;if(v!==l(this,vl)){nn(f);return}const[b,C]=this.screenToPageTranslation(p-l(this,Kd),m-l(this,Yd));A(this,Kd,p),A(this,Yd,m),this._uiManager.dragSelectedEditors(b,C)},c),window.addEventListener("touchmove",nn,c),window.addEventListener("pointerdown",f=>{f.pointerType===l(this,fg)&&(l(this,pu)||f.isPrimary)&&u(f),nn(f)},c));const h=f=>{if(!l(this,vl)||l(this,vl)===f.pointerId){u(f);return}nn(f)};window.addEventListener("pointerup",h,{signal:o}),window.addEventListener("blur",h,{signal:o})},lS=function(){if(l(this,wl)||!this.div)return;A(this,wl,new AbortController);const t=this._uiManager.combinedSignal(l(this,wl));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})},sR=function(t){Wt._resizerKeyboardManager.exec(this,t)},rR=function(t){l(this,Vo)&&t.relatedTarget?.parentNode!==l(this,Vn)&&R(this,It,hm).call(this)},oR=function(t){A(this,pg,l(this,Vo)?t:"")},cS=function(t){if(l(this,hr))for(const e of l(this,hr))e.tabIndex=t},hm=function(){A(this,Vo,!1),R(this,It,cS).call(this,-1),R(this,It,Tv).call(this)},_(Wt,yg),ct(Wt,"_l10n",null),ct(Wt,"_l10nResizer",null),ct(Wt,"_borderLineWidth",-1),ct(Wt,"_colorManager",new QA),ct(Wt,"_zIndex",1),ct(Wt,"_telemetryTimeout",1e3);let De=Wt;class wB extends De{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const h_=3285377520,Ds=4294901760,Ir=65535;class aR{constructor(t){this.h1=t?t&4294967295:h_,this.h2=t?t&4294967295:h_}update(t){let e,n;if(typeof t=="string"){e=new Uint8Array(t.length*2),n=0;for(let E=0,T=t.length;E<T;E++){const P=t.charCodeAt(E);P<=255?e[n++]=P:(e[n++]=P>>>8,e[n++]=P&255)}}else if(ArrayBuffer.isView(t))e=t.slice(),n=e.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const i=n>>2,o=n-i*4,c=new Uint32Array(e.buffer,0,i);let u=0,h=0,f=this.h1,p=this.h2;const m=3432918353,v=461845907,b=m&Ir,C=v&Ir;for(let E=0;E<i;E++)E&1?(u=c[E],u=u*m&Ds|u*b&Ir,u=u<<15|u>>>17,u=u*v&Ds|u*C&Ir,f^=u,f=f<<13|f>>>19,f=f*5+3864292196):(h=c[E],h=h*m&Ds|h*b&Ir,h=h<<15|h>>>17,h=h*v&Ds|h*C&Ir,p^=h,p=p<<13|p>>>19,p=p*5+3864292196);switch(u=0,o){case 3:u^=e[i*4+2]<<16;case 2:u^=e[i*4+1]<<8;case 1:u^=e[i*4],u=u*m&Ds|u*b&Ir,u=u<<15|u>>>17,u=u*v&Ds|u*C&Ir,i&1?f^=u:p^=u}this.h1=f,this.h2=p}hexdigest(){let t=this.h1,e=this.h2;return t^=e>>>1,t=t*3981806797&Ds|t*36045&Ir,e=e*4283543511&Ds|((e<<16|t>>>16)*2950163797&Ds)>>>16,t^=e>>>1,t=t*444984403&Ds|t*60499&Ir,e=e*3301882366&Ds|((e<<16|t>>>16)*3120437893&Ds)>>>16,t^=e>>>1,(t>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}}const uS=Object.freeze({map:null,hash:"",transfer:void 0});var mu,gu,zo,zn,Rw,lR;class sE{constructor(){_(this,Rw);_(this,mu,!1);_(this,gu,null);_(this,zo,null);_(this,zn,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){const n=l(this,zn).get(t);return n===void 0?e:Object.assign(e,n)}getRawValue(t){return l(this,zn).get(t)}remove(t){const e=l(this,zn).get(t);if(e!==void 0&&(e instanceof De&&l(this,zo).delete(e.annotationElementId),l(this,zn).delete(t),l(this,zn).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function")){for(const n of l(this,zn).values())if(n instanceof De)return;this.onAnnotationEditor(null)}}setValue(t,e){const n=l(this,zn).get(t);let i=!1;if(n!==void 0)for(const[o,c]of Object.entries(e))n[o]!==c&&(i=!0,n[o]=c);else i=!0,l(this,zn).set(t,e);i&&R(this,Rw,lR).call(this),e instanceof De&&((l(this,zo)||A(this,zo,new Map)).set(e.annotationElementId,e),typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(e.constructor._type))}has(t){return l(this,zn).has(t)}get size(){return l(this,zn).size}resetModified(){l(this,mu)&&(A(this,mu,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new cR(this)}get serializable(){if(l(this,zn).size===0)return uS;const t=new Map,e=new aR,n=[],i=Object.create(null);let o=!1;for(const[c,u]of l(this,zn)){const h=u instanceof De?u.serialize(!1,i):u;h&&(t.set(c,h),e.update(`${c}:${JSON.stringify(h)}`),o||(o=!!h.bitmap))}if(o)for(const c of t.values())c.bitmap&&n.push(c.bitmap);return t.size>0?{map:t,hash:e.hexdigest(),transfer:n}:uS}get editorStats(){let t=null;const e=new Map;let n=0,i=0;for(const o of l(this,zn).values()){if(!(o instanceof De)){o.popup&&(o.popup.deleted?i+=1:n+=1);continue}o.isCommentDeleted?i+=1:o.hasEditedComment&&(n+=1);const c=o.telemetryFinalData;if(!c)continue;const{type:u}=c;e.has(u)||e.set(u,Object.getPrototypeOf(o).constructor),t||(t=Object.create(null));const h=t[u]||(t[u]=new Map);for(const[f,p]of Object.entries(c)){if(f==="type")continue;let m=h.get(f);m||(m=new Map,h.set(f,m));const v=m.get(p)??0;m.set(p,v+1)}}if((i>0||n>0)&&(t||(t=Object.create(null)),t.comments={deleted:i,edited:n}),!t)return null;for(const[o,c]of e)t[o]=c.computeTelemetryFinalData(t[o]);return t}resetModifiedIds(){A(this,gu,null)}updateEditor(t,e){const n=l(this,zo)?.get(t);return n?(n.updateFromAnnotationLayer(e),!0):!1}getEditor(t){return l(this,zo)?.get(t)||null}get modifiedIds(){if(l(this,gu))return l(this,gu);const t=[];if(l(this,zo))for(const e of l(this,zo).values())e.serialize()&&t.push(e.annotationElementId);return A(this,gu,{ids:new Set(t),hash:t.join(",")})}[Symbol.iterator](){return l(this,zn).entries()}}mu=new WeakMap,gu=new WeakMap,zo=new WeakMap,zn=new WeakMap,Rw=new WeakSet,lR=function(){l(this,mu)||(A(this,mu,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var vg;class cR extends sE{constructor(e){super();_(this,vg);const{map:n,hash:i,transfer:o}=e.serializable,c=structuredClone(n,o?{transfer:o}:null);A(this,vg,{map:c,hash:i,transfer:o})}get print(){Te("Should not call PrintAnnotationStorage.print")}get serializable(){return l(this,vg)}get modifiedIds(){return $t(this,"modifiedIds",{ids:new Set,hash:""})}}vg=new WeakMap;var qd;class xB{constructor({ownerDocument:t=globalThis.document,styleElement:e=null}){_(this,qd,new Set);this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),l(this,qd).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,disableFontFace:e,_inspectFont:n}){if(!(!t||l(this,qd).has(t.loadedName))){if(se(!e,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:i,src:o,style:c}=t,u=new FontFace(i,o,c);this.addNativeFontFace(u);try{await u.load(),l(this,qd).add(i),n?.(t)}catch{Ht(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(u)}return}Te("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const n=t.createNativeFontFace();if(n){this.addNativeFontFace(n);try{await n.loaded}catch(i){throw Ht(`Failed to load font '${n.family}': '${i}'.`),t.disableFontFace=!0,i}}return}const e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;await new Promise(n=>{const i=this._queueLoadingCallback(n);this._prepareFontLoadEvent(t,i)})}}get isFontLoadingAPISupported(){const t=!!this._document?.fonts;return $t(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){return $t(this,"isSyncFontLoadingSupported",Ai||Cn.platform.isFirefox)}_queueLoadingCallback(t){function e(){for(se(!i.done,"completeRequest() cannot be called twice."),i.done=!0;n.length>0&&n[0].done;){const o=n.shift();setTimeout(o.callback,0)}}const{loadingRequests:n}=this,i={done:!1,complete:e,callback:t};return n.push(i),i}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return $t(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,e){function n(F,O){return F.charCodeAt(O)<<24|F.charCodeAt(O+1)<<16|F.charCodeAt(O+2)<<8|F.charCodeAt(O+3)&255}function i(F,O,z,K){const Y=F.substring(0,O),nt=F.substring(O+z);return Y+K+nt}let o,c;const u=this._document.createElement("canvas");u.width=1,u.height=1;const h=u.getContext("2d");let f=0;function p(F,O){if(++f>30){Ht("Load test font never loaded."),O();return}if(h.font="30px "+F,h.fillText(".",0,20),h.getImageData(0,0,1,1).data[3]>0){O();return}setTimeout(p.bind(null,F,O))}const m=`lt${Date.now()}${this.loadTestFontId++}`;let v=this._loadTestFont;v=i(v,976,m.length,m);const C=16,E=1482184792;let T=n(v,C);for(o=0,c=m.length-3;o<c;o+=4)T=T-E+n(m,o)|0;o<m.length&&(T=T-E+n(m+"XXX",o)|0),v=i(v,C,4,tB(T));const P=`url(data:font/opentype;base64,${btoa(v)});`,N=`@font-face {font-family:"${m}";src:${P}}`;this.insertRule(N);const L=this._document.createElement("div");L.style.visibility="hidden",L.style.width=L.style.height="10px",L.style.position="absolute",L.style.top=L.style.left="0px";for(const F of[t.loadedName,m]){const O=this._document.createElement("span");O.textContent="Hi",O.style.fontFamily=F,L.append(O)}this._document.body.append(L),p(m,()=>{L.remove(),e.complete()})}}qd=new WeakMap;var ve;class bB{constructor(t,e=null,n,i){_(this,ve);this.compiledGlyphs=Object.create(null),A(this,ve,t),this._inspectFont=e,n&&Object.assign(this,n),i&&(this.charProcOperatorList=i)}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const e={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(e.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,e)}return this._inspectFont?.(this),t}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const t=`url(data:${this.mimetype};base64,${k2(this.data)});`;let e;if(!this.cssFontInfo)e=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let n=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(n+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),e=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${n}src:${t}}`}return this._inspectFont?.(this,t),e}getPathGenerator(t,e){if(this.compiledGlyphs[e]!==void 0)return this.compiledGlyphs[e];const n=this.loadedName+"_path_"+e;let i;try{i=t.get(n)}catch(c){Ht(`getPathGenerator - ignoring character: "${c}".`)}const o=P2(i?.path);return this.fontExtraProperties||t.delete(n),this.compiledGlyphs[e]=o}get black(){return l(this,ve).black}get bold(){return l(this,ve).bold}get disableFontFace(){return l(this,ve).disableFontFace??!1}set disableFontFace(t){$t(this,"disableFontFace",!!t)}get fontExtraProperties(){return l(this,ve).fontExtraProperties??!1}get isInvalidPDFjsFont(){return l(this,ve).isInvalidPDFjsFont}get isType3Font(){return l(this,ve).isType3Font}get italic(){return l(this,ve).italic}get missingFile(){return l(this,ve).missingFile}get remeasure(){return l(this,ve).remeasure}get vertical(){return l(this,ve).vertical}get ascent(){return l(this,ve).ascent}get defaultWidth(){return l(this,ve).defaultWidth}get descent(){return l(this,ve).descent}get bbox(){return l(this,ve).bbox}set bbox(t){$t(this,"bbox",t)}get fontMatrix(){return l(this,ve).fontMatrix}get fallbackName(){return l(this,ve).fallbackName}get loadedName(){return l(this,ve).loadedName}get mimetype(){return l(this,ve).mimetype}get name(){return l(this,ve).name}get data(){return l(this,ve).data}clearData(){l(this,ve).clearData()}get cssFontInfo(){return l(this,ve).cssFontInfo}get systemFontInfo(){return l(this,ve).systemFontInfo}get defaultVMetrics(){return l(this,ve).defaultVMetrics}}ve=new WeakMap;var Qd,Zd,wg,Jd,_v;const Cd=class Cd{constructor(t){_(this,Jd);_(this,Qd);_(this,Zd);_(this,wg);A(this,Qd,t),A(this,Zd,new DataView(l(this,Qd))),A(this,wg,new TextDecoder)}static write(t){const e=new TextEncoder,n={};let i=0;for(const f of Cd.strings){const p=e.encode(t[f]);n[f]=p,i+=4+p.length}const o=new ArrayBuffer(i),c=new Uint8Array(o),u=new DataView(o);let h=0;for(const f of Cd.strings){const p=n[f],m=p.length;u.setUint32(h,m),c.set(p,h+4),h+=4+m}return se(h===o.byteLength,"CssFontInfo.write: Buffer overflow"),o}get fontFamily(){return R(this,Jd,_v).call(this,0)}get fontWeight(){return R(this,Jd,_v).call(this,1)}get italicAngle(){return R(this,Jd,_v).call(this,2)}};Qd=new WeakMap,Zd=new WeakMap,wg=new WeakMap,Jd=new WeakSet,_v=function(t){se(t<Cd.strings.length,"Invalid string index");let e=0;for(let i=0;i<t;i++)e+=l(this,Zd).getUint32(e)+4;const n=l(this,Zd).getUint32(e);return l(this,wg).decode(new Uint8Array(l(this,Qd),e+4,n))},ct(Cd,"strings",["fontFamily","fontWeight","italicAngle"]);let pw=Cd;var xl,Xr,yu,vu,dm;const kd=class kd{constructor(t){_(this,vu);_(this,xl);_(this,Xr);_(this,yu);A(this,xl,t),A(this,Xr,new DataView(l(this,xl))),A(this,yu,new TextDecoder)}static write(t){const e=new TextEncoder,n={};let i=0;for(const v of kd.strings){const b=e.encode(t[v]);n[v]=b,i+=4+b.length}i+=4;let o,c,u=1+i;t.style&&(o=e.encode(t.style.style),c=e.encode(t.style.weight),u+=4+o.length+4+c.length);const h=new ArrayBuffer(u),f=new Uint8Array(h),p=new DataView(h);let m=0;p.setUint8(m++,t.guessFallback?1:0),p.setUint32(m,0),m+=4,i=0;for(const v of kd.strings){const b=n[v],C=b.length;i+=4+C,p.setUint32(m,C),f.set(b,m+4),m+=4+C}return p.setUint32(m-i-4,i),t.style&&(p.setUint32(m,o.length),f.set(o,m+4),m+=4+o.length,p.setUint32(m,c.length),f.set(c,m+4),m+=4+c.length),se(m<=h.byteLength,"SubstitionInfo.write: Buffer overflow"),h.transferToFixedLength(m)}get guessFallback(){return l(this,Xr).getUint8(0)!==0}get css(){return R(this,vu,dm).call(this,0)}get loadedName(){return R(this,vu,dm).call(this,1)}get baseFontName(){return R(this,vu,dm).call(this,2)}get src(){return R(this,vu,dm).call(this,3)}get style(){let t=1;t+=4+l(this,Xr).getUint32(t);const e=l(this,Xr).getUint32(t),n=l(this,yu).decode(new Uint8Array(l(this,xl),t+4,e));t+=4+e;const i=l(this,Xr).getUint32(t),o=l(this,yu).decode(new Uint8Array(l(this,xl),t+4,i));return{style:n,weight:o}}};xl=new WeakMap,Xr=new WeakMap,yu=new WeakMap,vu=new WeakSet,dm=function(t){se(t<kd.strings.length,"Invalid string index");let e=5;for(let i=0;i<t;i++)e+=l(this,Xr).getUint32(e)+4;const n=l(this,Xr).getUint32(e);return l(this,yu).decode(new Uint8Array(l(this,xl),e+4,n))},ct(kd,"strings",["css","loadedName","baseFontName","src"]);let mw=kd;var tf,ef,nf,sf,es,Kr,xg,we,en,or,Pv,fm;const Xt=class Xt{constructor({data:t,extra:e}){_(this,en);_(this,Kr);_(this,xg);_(this,we);A(this,Kr,t),A(this,xg,new TextDecoder),A(this,we,new DataView(l(this,Kr))),e&&Object.assign(this,e)}get black(){return R(this,en,or).call(this,0)}get bold(){return R(this,en,or).call(this,1)}get disableFontFace(){return R(this,en,or).call(this,2)}get fontExtraProperties(){return R(this,en,or).call(this,3)}get isInvalidPDFjsFont(){return R(this,en,or).call(this,4)}get isType3Font(){return R(this,en,or).call(this,5)}get italic(){return R(this,en,or).call(this,6)}get missingFile(){return R(this,en,or).call(this,7)}get remeasure(){return R(this,en,or).call(this,8)}get vertical(){return R(this,en,or).call(this,9)}get ascent(){return R(this,en,Pv).call(this,0)}get defaultWidth(){return R(this,en,Pv).call(this,1)}get descent(){return R(this,en,Pv).call(this,2)}get bbox(){let t=l(Xt,ef);if(l(this,we).getUint8(t)===0)return;t+=1;const n=[];for(let i=0;i<4;i++)n.push(l(this,we).getInt16(t,!0)),t+=2;return n}get fontMatrix(){let t=l(Xt,nf);if(l(this,we).getUint8(t)===0)return;t+=1;const n=[];for(let i=0;i<6;i++)n.push(l(this,we).getFloat64(t,!0)),t+=8;return n}get defaultVMetrics(){let t=l(Xt,sf);if(l(this,we).getUint8(t)===0)return;t+=1;const n=[];for(let i=0;i<3;i++)n.push(l(this,we).getInt16(t,!0)),t+=2;return n}get fallbackName(){return R(this,en,fm).call(this,0)}get loadedName(){return R(this,en,fm).call(this,1)}get mimetype(){return R(this,en,fm).call(this,2)}get name(){return R(this,en,fm).call(this,3)}get data(){let t=l(Xt,es);const e=l(this,we).getUint32(t);t+=4+e;const n=l(this,we).getUint32(t);t+=4+n;const i=l(this,we).getUint32(t);t+=4+i;const o=l(this,we).getUint32(t);if(o!==0)return new Uint8Array(l(this,Kr),t+4,o)}clearData(){let t=l(Xt,es);const e=l(this,we).getUint32(t);t+=4+e;const n=l(this,we).getUint32(t);t+=4+n;const i=l(this,we).getUint32(t);t+=4+i;const o=l(this,we).getUint32(t);new Uint8Array(l(this,Kr),t+4,o).fill(0),l(this,we).setUint32(t,0)}get cssFontInfo(){let t=l(Xt,es);const e=l(this,we).getUint32(t);t+=4+e;const n=l(this,we).getUint32(t);t+=4+n;const i=l(this,we).getUint32(t);if(i===0)return null;const o=new Uint8Array(i);return o.set(new Uint8Array(l(this,Kr),t+4,i)),new pw(o.buffer)}get systemFontInfo(){let t=l(Xt,es);const e=l(this,we).getUint32(t);t+=4+e;const n=l(this,we).getUint32(t);if(n===0)return null;const i=new Uint8Array(n);return i.set(new Uint8Array(l(this,Kr),t+4,n)),new mw(i.buffer)}static write(t){const e=t.systemFontInfo?mw.write(t.systemFontInfo):null,n=t.cssFontInfo?pw.write(t.cssFontInfo):null,i=new TextEncoder,o={};let c=0;for(const E of Xt.strings)o[E]=i.encode(t[E]),c+=4+o[E].length;const u=l(Xt,es)+4+c+4+(e?e.byteLength:0)+4+(n?n.byteLength:0)+4+(t.data?t.data.length:0),h=new ArrayBuffer(u),f=new Uint8Array(h),p=new DataView(h);let m=0;const v=Xt.bools.length;let b=0,C=0;for(let E=0;E<v;E++){const T=t[Xt.bools[E]];b|=(T===void 0?0:T?2:1)<<C,C+=2,(C===8||E===v-1)&&(p.setUint8(m++,b),b=0,C=0)}se(m===l(Xt,tf),"FontInfo.write: Boolean properties offset mismatch");for(const E of Xt.numbers)p.setFloat64(m,t[E]),m+=8;if(se(m===l(Xt,ef),"FontInfo.write: Number properties offset mismatch"),t.bbox){p.setUint8(m++,4);for(const E of t.bbox)p.setInt16(m,E,!0),m+=2}else p.setUint8(m++,0),m+=8;if(se(m===l(Xt,nf),"FontInfo.write: BBox properties offset mismatch"),t.fontMatrix){p.setUint8(m++,6);for(const E of t.fontMatrix)p.setFloat64(m,E,!0),m+=8}else p.setUint8(m++,0),m+=48;if(se(m===l(Xt,sf),"FontInfo.write: FontMatrix properties offset mismatch"),t.defaultVMetrics){p.setUint8(m++,1);for(const E of t.defaultVMetrics)p.setInt16(m,E,!0),m+=2}else p.setUint8(m++,0),m+=6;se(m===l(Xt,es),"FontInfo.write: DefaultVMetrics properties offset mismatch"),p.setUint32(l(Xt,es),0),m+=4;for(const E of Xt.strings){const T=o[E],P=T.length;p.setUint32(m,P),f.set(T,m+4),m+=4+P}if(p.setUint32(l(Xt,es),m-l(Xt,es)-4),!e)p.setUint32(m,0),m+=4;else{const E=e.byteLength;p.setUint32(m,E),se(m+4+E<=h.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),f.set(new Uint8Array(e),m+4),m+=4+E}if(!n)p.setUint32(m,0),m+=4;else{const E=n.byteLength;p.setUint32(m,E),se(m+4+E<=h.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),f.set(new Uint8Array(n),m+4),m+=4+E}return t.data===void 0?(p.setUint32(m,0),m+=4):(p.setUint32(m,t.data.length),f.set(t.data,m+4),m+=4+t.data.length),se(m<=h.byteLength,"FontInfo.write: Buffer overflow"),h.transferToFixedLength(m)}};tf=new WeakMap,ef=new WeakMap,nf=new WeakMap,sf=new WeakMap,es=new WeakMap,Kr=new WeakMap,xg=new WeakMap,we=new WeakMap,en=new WeakSet,or=function(t){se(t<Xt.bools.length,"Invalid boolean index");const e=Math.floor(t/4),n=t*2%8,i=l(this,we).getUint8(e)>>n&3;return i===0?void 0:i===2},Pv=function(t){return se(t<Xt.numbers.length,"Invalid number index"),l(this,we).getFloat64(l(Xt,tf)+t*8)},fm=function(t){se(t<Xt.strings.length,"Invalid string index");let e=l(Xt,es)+4;for(let o=0;o<t;o++)e+=l(this,we).getUint32(e)+4;const n=l(this,we).getUint32(e),i=new Uint8Array(n);return i.set(new Uint8Array(l(this,Kr),e+4,n)),l(this,xg).decode(i)},ct(Xt,"bools",["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"]),ct(Xt,"numbers",["ascent","defaultWidth","descent"]),ct(Xt,"strings",["fallbackName","loadedName","mimetype","name"]),_(Xt,tf,Math.ceil(Xt.bools.length*2/8)),_(Xt,ef,l(Xt,tf)+Xt.numbers.length*8),_(Xt,nf,l(Xt,ef)+1+8),_(Xt,sf,l(Xt,nf)+1+48),_(Xt,es,l(Xt,sf)+1+6);let hS=Xt;var bg,Ag,Sg,Eg,Cg,kg,Tg,_g;const Re=class Re{constructor(t){this.buffer=t,this.view=new DataView(t),this.data=new Uint8Array(t)}static write(t){let e,n=null,i=[],o=[],c=[],u=[],h=null,f=null;switch(t[0]){case"RadialAxial":e=t[1]==="axial"?1:2,n=t[2],c=t[3],e===1?i.push(...t[4],...t[5]):i.push(t[4][0],t[4][1],t[6],t[5][0],t[5][1],t[7]);break;case"Mesh":e=3,h=t[1],i=t[2],o=t[3],u=t[4]||[],n=t[6],f=t[7];break;default:throw new Error(`Unsupported pattern type: ${t[0]}`)}const p=Math.floor(i.length/2),m=Math.floor(o.length/3),v=c.length,b=u.length;let C=0;for(const O of u)C+=1,C=Math.ceil(C/4)*4,C+=4+O.coords.length*4,C+=4+O.colors.length*4,O.verticesPerRow!==void 0&&(C+=4);const E=20+p*8+m*3+v*8+(n?16:0)+(f?3:0)+C,T=new ArrayBuffer(E),P=new DataView(T),N=new Uint8Array(T);P.setUint8(l(Re,bg),e),P.setUint8(l(Re,Ag),n?1:0),P.setUint8(l(Re,Sg),f?1:0),P.setUint8(l(Re,Eg),h),P.setUint32(l(Re,Cg),p,!0),P.setUint32(l(Re,kg),m,!0),P.setUint32(l(Re,Tg),v,!0),P.setUint32(l(Re,_g),b,!0);let L=20;new Float32Array(T,L,p*2).set(i),L+=p*8,N.set(o,L),L+=m*3;for(const[O,z]of c)P.setFloat32(L,O,!0),L+=4,P.setUint32(L,parseInt(z.slice(1),16),!0),L+=4;if(n)for(const O of n)P.setFloat32(L,O,!0),L+=4;f&&(N.set(f,L),L+=3);for(let O=0;O<u.length;O++){const z=u[O];P.setUint8(L,z.type),L+=1,L=Math.ceil(L/4)*4,P.setUint32(L,z.coords.length,!0),L+=4,new Int32Array(T,L,z.coords.length).set(z.coords),L+=z.coords.length*4,P.setUint32(L,z.colors.length,!0),L+=4,new Int32Array(T,L,z.colors.length).set(z.colors),L+=z.colors.length*4,z.verticesPerRow!==void 0&&(P.setUint32(L,z.verticesPerRow,!0),L+=4)}return T}getIR(){const t=this.view,e=this.data[l(Re,bg)],n=!!this.data[l(Re,Ag)],i=!!this.data[l(Re,Sg)],o=t.getUint32(l(Re,Cg),!0),c=t.getUint32(l(Re,kg),!0),u=t.getUint32(l(Re,Tg),!0),h=t.getUint32(l(Re,_g),!0);let f=20;const p=new Float32Array(this.buffer,f,o*2);f+=o*8;const m=new Uint8Array(this.buffer,f,c*3);f+=c*3;const v=[];for(let T=0;T<u;++T){const P=t.getFloat32(f,!0);f+=4;const N=t.getUint32(f,!0);f+=4,v.push([P,`#${N.toString(16).padStart(6,"0")}`])}let b=null;if(n){b=[];for(let T=0;T<4;++T)b.push(t.getFloat32(f,!0)),f+=4}let C=null;i&&(C=new Uint8Array(this.buffer,f,3),f+=3);const E=[];for(let T=0;T<h;++T){const P=t.getUint8(f);f+=1,f=Math.ceil(f/4)*4;const N=t.getUint32(f,!0);f+=4;const L=new Int32Array(this.buffer,f,N);f+=N*4;const F=t.getUint32(f,!0);f+=4;const O=new Int32Array(this.buffer,f,F);f+=F*4;const z={type:P,coords:L,colors:O};P===HA.LATTICE&&(z.verticesPerRow=t.getUint32(f,!0),f+=4),E.push(z)}if(e===1)return["RadialAxial","axial",b,v,Array.from(p.slice(0,2)),Array.from(p.slice(2,4)),null,null];if(e===2)return["RadialAxial","radial",b,v,[p[0],p[1]],[p[3],p[4]],p[2],p[5]];if(e===3){const T=this.data[l(Re,Eg)];let P=null;if(p.length>0){let N=p[0],L=p[0],F=p[1],O=p[1];for(let z=0;z<p.length;z+=2){const K=p[z],Y=p[z+1];N=N>K?K:N,F=F>Y?Y:F,L=L<K?K:L,O=O<Y?Y:O}P=[N,F,L,O]}return["Mesh",T,p,m,E,P,b,C]}throw new Error(`Unsupported pattern kind: ${e}`)}};bg=new WeakMap,Ag=new WeakMap,Sg=new WeakMap,Eg=new WeakMap,Cg=new WeakMap,kg=new WeakMap,Tg=new WeakMap,_g=new WeakMap,_(Re,bg,0),_(Re,Ag,1),_(Re,Sg,2),_(Re,Eg,3),_(Re,Cg,4),_(Re,kg,8),_(Re,Tg,12),_(Re,_g,16);let dS=Re;var rf;class AB{constructor(t){_(this,rf);A(this,rf,t)}static write(t){let e,n;return Cn.isFloat16ArraySupported?(n=new ArrayBuffer(t.length*2),e=new Float16Array(n)):(n=new ArrayBuffer(t.length*4),e=new Float32Array(n)),e.set(t),n}get path(){return Cn.isFloat16ArraySupported?new Float16Array(l(this,rf)):new Float32Array(l(this,rf))}}rf=new WeakMap;function SB(r){if(r instanceof URL)return r.href;if(typeof r=="string"){if(Ai)return r;const t=URL.parse(r,window.location);if(t)return t.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function EB(r){if(Ai&&typeof Buffer<"u"&&r instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(r instanceof Uint8Array&&r.byteLength===r.buffer.byteLength)return r;if(typeof r=="string")return U0(r);if(r instanceof ArrayBuffer||ArrayBuffer.isView(r)||typeof r=="object"&&!isNaN(r?.length))return new Uint8Array(r);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function uv(r){if(typeof r!="string")return null;if(r.endsWith("/"))return r;throw new Error(`Invalid factory url: "${r}" must include trailing slash.`)}const fS=r=>typeof r=="object"&&Number.isInteger(r?.num)&&r.num>=0&&Number.isInteger(r?.gen)&&r.gen>=0,CB=r=>typeof r=="object"&&typeof r?.name=="string",kB=rB.bind(null,fS,CB);var Ho,Mw;class TB{constructor(){_(this,Ho,new Map);_(this,Mw,Promise.resolve())}postMessage(t,e){const n={data:structuredClone(t,e?{transfer:e}:null)};l(this,Mw).then(()=>{for(const[i]of l(this,Ho))i.call(this,n)})}addEventListener(t,e,n=null){let i=null;if(n?.signal instanceof AbortSignal){const{signal:o}=n;if(o.aborted){Ht("LoopbackPort - cannot use an `aborted` signal.");return}const c=()=>this.removeEventListener(t,e);i=()=>o.removeEventListener("abort",c),o.addEventListener("abort",c)}l(this,Ho).set(e,i)}removeEventListener(t,e){l(this,Ho).get(e)?.(),l(this,Ho).delete(e)}terminate(){for(const[,t]of l(this,Ho))t?.();l(this,Ho).clear()}}Ho=new WeakMap,Mw=new WeakMap;const hv={DATA:1,ERROR:2},hn={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function d_(){}function ji(r){if(r instanceof ql||r instanceof $A||r instanceof s_||r instanceof uw||r instanceof fA)return r;switch(r instanceof Error||typeof r=="object"&&r!==null||Te('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),r.name){case"AbortException":return new ql(r.message);case"InvalidPDFException":return new $A(r.message);case"PasswordException":return new s_(r.message,r.code);case"ResponseException":return new uw(r.message,r.status,r.missing);case"UnknownErrorException":return new fA(r.message,r.details)}return new fA(r.message,r.toString())}var of,Ks,uR,hR,dR,Rv;class pm{constructor(t,e,n){_(this,Ks);_(this,of,new AbortController);this.sourceName=t,this.targetName=e,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),n.addEventListener("message",R(this,Ks,uR).bind(this),{signal:l(this,of).signal})}on(t,e){const n=this.actionHandler;if(n[t])throw new Error(`There is already an actionName called "${t}"`);n[t]=e}send(t,e,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},n)}sendWithPromise(t,e,n){const i=this.callbackId++,o=Promise.withResolvers();this.callbackCapabilities[i]=o;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:i,data:e},n)}catch(c){o.reject(c)}return o.promise}sendWithStream(t,e,n,i){const o=this.streamId++,c=this.sourceName,u=this.targetName,h=this.comObj;return new ReadableStream({start:f=>{const p=Promise.withResolvers();return this.streamControllers[o]={controller:f,startCall:p,pullCall:null,cancelCall:null,isClosed:!1},h.postMessage({sourceName:c,targetName:u,action:t,streamId:o,data:e,desiredSize:f.desiredSize},i),p.promise},pull:f=>{const p=Promise.withResolvers();return this.streamControllers[o].pullCall=p,h.postMessage({sourceName:c,targetName:u,stream:hn.PULL,streamId:o,desiredSize:f.desiredSize}),p.promise},cancel:f=>{se(f instanceof Error,"cancel must have a valid reason");const p=Promise.withResolvers();return this.streamControllers[o].cancelCall=p,this.streamControllers[o].isClosed=!0,h.postMessage({sourceName:c,targetName:u,stream:hn.CANCEL,streamId:o,reason:ji(f)}),p.promise}},n)}destroy(){l(this,of)?.abort(),A(this,of,null)}}of=new WeakMap,Ks=new WeakSet,uR=function({data:t}){if(t.targetName!==this.sourceName)return;if(t.stream){R(this,Ks,dR).call(this,t);return}if(t.callback){const n=t.callbackId,i=this.callbackCapabilities[n];if(!i)throw new Error(`Cannot resolve callback ${n}`);if(delete this.callbackCapabilities[n],t.callback===hv.DATA)i.resolve(t.data);else if(t.callback===hv.ERROR)i.reject(ji(t.reason));else throw new Error("Unexpected callback case");return}const e=this.actionHandler[t.action];if(!e)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const n=this.sourceName,i=t.sourceName,o=this.comObj;Promise.try(e,t.data).then(function(c){o.postMessage({sourceName:n,targetName:i,callback:hv.DATA,callbackId:t.callbackId,data:c})},function(c){o.postMessage({sourceName:n,targetName:i,callback:hv.ERROR,callbackId:t.callbackId,reason:ji(c)})});return}if(t.streamId){R(this,Ks,hR).call(this,t);return}e(t.data)},hR=function(t){const e=t.streamId,n=this.sourceName,i=t.sourceName,o=this.comObj,c=this,u=this.actionHandler[t.action],h={enqueue(f,p=1,m){if(this.isCancelled)return;const v=this.desiredSize;this.desiredSize-=p,v>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),o.postMessage({sourceName:n,targetName:i,stream:hn.ENQUEUE,streamId:e,chunk:f},m)},close(){this.isCancelled||(this.isCancelled=!0,o.postMessage({sourceName:n,targetName:i,stream:hn.CLOSE,streamId:e}),delete c.streamSinks[e])},error(f){se(f instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,o.postMessage({sourceName:n,targetName:i,stream:hn.ERROR,streamId:e,reason:ji(f)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};h.sinkCapability.resolve(),h.ready=h.sinkCapability.promise,this.streamSinks[e]=h,Promise.try(u,t.data,h).then(function(){o.postMessage({sourceName:n,targetName:i,stream:hn.START_COMPLETE,streamId:e,success:!0})},function(f){o.postMessage({sourceName:n,targetName:i,stream:hn.START_COMPLETE,streamId:e,reason:ji(f)})})},dR=function(t){const e=t.streamId,n=this.sourceName,i=t.sourceName,o=this.comObj,c=this.streamControllers[e],u=this.streamSinks[e];switch(t.stream){case hn.START_COMPLETE:t.success?c.startCall.resolve():c.startCall.reject(ji(t.reason));break;case hn.PULL_COMPLETE:t.success?c.pullCall.resolve():c.pullCall.reject(ji(t.reason));break;case hn.PULL:if(!u){o.postMessage({sourceName:n,targetName:i,stream:hn.PULL_COMPLETE,streamId:e,success:!0});break}u.desiredSize<=0&&t.desiredSize>0&&u.sinkCapability.resolve(),u.desiredSize=t.desiredSize,Promise.try(u.onPull||d_).then(function(){o.postMessage({sourceName:n,targetName:i,stream:hn.PULL_COMPLETE,streamId:e,success:!0})},function(f){o.postMessage({sourceName:n,targetName:i,stream:hn.PULL_COMPLETE,streamId:e,reason:ji(f)})});break;case hn.ENQUEUE:if(se(c,"enqueue should have stream controller"),c.isClosed)break;c.controller.enqueue(t.chunk);break;case hn.CLOSE:if(se(c,"close should have stream controller"),c.isClosed)break;c.isClosed=!0,c.controller.close(),R(this,Ks,Rv).call(this,c,e);break;case hn.ERROR:se(c,"error should have stream controller"),c.controller.error(ji(t.reason)),R(this,Ks,Rv).call(this,c,e);break;case hn.CANCEL_COMPLETE:t.success?c.cancelCall.resolve():c.cancelCall.reject(ji(t.reason)),R(this,Ks,Rv).call(this,c,e);break;case hn.CANCEL:if(!u)break;const h=ji(t.reason);Promise.try(u.onCancel||d_,h).then(function(){o.postMessage({sourceName:n,targetName:i,stream:hn.CANCEL_COMPLETE,streamId:e,success:!0})},function(f){o.postMessage({sourceName:n,targetName:i,stream:hn.CANCEL_COMPLETE,streamId:e,reason:ji(f)})}),u.sinkCapability.reject(h),u.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}},Rv=async function(t,e){await Promise.allSettled([t.startCall?.promise,t.pullCall?.promise,t.cancelCall?.promise]),delete this.streamControllers[e]};var Pg;class fR{constructor({enableHWA:t=!1}){_(this,Pg,!1);A(this,Pg,t)}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");const n=this._createCanvas(t,e);return{canvas:n,context:n.getContext("2d",{willReadFrequently:!l(this,Pg)})}}reset(t,e,n){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||n<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=n}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){Te("Abstract method `_createCanvas` called.")}}Pg=new WeakMap;class _B extends fR{constructor({ownerDocument:t=globalThis.document,enableHWA:e=!1}){super({enableHWA:e}),this._document=t}_createCanvas(t,e){const n=this._document.createElement("canvas");return n.width=t,n.height=e,n}}class pR{constructor({baseUrl:t=null,isCompressed:e=!0}){this.baseUrl=t,this.isCompressed=e}async fetch({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const e=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(e).then(n=>({cMapData:n,isCompressed:this.isCompressed})).catch(n=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${e}`)})}async _fetch(t){Te("Abstract method `_fetch` called.")}}class f_ extends pR{async _fetch(t){const e=await V0(t,this.isCompressed?"arraybuffer":"text");return e instanceof ArrayBuffer?new Uint8Array(e):U0(e)}}class mR{addFilter(t){return"none"}addHCMFilter(t,e){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,e,n,i,o){return"none"}destroy(t=!1){}}var wu,af,$o,Wo,oi,xu,bu,At,ni,mm,hd,Mv,dd,gR,pS,fd,gm,ym,mS,vm;class PB extends mR{constructor({docId:e,ownerDocument:n=globalThis.document}){super();_(this,At);_(this,wu);_(this,af);_(this,$o);_(this,Wo);_(this,oi);_(this,xu);_(this,bu,0);A(this,Wo,e),A(this,oi,n)}addFilter(e){if(!e)return"none";let n=l(this,At,ni).get(e);if(n)return n;const[i,o,c]=R(this,At,Mv).call(this,e),u=e.length===1?i:`${i}${o}${c}`;if(n=l(this,At,ni).get(u),n)return l(this,At,ni).set(e,n),n;const h=`g_${l(this,Wo)}_transfer_map_${wn(this,bu)._++}`,f=R(this,At,dd).call(this,h);l(this,At,ni).set(e,f),l(this,At,ni).set(u,f);const p=R(this,At,fd).call(this,h);return R(this,At,ym).call(this,i,o,c,p),f}addHCMFilter(e,n){const i=`${e}-${n}`,o="base";let c=l(this,At,mm).get(o);if(c?.key===i||(c?(c.filter?.remove(),c.key=i,c.url="none",c.filter=null):(c={key:i,url:"none",filter:null},l(this,At,mm).set(o,c)),!e||!n))return c.url;const u=R(this,At,vm).call(this,e);e=vt.makeHexColor(...u);const h=R(this,At,vm).call(this,n);if(n=vt.makeHexColor(...h),l(this,At,hd).style.color="",e==="#000000"&&n==="#ffffff"||e===n)return c.url;const f=new Array(256);for(let C=0;C<=255;C++){const E=C/255;f[C]=E<=.03928?E/12.92:((E+.055)/1.055)**2.4}const p=f.join(","),m=`g_${l(this,Wo)}_hcm_filter`,v=c.filter=R(this,At,fd).call(this,m);R(this,At,ym).call(this,p,p,p,v),R(this,At,pS).call(this,v);const b=(C,E)=>{const T=u[C]/255,P=h[C]/255,N=new Array(E+1);for(let L=0;L<=E;L++)N[L]=T+L/E*(P-T);return N.join(",")};return R(this,At,ym).call(this,b(0,5),b(1,5),b(2,5),v),c.url=R(this,At,dd).call(this,m),c.url}addAlphaFilter(e){let n=l(this,At,ni).get(e);if(n)return n;const[i]=R(this,At,Mv).call(this,[e]),o=`alpha_${i}`;if(n=l(this,At,ni).get(o),n)return l(this,At,ni).set(e,n),n;const c=`g_${l(this,Wo)}_alpha_map_${wn(this,bu)._++}`,u=R(this,At,dd).call(this,c);l(this,At,ni).set(e,u),l(this,At,ni).set(o,u);const h=R(this,At,fd).call(this,c);return R(this,At,mS).call(this,i,h),u}addLuminosityFilter(e){let n=l(this,At,ni).get(e||"luminosity");if(n)return n;let i,o;if(e?([i]=R(this,At,Mv).call(this,[e]),o=`luminosity_${i}`):o="luminosity",n=l(this,At,ni).get(o),n)return l(this,At,ni).set(e,n),n;const c=`g_${l(this,Wo)}_luminosity_map_${wn(this,bu)._++}`,u=R(this,At,dd).call(this,c);l(this,At,ni).set(e,u),l(this,At,ni).set(o,u);const h=R(this,At,fd).call(this,c);return R(this,At,gR).call(this,h),e&&R(this,At,mS).call(this,i,h),u}addHighlightHCMFilter(e,n,i,o,c){const u=`${n}-${i}-${o}-${c}`;let h=l(this,At,mm).get(e);if(h?.key===u||(h?(h.filter?.remove(),h.key=u,h.url="none",h.filter=null):(h={key:u,url:"none",filter:null},l(this,At,mm).set(e,h)),!n||!i))return h.url;const[f,p]=[n,i].map(R(this,At,vm).bind(this));let m=Math.round(.2126*f[0]+.7152*f[1]+.0722*f[2]),v=Math.round(.2126*p[0]+.7152*p[1]+.0722*p[2]),[b,C]=[o,c].map(R(this,At,vm).bind(this));v<m&&([m,v,b,C]=[v,m,C,b]),l(this,At,hd).style.color="";const E=(N,L,F)=>{const O=new Array(256),z=(v-m)/F,K=N/255,Y=(L-N)/(255*F);let nt=0;for(let st=0;st<=F;st++){const it=Math.round(m+st*z),Mt=K+st*Y;for(let xt=nt;xt<=it;xt++)O[xt]=Mt;nt=it+1}for(let st=nt;st<256;st++)O[st]=O[nt-1];return O.join(",")},T=`g_${l(this,Wo)}_hcm_${e}_filter`,P=h.filter=R(this,At,fd).call(this,T);return R(this,At,pS).call(this,P),R(this,At,ym).call(this,E(b[0],C[0],5),E(b[1],C[1],5),E(b[2],C[2],5),P),h.url=R(this,At,dd).call(this,T),h.url}destroy(e=!1){e&&l(this,xu)?.size||(l(this,$o)?.parentNode.parentNode.remove(),A(this,$o,null),l(this,af)?.clear(),A(this,af,null),l(this,xu)?.clear(),A(this,xu,null),A(this,bu,0))}}wu=new WeakMap,af=new WeakMap,$o=new WeakMap,Wo=new WeakMap,oi=new WeakMap,xu=new WeakMap,bu=new WeakMap,At=new WeakSet,ni=function(){return l(this,af)||A(this,af,new Map)},mm=function(){return l(this,xu)||A(this,xu,new Map)},hd=function(){if(!l(this,$o)){const e=l(this,oi).createElement("div"),{style:n}=e;n.visibility="hidden",n.contain="strict",n.width=n.height=0,n.position="absolute",n.top=n.left=0,n.zIndex=-1;const i=l(this,oi).createElementNS(To,"svg");i.setAttribute("width",0),i.setAttribute("height",0),A(this,$o,l(this,oi).createElementNS(To,"defs")),e.append(i),i.append(l(this,$o)),l(this,oi).body.append(e)}return l(this,$o)},Mv=function(e){if(e.length===1){const f=e[0],p=new Array(256);for(let v=0;v<256;v++)p[v]=f[v]/255;const m=p.join(",");return[m,m,m]}const[n,i,o]=e,c=new Array(256),u=new Array(256),h=new Array(256);for(let f=0;f<256;f++)c[f]=n[f]/255,u[f]=i[f]/255,h[f]=o[f]/255;return[c.join(","),u.join(","),h.join(",")]},dd=function(e){if(l(this,wu)===void 0){A(this,wu,"");const n=l(this,oi).URL;n!==l(this,oi).baseURI&&(ix(n)?Ht('#createUrl: ignore "data:"-URL for performance reasons.'):A(this,wu,S2(n,"")))}return`url(${l(this,wu)}#${e})`},gR=function(e){const n=l(this,oi).createElementNS(To,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(n)},pS=function(e){const n=l(this,oi).createElementNS(To,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(n)},fd=function(e){const n=l(this,oi).createElementNS(To,"filter");return n.setAttribute("color-interpolation-filters","sRGB"),n.setAttribute("id",e),l(this,At,hd).append(n),n},gm=function(e,n,i){const o=l(this,oi).createElementNS(To,n);o.setAttribute("type","discrete"),o.setAttribute("tableValues",i),e.append(o)},ym=function(e,n,i,o){const c=l(this,oi).createElementNS(To,"feComponentTransfer");o.append(c),R(this,At,gm).call(this,c,"feFuncR",e),R(this,At,gm).call(this,c,"feFuncG",n),R(this,At,gm).call(this,c,"feFuncB",i)},mS=function(e,n){const i=l(this,oi).createElementNS(To,"feComponentTransfer");n.append(i),R(this,At,gm).call(this,i,"feFuncA",e)},vm=function(e){return l(this,At,hd).style.color=e,H0(getComputedStyle(l(this,At,hd)).getPropertyValue("color"))};class yR{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(n=>{throw new Error(`Unable to load font data at: ${e}`)})}async _fetch(t){Te("Abstract method `_fetch` called.")}}class p_ extends yR{async _fetch(t){const e=await V0(t,"arraybuffer");return new Uint8Array(e)}}class vR{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!t)throw new Error("Wasm filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(n=>{throw new Error(`Unable to load wasm data at: ${e}`)})}async _fetch(t){Te("Abstract method `_fetch` called.")}}class m_ extends vR{async _fetch(t){const e=await V0(t,"arraybuffer");return new Uint8Array(e)}}Ai&&Ht("Please use the `legacy` build in Node.js environments.");async function rE(r){const e=await process.getBuiltinModule("fs").promises.readFile(r);return new Uint8Array(e)}class RB extends mR{}class MB extends fR{_createCanvas(t,e){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(t,e)}}class DB extends pR{async _fetch(t){return rE(t)}}class NB extends yR{async _fetch(t){return rE(t)}}class LB extends vR{async _fetch(t){return rE(t)}}const ld="__forcedDependency",{floor:g_,ceil:y_}=Math;function dv(r,t,e,n,i,o){r[t*4+0]=Math.min(r[t*4+0],e),r[t*4+1]=Math.min(r[t*4+1],n),r[t*4+2]=Math.max(r[t*4+2],i),r[t*4+3]=Math.max(r[t*4+3],o)}const gS=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0];var lf,bl;class IB{constructor(t,e){_(this,lf);_(this,bl);A(this,lf,t),A(this,bl,e)}get length(){return l(this,lf).length}isEmpty(t){return l(this,lf)[t]===gS}minX(t){return l(this,bl)[t*4+0]/256}minY(t){return l(this,bl)[t*4+1]/256}maxX(t){return(l(this,bl)[t*4+2]+1)/256}maxY(t){return(l(this,bl)[t*4+3]+1)/256}}lf=new WeakMap,bl=new WeakMap;const fv=(r,t)=>{if(!r)return;let e=r.get(t);return e||(e={dependencies:new Set,isRenderingOperation:!1},r.set(t,e)),e};var Vi,zi,Au,dr,Su,Go,me,xe,Xo,Hi,Rg,cf,Eu,Cu,Ko,ai,Yr,Mg,yS;class FB{constructor(t,e,n=!1){_(this,Mg);_(this,Vi,{__proto__:null});_(this,zi,{__proto__:null,transform:[],moveText:[],sameLineText:[],[ld]:[]});_(this,Au,new Map);_(this,dr,[]);_(this,Su,[]);_(this,Go,[[1,0,0,1,0,0]]);_(this,me,[-1/0,-1/0,1/0,1/0]);_(this,xe,new Float64Array([1/0,1/0,-1/0,-1/0]));_(this,Xo,-1);_(this,Hi,new Set);_(this,Rg,new Map);_(this,cf,new Map);_(this,Eu);_(this,Cu);_(this,Ko);_(this,ai);_(this,Yr);A(this,Eu,t.width),A(this,Cu,t.height),R(this,Mg,yS).call(this,e),n&&A(this,Yr,new Map)}growOperationsCount(t){t>=l(this,ai).length&&R(this,Mg,yS).call(this,t,l(this,ai))}save(t){return A(this,Vi,{__proto__:l(this,Vi)}),A(this,zi,{__proto__:l(this,zi),transform:{__proto__:l(this,zi).transform},moveText:{__proto__:l(this,zi).moveText},sameLineText:{__proto__:l(this,zi).sameLineText},[ld]:{__proto__:l(this,zi)[ld]}}),A(this,me,{__proto__:l(this,me)}),l(this,dr).push(t),this}restore(t){const e=Object.getPrototypeOf(l(this,Vi));if(e===null)return this;A(this,Vi,e),A(this,zi,Object.getPrototypeOf(l(this,zi))),A(this,me,Object.getPrototypeOf(l(this,me)));const n=l(this,dr).pop();return n!==void 0&&(fv(l(this,Yr),t)?.dependencies.add(n),l(this,ai)[t]=l(this,ai)[n]),this}recordOpenMarker(t){return l(this,dr).push(t),this}getOpenMarker(){return l(this,dr).length===0?null:l(this,dr).at(-1)}recordCloseMarker(t){const e=l(this,dr).pop();return e!==void 0&&(fv(l(this,Yr),t)?.dependencies.add(e),l(this,ai)[t]=l(this,ai)[e]),this}beginMarkedContent(t){return l(this,Su).push(t),this}endMarkedContent(t){const e=l(this,Su).pop();return e!==void 0&&(fv(l(this,Yr),t)?.dependencies.add(e),l(this,ai)[t]=l(this,ai)[e]),this}pushBaseTransform(t){return l(this,Go).push(vt.multiplyByDOMMatrix(l(this,Go).at(-1),t.getTransform())),this}popBaseTransform(){return l(this,Go).length>1&&l(this,Go).pop(),this}recordSimpleData(t,e){return l(this,Vi)[t]=e,this}recordIncrementalData(t,e){return l(this,zi)[t].push(e),this}resetIncrementalData(t,e){return l(this,zi)[t].length=0,this}recordNamedData(t,e){return l(this,Au).set(t,e),this}recordSimpleDataFromNamed(t,e,n){l(this,Vi)[t]=l(this,Au).get(e)??n}recordFutureForcedDependency(t,e){return this.recordIncrementalData(ld,e),this}inheritSimpleDataAsFutureForcedDependencies(t){for(const e of t)e in l(this,Vi)&&this.recordFutureForcedDependency(e,l(this,Vi)[e]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const t of l(this,Hi))this.recordFutureForcedDependency(ld,t);return this}resetBBox(t){return l(this,Xo)!==t&&(A(this,Xo,t),l(this,xe)[0]=1/0,l(this,xe)[1]=1/0,l(this,xe)[2]=-1/0,l(this,xe)[3]=-1/0),this}recordClipBox(t,e,n,i,o,c){const u=vt.multiplyByDOMMatrix(l(this,Go).at(-1),e.getTransform()),h=[1/0,1/0,-1/0,-1/0];vt.axialAlignedBoundingBox([n,o,i,c],u,h);const f=vt.intersect(l(this,me),h);return f?(l(this,me)[0]=f[0],l(this,me)[1]=f[1],l(this,me)[2]=f[2],l(this,me)[3]=f[3]):(l(this,me)[0]=l(this,me)[1]=1/0,l(this,me)[2]=l(this,me)[3]=-1/0),this}recordBBox(t,e,n,i,o,c){const u=l(this,me);if(u[0]===1/0)return this;const h=vt.multiplyByDOMMatrix(l(this,Go).at(-1),e.getTransform());if(u[0]===-1/0)return vt.axialAlignedBoundingBox([n,o,i,c],h,l(this,xe)),this;const f=[1/0,1/0,-1/0,-1/0];return vt.axialAlignedBoundingBox([n,o,i,c],h,f),l(this,xe)[0]=Math.min(l(this,xe)[0],Math.max(f[0],u[0])),l(this,xe)[1]=Math.min(l(this,xe)[1],Math.max(f[1],u[1])),l(this,xe)[2]=Math.max(l(this,xe)[2],Math.min(f[2],u[2])),l(this,xe)[3]=Math.max(l(this,xe)[3],Math.min(f[3],u[3])),this}recordCharacterBBox(t,e,n,i=1,o=0,c=0,u){const h=n.bbox;let f,p;if(h&&(f=h[2]!==h[0]&&h[3]!==h[1]&&l(this,cf).get(n),f!==!1&&(p=[0,0,0,0],vt.axialAlignedBoundingBox(h,n.fontMatrix,p),(i!==1||o!==0||c!==0)&&vt.scaleMinMax([i,0,0,-i,o,c],p),f)))return this.recordBBox(t,e,p[0],p[2],p[1],p[3]);if(!u)return this.recordFullPageBBox(t);const m=u();return h&&p&&f===void 0&&(f=p[0]<=o-m.actualBoundingBoxLeft&&p[2]>=o+m.actualBoundingBoxRight&&p[1]<=c-m.actualBoundingBoxAscent&&p[3]>=c+m.actualBoundingBoxDescent,l(this,cf).set(n,f),f)?this.recordBBox(t,e,p[0],p[2],p[1],p[3]):this.recordBBox(t,e,o-m.actualBoundingBoxLeft,o+m.actualBoundingBoxRight,c-m.actualBoundingBoxAscent,c+m.actualBoundingBoxDescent)}recordFullPageBBox(t){return l(this,xe)[0]=Math.max(0,l(this,me)[0]),l(this,xe)[1]=Math.max(0,l(this,me)[1]),l(this,xe)[2]=Math.min(l(this,Eu),l(this,me)[2]),l(this,xe)[3]=Math.min(l(this,Cu),l(this,me)[3]),this}getSimpleIndex(t){return l(this,Vi)[t]}recordDependencies(t,e){const n=l(this,Hi),i=l(this,Vi),o=l(this,zi);for(const c of e)c in l(this,Vi)?n.add(i[c]):c in o&&o[c].forEach(n.add,n);return this}recordNamedDependency(t,e){return l(this,Au).has(e)&&l(this,Hi).add(l(this,Au).get(e)),this}recordOperation(t,e=!1){if(this.recordDependencies(t,[ld]),l(this,Yr)){const n=fv(l(this,Yr),t),{dependencies:i}=n;l(this,Hi).forEach(i.add,i),l(this,dr).forEach(i.add,i),l(this,Su).forEach(i.add,i),i.delete(t),n.isRenderingOperation=!0}if(l(this,Xo)===t){const n=g_(l(this,xe)[0]*256/l(this,Eu)),i=g_(l(this,xe)[1]*256/l(this,Cu)),o=y_(l(this,xe)[2]*256/l(this,Eu)),c=y_(l(this,xe)[3]*256/l(this,Cu));dv(l(this,Ko),t,n,i,o,c);for(const u of l(this,Hi))u!==t&&dv(l(this,Ko),u,n,i,o,c);for(const u of l(this,dr))u!==t&&dv(l(this,Ko),u,n,i,o,c);for(const u of l(this,Su))u!==t&&dv(l(this,Ko),u,n,i,o,c);e||(l(this,Hi).clear(),A(this,Xo,-1))}return this}recordShowTextOperation(t,e=!1){const n=Array.from(l(this,Hi));this.recordOperation(t,e),this.recordIncrementalData("sameLineText",t);for(const i of n)this.recordIncrementalData("sameLineText",i);return this}bboxToClipBoxDropOperation(t,e=!1){return l(this,Xo)===t&&(A(this,Xo,-1),l(this,me)[0]=Math.max(l(this,me)[0],l(this,xe)[0]),l(this,me)[1]=Math.max(l(this,me)[1],l(this,xe)[1]),l(this,me)[2]=Math.min(l(this,me)[2],l(this,xe)[2]),l(this,me)[3]=Math.min(l(this,me)[3],l(this,xe)[3]),e||l(this,Hi).clear()),this}_takePendingDependencies(){const t=l(this,Hi);return A(this,Hi,new Set),t}_extractOperation(t){const e=l(this,Rg).get(t);return l(this,Rg).delete(t),e}_pushPendingDependencies(t){for(const e of t)l(this,Hi).add(e)}take(){return l(this,cf).clear(),new IB(l(this,ai),l(this,Ko))}takeDebugMetadata(){return l(this,Yr)}}Vi=new WeakMap,zi=new WeakMap,Au=new WeakMap,dr=new WeakMap,Su=new WeakMap,Go=new WeakMap,me=new WeakMap,xe=new WeakMap,Xo=new WeakMap,Hi=new WeakMap,Rg=new WeakMap,cf=new WeakMap,Eu=new WeakMap,Cu=new WeakMap,Ko=new WeakMap,ai=new WeakMap,Yr=new WeakMap,Mg=new WeakSet,yS=function(t,e){const n=new ArrayBuffer(t*4);A(this,Ko,new Uint8ClampedArray(n)),A(this,ai,new Uint32Array(n)),e&&e.length>0?(l(this,ai).set(e),l(this,ai).fill(gS,e.length)):l(this,ai).fill(gS)};var Ce,Qe,fr,uf,hf;const pE=class pE{constructor(t,e,n){_(this,Ce);_(this,Qe);_(this,fr);_(this,uf,0);_(this,hf,0);if(t instanceof pE&&l(t,fr)===!!n)return t;A(this,Ce,t),A(this,Qe,e),A(this,fr,!!n)}growOperationsCount(){throw new Error("Unreachable")}save(t){return wn(this,hf)._++,l(this,Ce).save(l(this,Qe)),this}restore(t){return l(this,hf)>0&&(l(this,Ce).restore(l(this,Qe)),wn(this,hf)._--),this}recordOpenMarker(t){return wn(this,uf)._++,this}getOpenMarker(){return l(this,uf)>0?l(this,Qe):l(this,Ce).getOpenMarker()}recordCloseMarker(t){return wn(this,uf)._--,this}beginMarkedContent(t){return this}endMarkedContent(t){return this}pushBaseTransform(t){return l(this,Ce).pushBaseTransform(t),this}popBaseTransform(){return l(this,Ce).popBaseTransform(),this}recordSimpleData(t,e){return l(this,Ce).recordSimpleData(t,l(this,Qe)),this}recordIncrementalData(t,e){return l(this,Ce).recordIncrementalData(t,l(this,Qe)),this}resetIncrementalData(t,e){return l(this,Ce).resetIncrementalData(t,l(this,Qe)),this}recordNamedData(t,e){return this}recordSimpleDataFromNamed(t,e,n){return l(this,Ce).recordSimpleDataFromNamed(t,e,l(this,Qe)),this}recordFutureForcedDependency(t,e){return l(this,Ce).recordFutureForcedDependency(t,l(this,Qe)),this}inheritSimpleDataAsFutureForcedDependencies(t){return l(this,Ce).inheritSimpleDataAsFutureForcedDependencies(t),this}inheritPendingDependenciesAsFutureForcedDependencies(){return l(this,Ce).inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(t){return l(this,fr)||l(this,Ce).resetBBox(l(this,Qe)),this}recordClipBox(t,e,n,i,o,c){return l(this,fr)||l(this,Ce).recordClipBox(l(this,Qe),e,n,i,o,c),this}recordBBox(t,e,n,i,o,c){return l(this,fr)||l(this,Ce).recordBBox(l(this,Qe),e,n,i,o,c),this}recordCharacterBBox(t,e,n,i,o,c,u){return l(this,fr)||l(this,Ce).recordCharacterBBox(l(this,Qe),e,n,i,o,c,u),this}recordFullPageBBox(t){return l(this,fr)||l(this,Ce).recordFullPageBBox(l(this,Qe)),this}getSimpleIndex(t){return l(this,Ce).getSimpleIndex(t)}recordDependencies(t,e){return l(this,Ce).recordDependencies(l(this,Qe),e),this}recordNamedDependency(t,e){return l(this,Ce).recordNamedDependency(l(this,Qe),e),this}recordOperation(t){return l(this,Ce).recordOperation(l(this,Qe),!0),this}recordShowTextOperation(t){return l(this,Ce).recordShowTextOperation(l(this,Qe),!0),this}bboxToClipBoxDropOperation(t){return l(this,fr)||l(this,Ce).bboxToClipBoxDropOperation(l(this,Qe),!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}};Ce=new WeakMap,Qe=new WeakMap,fr=new WeakMap,uf=new WeakMap,hf=new WeakMap;let gw=pE;const Ns={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],transform:["transform"],transformAndFill:["transform","fillColor"]},Gn={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function vS(r,t){if(!t)return;const e=t[2]-t[0],n=t[3]-t[1],i=new Path2D;i.rect(t[0],t[1],e,n),r.clip(i)}class oE{isModifyingCurrentTransform(){return!1}getPattern(){Te("Abstract method `getPattern` called.")}}class OB extends oE{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}isOriginBased(){return this._p0[0]===0&&this._p0[1]===0&&(!this.isRadial()||this._p1[0]===0&&this._p1[1]===0)}isRadial(){return this._type==="radial"}_createGradient(t,e=null){let n,i=this._p0,o=this._p1;if(e&&(i=i.slice(),o=o.slice(),vt.applyTransform(i,e),vt.applyTransform(o,e)),this._type==="axial")n=t.createLinearGradient(i[0],i[1],o[0],o[1]);else if(this._type==="radial"){let c=this._r0,u=this._r1;if(e){const h=new Float32Array(2);vt.singularValueDecompose2dScale(e,h),c*=h[0],u*=h[0]}n=t.createRadialGradient(i[0],i[1],c,o[0],o[1],u)}for(const c of this._colorStops)n.addColorStop(c[0],c[1]);return n}getPattern(t,e,n,i){let o;if(i===Gn.STROKE||i===Gn.FILL){if(this.isOriginBased()){let v=vt.transform(n,e.baseTransform);this.matrix&&(v=vt.transform(v,this.matrix));const b=.001,C=Math.hypot(v[0],v[1]),E=Math.hypot(v[2],v[3]),T=(v[0]*v[2]+v[1]*v[3])/(C*E);if(Math.abs(T)<b)if(this.isRadial()){if(Math.abs(C-E)<b)return this._createGradient(t,v)}else return this._createGradient(t,v)}const c=e.current.getClippedPathBoundingBox(i,We(t))||[0,0,0,0],u=Math.ceil(c[2]-c[0])||1,h=Math.ceil(c[3]-c[1])||1,f=e.cachedCanvases.getCanvas("pattern",u,h),p=f.context;p.clearRect(0,0,p.canvas.width,p.canvas.height),p.beginPath(),p.rect(0,0,p.canvas.width,p.canvas.height),p.translate(-c[0],-c[1]),n=vt.transform(n,[1,0,0,1,c[0],c[1]]),p.transform(...e.baseTransform),this.matrix&&p.transform(...this.matrix),vS(p,this._bbox),p.fillStyle=this._createGradient(p),p.fill(),o=t.createPattern(f.canvas,"no-repeat");const m=new DOMMatrix(n);o.setTransform(m)}else vS(t,this._bbox),o=this._createGradient(t);return o}}function gA(r,t,e,n,i,o,c,u){const h=t.coords,f=t.colors,p=r.data,m=r.width*4;let v;h[e+1]>h[n+1]&&(v=e,e=n,n=v,v=o,o=c,c=v),h[n+1]>h[i+1]&&(v=n,n=i,i=v,v=c,c=u,u=v),h[e+1]>h[n+1]&&(v=e,e=n,n=v,v=o,o=c,c=v);const b=(h[e]+t.offsetX)*t.scaleX,C=(h[e+1]+t.offsetY)*t.scaleY,E=(h[n]+t.offsetX)*t.scaleX,T=(h[n+1]+t.offsetY)*t.scaleY,P=(h[i]+t.offsetX)*t.scaleX,N=(h[i+1]+t.offsetY)*t.scaleY;if(C>=N)return;const L=f[o],F=f[o+1],O=f[o+2],z=f[c],K=f[c+1],Y=f[c+2],nt=f[u],st=f[u+1],it=f[u+2],Mt=Math.round(C),xt=Math.round(N);let Ct,Qt,ft,lt,et,mt,ht,W;for(let tt=Mt;tt<=xt;tt++){if(tt<T){const jt=tt<C?0:(C-tt)/(C-T);Ct=b-(b-E)*jt,Qt=L-(L-z)*jt,ft=F-(F-K)*jt,lt=O-(O-Y)*jt}else{let jt;tt>N?jt=1:T===N?jt=0:jt=(T-tt)/(T-N),Ct=E-(E-P)*jt,Qt=z-(z-nt)*jt,ft=K-(K-st)*jt,lt=Y-(Y-it)*jt}let bt;tt<C?bt=0:tt>N?bt=1:bt=(C-tt)/(C-N),et=b-(b-P)*bt,mt=L-(L-nt)*bt,ht=F-(F-st)*bt,W=O-(O-it)*bt;const Bt=Math.round(Math.min(Ct,et)),Vt=Math.round(Math.max(Ct,et));let zt=m*tt+Bt*4;for(let jt=Bt;jt<=Vt;jt++)bt=(Ct-jt)/(Ct-et),bt<0?bt=0:bt>1&&(bt=1),p[zt++]=Qt-(Qt-mt)*bt|0,p[zt++]=ft-(ft-ht)*bt|0,p[zt++]=lt-(lt-W)*bt|0,p[zt++]=255}}function jB(r,t,e){const n=t.coords,i=t.colors;let o,c;switch(t.type){case HA.LATTICE:const u=t.verticesPerRow,h=Math.floor(n.length/u)-1,f=u-1;for(o=0;o<h;o++){let p=o*u;for(let m=0;m<f;m++,p++)gA(r,e,n[p],n[p+1],n[p+u],i[p],i[p+1],i[p+u]),gA(r,e,n[p+u+1],n[p+1],n[p+u],i[p+u+1],i[p+1],i[p+u])}break;case HA.TRIANGLES:for(o=0,c=n.length;o<c;o+=3)gA(r,e,n[o],n[o+1],n[o+2],i[o],i[o+1],i[o+2]);break;default:throw new Error("illegal figure")}}class BB extends oE{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[6],this._background=t[7],this.matrix=null}_createMeshCanvas(t,e,n){const u=Math.floor(this._bounds[0]),h=Math.floor(this._bounds[1]),f=Math.ceil(this._bounds[2])-u,p=Math.ceil(this._bounds[3])-h,m=Math.min(Math.ceil(Math.abs(f*t[0]*1.1)),3e3),v=Math.min(Math.ceil(Math.abs(p*t[1]*1.1)),3e3),b=f/m,C=p/v,E={coords:this._coords,colors:this._colors,offsetX:-u,offsetY:-h,scaleX:1/b,scaleY:1/C},T=m+4,P=v+4,N=n.getCanvas("mesh",T,P),L=N.context,F=L.createImageData(m,v);if(e){const z=F.data;for(let K=0,Y=z.length;K<Y;K+=4)z[K]=e[0],z[K+1]=e[1],z[K+2]=e[2],z[K+3]=255}for(const z of this._figures)jB(F,z,E);return L.putImageData(F,2,2),{canvas:N.canvas,offsetX:u-2*b,offsetY:h-2*C,scaleX:b,scaleY:C}}isModifyingCurrentTransform(){return!0}getPattern(t,e,n,i){vS(t,this._bbox);const o=new Float32Array(2);if(i===Gn.SHADING)vt.singularValueDecompose2dScale(We(t),o);else if(this.matrix){vt.singularValueDecompose2dScale(this.matrix,o);const[u,h]=o;vt.singularValueDecompose2dScale(e.baseTransform,o),o[0]*=u,o[1]*=h}else vt.singularValueDecompose2dScale(e.baseTransform,o);const c=this._createMeshCanvas(o,i===Gn.SHADING?null:this._background,e.cachedCanvases);return i!==Gn.SHADING&&(t.setTransform(...e.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(c.offsetX,c.offsetY),t.scale(c.scaleX,c.scaleY),t.createPattern(c.canvas,"no-repeat")}}class UB extends oE{getPattern(){return"hotpink"}}function VB(r){switch(r[0]){case"RadialAxial":return new OB(r);case"Mesh":return new BB(r);case"Dummy":return new UB}throw new Error(`Unknown IR type: ${r[0]}`)}const v_={COLORED:1,UNCOLORED:2},Dw=class Dw{constructor(t,e,n,i){this.color=t[1],this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.ctx=e,this.canvasGraphicsFactory=n,this.baseTransform=i}createPatternCanvas(t,e){const{bbox:n,operatorList:i,paintType:o,tilingType:c,color:u,canvasGraphicsFactory:h}=this;let{xstep:f,ystep:p}=this;f=Math.abs(f),p=Math.abs(p),nx("TilingType: "+c);const m=n[0],v=n[1],b=n[2],C=n[3],E=b-m,T=C-v,P=new Float32Array(2);vt.singularValueDecompose2dScale(this.matrix,P);const[N,L]=P;vt.singularValueDecompose2dScale(this.baseTransform,P);const F=N*P[0],O=L*P[1];let z=E,K=T,Y=!1,nt=!1;const st=Math.ceil(f*F),it=Math.ceil(p*O),Mt=Math.ceil(E*F),xt=Math.ceil(T*O);st>=Mt?z=f:Y=!0,it>=xt?K=p:nt=!0;const Ct=this.getSizeAndScale(z,this.ctx.canvas.width,F),Qt=this.getSizeAndScale(K,this.ctx.canvas.height,O),ft=t.cachedCanvases.getCanvas("pattern",Ct.size,Qt.size),lt=ft.context,et=h.createCanvasGraphics(lt,e);if(et.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(et,o,u),lt.translate(-Ct.scale*m,-Qt.scale*v),et.transform(0,Ct.scale,0,0,Qt.scale,0,0),lt.save(),et.dependencyTracker?.save(),this.clipBbox(et,m,v,b,C),et.baseTransform=We(et.ctx),et.executeOperatorList(i),et.endDrawing(),et.dependencyTracker?.restore(),lt.restore(),Y||nt){const mt=ft.canvas;Y&&(z=f),nt&&(K=p);const ht=this.getSizeAndScale(z,this.ctx.canvas.width,F),W=this.getSizeAndScale(K,this.ctx.canvas.height,O),tt=ht.size,bt=W.size,Bt=t.cachedCanvases.getCanvas("pattern-workaround",tt,bt),Vt=Bt.context,zt=Y?Math.floor(E/f):0,jt=nt?Math.floor(T/p):0;for(let Jt=0;Jt<=zt;Jt++)for(let re=0;re<=jt;re++)Vt.drawImage(mt,tt*Jt,bt*re,tt,bt,0,0,tt,bt);return{canvas:Bt.canvas,scaleX:ht.scale,scaleY:W.scale,offsetX:m,offsetY:v}}return{canvas:ft.canvas,scaleX:Ct.scale,scaleY:Qt.scale,offsetX:m,offsetY:v}}getSizeAndScale(t,e,n){const i=Math.max(Dw.MAX_PATTERN_SIZE,e);let o=Math.ceil(t*n);return o>=i?o=i:n=o/t,{scale:n,size:o}}clipBbox(t,e,n,i,o){const c=i-e,u=o-n;t.ctx.rect(e,n,c,u),vt.axialAlignedBoundingBox([e,n,i,o],We(t.ctx),t.current.minMax),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,e,n){const i=t.ctx,o=t.current;switch(e){case v_.COLORED:const{fillStyle:c,strokeStyle:u}=this.ctx;i.fillStyle=o.fillColor=c,i.strokeStyle=o.strokeColor=u;break;case v_.UNCOLORED:i.fillStyle=i.strokeStyle=n,o.fillColor=o.strokeColor=n;break;default:throw new Jj(`Unsupported paint type: ${e}`)}}isModifyingCurrentTransform(){return!1}getPattern(t,e,n,i,o){let c=n;i!==Gn.SHADING&&(c=vt.transform(c,e.baseTransform),this.matrix&&(c=vt.transform(c,this.matrix)));const u=this.createPatternCanvas(e,o);let h=new DOMMatrix(c);h=h.translate(u.offsetX,u.offsetY),h=h.scale(1/u.scaleX,1/u.scaleY);const f=t.createPattern(u.canvas,"repeat");return f.setTransform(h),f}};ct(Dw,"MAX_PATTERN_SIZE",3e3);let wS=Dw;function zB({src:r,srcPos:t=0,dest:e,width:n,height:i,nonBlackColor:o=4294967295,inverseDecode:c=!1}){const u=Cn.isLittleEndian?4278190080:255,[h,f]=c?[o,u]:[u,o],p=n>>3,m=n&7,v=r.length;e=new Uint32Array(e.buffer);let b=0;for(let C=0;C<i;C++){for(const T=t+p;t<T;t++){const P=t<v?r[t]:255;e[b++]=P&128?f:h,e[b++]=P&64?f:h,e[b++]=P&32?f:h,e[b++]=P&16?f:h,e[b++]=P&8?f:h,e[b++]=P&4?f:h,e[b++]=P&2?f:h,e[b++]=P&1?f:h}if(m===0)continue;const E=t<v?r[t++]:255;for(let T=0;T<m;T++)e[b++]=E&1<<7-T?f:h}return{srcPos:t,destPos:b}}const w_=16,x_=100,HB=15,b_=10,Gi=16,yA=new DOMMatrix,vs=new Float32Array(2),Sd=new Float32Array([1/0,1/0,-1/0,-1/0]);function $B(r,t){if(r._removeMirroring)throw new Error("Context is already forwarding operations.");r.__originalSave=r.save,r.__originalRestore=r.restore,r.__originalRotate=r.rotate,r.__originalScale=r.scale,r.__originalTranslate=r.translate,r.__originalTransform=r.transform,r.__originalSetTransform=r.setTransform,r.__originalResetTransform=r.resetTransform,r.__originalClip=r.clip,r.__originalMoveTo=r.moveTo,r.__originalLineTo=r.lineTo,r.__originalBezierCurveTo=r.bezierCurveTo,r.__originalRect=r.rect,r.__originalClosePath=r.closePath,r.__originalBeginPath=r.beginPath,r._removeMirroring=()=>{r.save=r.__originalSave,r.restore=r.__originalRestore,r.rotate=r.__originalRotate,r.scale=r.__originalScale,r.translate=r.__originalTranslate,r.transform=r.__originalTransform,r.setTransform=r.__originalSetTransform,r.resetTransform=r.__originalResetTransform,r.clip=r.__originalClip,r.moveTo=r.__originalMoveTo,r.lineTo=r.__originalLineTo,r.bezierCurveTo=r.__originalBezierCurveTo,r.rect=r.__originalRect,r.closePath=r.__originalClosePath,r.beginPath=r.__originalBeginPath,delete r._removeMirroring},r.save=function(){t.save(),this.__originalSave()},r.restore=function(){t.restore(),this.__originalRestore()},r.translate=function(e,n){t.translate(e,n),this.__originalTranslate(e,n)},r.scale=function(e,n){t.scale(e,n),this.__originalScale(e,n)},r.transform=function(e,n,i,o,c,u){t.transform(e,n,i,o,c,u),this.__originalTransform(e,n,i,o,c,u)},r.setTransform=function(e,n,i,o,c,u){t.setTransform(e,n,i,o,c,u),this.__originalSetTransform(e,n,i,o,c,u)},r.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},r.rotate=function(e){t.rotate(e),this.__originalRotate(e)},r.clip=function(e){t.clip(e),this.__originalClip(e)},r.moveTo=function(e,n){t.moveTo(e,n),this.__originalMoveTo(e,n)},r.lineTo=function(e,n){t.lineTo(e,n),this.__originalLineTo(e,n)},r.bezierCurveTo=function(e,n,i,o,c,u){t.bezierCurveTo(e,n,i,o,c,u),this.__originalBezierCurveTo(e,n,i,o,c,u)},r.rect=function(e,n,i,o){t.rect(e,n,i,o),this.__originalRect(e,n,i,o)},r.closePath=function(){t.closePath(),this.__originalClosePath()},r.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class WB{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,n){let i;return this.cache[t]!==void 0?(i=this.cache[t],this.canvasFactory.reset(i,e,n)):(i=this.canvasFactory.create(e,n),this.cache[t]=i),i}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}}function pv(r,t,e,n,i,o,c,u,h,f){const[p,m,v,b,C,E]=We(r);if(m===0&&v===0){const N=c*p+C,L=Math.round(N),F=u*b+E,O=Math.round(F),z=(c+h)*p+C,K=Math.abs(Math.round(z)-L)||1,Y=(u+f)*b+E,nt=Math.abs(Math.round(Y)-O)||1;return r.setTransform(Math.sign(p),0,0,Math.sign(b),L,O),r.drawImage(t,e,n,i,o,0,0,K,nt),r.setTransform(p,m,v,b,C,E),[K,nt]}if(p===0&&b===0){const N=u*v+C,L=Math.round(N),F=c*m+E,O=Math.round(F),z=(u+f)*v+C,K=Math.abs(Math.round(z)-L)||1,Y=(c+h)*m+E,nt=Math.abs(Math.round(Y)-O)||1;return r.setTransform(0,Math.sign(m),Math.sign(v),0,L,O),r.drawImage(t,e,n,i,o,0,0,nt,K),r.setTransform(p,m,v,b,C,E),[nt,K]}r.drawImage(t,e,n,i,o,c,u,h,f);const T=Math.hypot(p,m),P=Math.hypot(v,b);return[T*h,P*f]}class A_{constructor(t,e,n){ct(this,"alphaIsShape",!1);ct(this,"fontSize",0);ct(this,"fontSizeScale",1);ct(this,"textMatrix",null);ct(this,"textMatrixScale",1);ct(this,"fontMatrix",zA);ct(this,"leading",0);ct(this,"x",0);ct(this,"y",0);ct(this,"lineX",0);ct(this,"lineY",0);ct(this,"charSpacing",0);ct(this,"wordSpacing",0);ct(this,"textHScale",1);ct(this,"textRenderingMode",xn.FILL);ct(this,"textRise",0);ct(this,"fillColor","#000000");ct(this,"strokeColor","#000000");ct(this,"patternFill",!1);ct(this,"patternStroke",!1);ct(this,"fillAlpha",1);ct(this,"strokeAlpha",1);ct(this,"lineWidth",1);ct(this,"activeSMask",null);ct(this,"transferMaps","none");n?.(this),this.clipBox=new Float32Array([0,0,t,e]),this.minMax=Sd.slice()}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t.minMax=this.minMax.slice(),t}getPathBoundingBox(t=Gn.FILL,e=null){const n=this.minMax.slice();if(t===Gn.STROKE){e||Te("Stroke bounding box must include transform."),vt.singularValueDecompose2dScale(e,vs);const i=vs[0]*this.lineWidth/2,o=vs[1]*this.lineWidth/2;n[0]-=i,n[1]-=o,n[2]+=i,n[3]+=o}return n}updateClipFromPath(){const t=vt.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(t){this.clipBox.set(t,0),this.minMax.set(Sd,0)}getClippedPathBoundingBox(t=Gn.FILL,e=null){return vt.intersect(this.clipBox,this.getPathBoundingBox(t,e))}}function S_(r,t){if(t instanceof ImageData){r.putImageData(t,0,0);return}const e=t.height,n=t.width,i=e%Gi,o=(e-i)/Gi,c=i===0?o:o+1,u=r.createImageData(n,Gi);let h=0,f;const p=t.data,m=u.data;let v,b,C,E;if(t.kind===bv.GRAYSCALE_1BPP){const T=p.byteLength,P=new Uint32Array(m.buffer,0,m.byteLength>>2),N=P.length,L=n+7>>3,F=4294967295,O=Cn.isLittleEndian?4278190080:255;for(v=0;v<c;v++){for(C=v<o?Gi:i,f=0,b=0;b<C;b++){const z=T-h;let K=0;const Y=z>L?n:z*8-7,nt=Y&-8;let st=0,it=0;for(;K<nt;K+=8)it=p[h++],P[f++]=it&128?F:O,P[f++]=it&64?F:O,P[f++]=it&32?F:O,P[f++]=it&16?F:O,P[f++]=it&8?F:O,P[f++]=it&4?F:O,P[f++]=it&2?F:O,P[f++]=it&1?F:O;for(;K<Y;K++)st===0&&(it=p[h++],st=128),P[f++]=it&st?F:O,st>>=1}for(;f<N;)P[f++]=0;r.putImageData(u,0,v*Gi)}}else if(t.kind===bv.RGBA_32BPP){for(b=0,E=n*Gi*4,v=0;v<o;v++)m.set(p.subarray(h,h+E)),h+=E,r.putImageData(u,0,b),b+=Gi;v<c&&(E=n*i*4,m.set(p.subarray(h,h+E)),r.putImageData(u,0,b))}else if(t.kind===bv.RGB_24BPP)for(C=Gi,E=n*C,v=0;v<c;v++){for(v>=o&&(C=i,E=n*C),f=0,b=E;b--;)m[f++]=p[h++],m[f++]=p[h++],m[f++]=p[h++],m[f++]=255;r.putImageData(u,0,v*Gi)}else throw new Error(`bad image kind: ${t.kind}`)}function E_(r,t){if(t.bitmap){r.drawImage(t.bitmap,0,0);return}const e=t.height,n=t.width,i=e%Gi,o=(e-i)/Gi,c=i===0?o:o+1,u=r.createImageData(n,Gi);let h=0;const f=t.data,p=u.data;for(let m=0;m<c;m++){const v=m<o?Gi:i;({srcPos:h}=zB({src:f,srcPos:h,dest:p,width:n,height:v,nonBlackColor:0})),r.putImageData(u,0,m*Gi)}}function Jp(r,t){const e=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const n of e)r[n]!==void 0&&(t[n]=r[n]);r.setLineDash!==void 0&&(t.setLineDash(r.getLineDash()),t.lineDashOffset=r.lineDashOffset)}function mv(r){r.strokeStyle=r.fillStyle="#000000",r.fillRule="nonzero",r.globalAlpha=1,r.lineWidth=1,r.lineCap="butt",r.lineJoin="miter",r.miterLimit=10,r.globalCompositeOperation="source-over",r.font="10px sans-serif",r.setLineDash!==void 0&&(r.setLineDash([]),r.lineDashOffset=0);const{filter:t}=r;t!=="none"&&t!==""&&(r.filter="none")}function C_(r,t){if(t)return!0;vt.singularValueDecompose2dScale(r,vs);const e=Math.fround(co.pixelRatio*Ql.PDF_TO_CSS_UNITS);return vs[0]<=e&&vs[1]<=e}const GB=["butt","round","square"],XB=["miter","round","bevel"],KB={},k_={};var Ar,xS,bS,AS;const mE=class mE{constructor(t,e,n,i,o,{optionalContentConfig:c,markedContentStack:u=null},h,f,p){_(this,Ar);this.ctx=t,this.current=new A_(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=n,this.canvasFactory=i,this.filterFactory=o,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=u||[],this.optionalContentConfig=c,this.cachedCanvases=new WB(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=h,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=f,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=p??null}getObject(t,e,n=null){return typeof e=="string"?(this.dependencyTracker?.recordNamedDependency(t,e),e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e)):n}beginDrawing({transform:t,viewport:e,transparency:n=!1,background:i=null}){const o=this.ctx.canvas.width,c=this.ctx.canvas.height,u=this.ctx.fillStyle;if(this.ctx.fillStyle=i||"#ffffff",this.ctx.fillRect(0,0,o,c),this.ctx.fillStyle=u,n){const h=this.cachedCanvases.getCanvas("transparent",o,c);this.compositeCtx=this.ctx,this.transparentCanvas=h.canvas,this.ctx=h.context,this.ctx.save(),this.ctx.transform(...We(this.compositeCtx))}this.ctx.save(),mv(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...e.transform),this.viewportScale=e.scale,this.baseTransform=We(this.ctx)}executeOperatorList(t,e,n,i,o){const c=t.argsArray,u=t.fnArray;let h=e||0;const f=c.length;if(f===h)return h;const p=f-h>b_&&typeof n=="function",m=p?Date.now()+HB:0;let v=0;const b=this.commonObjs,C=this.objs;let E,T;for(;;){if(i!==void 0&&h===i.nextBreakPoint)return i.breakIt(h,n),h;if(!o||o(h))if(E=u[h],T=c[h]??null,E!==Vm.dependency)T===null?this[E](h):this[E](h,...T);else for(const P of T){this.dependencyTracker?.recordNamedData(P,h);const N=P.startsWith("g_")?b:C;if(!N.has(P))return N.get(P,n),h}if(h++,h===f)return h;if(p&&++v>b_){if(Date.now()>m)return n(),h;v=0}}}endDrawing(){R(this,Ar,xS).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const e of t.values())typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),R(this,Ar,bS).call(this)}_scaleImage(t,e){const n=t.width??t.displayWidth,i=t.height??t.displayHeight;let o=Math.max(Math.hypot(e[0],e[1]),1),c=Math.max(Math.hypot(e[2],e[3]),1),u=n,h=i,f="prescale1",p,m;for(;o>2&&u>1||c>2&&h>1;){let v=u,b=h;o>2&&u>1&&(v=u>=16384?Math.floor(u/2)-1||1:Math.ceil(u/2),o/=u/v),c>2&&h>1&&(b=h>=16384?Math.floor(h/2)-1||1:Math.ceil(h)/2,c/=h/b),p=this.cachedCanvases.getCanvas(f,v,b),m=p.context,m.clearRect(0,0,v,b),m.drawImage(t,0,0,u,h,0,0,v,b),t=p.canvas,u=v,h=b,f=f==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:u,paintHeight:h}}_createMaskCanvas(t,e){const n=this.ctx,{width:i,height:o}=e,c=this.current.fillColor,u=this.current.patternFill,h=We(n);let f,p,m,v;if((e.bitmap||e.data)&&e.count>1){const st=e.bitmap||e.data.buffer;p=JSON.stringify(u?h:[h.slice(0,4),c]),f=this._cachedBitmapsMap.get(st),f||(f=new Map,this._cachedBitmapsMap.set(st,f));const it=f.get(p);if(it&&!u){const Mt=Math.round(Math.min(h[0],h[2])+h[4]),xt=Math.round(Math.min(h[1],h[3])+h[5]);return this.dependencyTracker?.recordDependencies(t,Ns.transformAndFill),{canvas:it,offsetX:Mt,offsetY:xt}}m=it}m||(v=this.cachedCanvases.getCanvas("maskCanvas",i,o),E_(v.context,e));let b=vt.transform(h,[1/i,0,0,-1/o,0,0]);b=vt.transform(b,[1,0,0,1,0,-o]);const C=Sd.slice();vt.axialAlignedBoundingBox([0,0,i,o],b,C);const[E,T,P,N]=C,L=Math.round(P-E)||1,F=Math.round(N-T)||1,O=this.cachedCanvases.getCanvas("fillCanvas",L,F),z=O.context,K=E,Y=T;z.translate(-K,-Y),z.transform(...b),m||(m=this._scaleImage(v.canvas,Lr(z)),m=m.img,f&&u&&f.set(p,m)),z.imageSmoothingEnabled=C_(We(z),e.interpolate),pv(z,m,0,0,m.width,m.height,0,0,i,o),z.globalCompositeOperation="source-in";const nt=vt.transform(Lr(z),[1,0,0,1,-K,-Y]);return z.fillStyle=u?c.getPattern(n,this,nt,Gn.FILL,t):c,z.fillRect(0,0,i,o),f&&!u&&(this.cachedCanvases.delete("fillCanvas"),f.set(p,O.canvas)),this.dependencyTracker?.recordDependencies(t,Ns.transformAndFill),{canvas:O.canvas,offsetX:Math.round(K),offsetY:Math.round(Y)}}setLineWidth(t,e){this.dependencyTracker?.recordSimpleData("lineWidth",t),e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(t,e){this.dependencyTracker?.recordSimpleData("lineCap",t),this.ctx.lineCap=GB[e]}setLineJoin(t,e){this.dependencyTracker?.recordSimpleData("lineJoin",t),this.ctx.lineJoin=XB[e]}setMiterLimit(t,e){this.dependencyTracker?.recordSimpleData("miterLimit",t),this.ctx.miterLimit=e}setDash(t,e,n){this.dependencyTracker?.recordSimpleData("dash",t);const i=this.ctx;i.setLineDash!==void 0&&(i.setLineDash(e),i.lineDashOffset=n)}setRenderingIntent(t,e){}setFlatness(t,e){}setGState(t,e){for(const[n,i]of e)switch(n){case"LW":this.setLineWidth(t,i);break;case"LC":this.setLineCap(t,i);break;case"LJ":this.setLineJoin(t,i);break;case"ML":this.setMiterLimit(t,i);break;case"D":this.setDash(t,i[0],i[1]);break;case"RI":this.setRenderingIntent(t,i);break;case"FL":this.setFlatness(t,i);break;case"Font":this.setFont(t,i[0],i[1]);break;case"CA":this.dependencyTracker?.recordSimpleData("strokeAlpha",t),this.current.strokeAlpha=i;break;case"ca":this.dependencyTracker?.recordSimpleData("fillAlpha",t),this.ctx.globalAlpha=this.current.fillAlpha=i;break;case"BM":this.dependencyTracker?.recordSimpleData("globalCompositeOperation",t),this.ctx.globalCompositeOperation=i;break;case"SMask":this.dependencyTracker?.recordSimpleData("SMask",t),this.current.activeSMask=i?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.dependencyTracker?.recordSimpleData("filter",t),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(i);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(t){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,n=this.ctx.canvas.height,i="smaskGroupAt"+this.groupLevel,o=this.cachedCanvases.getCanvas(i,e,n);this.suspendedCtx=this.ctx;const c=this.ctx=o.context;c.setTransform(this.suspendedCtx.getTransform()),Jp(this.suspendedCtx,c),$B(c,this.suspendedCtx),this.setGState(t,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Jp(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const e=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,e,n,i){const o=i[0],c=i[1],u=i[2]-o,h=i[3]-c;u===0||h===0||(this.genericComposeSMask(e.context,n,u,h,e.subtype,e.backdrop,e.transferMap,o,c,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(n.canvas,0,0),t.restore())}genericComposeSMask(t,e,n,i,o,c,u,h,f,p,m){let v=t.canvas,b=h-p,C=f-m;if(c)if(b<0||C<0||b+n>v.width||C+i>v.height){const T=this.cachedCanvases.getCanvas("maskExtension",n,i),P=T.context;P.drawImage(v,-b,-C),P.globalCompositeOperation="destination-atop",P.fillStyle=c,P.fillRect(0,0,n,i),P.globalCompositeOperation="source-over",v=T.canvas,b=C=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const T=new Path2D;T.rect(b,C,n,i),t.clip(T),t.globalCompositeOperation="destination-atop",t.fillStyle=c,t.fillRect(b,C,n,i),t.restore()}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),o==="Alpha"&&u?e.filter=this.filterFactory.addAlphaFilter(u):o==="Luminosity"&&(e.filter=this.filterFactory.addLuminosityFilter(u));const E=new Path2D;E.rect(h,f,n,i),e.clip(E),e.globalCompositeOperation="destination-in",e.drawImage(v,b,C,n,i,h,f,n,i),e.restore()}save(t){this.inSMaskMode&&Jp(this.ctx,this.suspendedCtx),this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone(),this.dependencyTracker?.save(t)}restore(t){if(this.dependencyTracker?.restore(t),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&Jp(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(t,e,n,i,o,c,u){this.dependencyTracker?.recordIncrementalData("transform",t),this.ctx.transform(e,n,i,o,c,u),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,e,n,i){let[o]=n;if(!i){o||(o=n[0]=new Path2D),this[e](t,o);return}if(this.dependencyTracker!==null){const c=e===Vm.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(t).recordBBox(t,this.ctx,i[0]-c,i[2]+c,i[1]-c,i[3]+c).recordDependencies(t,["transform"])}o instanceof Path2D||(o=n[0]=P2(o)),vt.axialAlignedBoundingBox(i,We(this.ctx),this.current.minMax),this[e](t,o),this._pathStartIdx=t}closePath(t){this.ctx.closePath()}stroke(t,e,n=!0){const i=this.ctx,o=this.current.strokeColor;if(i.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof o=="object"&&o?.getPattern){const c=o.isModifyingCurrentTransform()?i.getTransform():null;if(i.save(),i.strokeStyle=o.getPattern(i,this,Lr(i),Gn.STROKE,t),c){const u=new Path2D;u.addPath(e,i.getTransform().invertSelf().multiplySelf(c)),e=u}this.rescaleAndStroke(e,!1),i.restore()}else this.rescaleAndStroke(e,!0);this.dependencyTracker?.recordDependencies(t,Ns.stroke),n&&this.consumePath(t,e,this.current.getClippedPathBoundingBox(Gn.STROKE,We(this.ctx))),i.globalAlpha=this.current.fillAlpha}closeStroke(t,e){this.stroke(t,e)}fill(t,e,n=!0){const i=this.ctx,o=this.current.fillColor,c=this.current.patternFill;let u=!1;if(c){const f=o.isModifyingCurrentTransform()?i.getTransform():null;if(this.dependencyTracker?.save(t),i.save(),i.fillStyle=o.getPattern(i,this,Lr(i),Gn.FILL,t),f){const p=new Path2D;p.addPath(e,i.getTransform().invertSelf().multiplySelf(f)),e=p}u=!0}const h=this.current.getClippedPathBoundingBox();this.contentVisible&&h!==null&&(this.pendingEOFill?(i.fill(e,"evenodd"),this.pendingEOFill=!1):i.fill(e)),this.dependencyTracker?.recordDependencies(t,Ns.fill),u&&(i.restore(),this.dependencyTracker?.restore(t)),n&&this.consumePath(t,e,h)}eoFill(t,e){this.pendingEOFill=!0,this.fill(t,e)}fillStroke(t,e){this.fill(t,e,!1),this.stroke(t,e,!1),this.consumePath(t,e)}eoFillStroke(t,e){this.pendingEOFill=!0,this.fillStroke(t,e)}closeFillStroke(t,e){this.fillStroke(t,e)}closeEOFillStroke(t,e){this.pendingEOFill=!0,this.fillStroke(t,e)}endPath(t,e){this.consumePath(t,e)}rawFillPath(t,e){this.ctx.fill(e),this.dependencyTracker?.recordDependencies(t,Ns.rawFillPath).recordOperation(t)}clip(t){this.dependencyTracker?.recordFutureForcedDependency("clipMode",t),this.pendingClip=KB}eoClip(t){this.dependencyTracker?.recordFutureForcedDependency("clipMode",t),this.pendingClip=k_}beginText(t){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,this.dependencyTracker?.recordOpenMarker(t).resetIncrementalData("sameLineText").resetIncrementalData("moveText",t)}endText(t){const e=this.pendingTextPaths,n=this.ctx;if(this.dependencyTracker){const{dependencyTracker:i}=this;e!==void 0&&i.recordFutureForcedDependency("textClip",i.getOpenMarker()).recordFutureForcedDependency("textClip",t),i.recordCloseMarker(t)}if(e!==void 0){const i=new Path2D,o=n.getTransform().invertSelf();for(const{transform:c,x:u,y:h,fontSize:f,path:p}of e)p&&i.addPath(p,new DOMMatrix(c).preMultiplySelf(o).translate(u,h).scale(f,-f));n.clip(i)}delete this.pendingTextPaths}setCharSpacing(t,e){this.dependencyTracker?.recordSimpleData("charSpacing",t),this.current.charSpacing=e}setWordSpacing(t,e){this.dependencyTracker?.recordSimpleData("wordSpacing",t),this.current.wordSpacing=e}setHScale(t,e){this.dependencyTracker?.recordSimpleData("hScale",t),this.current.textHScale=e/100}setLeading(t,e){this.dependencyTracker?.recordSimpleData("leading",t),this.current.leading=-e}setFont(t,e,n){this.dependencyTracker?.recordSimpleData("font",t).recordSimpleDataFromNamed("fontObj",e,t);const i=this.commonObjs.get(e),o=this.current;if(!i)throw new Error(`Can't find font for ${e}`);if(o.fontMatrix=i.fontMatrix||zA,(o.fontMatrix[0]===0||o.fontMatrix[3]===0)&&Ht("Invalid font matrix for font "+e),n<0?(n=-n,o.fontDirection=-1):o.fontDirection=1,this.current.font=i,this.current.fontSize=n,i.isType3Font)return;const c=i.loadedName||"sans-serif",u=i.systemFontInfo?.css||`"${c}", ${i.fallbackName}`;let h="normal";i.black?h="900":i.bold&&(h="bold");const f=i.italic?"italic":"normal";let p=n;n<w_?p=w_:n>x_&&(p=x_),this.current.fontSizeScale=n/p,this.ctx.font=`${f} ${h} ${p}px ${u}`}setTextRenderingMode(t,e){this.dependencyTracker?.recordSimpleData("textRenderingMode",t),this.current.textRenderingMode=e}setTextRise(t,e){this.dependencyTracker?.recordSimpleData("textRise",t),this.current.textRise=e}moveText(t,e,n){this.dependencyTracker?.resetIncrementalData("sameLineText").recordIncrementalData("moveText",t),this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=n}setLeadingMoveText(t,e,n){this.setLeading(t,-n),this.moveText(t,e,n)}setTextMatrix(t,e){this.dependencyTracker?.resetIncrementalData("sameLineText").recordSimpleData("textMatrix",t);const{current:n}=this;n.textMatrix=e,n.textMatrixScale=Math.hypot(e[0],e[1]),n.x=n.lineX=0,n.y=n.lineY=0}nextLine(t){this.moveText(t,0,this.current.leading),this.dependencyTracker?.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??t)}paintChar(t,e,n,i,o,c){const u=this.ctx,h=this.current,f=h.font,p=h.textRenderingMode,m=h.fontSize/h.fontSizeScale,v=p&xn.FILL_STROKE_MASK,b=!!(p&xn.ADD_TO_PATH_FLAG),C=h.patternFill&&!f.missingFile,E=h.patternStroke&&!f.missingFile;let T;if((f.disableFontFace||b||C||E)&&!f.missingFile&&(T=f.getPathGenerator(this.commonObjs,e)),T&&(f.disableFontFace||C||E)){u.save(),u.translate(n,i),u.scale(m,-m),this.dependencyTracker?.recordCharacterBBox(t,u,f);let P;if(v===xn.FILL||v===xn.FILL_STROKE)if(o){P=u.getTransform(),u.setTransform(...o);const N=R(this,Ar,AS).call(this,T,P,o);u.fill(N)}else u.fill(T);if(v===xn.STROKE||v===xn.FILL_STROKE)if(c){P||(P=u.getTransform()),u.setTransform(...c);const{a:N,b:L,c:F,d:O}=P,z=vt.inverseTransform(c),K=vt.transform([N,L,F,O,0,0],z);vt.singularValueDecompose2dScale(K,vs),u.lineWidth*=Math.max(vs[0],vs[1])/m,u.stroke(R(this,Ar,AS).call(this,T,P,c))}else u.lineWidth/=m,u.stroke(T);u.restore()}else(v===xn.FILL||v===xn.FILL_STROKE)&&(u.fillText(e,n,i),this.dependencyTracker?.recordCharacterBBox(t,u,f,m,n,i,()=>u.measureText(e))),(v===xn.STROKE||v===xn.FILL_STROKE)&&(this.dependencyTracker&&this.dependencyTracker?.recordCharacterBBox(t,u,f,m,n,i,()=>u.measureText(e)).recordDependencies(t,Ns.stroke),u.strokeText(e,n,i));b&&((this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:We(u),x:n,y:i,fontSize:m,path:T}),this.dependencyTracker?.recordCharacterBBox(t,u,f,m,n,i))}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const e=t.getImageData(0,0,10,10).data;let n=!1;for(let i=3;i<e.length;i+=4)if(e[i]>0&&e[i]<255){n=!0;break}return $t(this,"isFontSubpixelAAEnabled",n)}showText(t,e){this.dependencyTracker&&(this.dependencyTracker.recordDependencies(t,Ns.showText).resetBBox(t),this.current.textRenderingMode&xn.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",t).inheritPendingDependenciesAsFutureForcedDependencies());const n=this.current,i=n.font;if(i.isType3Font){this.showType3Text(t,e),this.dependencyTracker?.recordShowTextOperation(t);return}const o=n.fontSize;if(o===0){this.dependencyTracker?.recordOperation(t);return}const c=this.ctx,u=n.fontSizeScale,h=n.charSpacing,f=n.wordSpacing,p=n.fontDirection,m=n.textHScale*p,v=e.length,b=i.vertical,C=b?1:-1,E=i.defaultVMetrics,T=o*n.fontMatrix[0],P=n.textRenderingMode===xn.FILL&&!i.disableFontFace&&!n.patternFill;c.save(),n.textMatrix&&c.transform(...n.textMatrix),c.translate(n.x,n.y+n.textRise),p>0?c.scale(m,-1):c.scale(m,1);let N,L;const F=n.textRenderingMode&xn.FILL_STROKE_MASK,O=F===xn.FILL||F===xn.FILL_STROKE,z=F===xn.STROKE||F===xn.FILL_STROKE;if(O&&n.patternFill){c.save();const it=n.fillColor.getPattern(c,this,Lr(c),Gn.FILL,t);N=We(c),c.restore(),c.fillStyle=it}if(z&&n.patternStroke){c.save();const it=n.strokeColor.getPattern(c,this,Lr(c),Gn.STROKE,t);L=We(c),c.restore(),c.strokeStyle=it}let K=n.lineWidth;const Y=n.textMatrixScale;if(Y===0||K===0?z&&(K=this.getSinglePixelWidth()):K/=Y,u!==1&&(c.scale(u,u),K/=u),c.lineWidth=K,i.isInvalidPDFjsFont){const it=[];let Mt=0;for(const Ct of e)it.push(Ct.unicode),Mt+=Ct.width;const xt=it.join("");if(c.fillText(xt,0,0),this.dependencyTracker!==null){const Ct=c.measureText(xt);this.dependencyTracker.recordBBox(t,this.ctx,-Ct.actualBoundingBoxLeft,Ct.actualBoundingBoxRight,-Ct.actualBoundingBoxAscent,Ct.actualBoundingBoxDescent).recordShowTextOperation(t)}n.x+=Mt*T*m,c.restore(),this.compose();return}let nt=0,st;for(st=0;st<v;++st){const it=e[st];if(typeof it=="number"){nt+=C*it*o/1e3;continue}let Mt=!1;const xt=(it.isSpace?f:0)+h,Ct=it.fontChar,Qt=it.accent;let ft,lt,et=it.width;if(b){const W=it.vmetric||E,tt=-(it.vmetric?W[1]:et*.5)*T,bt=W[2]*T;et=W?-W[0]:et,ft=tt/u,lt=(nt+bt)/u}else ft=nt/u,lt=0;let mt;if(i.remeasure&&et>0){mt=c.measureText(Ct);const W=mt.width*1e3/o*u;if(et<W&&this.isFontSubpixelAAEnabled){const tt=et/W;Mt=!0,c.save(),c.scale(tt,1),ft/=tt}else et!==W&&(ft+=(et-W)/2e3*o/u)}if(this.contentVisible&&(it.isInFont||i.missingFile)){if(P&&!Qt)c.fillText(Ct,ft,lt),this.dependencyTracker?.recordCharacterBBox(t,c,mt?{bbox:null}:i,o/u,ft,lt,()=>mt??c.measureText(Ct));else if(this.paintChar(t,Ct,ft,lt,N,L),Qt){const W=ft+o*Qt.offset.x/u,tt=lt-o*Qt.offset.y/u;this.paintChar(t,Qt.fontChar,W,tt,N,L)}}const ht=b?et*T-xt*p:et*T+xt*p;nt+=ht,Mt&&c.restore()}b?n.y-=nt:n.x+=nt*m,c.restore(),this.compose(),this.dependencyTracker?.recordShowTextOperation(t)}showType3Text(t,e){const n=this.ctx,i=this.current,o=i.font,c=i.fontSize,u=i.fontDirection,h=o.vertical?1:-1,f=i.charSpacing,p=i.wordSpacing,m=i.textHScale*u,v=i.fontMatrix||zA,b=e.length,C=i.textRenderingMode===xn.INVISIBLE;let E,T,P,N;if(C||c===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,n.save(),i.textMatrix&&n.transform(...i.textMatrix),n.translate(i.x,i.y+i.textRise),n.scale(m,u);const L=this.dependencyTracker;for(this.dependencyTracker=L?new gw(L,t):null,E=0;E<b;++E){if(T=e[E],typeof T=="number"){N=h*T*c/1e3,this.ctx.translate(N,0),i.x+=N*m;continue}const F=(T.isSpace?p:0)+f,O=o.charProcOperatorList[T.operatorListId];O?this.contentVisible&&(this.save(),n.scale(c,c),n.transform(...v),this.executeOperatorList(O),this.restore()):Ht(`Type3 character "${T.operatorListId}" is not available.`);const z=[T.width,0];vt.applyTransform(z,v),P=z[0]*c+F,n.translate(P,0),i.x+=P*m}n.restore(),L&&(this.dependencyTracker=L)}setCharWidth(t,e,n){}setCharWidthAndBounds(t,e,n,i,o,c,u){const h=new Path2D;h.rect(i,o,c-i,u-o),this.ctx.clip(h),this.dependencyTracker?.recordBBox(t,this.ctx,i,c,o,u).recordClipBox(t,this.ctx,i,c,o,u),this.endPath(t)}getColorN_Pattern(t,e){let n;if(e[0]==="TilingPattern"){const i=this.baseTransform||We(this.ctx),o={createCanvasGraphics:(c,u)=>new mE(c,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new gw(this.dependencyTracker,u,!0):null)};n=new wS(e,this.ctx,o,i)}else n=this._getPattern(t,e[1],e[2]);return n}setStrokeColorN(t,...e){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.current.strokeColor=this.getColorN_Pattern(t,e),this.current.patternStroke=!0}setFillColorN(t,...e){this.dependencyTracker?.recordSimpleData("fillColor",t),this.current.fillColor=this.getColorN_Pattern(t,e),this.current.patternFill=!0}setStrokeRGBColor(t,e){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor=e,this.current.patternStroke=!1}setStrokeTransparent(t){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(t,e){this.dependencyTracker?.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor=e,this.current.patternFill=!1}setFillTransparent(t){this.dependencyTracker?.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,e,n=null){let i;return this.cachedPatterns.has(e)?i=this.cachedPatterns.get(e):(i=VB(this.getObject(t,e)),this.cachedPatterns.set(e,i)),n&&(i.matrix=n),i}shadingFill(t,e){if(!this.contentVisible)return;const n=this.ctx;this.save(t);const i=this._getPattern(t,e);n.fillStyle=i.getPattern(n,this,Lr(n),Gn.SHADING,t);const o=Lr(n);if(o){const{width:c,height:u}=n.canvas,h=Sd.slice();vt.axialAlignedBoundingBox([0,0,c,u],o,h);const[f,p,m,v]=h;this.ctx.fillRect(f,p,m-f,v-p)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.dependencyTracker?.resetBBox(t).recordFullPageBBox(t).recordDependencies(t,Ns.transform).recordDependencies(t,Ns.fill).recordOperation(t),this.compose(this.current.getClippedPathBoundingBox()),this.restore(t)}beginInlineImage(){Te("Should not call beginInlineImage")}beginImageData(){Te("Should not call beginImageData")}paintFormXObjectBegin(t,e,n){if(this.contentVisible&&(this.save(t),this.baseTransformStack.push(this.baseTransform),e&&this.transform(t,...e),this.baseTransform=We(this.ctx),n)){vt.axialAlignedBoundingBox(n,this.baseTransform,this.current.minMax);const[i,o,c,u]=n,h=new Path2D;h.rect(i,o,c-i,u-o),this.ctx.clip(h),this.dependencyTracker?.recordClipBox(t,this.ctx,i,c,o,u),this.endPath(t)}}paintFormXObjectEnd(t){this.contentVisible&&(this.restore(t),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t,e){if(!this.contentVisible)return;this.save(t),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const n=this.ctx;e.isolated||nx("TODO: Support non-isolated groups."),e.knockout&&Ht("Knockout groups not supported.");const i=We(n);if(e.matrix&&n.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let o=Sd.slice();vt.axialAlignedBoundingBox(e.bbox,We(n),o);const c=[0,0,n.canvas.width,n.canvas.height];o=vt.intersect(o,c)||[0,0,0,0];const u=Math.floor(o[0]),h=Math.floor(o[1]),f=Math.max(Math.ceil(o[2])-u,1),p=Math.max(Math.ceil(o[3])-h,1);this.current.startNewPathAndClipBox([0,0,f,p]);let m="groupAt"+this.groupLevel;e.smask&&(m+="_smask_"+this.smaskCounter++%2);const v=this.cachedCanvases.getCanvas(m,f,p),b=v.context;b.translate(-u,-h),b.transform(...i);let C=new Path2D;const[E,T,P,N]=e.bbox;if(C.rect(E,T,P-E,N-T),e.matrix){const L=new Path2D;L.addPath(C,new DOMMatrix(e.matrix)),C=L}b.clip(C),e.smask&&this.smaskStack.push({canvas:v.canvas,context:b,offsetX:u,offsetY:h,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}),(!e.smask||this.dependencyTracker)&&(n.setTransform(1,0,0,1,0,0),n.translate(u,h),n.save()),Jp(n,b),this.ctx=b,this.dependencyTracker?.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(n),this.setGState(t,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(n),this.groupLevel++}endGroup(t,e){if(!this.contentVisible)return;this.groupLevel--;const n=this.ctx,i=this.groupStack.pop();if(this.ctx=i,this.ctx.imageSmoothingEnabled=!1,this.dependencyTracker?.popBaseTransform(),e.smask)this.tempSMask=this.smaskStack.pop(),this.restore(t),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const o=We(this.ctx);this.restore(t),this.ctx.save(),this.ctx.setTransform(...o);const c=Sd.slice();vt.axialAlignedBoundingBox([0,0,n.canvas.width,n.canvas.height],o,c),this.ctx.drawImage(n.canvas,0,0),this.ctx.restore(),this.compose(c)}}beginAnnotation(t,e,n,i,o,c){if(R(this,Ar,xS).call(this),mv(this.ctx),this.ctx.save(),this.save(t),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),n){const u=n[2]-n[0],h=n[3]-n[1];if(c&&this.annotationCanvasMap){i=i.slice(),i[4]-=n[0],i[5]-=n[1],n=n.slice(),n[0]=n[1]=0,n[2]=u,n[3]=h,vt.singularValueDecompose2dScale(We(this.ctx),vs);const{viewportScale:f}=this,p=Math.ceil(u*this.outputScaleX*f),m=Math.ceil(h*this.outputScaleY*f);this.annotationCanvas=this.canvasFactory.create(p,m);const{canvas:v,context:b}=this.annotationCanvas;this.annotationCanvasMap.set(e,v),this.annotationCanvas.savedCtx=this.ctx,this.ctx=b,this.ctx.save(),this.ctx.setTransform(vs[0],0,0,-vs[1],0,h*vs[1]),mv(this.ctx)}else{mv(this.ctx),this.endPath(t);const f=new Path2D;f.rect(n[0],n[1],u,h),this.ctx.clip(f)}}this.current=new A_(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(t,...i),this.transform(t,...o)}endAnnotation(t){this.annotationCanvas&&(this.ctx.restore(),R(this,Ar,bS).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t,e){if(!this.contentVisible)return;const n=e.count;e=this.getObject(t,e.data,e),e.count=n;const i=this.ctx,o=this._createMaskCanvas(t,e),c=o.canvas;i.save(),i.setTransform(1,0,0,1,0,0),i.drawImage(c,o.offsetX,o.offsetY),this.dependencyTracker?.resetBBox(t).recordBBox(t,this.ctx,o.offsetX,o.offsetX+c.width,o.offsetY,o.offsetY+c.height).recordOperation(t),i.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e,n,i=0,o=0,c,u){if(!this.contentVisible)return;e=this.getObject(t,e.data,e);const h=this.ctx;h.save();const f=We(h);h.transform(n,i,o,c,0,0);const p=this._createMaskCanvas(t,e);h.setTransform(1,0,0,1,p.offsetX-f[4],p.offsetY-f[5]),this.dependencyTracker?.resetBBox(t);for(let m=0,v=u.length;m<v;m+=2){const b=vt.transform(f,[n,i,o,c,u[m],u[m+1]]);h.drawImage(p.canvas,b[4],b[5]),this.dependencyTracker?.recordBBox(t,this.ctx,b[4],b[4]+p.canvas.width,b[5],b[5]+p.canvas.height)}h.restore(),this.compose(),this.dependencyTracker?.recordOperation(t)}paintImageMaskXObjectGroup(t,e){if(!this.contentVisible)return;const n=this.ctx,i=this.current.fillColor,o=this.current.patternFill;this.dependencyTracker?.resetBBox(t).recordDependencies(t,Ns.transformAndFill);for(const c of e){const{data:u,width:h,height:f,transform:p}=c,m=this.cachedCanvases.getCanvas("maskCanvas",h,f),v=m.context;v.save();const b=this.getObject(t,u,c);E_(v,b),v.globalCompositeOperation="source-in",v.fillStyle=o?i.getPattern(v,this,Lr(n),Gn.FILL,t):i,v.fillRect(0,0,h,f),v.restore(),n.save(),n.transform(...p),n.scale(1,-1),pv(n,m.canvas,0,0,h,f,0,-1,1,1),this.dependencyTracker?.recordBBox(t,n,0,h,0,f),n.restore()}this.compose(),this.dependencyTracker?.recordOperation(t)}paintImageXObject(t,e){if(!this.contentVisible)return;const n=this.getObject(t,e);if(!n){Ht("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t,n)}paintImageXObjectRepeat(t,e,n,i,o){if(!this.contentVisible)return;const c=this.getObject(t,e);if(!c){Ht("Dependent image isn't ready yet");return}const u=c.width,h=c.height,f=[];for(let p=0,m=o.length;p<m;p+=2)f.push({transform:[n,0,0,i,o[p],o[p+1]],x:0,y:0,w:u,h});this.paintInlineImageXObjectGroup(t,c,f)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:e,width:n,height:i}=t,o=this.cachedCanvases.getCanvas("inlineImage",n,i),c=o.context;return c.filter=this.current.transferMaps,c.drawImage(e,0,0),c.filter="none",o.canvas}paintInlineImageXObject(t,e){if(!this.contentVisible)return;const n=e.width,i=e.height,o=this.ctx;this.save(t);const{filter:c}=o;c!=="none"&&c!==""&&(o.filter="none"),o.scale(1/n,-1/i);let u;if(e.bitmap)u=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)u=e;else{const p=this.cachedCanvases.getCanvas("inlineImage",n,i).context;S_(p,e),u=this.applyTransferMapsToCanvas(p)}const h=this._scaleImage(u,Lr(o));o.imageSmoothingEnabled=C_(We(o),e.interpolate),this.dependencyTracker?.resetBBox(t).recordBBox(t,o,0,n,-i,0).recordDependencies(t,Ns.imageXObject).recordOperation(t),pv(o,h.img,0,0,h.paintWidth,h.paintHeight,0,-i,n,i),this.compose(),this.restore(t)}paintInlineImageXObjectGroup(t,e,n){if(!this.contentVisible)return;const i=this.ctx;let o;if(e.bitmap)o=e.bitmap;else{const c=e.width,u=e.height,f=this.cachedCanvases.getCanvas("inlineImage",c,u).context;S_(f,e),o=this.applyTransferMapsToCanvas(f)}this.dependencyTracker?.resetBBox(t);for(const c of n)i.save(),i.transform(...c.transform),i.scale(1,-1),pv(i,o,c.x,c.y,c.w,c.h,0,-1,1,1),this.dependencyTracker?.recordBBox(t,i,0,1,-1,0),i.restore();this.dependencyTracker?.recordOperation(t),this.compose()}paintSolidColorImageMask(t){this.contentVisible&&(this.dependencyTracker?.resetBBox(t).recordBBox(t,this.ctx,0,1,0,1).recordDependencies(t,Ns.fill).recordOperation(t),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t,e){}markPointProps(t,e,n){}beginMarkedContent(t,e){this.dependencyTracker?.beginMarkedContent(t),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e,n){this.dependencyTracker?.beginMarkedContent(t),e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(n)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(t){this.dependencyTracker?.endMarkedContent(t),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(t){}endCompat(t){}consumePath(t,e,n){const i=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(n);const o=this.ctx;this.pendingClip?(i||(this.pendingClip===k_?o.clip(e,"evenodd"):o.clip(e)),this.pendingClip=null,this.dependencyTracker?.bboxToClipBoxDropOperation(t).recordFutureForcedDependency("clipPath",t)):this.dependencyTracker?.recordOperation(t),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=We(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const e=Math.abs(t[0]*t[3]-t[2]*t[1]),n=Math.hypot(t[0],t[2]),i=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(n,i)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:e,b:n,c:i,d:o}=this.ctx.getTransform();let c,u;if(n===0&&i===0){const h=Math.abs(e),f=Math.abs(o);if(h===f)if(t===0)c=u=1/h;else{const p=h*t;c=u=p<1?1/p:1}else if(t===0)c=1/h,u=1/f;else{const p=h*t,m=f*t;c=p<1?1/p:1,u=m<1?1/m:1}}else{const h=Math.abs(e*o-n*i),f=Math.hypot(e,n),p=Math.hypot(i,o);if(t===0)c=p/h,u=f/h;else{const m=t*h;c=p>m?p/m:1,u=f>m?f/m:1}}this._cachedScaleForStroking[0]=c,this._cachedScaleForStroking[1]=u}return this._cachedScaleForStroking}rescaleAndStroke(t,e){const{ctx:n,current:{lineWidth:i}}=this,[o,c]=this.getScaleForStroking();if(o===c){n.lineWidth=(i||1)*o,n.stroke(t);return}const u=n.getLineDash();e&&n.save(),n.scale(o,c),yA.a=1/o,yA.d=1/c;const h=new Path2D;if(h.addPath(t,yA),u.length>0){const f=Math.max(o,c);n.setLineDash(u.map(p=>p/f)),n.lineDashOffset/=f}n.lineWidth=i||1,n.stroke(h),e&&n.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}};Ar=new WeakSet,xS=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},bS=function(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const e=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}},AS=function(t,e,n){const i=new Path2D;return i.addPath(t,new DOMMatrix(n).invertSelf().multiplySelf(e)),i};let _d=mE;for(const r in Vm)_d.prototype[r]!==void 0&&(_d.prototype[Vm[r]]=_d.prototype[r]);var Dg,Ng;class oo{static get workerPort(){return l(this,Dg)}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");A(this,Dg,t)}static get workerSrc(){return l(this,Ng)}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");A(this,Ng,t)}}Dg=new WeakMap,Ng=new WeakMap,_(oo,Dg,null),_(oo,Ng,"");var df,Lg;class YB{constructor({parsedData:t,rawData:e}){_(this,df);_(this,Lg);A(this,df,t),A(this,Lg,e)}getRaw(){return l(this,Lg)}get(t){return l(this,df).get(t)??null}[Symbol.iterator](){return l(this,df).entries()}}df=new WeakMap,Lg=new WeakMap;const pd=Symbol("INTERNAL");var Ig,Fg,Og,ff;class qB{constructor(t,{name:e,intent:n,usage:i,rbGroups:o}){_(this,Ig,!1);_(this,Fg,!1);_(this,Og,!1);_(this,ff,!0);A(this,Ig,!!(t&ys.DISPLAY)),A(this,Fg,!!(t&ys.PRINT)),this.name=e,this.intent=n,this.usage=i,this.rbGroups=o}get visible(){if(l(this,Og))return l(this,ff);if(!l(this,ff))return!1;const{print:t,view:e}=this.usage;return l(this,Ig)?e?.viewState!=="OFF":l(this,Fg)?t?.printState!=="OFF":!0}_setVisible(t,e,n=!1){t!==pd&&Te("Internal method `_setVisible` called."),A(this,Og,n),A(this,ff,e)}}Ig=new WeakMap,Fg=new WeakMap,Og=new WeakMap,ff=new WeakMap;var Al,be,pf,mf,jg,SS;class QB{constructor(t,e=ys.DISPLAY){_(this,jg);_(this,Al,null);_(this,be,new Map);_(this,pf,null);_(this,mf,null);if(this.renderingIntent=e,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,A(this,mf,t.order);for(const n of t.groups)l(this,be).set(n.id,new qB(e,n));if(t.baseState==="OFF")for(const n of l(this,be).values())n._setVisible(pd,!1);for(const n of t.on)l(this,be).get(n)._setVisible(pd,!0);for(const n of t.off)l(this,be).get(n)._setVisible(pd,!1);A(this,pf,this.getHash())}}isVisible(t){if(l(this,be).size===0)return!0;if(!t)return nx("Optional content group not defined."),!0;if(t.type==="OCG")return l(this,be).has(t.id)?l(this,be).get(t.id).visible:(Ht(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return R(this,jg,SS).call(this,t.expression);if(!t.policy||t.policy==="AnyOn"){for(const e of t.ids){if(!l(this,be).has(e))return Ht(`Optional content group not found: ${e}`),!0;if(l(this,be).get(e).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const e of t.ids){if(!l(this,be).has(e))return Ht(`Optional content group not found: ${e}`),!0;if(!l(this,be).get(e).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const e of t.ids){if(!l(this,be).has(e))return Ht(`Optional content group not found: ${e}`),!0;if(!l(this,be).get(e).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const e of t.ids){if(!l(this,be).has(e))return Ht(`Optional content group not found: ${e}`),!0;if(l(this,be).get(e).visible)return!1}return!0}return Ht(`Unknown optional content policy ${t.policy}.`),!0}return Ht(`Unknown group type ${t.type}.`),!0}setVisibility(t,e=!0,n=!0){const i=l(this,be).get(t);if(!i){Ht(`Optional content group not found: ${t}`);return}if(n&&e&&i.rbGroups.length)for(const o of i.rbGroups)for(const c of o)c!==t&&l(this,be).get(c)?._setVisible(pd,!1,!0);i._setVisible(pd,!!e,!0),A(this,Al,null)}setOCGState({state:t,preserveRB:e}){let n;for(const i of t){switch(i){case"ON":case"OFF":case"Toggle":n=i;continue}const o=l(this,be).get(i);if(o)switch(n){case"ON":this.setVisibility(i,!0,e);break;case"OFF":this.setVisibility(i,!1,e);break;case"Toggle":this.setVisibility(i,!o.visible,e);break}}A(this,Al,null)}get hasInitialVisibility(){return l(this,pf)===null||this.getHash()===l(this,pf)}getOrder(){return l(this,be).size?l(this,mf)?l(this,mf).slice():[...l(this,be).keys()]:null}getGroup(t){return l(this,be).get(t)||null}getHash(){if(l(this,Al)!==null)return l(this,Al);const t=new aR;for(const[e,n]of l(this,be))t.update(`${e}:${n.visible}`);return A(this,Al,t.hexdigest())}[Symbol.iterator](){return l(this,be).entries()}}Al=new WeakMap,be=new WeakMap,pf=new WeakMap,mf=new WeakMap,jg=new WeakSet,SS=function(t){const e=t.length;if(e<2)return!0;const n=t[0];for(let i=1;i<e;i++){const o=t[i];let c;if(Array.isArray(o))c=R(this,jg,SS).call(this,o);else if(l(this,be).has(o))c=l(this,be).get(o).visible;else return Ht(`Optional content group not found: ${o}`),!0;switch(n){case"And":if(!c)return!1;break;case"Or":if(c)return!0;break;case"Not":return!c;default:return!0}}return n==="And"};class ZB{constructor(t,{disableRange:e=!1,disableStream:n=!1}){se(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:i,initialData:o,progressiveDone:c,contentDispositionFilename:u}=t;if(this._queuedChunks=[],this._progressiveDone=c,this._contentDispositionFilename=u,o?.length>0){const h=o instanceof Uint8Array&&o.byteLength===o.buffer.byteLength?o.buffer:new Uint8Array(o).buffer;this._queuedChunks.push(h)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!n,this._isRangeSupported=!e,this._contentLength=i,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((h,f)=>{this._onReceiveData({begin:h,chunk:f})}),t.addProgressListener((h,f)=>{this._onProgress({loaded:h,total:f})}),t.addProgressiveReadListener(h=>{this._onReceiveData({chunk:h})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData({begin:t,chunk:e}){const n=e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer;if(t===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(n):this._queuedChunks.push(n);else{const i=this._rangeReaders.some(function(o){return o._begin!==t?!1:(o._enqueue(n),!0)});se(i,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(t){t.total===void 0?this._rangeReaders[0]?.onProgress?.({loaded:t.loaded}):this._fullRequestReader?.onProgress?.({loaded:t.loaded,total:t.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)}getFullReader(){se(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new JB(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new t3(this,t,e);return this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(n),n}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeReaders.slice(0))e.cancel(t);this._pdfDataRangeTransport.abort()}}class JB{constructor(t,e,n=!1,i=null){this._stream=t,this._done=n||!1,this._filename=iE(i)?i:null,this._queuedChunks=e||[],this._loaded=0;for(const o of this._queuedChunks)this._loaded+=o.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class t3{constructor(t,e,n){this._stream=t,this._begin=e,this._end=n,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function e3(r){let t=!0,e=n("filename\\*","i").exec(r);if(e){e=e[1];let p=u(e);return p=unescape(p),p=h(p),p=f(p),o(p)}if(e=c(r),e){const p=f(e);return o(p)}if(e=n("filename","i").exec(r),e){e=e[1];let p=u(e);return p=f(p),o(p)}function n(p,m){return new RegExp("(?:^|;)\\s*"+p+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',m)}function i(p,m){if(p){if(!/^[\x00-\xFF]+$/.test(m))return m;try{const v=new TextDecoder(p,{fatal:!0}),b=U0(m);m=v.decode(b),t=!1}catch{}}return m}function o(p){return t&&/[\x80-\xff]/.test(p)&&(p=i("utf-8",p),t&&(p=i("iso-8859-1",p))),p}function c(p){const m=[];let v;const b=n("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(v=b.exec(p))!==null;){let[,E,T,P]=v;if(E=parseInt(E,10),E in m){if(E===0)break;continue}m[E]=[T,P]}const C=[];for(let E=0;E<m.length&&E in m;++E){let[T,P]=m[E];P=u(P),T&&(P=unescape(P),E===0&&(P=h(P))),C.push(P)}return C.join("")}function u(p){if(p.startsWith('"')){const m=p.slice(1).split('\\"');for(let v=0;v<m.length;++v){const b=m[v].indexOf('"');b!==-1&&(m[v]=m[v].slice(0,b),m.length=v+1),m[v]=m[v].replaceAll(/\\(.)/g,"$1")}p=m.join('"')}return p}function h(p){const m=p.indexOf("'");if(m===-1)return p;const v=p.slice(0,m),C=p.slice(m+1).replace(/^[^']*'/,"");return i(v,C)}function f(p){return!p.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(p)?p:p.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(m,v,b,C){if(b==="q"||b==="Q")return C=C.replaceAll("_"," "),C=C.replaceAll(/=([0-9a-fA-F]{2})/g,function(E,T){return String.fromCharCode(parseInt(T,16))}),i(v,C);try{C=atob(C)}catch{}return i(v,C)})}return""}function wR(r,t){const e=new Headers;if(!r||!t||typeof t!="object")return e;for(const n in t){const i=t[n];i!==void 0&&e.append(n,i)}return e}function sx(r){return URL.parse(r)?.origin??null}function xR({responseHeaders:r,isHttp:t,rangeChunkSize:e,disableRange:n}){const i={allowRangeRequests:!1,suggestedLength:void 0},o=parseInt(r.get("Content-Length"),10);return!Number.isInteger(o)||(i.suggestedLength=o,o<=2*e)||n||!t||r.get("Accept-Ranges")!=="bytes"||(r.get("Content-Encoding")||"identity")!=="identity"||(i.allowRangeRequests=!0),i}function bR(r){const t=r.get("Content-Disposition");if(t){let e=e3(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch{}if(iE(e))return e}return null}function W0(r,t){return new uw(`Unexpected server response (${r}) while retrieving PDF "${t}".`,r,r===404||r===0&&t.startsWith("file:"))}function AR(r){return r===200||r===206}function SR(r,t,e){return{method:"GET",headers:r,signal:e.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function ER(r){return r instanceof Uint8Array?r.buffer:r instanceof ArrayBuffer?r:(Ht(`getArrayBuffer - unexpected data format: ${r}`),new Uint8Array(r).buffer)}class n3{constructor(t){ct(this,"_responseOrigin",null);this.source=t,this.isHttp=/^https?:/i.test(t.url),this.headers=wR(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return se(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new i3(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new s3(this,t,e);return this._rangeRequestReaders.push(n),n}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}}class i3{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const e=t.source;this._withCredentials=e.withCredentials||!1,this._contentLength=e.length,this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange;const n=new Headers(t.headers),i=e.url;fetch(i,SR(n,this._withCredentials,this._abortController)).then(o=>{if(t._responseOrigin=sx(o.url),!AR(o.status))throw W0(o.status,i);this._reader=o.body.getReader(),this._headersCapability.resolve();const c=o.headers,{allowRangeRequests:u,suggestedLength:h}=xR({responseHeaders:c,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=u,this._contentLength=h||this._contentLength,this._filename=bR(c),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new ql("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:ER(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}class s3{constructor(t,e,n){this._stream=t,this._reader=null,this._loaded=0;const i=t.source;this._withCredentials=i.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!i.disableStream,this._abortController=new AbortController;const o=new Headers(t.headers);o.append("Range",`bytes=${e}-${n-1}`);const c=i.url;fetch(c,SR(o,this._withCredentials,this._abortController)).then(u=>{const h=sx(u.url);if(h!==t._responseOrigin)throw new Error(`Expected range response-origin "${h}" to match "${t._responseOrigin}".`);if(!AR(u.status))throw W0(u.status,c);this._readCapability.resolve(),this._reader=u.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded}),{value:ER(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}const vA=200,wA=206;function r3(r){const t=r.response;return typeof t!="string"?t:U0(t).buffer}class o3{constructor({url:t,httpHeaders:e,withCredentials:n}){ct(this,"_responseOrigin",null);this.url=t,this.isHttp=/^https?:/i.test(t),this.headers=wR(this.isHttp,e),this.withCredentials=n||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(t){const e=new XMLHttpRequest,n=this.currXhrId++,i=this.pendingRequests[n]={xhr:e};e.open("GET",this.url),e.withCredentials=this.withCredentials;for(const[o,c]of this.headers)e.setRequestHeader(o,c);return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),i.expectedStatus=wA):i.expectedStatus=vA,e.responseType="arraybuffer",se(t.onError,"Expected `onError` callback to be provided."),e.onerror=()=>{t.onError(e.status)},e.onreadystatechange=this.onStateChange.bind(this,n),e.onprogress=this.onProgress.bind(this,n),i.onHeadersReceived=t.onHeadersReceived,i.onDone=t.onDone,i.onError=t.onError,i.onProgress=t.onProgress,e.send(null),n}onProgress(t,e){const n=this.pendingRequests[t];n&&n.onProgress?.(e)}onStateChange(t,e){const n=this.pendingRequests[t];if(!n)return;const i=n.xhr;if(i.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),i.readyState!==4||!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],i.status===0&&this.isHttp){n.onError(i.status);return}const o=i.status||vA;if(!(o===vA&&n.expectedStatus===wA)&&o!==n.expectedStatus){n.onError(i.status);return}const u=r3(i);if(o===wA){const h=i.getResponseHeader("Content-Range"),f=/bytes (\d+)-(\d+)\/(\d+)/.exec(h);f?n.onDone({begin:parseInt(f[1],10),chunk:u}):(Ht('Missing or invalid "Content-Range" header.'),n.onError(0))}else u?n.onDone({begin:0,chunk:u}):n.onError(i.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}}class a3{constructor(t){this._source=t,this._manager=new o3(t),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)}getFullReader(){return se(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new l3(this._manager,this._source),this._fullRequestReader}getRangeReader(t,e){const n=new c3(this._manager,t,e);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}}class l3{constructor(t,e){this._manager=t,this._url=e.url,this._fullRequestId=t.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,e=this._manager.getRequestXhr(t);this._manager._responseOrigin=sx(e.responseURL);const n=e.getAllResponseHeaders(),i=new Headers(n?n.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(u=>{const[h,...f]=u.split(": ");return[h,f.join(": ")]}):[]),{allowRangeRequests:o,suggestedLength:c}=xR({responseHeaders:i,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});o&&(this._isRangeSupported=!0),this._contentLength=c||this._contentLength,this._filename=bR(i),this._isRangeSupported&&this._manager.abortRequest(t),this._headersCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=W0(t,this._url),this._headersCapability.reject(this._storedError);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){this.onProgress?.({loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersCapability.reject(t);for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class c3{constructor(t,e,n){this._manager=t,this._url=t.url,this._requestId=t.request({begin:e,end:n,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){const t=sx(this._manager.getRequestXhr(this._requestId)?.responseURL);t!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${t}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){this.onClosed?.(this)}_onDone(t){const e=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError??(this._storedError=W0(t,this._url));for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){this.isStreamingSupported||this.onProgress?.({loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const u3=/^[a-z][a-z0-9\-+.]+:/i;function h3(r){if(u3.test(r))return new URL(r);const t=process.getBuiltinModule("url");return new URL(t.pathToFileURL(r))}class d3{constructor(t){this.source=t,this.url=h3(t.url),se(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return se(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new f3(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new p3(this,t,e);return this._rangeRequestReaders.push(n),n}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}}class f3{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const e=t.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const n=process.getBuiltinModule("fs");n.promises.lstat(this._url).then(i=>{this._contentLength=i.size,this._setReadableStream(n.createReadStream(this._url)),this._headersCapability.resolve()},i=>{i.code==="ENOENT"&&(i=W0(0,this._url.href)),this._storedError=i,this._headersCapability.reject(i)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new ql("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class p3{constructor(t,e,n){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const i=t.source;this._isStreamingSupported=!i.disableStream;const o=process.getBuiltinModule("fs");this._setReadableStream(o.createReadStream(this._url,{start:e,end:n-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const tm=Symbol("INITIAL_DATA");var ns,Bg,ES;class CR{constructor(){_(this,Bg);_(this,ns,Object.create(null))}get(t,e=null){if(e){const i=R(this,Bg,ES).call(this,t);return i.promise.then(()=>e(i.data)),null}const n=l(this,ns)[t];if(!n||n.data===tm)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return n.data}has(t){const e=l(this,ns)[t];return!!e&&e.data!==tm}delete(t){const e=l(this,ns)[t];return!e||e.data===tm?!1:(delete l(this,ns)[t],!0)}resolve(t,e=null){const n=R(this,Bg,ES).call(this,t);n.data=e,n.resolve()}clear(){for(const t in l(this,ns)){const{data:e}=l(this,ns)[t];e?.bitmap?.close()}A(this,ns,Object.create(null))}*[Symbol.iterator](){for(const t in l(this,ns)){const{data:e}=l(this,ns)[t];e!==tm&&(yield[t,e])}}}ns=new WeakMap,Bg=new WeakSet,ES=function(t){var e;return(e=l(this,ns))[t]||(e[t]={...Promise.withResolvers(),data:tm})};const m3=1e5,T_=30;var Sl,is,Ug,Vg,ku,Yo,zg,Hg,Tu,$g,gf,El,yf,Wg,vf,_u,Gg,Xg,wf,Pu,Kg,xf,bf,xa,kR,TR,CS,bs,Dv,kS,_R,PR;const Bn=class Bn{constructor({textContentSource:t,container:e,viewport:n}){_(this,xa);_(this,Sl,Promise.withResolvers());_(this,is,null);_(this,Ug,!1);_(this,Vg,!!globalThis.FontInspector?.enabled);_(this,ku,null);_(this,Yo,null);_(this,zg,0);_(this,Hg,0);_(this,Tu,null);_(this,$g,null);_(this,gf,0);_(this,El,0);_(this,yf,Object.create(null));_(this,Wg,[]);_(this,vf,null);_(this,_u,[]);_(this,Gg,new WeakMap);_(this,Xg,null);var h;if(t instanceof ReadableStream)A(this,vf,t);else if(typeof t=="object")A(this,vf,new ReadableStream({start(f){f.enqueue(t),f.close()}}));else throw new Error('No "textContentSource" parameter specified.');A(this,is,A(this,$g,e)),A(this,El,n.scale*co.pixelRatio),A(this,gf,n.rotation),A(this,Yo,{div:null,properties:null,ctx:null});const{pageWidth:i,pageHeight:o,pageX:c,pageY:u}=n.rawDims;A(this,Xg,[1,0,0,-1,-c,u+o]),A(this,Hg,i),A(this,zg,o),R(h=Bn,bs,_R).call(h),e.style.setProperty("--min-font-size",l(Bn,xf)),hh(e,n),l(this,Sl).promise.finally(()=>{l(Bn,bf).delete(this),A(this,Yo,null),A(this,yf,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:t,isFirefox:e}=Cn.platform;return $t(this,"fontFamilyMap",new Map([["sans-serif",`${t&&e?"Calibri, ":""}sans-serif`],["monospace",`${t&&e?"Lucida Console, ":""}monospace`]]))}render(){const t=()=>{l(this,Tu).read().then(({value:e,done:n})=>{if(n){l(this,Sl).resolve();return}l(this,ku)??A(this,ku,e.lang),Object.assign(l(this,yf),e.styles),R(this,xa,kR).call(this,e.items),t()},l(this,Sl).reject)};return A(this,Tu,l(this,vf).getReader()),l(Bn,bf).add(this),t(),l(this,Sl).promise}update({viewport:t,onBefore:e=null}){var o;const n=t.scale*co.pixelRatio,i=t.rotation;if(i!==l(this,gf)&&(e?.(),A(this,gf,i),hh(l(this,$g),{rotation:i})),n!==l(this,El)){e?.(),A(this,El,n);const c={div:null,properties:null,ctx:R(o=Bn,bs,Dv).call(o,l(this,ku))};for(const u of l(this,_u))c.properties=l(this,Gg).get(u),c.div=u,R(this,xa,CS).call(this,c)}}cancel(){const t=new ql("TextLayer task cancelled.");l(this,Tu)?.cancel(t).catch(()=>{}),A(this,Tu,null),l(this,Sl).reject(t)}get textDivs(){return l(this,_u)}get textContentItemsStr(){return l(this,Wg)}static cleanup(){if(!(l(this,bf).size>0)){l(this,wf).clear();for(const{canvas:t}of l(this,Pu).values())t.remove();l(this,Pu).clear()}}};Sl=new WeakMap,is=new WeakMap,Ug=new WeakMap,Vg=new WeakMap,ku=new WeakMap,Yo=new WeakMap,zg=new WeakMap,Hg=new WeakMap,Tu=new WeakMap,$g=new WeakMap,gf=new WeakMap,El=new WeakMap,yf=new WeakMap,Wg=new WeakMap,vf=new WeakMap,_u=new WeakMap,Gg=new WeakMap,Xg=new WeakMap,wf=new WeakMap,Pu=new WeakMap,Kg=new WeakMap,xf=new WeakMap,bf=new WeakMap,xa=new WeakSet,kR=function(t){var i,o;if(l(this,Ug))return;(o=l(this,Yo)).ctx??(o.ctx=R(i=Bn,bs,Dv).call(i,l(this,ku)));const e=l(this,_u),n=l(this,Wg);for(const c of t){if(e.length>m3){Ht("Ignoring additional textDivs for performance reasons."),A(this,Ug,!0);return}if(c.str===void 0){if(c.type==="beginMarkedContentProps"||c.type==="beginMarkedContent"){const u=l(this,is);A(this,is,document.createElement("span")),l(this,is).classList.add("markedContent"),c.id&&l(this,is).setAttribute("id",`${c.id}`),u.append(l(this,is))}else c.type==="endMarkedContent"&&A(this,is,l(this,is).parentNode);continue}n.push(c.str),R(this,xa,TR).call(this,c)}},TR=function(t){var C;const e=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};l(this,_u).push(e);const i=vt.transform(l(this,Xg),t.transform);let o=Math.atan2(i[1],i[0]);const c=l(this,yf)[t.fontName];c.vertical&&(o+=Math.PI/2);let u=l(this,Vg)&&c.fontSubstitution||c.fontFamily;u=Bn.fontFamilyMap.get(u)||u;const h=Math.hypot(i[2],i[3]),f=h*R(C=Bn,bs,PR).call(C,u,c,l(this,ku));let p,m;o===0?(p=i[4],m=i[5]-f):(p=i[4]+f*Math.sin(o),m=i[5]-f*Math.cos(o));const v=e.style;v.left=`${(100*p/l(this,Hg)).toFixed(2)}%`,v.top=`${(100*m/l(this,zg)).toFixed(2)}%`,v.setProperty("--font-height",`${h.toFixed(2)}px`),v.fontFamily=u,n.fontSize=h,e.setAttribute("role","presentation"),e.textContent=t.str,e.dir=t.dir,l(this,Vg)&&(e.dataset.fontName=c.fontSubstitutionLoadedName||t.fontName),o!==0&&(n.angle=o*(180/Math.PI));let b=!1;if(t.str.length>1)b=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const E=Math.abs(t.transform[0]),T=Math.abs(t.transform[3]);E!==T&&Math.max(E,T)/Math.min(E,T)>1.5&&(b=!0)}if(b&&(n.canvasWidth=c.vertical?t.height:t.width),l(this,Gg).set(e,n),l(this,Yo).div=e,l(this,Yo).properties=n,R(this,xa,CS).call(this,l(this,Yo)),n.hasText&&l(this,is).append(e),n.hasEOL){const E=document.createElement("br");E.setAttribute("role","presentation"),l(this,is).append(E)}},CS=function(t){var c;const{div:e,properties:n,ctx:i}=t,{style:o}=e;if(n.canvasWidth!==0&&n.hasText){const{fontFamily:u}=o,{canvasWidth:h,fontSize:f}=n;R(c=Bn,bs,kS).call(c,i,f*l(this,El),u);const{width:p}=i.measureText(e.textContent);p>0&&o.setProperty("--scale-x",h*l(this,El)/p)}n.angle!==0&&o.setProperty("--rotate",`${n.angle}deg`)},bs=new WeakSet,Dv=function(t=null){let e=l(this,Pu).get(t||(t=""));if(!e){const n=document.createElement("canvas");n.className="hiddenCanvasElement",n.lang=t,document.body.append(n),e=n.getContext("2d",{alpha:!1,willReadFrequently:!0}),l(this,Pu).set(t,e),l(this,Kg).set(e,{size:0,family:""})}return e},kS=function(t,e,n){const i=l(this,Kg).get(t);e===i.size&&n===i.family||(t.font=`${e}px ${n}`,i.size=e,i.family=n)},_R=function(){if(l(this,xf)!==null)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),A(this,xf,t.getBoundingClientRect().height),t.remove()},PR=function(t,e,n){const i=l(this,wf).get(t);if(i)return i;const o=R(this,bs,Dv).call(this,n);o.canvas.width=o.canvas.height=T_,R(this,bs,kS).call(this,o,T_,t);const c=o.measureText(""),u=c.fontBoundingBoxAscent,h=Math.abs(c.fontBoundingBoxDescent);o.canvas.width=o.canvas.height=0;let f=.8;return u?f=u/(u+h):(Cn.platform.isFirefox&&Ht("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),e.ascent?f=e.ascent:e.descent&&(f=1+e.descent)),l(this,wf).set(t,f),f},_(Bn,bs),_(Bn,wf,new Map),_(Bn,Pu,new Map),_(Bn,Kg,new WeakMap),_(Bn,xf,null),_(Bn,bf,new Set);let Hm=Bn;const g3=100;function RR(r={}){typeof r=="string"||r instanceof URL?r={url:r}:(r instanceof ArrayBuffer||ArrayBuffer.isView(r))&&(r={data:r});const t=new TS,{docId:e}=t,n=r.url?SB(r.url):null,i=r.data?EB(r.data):null,o=r.httpHeaders||null,c=r.withCredentials===!0,u=r.password??null,h=r.range instanceof MR?r.range:null,f=Number.isInteger(r.rangeChunkSize)&&r.rangeChunkSize>0?r.rangeChunkSize:2**16;let p=r.worker instanceof $m?r.worker:null;const m=r.verbosity,v=typeof r.docBaseUrl=="string"&&!ix(r.docBaseUrl)?r.docBaseUrl:null,b=uv(r.cMapUrl),C=r.cMapPacked!==!1,E=r.CMapReaderFactory||(Ai?DB:f_),T=uv(r.iccUrl),P=uv(r.standardFontDataUrl),N=r.StandardFontDataFactory||(Ai?NB:p_),L=uv(r.wasmUrl),F=r.WasmFactory||(Ai?LB:m_),O=r.stopAtErrors!==!0,z=Number.isInteger(r.maxImageSize)&&r.maxImageSize>-1?r.maxImageSize:-1,K=r.isEvalSupported!==!1,Y=typeof r.isOffscreenCanvasSupported=="boolean"?r.isOffscreenCanvasSupported:!Ai,nt=typeof r.isImageDecoderSupported=="boolean"?r.isImageDecoderSupported:!Ai&&(Cn.platform.isFirefox||!globalThis.chrome),st=Number.isInteger(r.canvasMaxAreaInBytes)?r.canvasMaxAreaInBytes:-1,it=typeof r.disableFontFace=="boolean"?r.disableFontFace:Ai,Mt=r.fontExtraProperties===!0,xt=r.enableXfa===!0,Ct=r.ownerDocument||globalThis.document,Qt=r.disableRange===!0,ft=r.disableStream===!0,lt=r.disableAutoFetch===!0,et=r.pdfBug===!0,mt=r.CanvasFactory||(Ai?MB:_B),ht=r.FilterFactory||(Ai?RB:PB),W=r.enableHWA===!0,tt=r.useWasm!==!1,bt=h?h.length:r.length??NaN,Bt=typeof r.useSystemFonts=="boolean"?r.useSystemFonts:!Ai&&!it,Vt=typeof r.useWorkerFetch=="boolean"?r.useWorkerFetch:!!(E===f_&&N===p_&&F===m_&&b&&P&&L&&om(b,document.baseURI)&&om(P,document.baseURI)&&om(L,document.baseURI)),zt=null;qj(m);const jt={canvasFactory:new mt({ownerDocument:Ct,enableHWA:W}),filterFactory:new ht({docId:e,ownerDocument:Ct}),cMapReaderFactory:Vt?null:new E({baseUrl:b,isCompressed:C}),standardFontDataFactory:Vt?null:new N({baseUrl:P}),wasmFactory:Vt?null:new F({baseUrl:L})};p||(p=$m.create({verbosity:m,port:oo.workerPort}),t._worker=p);const Jt={docId:e,apiVersion:"5.4.530",data:i,password:u,disableAutoFetch:lt,rangeChunkSize:f,length:bt,docBaseUrl:v,enableXfa:xt,evaluatorOptions:{maxImageSize:z,disableFontFace:it,ignoreErrors:O,isEvalSupported:K,isOffscreenCanvasSupported:Y,isImageDecoderSupported:nt,canvasMaxAreaInBytes:st,fontExtraProperties:Mt,useSystemFonts:Bt,useWasm:tt,useWorkerFetch:Vt,cMapUrl:b,iccUrl:T,standardFontDataUrl:P,wasmUrl:L}},re={ownerDocument:Ct,pdfBug:et,styleElement:zt,loadingParams:{disableAutoFetch:lt,enableXfa:xt}};return p.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(p.destroyed)throw new Error("Worker was destroyed");const mn=p.messageHandler.sendWithPromise("GetDocRequest",Jt,i?[i.buffer]:null);let Ti;if(h)Ti=new ZB(h,{disableRange:Qt,disableStream:ft});else if(!i){if(!n)throw new Error("getDocument - no `url` parameter provided.");const Sa=om(n)?n3:Ai?d3:a3;Ti=new Sa({url:n,length:bt,httpHeaders:o,withCredentials:c,rangeChunkSize:f,disableRange:Qt,disableStream:ft})}return mn.then(Sa=>{if(t.destroyed)throw new Error("Loading aborted");if(p.destroyed)throw new Error("Worker was destroyed");const Se=new pm(e,Sa,p.port),sn=new w3(Se,t,Ti,re,jt,W);t._transport=sn,Se.send("Ready",null)})}).catch(t._capability.reject),t}var Nw;const Lw=class Lw{constructor(){ct(this,"_capability",Promise.withResolvers());ct(this,"_transport",null);ct(this,"_worker",null);ct(this,"docId",`d${wn(Lw,Nw)._++}`);ct(this,"destroyed",!1);ct(this,"onPassword",null);ct(this,"onProgress",null)}get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await this._transport?.destroy()}catch(t){throw this._worker?.port&&delete this._worker._pendingDestroy,t}this._transport=null,this._worker?.destroy(),this._worker=null}async getData(){return this._transport.getData()}};Nw=new WeakMap,_(Lw,Nw,0);let TS=Lw;var Ru,Yg,qg,Qg,Zg;class MR{constructor(t,e,n=!1,i=null){_(this,Ru,Promise.withResolvers());_(this,Yg,[]);_(this,qg,[]);_(this,Qg,[]);_(this,Zg,[]);this.length=t,this.initialData=e,this.progressiveDone=n,this.contentDispositionFilename=i}addRangeListener(t){l(this,Zg).push(t)}addProgressListener(t){l(this,Qg).push(t)}addProgressiveReadListener(t){l(this,qg).push(t)}addProgressiveDoneListener(t){l(this,Yg).push(t)}onDataRange(t,e){for(const n of l(this,Zg))n(t,e)}onDataProgress(t,e){l(this,Ru).promise.then(()=>{for(const n of l(this,Qg))n(t,e)})}onDataProgressiveRead(t){l(this,Ru).promise.then(()=>{for(const e of l(this,qg))e(t)})}onDataProgressiveDone(){l(this,Ru).promise.then(()=>{for(const t of l(this,Yg))t()})}transportReady(){l(this,Ru).resolve()}requestDataRange(t,e){Te("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}Ru=new WeakMap,Yg=new WeakMap,qg=new WeakMap,Qg=new WeakMap,Zg=new WeakMap;class y3{constructor(t,e){this._pdfInfo=t,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return $t(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(t,e){return this._transport.getAnnotationsByType(t,e)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(e)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}extractPages(t){return this._transport.extractPages(t)}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var qo,Mu,wm;class v3{constructor(t,e,n,i=!1){_(this,Mu);_(this,qo,!1);this._pageIndex=t,this._pageInfo=e,this._transport=n,this._stats=i?new o_:null,this._pdfBug=i,this.commonObjs=n.commonObjs,this.objs=new CR,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:e=this.rotate,offsetX:n=0,offsetY:i=0,dontFlip:o=!1}={}){return new z0({viewBox:this.view,userUnit:this.userUnit,scale:t,rotation:e,offsetX:n,offsetY:i,dontFlip:o})}getAnnotations({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,e)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return $t(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:t,canvas:e=t.canvas,viewport:n,intent:i="display",annotationMode:o=el.ENABLE,transform:c=null,background:u=null,optionalContentConfigPromise:h=null,annotationCanvasMap:f=null,pageColors:p=null,printAnnotationStorage:m=null,isEditing:v=!1,recordOperations:b=!1,operationsFilter:C=null}){this._stats?.time("Overall");const E=this._transport.getRenderingIntent(i,o,m,v),{renderingIntent:T,cacheKey:P}=E;A(this,qo,!1),h||(h=this._transport.getOptionalContentConfig(T));let N=this._intentStates.get(P);N||(N=Object.create(null),this._intentStates.set(P,N)),N.streamReaderCancelTimeout&&(clearTimeout(N.streamReaderCancelTimeout),N.streamReaderCancelTimeout=null);const L=!!(T&ys.PRINT);N.displayReadyCapability||(N.displayReadyCapability=Promise.withResolvers(),N.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(E));const F=!!(this._pdfBug&&globalThis.StepperManager?.enabled),O=!this.recordedBBoxes&&(b||F),z=nt=>{if(N.renderTasks.delete(K),O){const st=K.gfx?.dependencyTracker.take();st&&(K.stepper&&K.stepper.setOperatorBBoxes(st,K.gfx.dependencyTracker.takeDebugMetadata()),b&&(this.recordedBBoxes=st))}L&&A(this,qo,!0),R(this,Mu,wm).call(this),nt?(K.capability.reject(nt),this._abortOperatorList({intentState:N,reason:nt instanceof Error?nt:new Error(nt)})):K.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),globalThis.Stats?.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},K=new _S({callback:z,params:{canvas:e,canvasContext:t,dependencyTracker:O?new FB(e,N.operatorList.length,F):null,viewport:n,transform:c,background:u},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:f,operatorList:N.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!L,pdfBug:this._pdfBug,pageColors:p,enableHWA:this._transport.enableHWA,operationsFilter:C});(N.renderTasks||(N.renderTasks=new Set)).add(K);const Y=K.task;return Promise.all([N.displayReadyCapability.promise,h]).then(([nt,st])=>{if(this.destroyed){z();return}if(this._stats?.time("Rendering"),!(st.renderingIntent&T))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");K.initializeGraphics({transparency:nt,optionalContentConfig:st}),K.operatorListChanged()}).catch(z),Y}getOperatorList({intent:t="display",annotationMode:e=el.ENABLE,printAnnotationStorage:n=null,isEditing:i=!1}={}){function o(){u.operatorList.lastChunk&&(u.opListReadCapability.resolve(u.operatorList),u.renderTasks.delete(h))}const c=this._transport.getRenderingIntent(t,e,n,i,!0);let u=this._intentStates.get(c.cacheKey);u||(u=Object.create(null),this._intentStates.set(c.cacheKey,u));let h;return u.opListReadCapability||(h=Object.create(null),h.operatorListChanged=o,u.opListReadCapability=Promise.withResolvers(),(u.renderTasks||(u.renderTasks=new Set)).add(h),u.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(c)),u.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:e=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:e===!0},{highWaterMark:100,size(i){return i.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(n=>zm.textContent(n));const e=this.streamTextContent(t);return new Promise(function(n,i){function o(){c.read().then(function({value:h,done:f}){if(f){n(u);return}u.lang??(u.lang=h.lang),Object.assign(u.styles,h.styles),u.items.push(...h.items),o()},i)}const c=e.getReader(),u={items:[],styles:Object.create(null),lang:null};o()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(const n of e.renderTasks)t.push(n.completed),n.cancel();return this.objs.clear(),A(this,qo,!1),Promise.all(t)}cleanup(t=!1){A(this,qo,!0);const e=R(this,Mu,wm).call(this);return t&&e&&this._stats&&(this._stats=new o_),e}_startRenderPage(t,e){const n=this._intentStates.get(e);n&&(this._stats?.timeEnd("Page Request"),n.displayReadyCapability?.resolve(t))}_renderPageChunk(t,e){for(let n=0,i=t.length;n<i;n++)e.operatorList.fnArray.push(t.fnArray[n]),e.operatorList.argsArray.push(t.argsArray[n]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(const n of e.renderTasks)n.operatorListChanged();t.lastChunk&&R(this,Mu,wm).call(this)}_pumpOperatorList({renderingIntent:t,cacheKey:e,annotationStorageSerializable:n,modifiedIds:i}){const{map:o,transfer:c}=n,h=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:e,annotationStorage:o,modifiedIds:i},c).getReader(),f=this._intentStates.get(e);f.streamReader=h;const p=()=>{h.read().then(({value:m,done:v})=>{if(v){f.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(m,f),p())},m=>{if(f.streamReader=null,!this._transport.destroyed){if(f.operatorList){f.operatorList.lastChunk=!0;for(const v of f.renderTasks)v.operatorListChanged();R(this,Mu,wm).call(this)}if(f.displayReadyCapability)f.displayReadyCapability.reject(m);else if(f.opListReadCapability)f.opListReadCapability.reject(m);else throw m}})};p()}_abortOperatorList({intentState:t,reason:e,force:n=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!n){if(t.renderTasks.size>0)return;if(e instanceof nE){let i=g3;e.extraDelay>0&&e.extraDelay<1e3&&(i+=e.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:e,force:!0})},i);return}}if(t.streamReader.cancel(new ql(e.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[i,o]of this._intentStates)if(o===t){this._intentStates.delete(i);break}this.cleanup()}}}get stats(){return this._stats}}qo=new WeakMap,Mu=new WeakSet,wm=function(){if(!l(this,qo)||this.destroyed)return!1;for(const{renderTasks:t,operatorList:e}of this._intentStates.values())if(t.size>0||!e.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),A(this,qo,!1),!0};var Cl,pr,Qo,Du,Iw,Nu,Lu,Ci,Nv,DR,NR,xm,Af,Lv;const Be=class Be{constructor({name:t=null,port:e=null,verbosity:n=Qj()}={}){_(this,Ci);_(this,Cl,Promise.withResolvers());_(this,pr,null);_(this,Qo,null);_(this,Du,null);if(this.name=t,this.destroyed=!1,this.verbosity=n,e){if(l(Be,Lu).has(e))throw new Error("Cannot use more than one PDFWorker per port.");l(Be,Lu).set(e,this),R(this,Ci,DR).call(this,e)}else R(this,Ci,NR).call(this)}get promise(){return l(this,Cl).promise}get port(){return l(this,Qo)}get messageHandler(){return l(this,pr)}destroy(){this.destroyed=!0,l(this,Du)?.terminate(),A(this,Du,null),l(Be,Lu).delete(l(this,Qo)),A(this,Qo,null),l(this,pr)?.destroy(),A(this,pr,null)}static create(t){const e=l(this,Lu).get(t?.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new Be(t)}static get workerSrc(){if(oo.workerSrc)return oo.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return $t(this,"_setupFakeWorkerGlobal",(async()=>l(this,Af,Lv)?l(this,Af,Lv):(await import(this.workerSrc)).WorkerMessageHandler)())}};Cl=new WeakMap,pr=new WeakMap,Qo=new WeakMap,Du=new WeakMap,Iw=new WeakMap,Nu=new WeakMap,Lu=new WeakMap,Ci=new WeakSet,Nv=function(){l(this,Cl).resolve(),l(this,pr).send("configure",{verbosity:this.verbosity})},DR=function(t){A(this,Qo,t),A(this,pr,new pm("main","worker",t)),l(this,pr).on("ready",()=>{}),R(this,Ci,Nv).call(this)},NR=function(){if(l(Be,Nu)||l(Be,Af,Lv)){R(this,Ci,xm).call(this);return}let{workerSrc:t}=Be;try{Be._isSameOrigin(window.location,t)||(t=Be._createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t,{type:"module"}),n=new pm("main","worker",e),i=()=>{o.abort(),n.destroy(),e.terminate(),this.destroyed?l(this,Cl).reject(new Error("Worker was destroyed")):R(this,Ci,xm).call(this)},o=new AbortController;e.addEventListener("error",()=>{l(this,Du)||i()},{signal:o.signal}),n.on("test",u=>{if(o.abort(),this.destroyed||!u){i();return}A(this,pr,n),A(this,Qo,e),A(this,Du,e),R(this,Ci,Nv).call(this)}),n.on("ready",u=>{if(o.abort(),this.destroyed){i();return}try{c()}catch{R(this,Ci,xm).call(this)}});const c=()=>{const u=new Uint8Array;n.send("test",u,[u.buffer])};c();return}catch{nx("The worker has been disabled.")}R(this,Ci,xm).call(this)},xm=function(){l(Be,Nu)||(Ht("Setting up fake worker."),A(Be,Nu,!0)),Be._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){l(this,Cl).reject(new Error("Worker was destroyed"));return}const e=new TB;A(this,Qo,e);const n=`fake${wn(Be,Iw)._++}`,i=new pm(n+"_worker",n,e);t.setup(i,e),A(this,pr,new pm(n,n+"_worker",e)),R(this,Ci,Nv).call(this)}).catch(t=>{l(this,Cl).reject(new Error(`Setting up fake worker failed: "${t.message}".`))})},Af=new WeakSet,Lv=function(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}},_(Be,Af),_(Be,Iw,0),_(Be,Nu,!1),_(Be,Lu,new WeakMap),Ai&&(A(Be,Nu,!0),oo.workerSrc||(oo.workerSrc="./pdf.worker.mjs")),Be._isSameOrigin=(t,e)=>{const n=URL.parse(t);if(!n?.origin||n.origin==="null")return!1;const i=new URL(e,n);return n.origin===i.origin},Be._createCDNWrapper=t=>{const e=`await import("${t}");`;return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))},Be.fromPort=t=>{if(cB("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!t?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return Be.create(t)};let $m=Be;var Zo,qr,Sf,Ef,Jo,Iu,bm;class w3{constructor(t,e,n,i,o,c){_(this,Iu);_(this,Zo,new Map);_(this,qr,new Map);_(this,Sf,new Map);_(this,Ef,new Map);_(this,Jo,null);this.messageHandler=t,this.loadingTask=e,this.commonObjs=new CR,this.fontLoader=new xB({ownerDocument:i.ownerDocument,styleElement:i.styleElement}),this.loadingParams=i.loadingParams,this._params=i,this.canvasFactory=o.canvasFactory,this.filterFactory=o.filterFactory,this.cMapReaderFactory=o.cMapReaderFactory,this.standardFontDataFactory=o.standardFontDataFactory,this.wasmFactory=o.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=c,this.setupMessageHandler()}get annotationStorage(){return $t(this,"annotationStorage",new sE)}getRenderingIntent(t,e=el.ENABLE,n=null,i=!1,o=!1){let c=ys.DISPLAY,u=uS;switch(t){case"any":c=ys.ANY;break;case"display":break;case"print":c=ys.PRINT;break;default:Ht(`getRenderingIntent - invalid intent: ${t}`)}const h=c&ys.PRINT&&n instanceof cR?n:this.annotationStorage;switch(e){case el.DISABLE:c+=ys.ANNOTATIONS_DISABLE;break;case el.ENABLE:break;case el.ENABLE_FORMS:c+=ys.ANNOTATIONS_FORMS;break;case el.ENABLE_STORAGE:c+=ys.ANNOTATIONS_STORAGE,u=h.serializable;break;default:Ht(`getRenderingIntent - invalid annotationMode: ${e}`)}i&&(c+=ys.IS_EDITING),o&&(c+=ys.OPLIST);const{ids:f,hash:p}=h.modifiedIds,m=[c,u.hash,p];return{renderingIntent:c,cacheKey:m.join("_"),annotationStorageSerializable:u,modifiedIds:f}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),l(this,Jo)?.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const n of l(this,qr).values())t.push(n._destroy());l(this,qr).clear(),l(this,Sf).clear(),l(this,Ef).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const e=this.messageHandler.sendWithPromise("Terminate",null);return t.push(e),Promise.all(t).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),l(this,Zo).clear(),this.filterFactory.destroy(),Hm.cleanup(),this._networkStream?.cancelAllRequests(new ql("Worker was terminated.")),this.messageHandler?.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:e}=this;t.on("GetReader",(n,i)=>{se(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=o=>{this._lastProgress={loaded:o.loaded,total:o.total}},i.onPull=()=>{this._fullReader.read().then(function({value:o,done:c}){if(c){i.close();return}se(o instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{i.error(o)})},i.onCancel=o=>{this._fullReader.cancel(o),i.ready.catch(c=>{if(!this.destroyed)throw c})}}),t.on("ReaderHeadersReady",async n=>{await this._fullReader.headersReady;const{isStreamingSupported:i,isRangeSupported:o,contentLength:c}=this._fullReader;return(!i||!o)&&(this._lastProgress&&e.onProgress?.(this._lastProgress),this._fullReader.onProgress=u=>{e.onProgress?.({loaded:u.loaded,total:u.total})}),{isStreamingSupported:i,isRangeSupported:o,contentLength:c}}),t.on("GetRangeReader",(n,i)=>{se(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const o=this._networkStream.getRangeReader(n.begin,n.end);if(!o){i.close();return}i.onPull=()=>{o.read().then(function({value:c,done:u}){if(u){i.close();return}se(c instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(c),1,[c])}).catch(c=>{i.error(c)})},i.onCancel=c=>{o.cancel(c),i.ready.catch(u=>{if(!this.destroyed)throw u})}}),t.on("GetDoc",({pdfInfo:n})=>{this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,e._capability.resolve(new y3(n,this))}),t.on("DocException",n=>{e._capability.reject(ji(n))}),t.on("PasswordRequest",n=>{A(this,Jo,Promise.withResolvers());try{if(!e.onPassword)throw ji(n);const i=o=>{o instanceof Error?l(this,Jo).reject(o):l(this,Jo).resolve({password:o})};e.onPassword(i,n.code)}catch(i){l(this,Jo).reject(i)}return l(this,Jo).promise}),t.on("DataLoaded",n=>{e.onProgress?.({loaded:n.length,total:n.length}),this.downloadInfoCapability.resolve(n)}),t.on("StartRenderPage",n=>{if(this.destroyed)return;l(this,qr).get(n.pageIndex)._startRenderPage(n.transparency,n.cacheKey)}),t.on("commonobj",([n,i,o])=>{if(this.destroyed||this.commonObjs.has(n))return null;switch(i){case"Font":if("error"in o){const m=o.error;Ht(`Error during font loading: ${m}`),this.commonObjs.resolve(n,m);break}const c=new hS(o),u=this._params.pdfBug&&globalThis.FontInspector?.enabled?(m,v)=>globalThis.FontInspector.fontAdded(m,v):null,h=new bB(c,u,o.extra,o.charProcOperatorList);this.fontLoader.bind(h).catch(()=>t.sendWithPromise("FontFallback",{id:n})).finally(()=>{!h.fontExtraProperties&&h.data&&h.clearData(),this.commonObjs.resolve(n,h)});break;case"CopyLocalImage":const{imageRef:f}=o;se(f,"The imageRef must be defined.");for(const m of l(this,qr).values())for(const[,v]of m.objs)if(v?.ref===f)return v.dataLen?(this.commonObjs.resolve(n,structuredClone(v)),v.dataLen):null;break;case"FontPath":this.commonObjs.resolve(n,new AB(o));break;case"Image":this.commonObjs.resolve(n,o);break;case"Pattern":const p=new dS(o);this.commonObjs.resolve(n,p.getIR());break;default:throw new Error(`Got unknown common object type ${i}`)}return null}),t.on("obj",([n,i,o,c])=>{if(this.destroyed)return;const u=l(this,qr).get(i);if(!u.objs.has(n)){if(u._intentStates.size===0){c?.bitmap?.close();return}switch(o){case"Image":case"Pattern":u.objs.resolve(n,c);break;default:throw new Error(`Got unknown object type ${o}`)}}}),t.on("DocProgress",n=>{this.destroyed||e.onProgress?.({loaded:n.loaded,total:n.total})}),t.on("FetchBinaryData",async n=>{if(this.destroyed)throw new Error("Worker was destroyed.");const i=this[n.type];if(!i)throw new Error(`${n.type} not initialized, see the \`useWorkerFetch\` parameter.`);return i.fetch(n)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&Ht("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:e}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:this._fullReader?.filename??null},e).finally(()=>{this.annotationStorage.resetModified()})}extractPages(t){return this.messageHandler.sendWithPromise("ExtractPages",{pageInfos:t})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const e=t-1,n=l(this,Sf).get(e);if(n)return n;const i=this.messageHandler.sendWithPromise("GetPage",{pageIndex:e}).then(o=>{if(this.destroyed)throw new Error("Transport destroyed");o.refStr&&l(this,Ef).set(o.refStr,t);const c=new v3(e,o,this,this._params.pdfBug);return l(this,qr).set(e,c),c});return l(this,Sf).set(e,i),i}getPageIndex(t){return fS(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}getFieldObjects(){return R(this,Iu,bm).call(this,"GetFieldObjects")}hasJSActions(){return R(this,Iu,bm).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(t,e){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:t,pageIndexesToSkip:e})}getDocJSActions(){return R(this,Iu,bm).call(this,"GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return R(this,Iu,bm).call(this,"GetOptionalContentConfig").then(e=>new QB(e,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",e=l(this,Zo).get(t);if(e)return e;const n=this.messageHandler.sendWithPromise(t,null).then(i=>({info:i[0],metadata:i[1]?new YB(i[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null,hasStructTree:i[2]}));return l(this,Zo).set(t,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const e of l(this,qr).values())if(!e.cleanup())throw new Error(`startCleanup: Page ${e.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),l(this,Zo).clear(),this.filterFactory.destroy(!0),Hm.cleanup()}}cachedPageNumber(t){if(!fS(t))return null;const e=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`;return l(this,Ef).get(e)??null}}Zo=new WeakMap,qr=new WeakMap,Sf=new WeakMap,Ef=new WeakMap,Jo=new WeakMap,Iu=new WeakSet,bm=function(t,e=null){const n=l(this,Zo).get(t);if(n)return n;const i=this.messageHandler.sendWithPromise(t,e);return l(this,Zo).set(t,i),i};var kl;class x3{constructor(t){_(this,kl,null);ct(this,"onContinue",null);ct(this,"onError",null);A(this,kl,t)}get promise(){return l(this,kl).capability.promise}cancel(t=0){l(this,kl).cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=l(this,kl).operatorList;if(!t)return!1;const{annotationCanvasMap:e}=l(this,kl);return t.form||t.canvas&&e?.size>0}}kl=new WeakMap;var Tl,Fu;const Gc=class Gc{constructor({callback:t,params:e,objs:n,commonObjs:i,annotationCanvasMap:o,operatorList:c,pageIndex:u,canvasFactory:h,filterFactory:f,useRequestAnimationFrame:p=!1,pdfBug:m=!1,pageColors:v=null,enableHWA:b=!1,operationsFilter:C=null}){_(this,Tl,null);this.callback=t,this.params=e,this.objs=n,this.commonObjs=i,this.annotationCanvasMap=o,this.operatorListIdx=null,this.operatorList=c,this._pageIndex=u,this.canvasFactory=h,this.filterFactory=f,this._pdfBug=m,this.pageColors=v,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=p===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new x3(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvas,this._canvasContext=e.canvas?null:e.canvasContext,this._enableHWA=b,this._dependencyTracker=e.dependencyTracker,this._operationsFilter=C}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:e}){if(this.cancelled)return;if(this._canvas){if(l(Gc,Fu).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");l(Gc,Fu).add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:n,transform:i,background:o,dependencyTracker:c}=this.params,u=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new _d(u,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:e},this.annotationCanvasMap,this.pageColors,c),this.gfx.beginDrawing({transform:i,viewport:n,transparency:t,background:o}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(t=null,e=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),l(this,Tl)&&(window.cancelAnimationFrame(l(this,Tl)),A(this,Tl,null)),l(Gc,Fu).delete(this._canvas),t||(t=new nE(`Rendering cancelled, page ${this._pageIndex+1}`,e)),this.callback(t),this.task.onError?.(t)}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}this.gfx.dependencyTracker?.growOperationsCount(this.operatorList.fnArray.length),this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?A(this,Tl,window.requestAnimationFrame(()=>{A(this,Tl,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),l(Gc,Fu).delete(this._canvas),this.callback())))}};Tl=new WeakMap,Fu=new WeakMap,_(Gc,Fu,new WeakSet);let _S=Gc;const b3="5.4.530",A3="50cc4adac";var ss,Ou,Cf,Sn,Jg,kf,ta,t0,_l,mr,e0,Ae,PS,RS,MS,zc,LR,tl;const Bi=class Bi{constructor({editor:t=null,uiManager:e=null}){_(this,Ae);_(this,ss,null);_(this,Ou,null);_(this,Cf);_(this,Sn,null);_(this,Jg,!1);_(this,kf,!1);_(this,ta,null);_(this,t0);_(this,_l,null);_(this,mr,null);t?(A(this,kf,!1),A(this,ta,t)):A(this,kf,!0),A(this,mr,t?._uiManager||e),A(this,t0,l(this,mr)._eventBus),A(this,Cf,t?.color?.toUpperCase()||l(this,mr)?.highlightColors.values().next().value||"#FFFF98"),l(Bi,e0)||A(Bi,e0,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return $t(this,"_keyboardManager",new $0([[["Escape","mac+Escape"],Bi.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Bi.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Bi.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Bi.prototype._moveToPrevious],[["Home","mac+Home"],Bi.prototype._moveToBeginning],[["End","mac+End"],Bi.prototype._moveToEnd]]))}renderButton(){const t=A(this,ss,document.createElement("button"));t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.ariaHasPopup="true",l(this,ta)&&(t.ariaControls=`${l(this,ta).id}_colorpicker_dropdown`);const e=l(this,mr)._signal;t.addEventListener("click",R(this,Ae,zc).bind(this),{signal:e}),t.addEventListener("keydown",R(this,Ae,MS).bind(this),{signal:e});const n=A(this,Ou,document.createElement("span"));return n.className="swatch",n.ariaHidden="true",n.style.backgroundColor=l(this,Cf),t.append(n),t}renderMainDropdown(){const t=A(this,Sn,R(this,Ae,PS).call(this));return t.ariaOrientation="horizontal",t.ariaLabelledBy="highlightColorPickerLabel",t}_colorSelectFromKeyboard(t){if(t.target===l(this,ss)){R(this,Ae,zc).call(this,t);return}const e=t.target.getAttribute("data-color");e&&R(this,Ae,RS).call(this,e,t)}_moveToNext(t){if(!l(this,Ae,tl)){R(this,Ae,zc).call(this,t);return}if(t.target===l(this,ss)){l(this,Sn).firstElementChild?.focus();return}t.target.nextSibling?.focus()}_moveToPrevious(t){if(t.target===l(this,Sn)?.firstElementChild||t.target===l(this,ss)){l(this,Ae,tl)&&this._hideDropdownFromKeyboard();return}l(this,Ae,tl)||R(this,Ae,zc).call(this,t),t.target.previousSibling?.focus()}_moveToBeginning(t){if(!l(this,Ae,tl)){R(this,Ae,zc).call(this,t);return}l(this,Sn).firstElementChild?.focus()}_moveToEnd(t){if(!l(this,Ae,tl)){R(this,Ae,zc).call(this,t);return}l(this,Sn).lastElementChild?.focus()}hideDropdown(){l(this,Sn)?.classList.add("hidden"),l(this,ss).ariaExpanded="false",l(this,_l)?.abort(),A(this,_l,null)}_hideDropdownFromKeyboard(){if(!l(this,kf)){if(!l(this,Ae,tl)){l(this,ta)?.unselect();return}this.hideDropdown(),l(this,ss).focus({preventScroll:!0,focusVisible:l(this,Jg)})}}updateColor(t){if(l(this,Ou)&&(l(this,Ou).style.backgroundColor=t),!l(this,Sn))return;const e=l(this,mr).highlightColors.values();for(const n of l(this,Sn).children)n.ariaSelected=e.next().value===t.toUpperCase()}destroy(){l(this,ss)?.remove(),A(this,ss,null),A(this,Ou,null),l(this,Sn)?.remove(),A(this,Sn,null)}};ss=new WeakMap,Ou=new WeakMap,Cf=new WeakMap,Sn=new WeakMap,Jg=new WeakMap,kf=new WeakMap,ta=new WeakMap,t0=new WeakMap,_l=new WeakMap,mr=new WeakMap,e0=new WeakMap,Ae=new WeakSet,PS=function(){const t=document.createElement("div"),e=l(this,mr)._signal;t.addEventListener("contextmenu",Ys,{signal:e}),t.className="dropdown",t.role="listbox",t.ariaMultiSelectable="false",t.ariaOrientation="vertical",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),l(this,ta)&&(t.id=`${l(this,ta).id}_colorpicker_dropdown`);for(const[n,i]of l(this,mr).highlightColors){const o=document.createElement("button");o.tabIndex="0",o.role="option",o.setAttribute("data-color",i),o.title=n,o.setAttribute("data-l10n-id",l(Bi,e0)[n]);const c=document.createElement("span");o.append(c),c.className="swatch",c.style.backgroundColor=i,o.ariaSelected=i===l(this,Cf),o.addEventListener("click",R(this,Ae,RS).bind(this,i),{signal:e}),t.append(o)}return t.addEventListener("keydown",R(this,Ae,MS).bind(this),{signal:e}),t},RS=function(t,e){e.stopPropagation(),l(this,t0).dispatch("switchannotationeditorparams",{source:this,type:ie.HIGHLIGHT_COLOR,value:t}),this.updateColor(t)},MS=function(t){Bi._keyboardManager.exec(this,t)},zc=function(t){if(l(this,Ae,tl)){this.hideDropdown();return}if(A(this,Jg,t.detail===0),l(this,_l)||(A(this,_l,new AbortController),window.addEventListener("pointerdown",R(this,Ae,LR).bind(this),{signal:l(this,mr).combinedSignal(l(this,_l))})),l(this,ss).ariaExpanded="true",l(this,Sn)){l(this,Sn).classList.remove("hidden");return}const e=A(this,Sn,R(this,Ae,PS).call(this));l(this,ss).append(e)},LR=function(t){l(this,Sn)?.contains(t.target)||this.hideDropdown()},tl=function(){return l(this,Sn)&&!l(this,Sn).classList.contains("hidden")},_(Bi,e0,null);let yw=Bi;var Qr,n0,Tf,i0;const Xc=class Xc{constructor(t){_(this,Qr,null);_(this,n0,null);_(this,Tf,null);A(this,n0,t),A(this,Tf,t._uiManager),l(Xc,i0)||A(Xc,i0,Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"}))}renderButton(){if(l(this,Qr))return l(this,Qr);const{editorType:t,colorType:e,color:n}=l(this,n0),i=A(this,Qr,document.createElement("input"));return i.type="color",i.value=n||"#000000",i.className="basicColorPicker",i.tabIndex=0,i.setAttribute("data-l10n-id",l(Xc,i0)[t]),i.addEventListener("input",()=>{l(this,Tf).updateParams(e,i.value)},{signal:l(this,Tf)._signal}),i}update(t){l(this,Qr)&&(l(this,Qr).value=t)}destroy(){l(this,Qr)?.remove(),A(this,Qr,null)}hideDropdown(){}};Qr=new WeakMap,n0=new WeakMap,Tf=new WeakMap,i0=new WeakMap,_(Xc,i0,null);let vw=Xc;function __(r){return Math.floor(Math.max(0,Math.min(1,r))*255).toString(16).padStart(2,"0")}function em(r){return Math.max(0,Math.min(255,255*r))}class P_{static CMYK_G([t,e,n,i]){return["G",1-Math.min(1,.3*t+.59*n+.11*e+i)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=em(t),[t,t,t]}static G_HTML([t]){const e=__(t);return`#${e}${e}${e}`}static RGB_G([t,e,n]){return["G",.3*t+.59*e+.11*n]}static RGB_rgb(t){return t.map(em)}static RGB_HTML(t){return`#${t.map(__).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,e,n,i]){return["RGB",1-Math.min(1,t+i),1-Math.min(1,n+i),1-Math.min(1,e+i)]}static CMYK_rgb([t,e,n,i]){return[em(1-Math.min(1,t+i)),em(1-Math.min(1,n+i)),em(1-Math.min(1,e+i))]}static CMYK_HTML(t){const e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK([t,e,n]){const i=1-t,o=1-e,c=1-n,u=Math.min(i,o,c);return["CMYK",i,o,c,u]}}class S3{create(t,e,n=!1){if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");const i=this._createSVG("svg:svg");return i.setAttribute("version","1.1"),n||(i.setAttribute("width",`${t}px`),i.setAttribute("height",`${e}px`)),i.setAttribute("preserveAspectRatio","none"),i.setAttribute("viewBox",`0 0 ${t} ${e}`),i}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){Te("Abstract method `_createSVG` called.")}}class ww extends S3{_createSVG(t){return document.createElementNS(To,t)}}const E3=9,fh=new WeakSet,C3=new Date().getTimezoneOffset()*60*1e3;class xA{static create(t){switch(t.data.annotationType){case dn.LINK:return new aE(t);case dn.TEXT:return new T3(t);case dn.WIDGET:switch(t.data.fieldType){case"Tx":return new _3(t);case"Btn":return t.data.radioButton?new OR(t):t.data.checkBox?new R3(t):new M3(t);case"Ch":return new D3(t);case"Sig":return new P3(t)}return new yh(t);case dn.POPUP:return new NS(t);case dn.FREETEXT:return new zR(t);case dn.LINE:return new L3(t);case dn.SQUARE:return new I3(t);case dn.CIRCLE:return new F3(t);case dn.POLYLINE:return new HR(t);case dn.CARET:return new j3(t);case dn.INK:return new lE(t);case dn.POLYGON:return new O3(t);case dn.HIGHLIGHT:return new $R(t);case dn.UNDERLINE:return new B3(t);case dn.SQUIGGLY:return new U3(t);case dn.STRIKEOUT:return new V3(t);case dn.STAMP:return new WR(t);case dn.FILEATTACHMENT:return new z3(t);default:return new Ke(t)}}}var ju,_f,$s,s0,DS;const gE=class gE{constructor(t,{isRenderable:e=!1,ignoreBorder:n=!1,createQuadrilaterals:i=!1}={}){_(this,s0);_(this,ju,null);_(this,_f,!1);_(this,$s,null);this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableComment=t.enableComment,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,this.hasOwnCommentButton=!1,e&&(this.contentElement=this.container=this._createContainer(n)),i&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:t,richText:e}){return!!(t?.str||e?.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return gE._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){const{data:t}=this,e=this.annotationStorage?.getEditor(t.id);return e?e.getData():t}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){const t=this.annotationStorage?.getEditor(this.data.id);if(t)return t.commentButtonPositionInPage;const{quadPoints:e,inkLists:n,rect:i}=this.data;let o=-1/0,c=-1/0;if(e?.length>=8){for(let u=0;u<e.length;u+=8)e[u+1]>c?(c=e[u+1],o=e[u+2]):e[u+1]===c&&(o=Math.max(o,e[u+2]));return[o,c]}if(n?.length>=1){for(const u of n)for(let h=0,f=u.length;h<f;h+=2)u[h+1]>c?(c=u[h+1],o=u[h]):u[h+1]===c&&(o=Math.max(o,u[h]));if(o!==1/0)return[o,c]}return i?[i[2],i[3]]:null}_normalizePoint(t){const{page:{view:e},viewport:{rawDims:{pageWidth:n,pageHeight:i,pageX:o,pageY:c}}}=this.parent;return t[1]=e[3]-t[1]+e[1],t[0]=100*(t[0]-o)/n,t[1]=100*(t[1]-c)/i,t}get commentText(){const{data:t}=this;return this.annotationStorage.getRawValue(`${Um}${t.id}`)?.popup?.contents||t.contentsObj?.str||""}set commentText(t){const{data:e}=this,n={deleted:!t,contents:t||""};this.annotationStorage.updateEditor(e.id,{popup:n})||this.annotationStorage.setValue(`${Um}${e.id}`,{id:e.id,annotationType:e.annotationType,pageIndex:this.parent.page._pageIndex,popup:n,popupRef:e.popupRef,modificationDate:new Date}),t||this.removePopup()}removePopup(){(l(this,$s)?.popup||this.popup)?.remove(),A(this,$s,this.popup=null)}updateEdited(t){if(!this.container)return;t.rect&&(l(this,ju)||A(this,ju,{rect:this.data.rect.slice(0)}));const{rect:e,popup:n}=t;e&&R(this,s0,DS).call(this,e);let i=l(this,$s)?.popup||this.popup;!i&&n?.text&&(this._createPopup(n),i=l(this,$s).popup),i&&(i.updateEdited(t),n?.deleted&&(i.remove(),A(this,$s,null),this.popup=null))}resetEdited(){l(this,ju)&&(R(this,s0,DS).call(this,l(this,ju).rect),l(this,$s)?.popup.resetEdited(),A(this,ju,null))}_createContainer(t){const{data:e,parent:{page:n,viewport:i}}=this,o=document.createElement("section");o.setAttribute("data-annotation-id",e.id),!(this instanceof yh)&&!(this instanceof aE)&&(o.tabIndex=0);const{style:c}=o;if(c.zIndex=this.parent.zIndex,this.parent.zIndex+=2,e.alternativeText&&(o.title=e.alternativeText),e.noRotate&&o.classList.add("norotate"),!e.rect||this instanceof NS){const{rotation:E}=e;return!e.hasOwnCanvas&&E!==0&&this.setRotation(E,o),o}const{width:u,height:h}=this;if(!t&&e.borderStyle.width>0){c.borderWidth=`${e.borderStyle.width}px`;const E=e.borderStyle.horizontalCornerRadius,T=e.borderStyle.verticalCornerRadius;if(E>0||T>0){const N=`calc(${E}px * var(--total-scale-factor)) / calc(${T}px * var(--total-scale-factor))`;c.borderRadius=N}else if(this instanceof OR){const N=`calc(${u}px * var(--total-scale-factor)) / calc(${h}px * var(--total-scale-factor))`;c.borderRadius=N}switch(e.borderStyle.style){case cd.SOLID:c.borderStyle="solid";break;case cd.DASHED:c.borderStyle="dashed";break;case cd.BEVELED:Ht("Unimplemented border style: beveled");break;case cd.INSET:Ht("Unimplemented border style: inset");break;case cd.UNDERLINE:c.borderBottomStyle="solid";break}const P=e.borderColor||null;P?(A(this,_f,!0),c.borderColor=vt.makeHexColor(P[0]|0,P[1]|0,P[2]|0)):c.borderWidth=0}const f=vt.normalizeRect([e.rect[0],n.view[3]-e.rect[1]+n.view[1],e.rect[2],n.view[3]-e.rect[3]+n.view[1]]),{pageWidth:p,pageHeight:m,pageX:v,pageY:b}=i.rawDims;c.left=`${100*(f[0]-v)/p}%`,c.top=`${100*(f[1]-b)/m}%`;const{rotation:C}=e;return e.hasOwnCanvas||C===0?(c.width=`${100*u/p}%`,c.height=`${100*h/m}%`):this.setRotation(C,o),o}setRotation(t,e=this.container){if(!this.data.rect)return;const{pageWidth:n,pageHeight:i}=this.parent.viewport.rawDims;let{width:o,height:c}=this;t%180!==0&&([o,c]=[c,o]),e.style.width=`${100*o/n}%`,e.style.height=`${100*c/i}%`,e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(e,n,i)=>{const o=i.detail[e],c=o[0],u=o.slice(1);i.target.style[n]=P_[`${c}_HTML`](u),this.annotationStorage.setValue(this.data.id,{[n]:P_[`${c}_rgb`](u)})};return $t(this,"_commonActions",{display:e=>{const{display:n}=e.detail,i=n%2===1;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:i,noPrint:n===1||n===2})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:n}=e.detail;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:n,noView:n})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:e=>{const n=e.detail.rotation;this.setRotation(n),this.annotationStorage.setValue(this.data.id,{rotation:n})}})}_dispatchEventFromSandbox(t,e){const n=this._commonActions;for(const i of Object.keys(e.detail))(t[i]||n[i])?.(e)}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const n=this._commonActions;for(const[i,o]of Object.entries(e)){const c=n[i];if(c){const u={detail:{[i]:o},target:t};c(u),delete e[i]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[e,n,i,o]=this.data.rect.map(E=>Math.fround(E));if(t.length===8){const[E,T,P,N]=t.subarray(2,6);if(i===E&&o===T&&e===P&&n===N)return}const{style:c}=this.container;let u;if(l(this,_f)){const{borderColor:E,borderWidth:T}=c;c.borderWidth=0,u=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${E}" stroke-width="${T}">`],this.container.classList.add("hasBorder")}const h=i-e,f=o-n,{svgFactory:p}=this,m=p.createElement("svg");m.classList.add("quadrilateralsContainer"),m.setAttribute("width",0),m.setAttribute("height",0),m.role="none";const v=p.createElement("defs");m.append(v);const b=p.createElement("clipPath"),C=`clippath_${this.data.id}`;b.setAttribute("id",C),b.setAttribute("clipPathUnits","objectBoundingBox"),v.append(b);for(let E=2,T=t.length;E<T;E+=8){const P=t[E],N=t[E+1],L=t[E+2],F=t[E+3],O=p.createElement("rect"),z=(L-e)/h,K=(o-N)/f,Y=(P-L)/h,nt=(N-F)/f;O.setAttribute("x",z),O.setAttribute("y",K),O.setAttribute("width",Y),O.setAttribute("height",nt),b.append(O),u?.push(`<rect vector-effect="non-scaling-stroke" x="${z}" y="${K}" width="${Y}" height="${nt}"/>`)}l(this,_f)&&(u.push("</g></svg>')"),c.backgroundImage=u.join("")),this.container.append(m),this.container.style.clipPath=`url(#${C})`}_createPopup(t=null){const{data:e}=this;let n,i;t?(n={str:t.text},i=t.date):(n=e.contentsObj,i=e.modificationDate),A(this,$s,new NS({data:{color:e.color,titleObj:e.titleObj,modificationDate:i,contentsObj:n,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]}))}get hasPopupElement(){return!!(l(this,$s)||this.popup||this.data.popupRef)}get extraPopupElement(){return l(this,$s)}render(){Te("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,e=null){const n=[];if(this._fieldObjects){const i=this._fieldObjects[t];if(i)for(const{page:o,id:c,exportValues:u}of i){if(o===-1||c===e)continue;const h=typeof u=="string"?u:null,f=document.querySelector(`[data-element-id="${c}"]`);if(f&&!fh.has(f)){Ht(`_getElementsByName - element not allowed: ${c}`);continue}n.push({id:c,exportValue:h,domElement:f})}return n}for(const i of document.getElementsByName(t)){const{exportValue:o}=i,c=i.getAttribute("data-element-id");c!==e&&fh.has(i)&&n.push({id:c,exportValue:o,domElement:i})}return n}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const e of t)e.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:e}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:t,editId:e,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}};ju=new WeakMap,_f=new WeakMap,$s=new WeakMap,s0=new WeakSet,DS=function(t){const{container:{style:e},data:{rect:n,rotation:i},parent:{viewport:{rawDims:{pageWidth:o,pageHeight:c,pageX:u,pageY:h}}}}=this;n?.splice(0,4,...t),e.left=`${100*(t[0]-u)/o}%`,e.top=`${100*(c-t[3]+h)/c}%`,i===0?(e.width=`${100*(t[2]-t[0])/o}%`,e.height=`${100*(t[3]-t[1])/c}%`):this.setRotation(i)};let Ke=gE;class k3 extends Ke{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.editor=t.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){const{editor:t}=this;t.hasComment&&this._createPopup(t.comment)}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(t){this.editor.comment=t,t||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.parent.removeAnnotation(this.data.id),this.container.remove(),this.container=null,this.removePopup()}}var ws,Hc,IR,FR;class aE extends Ke{constructor(e,n=null){super(e,{isRenderable:!0,ignoreBorder:!!n?.ignoreBorder,createQuadrilaterals:!0});_(this,ws);this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:n}=this,i=document.createElement("a");i.setAttribute("data-element-id",e.id);let o=!1;return e.url?(n.addLinkAttributes(i,e.url,e.newWindow),o=!0):e.action?(this._bindNamedAction(i,e.action,e.overlaidText),o=!0):e.attachment?(R(this,ws,IR).call(this,i,e.attachment,e.overlaidText,e.attachmentDest),o=!0):e.setOCGState?(R(this,ws,FR).call(this,i,e.setOCGState,e.overlaidText),o=!0):e.dest?(this._bindLink(i,e.dest,e.overlaidText),o=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(i,e),o=!0),e.resetForm?(this._bindResetFormAction(i,e.resetForm),o=!0):this.isTooltipOnly&&!o&&(this._bindLink(i,""),o=!0)),this.container.classList.add("linkAnnotation"),o&&(this.contentElement=i,this.container.append(i)),this.container}_bindLink(e,n,i=""){e.href=this.linkService.getDestinationHash(n),e.onclick=()=>(n&&this.linkService.goToDestination(n),!1),(n||n==="")&&R(this,ws,Hc).call(this),i&&(e.title=i)}_bindNamedAction(e,n,i=""){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(n),!1),i&&(e.title=i),R(this,ws,Hc).call(this)}_bindJSAction(e,n){e.href=this.linkService.getAnchorUrl("");const i=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const o of Object.keys(n.actions)){const c=i.get(o);c&&(e[c]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n.id,name:o}}),!1))}n.overlaidText&&(e.title=n.overlaidText),e.onclick||(e.onclick=()=>!1),R(this,ws,Hc).call(this)}_bindResetFormAction(e,n){const i=e.onclick;if(i||(e.href=this.linkService.getAnchorUrl("")),R(this,ws,Hc).call(this),!this._fieldObjects){Ht('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),i||(e.onclick=()=>!1);return}e.onclick=()=>{i?.();const{fields:o,refs:c,include:u}=n,h=[];if(o.length!==0||c.length!==0){const m=new Set(c);for(const v of o){const b=this._fieldObjects[v]||[];for(const{id:C}of b)m.add(C)}for(const v of Object.values(this._fieldObjects))for(const b of v)m.has(b.id)===u&&h.push(b)}else for(const m of Object.values(this._fieldObjects))h.push(...m);const f=this.annotationStorage,p=[];for(const m of h){const{id:v}=m;switch(p.push(v),m.type){case"text":{const C=m.defaultValue||"";f.setValue(v,{value:C});break}case"checkbox":case"radiobutton":{const C=m.defaultValue===m.exportValues;f.setValue(v,{value:C});break}case"combobox":case"listbox":{const C=m.defaultValue||"";f.setValue(v,{value:C});break}default:continue}const b=document.querySelector(`[data-element-id="${v}"]`);if(b){if(!fh.has(b)){Ht(`_bindResetFormAction - element not allowed: ${v}`);continue}}else continue;b.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:p,name:"ResetForm"}}),!1}}}ws=new WeakSet,Hc=function(){this.container.setAttribute("data-internal-link","")},IR=function(e,n,i="",o=null){e.href=this.linkService.getAnchorUrl(""),n.description?e.title=n.description:i&&(e.title=i),e.onclick=()=>(this.downloadManager?.openOrDownloadData(n.content,n.filename,o),!1),R(this,ws,Hc).call(this)},FR=function(e,n,i=""){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(n),!1),i&&(e.title=i),R(this,ws,Hc).call(this)};class T3 extends Ke{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(t),this.container}}class yh extends Ke{render(){return this.container}showElementAndHideCanvas(t){this.data.hasOwnCanvas&&(t.previousSibling?.nodeName==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return Cn.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,e,n,i,o){n.includes("mouse")?t.addEventListener(n,c=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:o(c),shift:c.shiftKey,modifier:this._getKeyModifier(c)}})}):t.addEventListener(n,c=>{if(n==="blur"){if(!e.focused||!c.relatedTarget)return;e.focused=!1}else if(n==="focus"){if(e.focused)return;e.focused=!0}o&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:o(c)}})})}_setEventListeners(t,e,n,i){for(const[o,c]of n)(c==="Action"||this.data.actions?.[c])&&((c==="Focus"||c==="Blur")&&(e||(e={focused:!1})),this._setEventListener(t,e,o,c,i),c==="Focus"&&!this.data.actions?.Blur?this._setEventListener(t,e,"blur","Blur",null):c==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(t,e,"focus","Focus",null))}_setBackgroundColor(t){const e=this.data.backgroundColor||null;t.style.backgroundColor=e===null?"transparent":vt.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){const e=["left","center","right"],{fontColor:n}=this.data.defaultAppearanceData,i=this.data.defaultAppearanceData.fontSize||E3,o=t.style;let c;const u=2,h=f=>Math.round(10*f)/10;if(this.data.multiLine){const f=Math.abs(this.data.rect[3]-this.data.rect[1]-u),p=Math.round(f/(dA*i))||1,m=f/p;c=Math.min(i,h(m/dA))}else{const f=Math.abs(this.data.rect[3]-this.data.rect[1]-u);c=Math.min(i,h(f/dA))}o.fontSize=`calc(${c}px * var(--total-scale-factor))`,o.color=vt.makeHexColor(n[0],n[1],n[2]),this.data.textAlignment!==null&&(o.textAlign=e[this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}}class _3 extends yh{constructor(t){const e=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:e})}setPropertyOnSiblings(t,e,n,i){const o=this.annotationStorage;for(const c of this._getElementsByName(t.name,t.id))c.domElement&&(c.domElement[e]=n),o.setValue(c.id,{[i]:n})}render(){const t=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let n=null;if(this.renderForms){const i=t.getValue(e,{value:this.data.fieldValue});let o=i.value||"";const c=t.getValue(e,{charLimit:this.data.maxLen}).charLimit;c&&o.length>c&&(o=o.slice(0,c));let u=i.formattedValue||this.data.textContent?.join(`
`)||null;u&&this.data.comb&&(u=u.replaceAll(/\s+/g,""));const h={userValue:o,formattedValue:u,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(n=document.createElement("textarea"),n.textContent=u??o,this.data.doNotScroll&&(n.style.overflowY="hidden")):(n=document.createElement("input"),n.type=this.data.password?"password":"text",n.setAttribute("value",u??o),this.data.doNotScroll&&(n.style.overflowX="hidden")),this.data.hasOwnCanvas&&(n.hidden=!0),fh.add(n),this.contentElement=n,n.setAttribute("data-element-id",e),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=0;const{datetimeFormat:f,datetimeType:p,timeStep:m}=this.data,v=!!p&&this.enableScripting;f&&(n.title=f),this._setRequired(n,this.data.required),c&&(n.maxLength=c),n.addEventListener("input",C=>{t.setValue(e,{value:C.target.value}),this.setPropertyOnSiblings(n,"value",C.target.value,"value"),h.formattedValue=null}),n.addEventListener("resetform",C=>{const E=this.data.defaultFieldValue??"";n.value=h.userValue=E,h.formattedValue=null});let b=C=>{const{formattedValue:E}=h;E!=null&&(C.target.value=E),C.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){n.addEventListener("focus",E=>{if(h.focused)return;const{target:T}=E;if(v&&(T.type=p,m&&(T.step=m)),h.userValue){const P=h.userValue;if(v)if(p==="time"){const N=new Date(P),L=[N.getHours(),N.getMinutes(),N.getSeconds()];T.value=L.map(F=>F.toString().padStart(2,"0")).join(":")}else T.value=new Date(P-C3).toISOString().split(p==="date"?"T":".",1)[0];else T.value=P}h.lastCommittedValue=T.value,h.commitKey=1,this.data.actions?.Focus||(h.focused=!0)}),n.addEventListener("updatefromsandbox",E=>{this.showElementAndHideCanvas(E.target);const T={value(P){h.userValue=P.detail.value??"",v||t.setValue(e,{value:h.userValue.toString()}),P.target.value=h.userValue},formattedValue(P){const{formattedValue:N}=P.detail;h.formattedValue=N,N!=null&&P.target!==document.activeElement&&(P.target.value=N);const L={formattedValue:N};v&&(L.value=N),t.setValue(e,L)},selRange(P){P.target.setSelectionRange(...P.detail.selRange)},charLimit:P=>{const{charLimit:N}=P.detail,{target:L}=P;if(N===0){L.removeAttribute("maxLength");return}L.setAttribute("maxLength",N);let F=h.userValue;!F||F.length<=N||(F=F.slice(0,N),L.value=h.userValue=F,t.setValue(e,{value:F}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:F,willCommit:!0,commitKey:1,selStart:L.selectionStart,selEnd:L.selectionEnd}}))}};this._dispatchEventFromSandbox(T,E)}),n.addEventListener("keydown",E=>{h.commitKey=1;let T=-1;if(E.key==="Escape"?T=0:E.key==="Enter"&&!this.data.multiLine?T=2:E.key==="Tab"&&(h.commitKey=3),T===-1)return;const{value:P}=E.target;h.lastCommittedValue!==P&&(h.lastCommittedValue=P,h.userValue=P,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:P,willCommit:!0,commitKey:T,selStart:E.target.selectionStart,selEnd:E.target.selectionEnd}}))});const C=b;b=null,n.addEventListener("blur",E=>{if(!h.focused||!E.relatedTarget)return;this.data.actions?.Blur||(h.focused=!1);const{target:T}=E;let{value:P}=T;if(v){if(P&&p==="time"){const N=P.split(":").map(L=>parseInt(L,10));P=new Date(2e3,0,1,N[0],N[1],N[2]||0).valueOf(),T.step=""}else P.includes("T")||(P=`${P}T00:00`),P=new Date(P).valueOf();T.type="text"}h.userValue=P,h.lastCommittedValue!==P&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:P,willCommit:!0,commitKey:h.commitKey,selStart:E.target.selectionStart,selEnd:E.target.selectionEnd}}),C(E)}),this.data.actions?.Keystroke&&n.addEventListener("beforeinput",E=>{h.lastCommittedValue=null;const{data:T,target:P}=E,{value:N,selectionStart:L,selectionEnd:F}=P;let O=L,z=F;switch(E.inputType){case"deleteWordBackward":{const K=N.substring(0,L).match(/\w*[^\w]*$/);K&&(O-=K[0].length);break}case"deleteWordForward":{const K=N.substring(L).match(/^[^\w]*\w*/);K&&(z+=K[0].length);break}case"deleteContentBackward":L===F&&(O-=1);break;case"deleteContentForward":L===F&&(z+=1);break}E.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:N,change:T||"",willCommit:!1,selStart:O,selEnd:z}})}),this._setEventListeners(n,h,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],E=>E.target.value)}if(b&&n.addEventListener("blur",b),this.data.comb){const E=(this.data.rect[2]-this.data.rect[0])/c;n.classList.add("comb"),n.style.letterSpacing=`calc(${E}px * var(--total-scale-factor) - 1ch)`}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell",this.data.hasOwnCanvas&&(n.hidden=!0);return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class P3 extends yh{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class R3 extends yh{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,e=this.data,n=e.id;let i=t.getValue(n,{value:e.exportValue===e.fieldValue}).value;typeof i=="string"&&(i=i!=="Off",t.setValue(n,{value:i})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const o=document.createElement("input");return fh.add(o),o.setAttribute("data-element-id",n),o.disabled=e.readOnly,this._setRequired(o,this.data.required),o.type="checkbox",o.name=e.fieldName,i&&o.setAttribute("checked",!0),o.setAttribute("exportValue",e.exportValue),o.tabIndex=0,o.addEventListener("change",c=>{const{name:u,checked:h}=c.target;for(const f of this._getElementsByName(u,n)){const p=h&&f.exportValue===e.exportValue;f.domElement&&(f.domElement.checked=p),t.setValue(f.id,{value:p})}t.setValue(n,{value:h})}),o.addEventListener("resetform",c=>{const u=e.defaultFieldValue||"Off";c.target.checked=u===e.exportValue}),this.enableScripting&&this.hasJSActions&&(o.addEventListener("updatefromsandbox",c=>{const u={value(h){h.target.checked=h.detail.value!=="Off",t.setValue(n,{value:h.target.checked})}};this._dispatchEventFromSandbox(u,c)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],c=>c.target.checked)),this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class OR extends yh{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,e=this.data,n=e.id;let i=t.getValue(n,{value:e.fieldValue===e.buttonValue}).value;if(typeof i=="string"&&(i=i!==e.buttonValue,t.setValue(n,{value:i})),i)for(const c of this._getElementsByName(e.fieldName,n))t.setValue(c.id,{value:!1});const o=document.createElement("input");if(fh.add(o),o.setAttribute("data-element-id",n),o.disabled=e.readOnly,this._setRequired(o,this.data.required),o.type="radio",o.name=e.fieldName,i&&o.setAttribute("checked",!0),o.tabIndex=0,o.addEventListener("change",c=>{const{name:u,checked:h}=c.target;for(const f of this._getElementsByName(u,n))t.setValue(f.id,{value:!1});t.setValue(n,{value:h})}),o.addEventListener("resetform",c=>{const u=e.defaultFieldValue;c.target.checked=u!=null&&u===e.buttonValue}),this.enableScripting&&this.hasJSActions){const c=e.buttonValue;o.addEventListener("updatefromsandbox",u=>{const h={value:f=>{const p=c===f.detail.value;for(const m of this._getElementsByName(f.target.name)){const v=p&&m.id===n;m.domElement&&(m.domElement.checked=v),t.setValue(m.id,{value:v})}}};this._dispatchEventFromSandbox(h,u)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],u=>u.target.checked)}return this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class M3 extends aE{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const e=t.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",n=>{this._dispatchEventFromSandbox({},n)})),t}}class D3 extends yh{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,e=this.data.id,n=t.getValue(e,{value:this.data.fieldValue}),i=document.createElement("select");fh.add(i),i.setAttribute("data-element-id",e),i.disabled=this.data.readOnly,this._setRequired(i,this.data.required),i.name=this.data.fieldName,i.tabIndex=0;let o=this.data.combo&&this.data.options.length>0;this.data.combo||(i.size=this.data.options.length,this.data.multiSelect&&(i.multiple=!0)),i.addEventListener("resetform",p=>{const m=this.data.defaultFieldValue;for(const v of i.options)v.selected=v.value===m});for(const p of this.data.options){const m=document.createElement("option");m.textContent=p.displayValue,m.value=p.exportValue,n.value.includes(p.exportValue)&&(m.setAttribute("selected",!0),o=!1),i.append(m)}let c=null;if(o){const p=document.createElement("option");p.value=" ",p.setAttribute("hidden",!0),p.setAttribute("selected",!0),i.prepend(p),c=()=>{p.remove(),i.removeEventListener("input",c),c=null},i.addEventListener("input",c)}const u=p=>{const m=p?"value":"textContent",{options:v,multiple:b}=i;return b?Array.prototype.filter.call(v,C=>C.selected).map(C=>C[m]):v.selectedIndex===-1?null:v[v.selectedIndex][m]};let h=u(!1);const f=p=>{const m=p.target.options;return Array.prototype.map.call(m,v=>({displayValue:v.textContent,exportValue:v.value}))};return this.enableScripting&&this.hasJSActions?(i.addEventListener("updatefromsandbox",p=>{const m={value(v){c?.();const b=v.detail.value,C=new Set(Array.isArray(b)?b:[b]);for(const E of i.options)E.selected=C.has(E.value);t.setValue(e,{value:u(!0)}),h=u(!1)},multipleSelection(v){i.multiple=!0},remove(v){const b=i.options,C=v.detail.remove;b[C].selected=!1,i.remove(C),b.length>0&&Array.prototype.findIndex.call(b,T=>T.selected)===-1&&(b[0].selected=!0),t.setValue(e,{value:u(!0),items:f(v)}),h=u(!1)},clear(v){for(;i.length!==0;)i.remove(0);t.setValue(e,{value:null,items:[]}),h=u(!1)},insert(v){const{index:b,displayValue:C,exportValue:E}=v.detail.insert,T=i.children[b],P=document.createElement("option");P.textContent=C,P.value=E,T?T.before(P):i.append(P),t.setValue(e,{value:u(!0),items:f(v)}),h=u(!1)},items(v){const{items:b}=v.detail;for(;i.length!==0;)i.remove(0);for(const C of b){const{displayValue:E,exportValue:T}=C,P=document.createElement("option");P.textContent=E,P.value=T,i.append(P)}i.options.length>0&&(i.options[0].selected=!0),t.setValue(e,{value:u(!0),items:f(v)}),h=u(!1)},indices(v){const b=new Set(v.detail.indices);for(const C of v.target.options)C.selected=b.has(C.index);t.setValue(e,{value:u(!0)}),h=u(!1)},editable(v){v.target.disabled=!v.detail.editable}};this._dispatchEventFromSandbox(m,p)}),i.addEventListener("input",p=>{const m=u(!0),v=u(!1);t.setValue(e,{value:m}),p.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:h,change:v,changeEx:m,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(i,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],p=>p.target.value)):i.addEventListener("input",function(p){t.setValue(e,{value:u(!0)})}),this.data.combo&&this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}var r0,LS;class NS extends Ke{constructor(e){const{data:n,elements:i,parent:o}=e,c=!!o._commentManager;super(e,{isRenderable:!c&&Ke._hasPopupData(n)});_(this,r0);if(this.elements=i,c&&Ke._hasPopupData(n)){const u=this.popup=R(this,r0,LS).call(this);for(const h of i)h.popup=u}else this.popup=null}render(){const{container:e}=this;e.classList.add("popupAnnotation"),e.role="comment";const n=this.popup=R(this,r0,LS).call(this),i=[];for(const o of this.elements)o.popup=n,o.container.ariaHasPopup="dialog",i.push(o.data.id),o.addHighlightArea();return this.container.setAttribute("aria-controls",i.map(o=>`${Ad}${o}`).join(",")),this.container}}r0=new WeakSet,LS=function(){return new N3({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})};var rs,Pl,Fw,Ow,Pf,Rf,Ze,Zr,Rl,Bu,Mf,Df,Jr,os,ea,na,Je,ia,Ml,o0,sa,Nf,Uu,Dl,Rn,Nl,qt,Iv,IS,FS,OS,Fv,jS,jR,BR,UR,VR,Ov,jv,BS;class N3{constructor({container:t,color:e,elements:n,titleObj:i,modificationDate:o,contentsObj:c,richText:u,parent:h,rect:f,parentRect:p,open:m,commentManager:v=null}){_(this,qt);_(this,rs,null);_(this,Pl,R(this,qt,UR).bind(this));_(this,Fw,R(this,qt,BS).bind(this));_(this,Ow,R(this,qt,jv).bind(this));_(this,Pf,R(this,qt,Ov).bind(this));_(this,Rf,null);_(this,Ze,null);_(this,Zr,null);_(this,Rl,null);_(this,Bu,null);_(this,Mf,null);_(this,Df,null);_(this,Jr,!1);_(this,os,null);_(this,ea,null);_(this,na,null);_(this,Je,null);_(this,ia,null);_(this,Ml,null);_(this,o0,null);_(this,sa,null);_(this,Nf,null);_(this,Uu,null);_(this,Dl,!1);_(this,Rn,null);_(this,Nl,null);A(this,Ze,t),A(this,Nf,i),A(this,Zr,c),A(this,sa,u),A(this,Mf,h),A(this,Rf,e),A(this,o0,f),A(this,Df,p),A(this,Bu,n),A(this,rs,v),A(this,Rn,n[0]),A(this,Rl,hw.toDateObject(o)),this.trigger=n.flatMap(b=>b.getElementsToTriggerPopup()),v||(R(this,qt,Iv).call(this),l(this,Ze).hidden=!0,m&&R(this,qt,Ov).call(this))}renderCommentButton(){if(l(this,Je)){l(this,Je).parentNode||l(this,Rn).container.after(l(this,Je));return}if(l(this,ia)||R(this,qt,IS).call(this),!l(this,ia))return;const{signal:t}=A(this,ea,new AbortController),e=l(this,Rn).hasOwnCommentButton,n=()=>{l(this,rs).toggleCommentPopup(this,!0,void 0,!e)},i=()=>{l(this,rs).toggleCommentPopup(this,!1,!0,!e)},o=()=>{l(this,rs).toggleCommentPopup(this,!1,!1)};if(e){A(this,Je,l(this,Rn).container);for(const c of this.trigger)c.ariaHasPopup="dialog",c.ariaControls="commentPopup",c.addEventListener("keydown",l(this,Pl),{signal:t}),c.addEventListener("click",n,{signal:t}),c.addEventListener("pointerenter",i,{signal:t}),c.addEventListener("pointerleave",o,{signal:t}),c.classList.add("popupTriggerArea")}else{const c=A(this,Je,document.createElement("button"));c.className="annotationCommentButton";const u=l(this,Rn).container;c.style.zIndex=u.style.zIndex+1,c.tabIndex=0,c.ariaHasPopup="dialog",c.ariaControls="commentPopup",c.setAttribute("data-l10n-id","pdfjs-show-comment-button"),R(this,qt,OS).call(this),R(this,qt,FS).call(this),c.addEventListener("keydown",l(this,Pl),{signal:t}),c.addEventListener("click",n,{signal:t}),c.addEventListener("pointerenter",i,{signal:t}),c.addEventListener("pointerleave",o,{signal:t}),u.after(c)}}get commentButtonColor(){const{color:t,opacity:e}=l(this,Rn).commentData;return t?l(this,Mf)._commentManager.makeCommentColor(t,e):null}focusCommentButton(){setTimeout(()=>{l(this,Je)?.focus()},0)}getData(){const{richText:t,color:e,opacity:n,creationDate:i,modificationDate:o}=l(this,Rn).commentData;return{contentsObj:{str:this.comment},richText:t,color:e,opacity:n,creationDate:i,modificationDate:o}}get elementBeforePopup(){return l(this,Je)}get comment(){return l(this,Nl)||A(this,Nl,l(this,Rn).commentText),l(this,Nl)}set comment(t){t!==this.comment&&(l(this,Rn).commentText=A(this,Nl,t))}focus(){l(this,Rn).container?.focus()}get parentBoundingClientRect(){return l(this,Rn).layer.getBoundingClientRect()}setCommentButtonStates({selected:t,hasPopup:e}){l(this,Je)&&(l(this,Je).classList.toggle("selected",t),l(this,Je).ariaExpanded=e)}setSelectedCommentButton(t){l(this,Je).classList.toggle("selected",t)}get commentPopupPosition(){if(l(this,Ml))return l(this,Ml);const{x:t,y:e,height:n}=l(this,Je).getBoundingClientRect(),{x:i,y:o,width:c,height:u}=l(this,Rn).layer.getBoundingClientRect();return[(t-i)/c,(e+n-o)/u]}set commentPopupPosition(t){A(this,Ml,t)}hasDefaultPopupPosition(){return l(this,Ml)===null}get commentButtonPosition(){return l(this,ia)}get commentButtonWidth(){return l(this,Je).getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(t){const[e,n]=l(this,Ml)||this.commentButtonPosition.map(f=>f/100),i=this.parentBoundingClientRect,{x:o,y:c,width:u,height:h}=i;l(this,rs).showDialog(null,this,o+e*u,c+n*h,{...t,parentDimensions:i})}render(){if(l(this,os))return;const t=A(this,os,document.createElement("div"));if(t.className="popup",l(this,Rf)){const n=t.style.outlineColor=vt.makeHexColor(...l(this,Rf));t.style.backgroundColor=`color-mix(in srgb, ${n} 30%, white)`}const e=document.createElement("span");if(e.className="header",l(this,Nf)?.str){const n=document.createElement("span");n.className="title",e.append(n),{dir:n.dir,str:n.textContent}=l(this,Nf)}if(t.append(e),l(this,Rl)){const n=document.createElement("time");n.className="popupDate",n.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),n.setAttribute("data-l10n-args",JSON.stringify({dateObj:l(this,Rl).valueOf()})),n.dateTime=l(this,Rl).toISOString(),e.append(n)}_2({html:l(this,qt,Fv)||l(this,Zr).str,dir:l(this,Zr)?.dir,className:"popupContent"},t),l(this,Ze).append(t)}updateEdited({rect:t,popup:e,deleted:n}){if(l(this,rs)){n?(this.remove(),A(this,Nl,null)):e&&(e.deleted?this.remove():(R(this,qt,OS).call(this),A(this,Nl,e.text))),t&&(A(this,ia,null),R(this,qt,IS).call(this),R(this,qt,FS).call(this));return}if(n||e?.deleted){this.remove();return}R(this,qt,Iv).call(this),l(this,Uu)||A(this,Uu,{contentsObj:l(this,Zr),richText:l(this,sa)}),t&&A(this,na,null),e&&e.text&&(A(this,sa,R(this,qt,BR).call(this,e.text)),A(this,Rl,hw.toDateObject(e.date)),A(this,Zr,null)),l(this,os)?.remove(),A(this,os,null)}resetEdited(){l(this,Uu)&&({contentsObj:wn(this,Zr)._,richText:wn(this,sa)._}=l(this,Uu),A(this,Uu,null),l(this,os)?.remove(),A(this,os,null),A(this,na,null))}remove(){if(l(this,ea)?.abort(),A(this,ea,null),l(this,os)?.remove(),A(this,os,null),A(this,Dl,!1),A(this,Jr,!1),l(this,Je)?.remove(),A(this,Je,null),this.trigger)for(const t of this.trigger)t.classList.remove("popupTriggerArea")}forceHide(){A(this,Dl,this.isVisible),l(this,Dl)&&(l(this,Ze).hidden=!0)}maybeShow(){l(this,rs)||(R(this,qt,Iv).call(this),l(this,Dl)&&(l(this,os)||R(this,qt,jv).call(this),A(this,Dl,!1),l(this,Ze).hidden=!1))}get isVisible(){return l(this,rs)?!1:l(this,Ze).hidden===!1}}rs=new WeakMap,Pl=new WeakMap,Fw=new WeakMap,Ow=new WeakMap,Pf=new WeakMap,Rf=new WeakMap,Ze=new WeakMap,Zr=new WeakMap,Rl=new WeakMap,Bu=new WeakMap,Mf=new WeakMap,Df=new WeakMap,Jr=new WeakMap,os=new WeakMap,ea=new WeakMap,na=new WeakMap,Je=new WeakMap,ia=new WeakMap,Ml=new WeakMap,o0=new WeakMap,sa=new WeakMap,Nf=new WeakMap,Uu=new WeakMap,Dl=new WeakMap,Rn=new WeakMap,Nl=new WeakMap,qt=new WeakSet,Iv=function(){if(l(this,ea))return;A(this,ea,new AbortController);const{signal:t}=l(this,ea);for(const e of this.trigger)e.addEventListener("click",l(this,Pf),{signal:t}),e.addEventListener("pointerenter",l(this,Ow),{signal:t}),e.addEventListener("pointerleave",l(this,Fw),{signal:t}),e.classList.add("popupTriggerArea");for(const e of l(this,Bu))e.container?.addEventListener("keydown",l(this,Pl),{signal:t})},IS=function(){const t=l(this,Bu).find(e=>e.hasCommentButton);t&&A(this,ia,t._normalizePoint(t.commentButtonPosition))},FS=function(){if(l(this,Rn).extraPopupElement&&!l(this,Rn).editor)return;l(this,Je)||this.renderCommentButton();const[t,e]=l(this,ia),{style:n}=l(this,Je);n.left=`calc(${t}%)`,n.top=`calc(${e}% - var(--comment-button-dim))`},OS=function(){l(this,Rn).extraPopupElement||(l(this,Je)||this.renderCommentButton(),l(this,Je).style.backgroundColor=this.commentButtonColor||"")},Fv=function(){const t=l(this,sa),e=l(this,Zr);return t?.str&&(!e?.str||e.str===t.str)&&l(this,sa).html||null},jS=function(){return l(this,qt,Fv)?.attributes?.style?.fontSize||0},jR=function(){return l(this,qt,Fv)?.attributes?.style?.color||null},BR=function(t){const e=[],n={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:e}]}},i={style:{color:l(this,qt,jR),fontSize:l(this,qt,jS)?`calc(${l(this,qt,jS)}px * var(--total-scale-factor))`:""}};for(const o of t.split(`
`))e.push({name:"span",value:o,attributes:i});return n},UR=function(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&l(this,Jr))&&R(this,qt,Ov).call(this)},VR=function(){if(l(this,na)!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:e,pageHeight:n,pageX:i,pageY:o}}}=l(this,Mf);let c=!!l(this,Df),u=c?l(this,Df):l(this,o0);for(const C of l(this,Bu))if(!u||vt.intersect(C.data.rect,u)!==null){u=C.data.rect,c=!0;break}const h=vt.normalizeRect([u[0],t[3]-u[1]+t[1],u[2],t[3]-u[3]+t[1]]),p=c?u[2]-u[0]+5:0,m=h[0]+p,v=h[1];A(this,na,[100*(m-i)/e,100*(v-o)/n]);const{style:b}=l(this,Ze);b.left=`${l(this,na)[0]}%`,b.top=`${l(this,na)[1]}%`},Ov=function(){if(l(this,rs)){l(this,rs).toggleCommentPopup(this,!1);return}A(this,Jr,!l(this,Jr)),l(this,Jr)?(R(this,qt,jv).call(this),l(this,Ze).addEventListener("click",l(this,Pf)),l(this,Ze).addEventListener("keydown",l(this,Pl))):(R(this,qt,BS).call(this),l(this,Ze).removeEventListener("click",l(this,Pf)),l(this,Ze).removeEventListener("keydown",l(this,Pl)))},jv=function(){l(this,os)||this.render(),this.isVisible?l(this,Jr)&&l(this,Ze).classList.add("focused"):(R(this,qt,VR).call(this),l(this,Ze).hidden=!1,l(this,Ze).style.zIndex=parseInt(l(this,Ze).style.zIndex)+1e3)},BS=function(){l(this,Ze).classList.remove("focused"),!(l(this,Jr)||!this.isVisible)&&(l(this,Ze).hidden=!0,l(this,Ze).style.zIndex=parseInt(l(this,Ze).style.zIndex)-1e3)};class zR extends Ke{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=Gt.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=this.contentElement=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const e of this.textContent){const n=document.createElement("span");n.textContent=e,t.append(n)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}}var a0;class L3 extends Ke{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});_(this,a0,null)}render(){this.container.classList.add("lineAnnotation");const{data:e,width:n,height:i}=this,o=this.svgFactory.create(n,i,!0),c=A(this,a0,this.svgFactory.createElement("svg:line"));return c.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),c.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),c.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),c.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),c.setAttribute("stroke-width",e.borderStyle.width||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),o.append(c),this.container.append(o),!e.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return l(this,a0)}addHighlightArea(){this.container.classList.add("highlightArea")}}a0=new WeakMap;var l0;class I3 extends Ke{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});_(this,l0,null)}render(){this.container.classList.add("squareAnnotation");const{data:e,width:n,height:i}=this,o=this.svgFactory.create(n,i,!0),c=e.borderStyle.width,u=A(this,l0,this.svgFactory.createElement("svg:rect"));return u.setAttribute("x",c/2),u.setAttribute("y",c/2),u.setAttribute("width",n-c),u.setAttribute("height",i-c),u.setAttribute("stroke-width",c||1),u.setAttribute("stroke","transparent"),u.setAttribute("fill","transparent"),o.append(u),this.container.append(o),!e.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return l(this,l0)}addHighlightArea(){this.container.classList.add("highlightArea")}}l0=new WeakMap;var c0;class F3 extends Ke{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});_(this,c0,null)}render(){this.container.classList.add("circleAnnotation");const{data:e,width:n,height:i}=this,o=this.svgFactory.create(n,i,!0),c=e.borderStyle.width,u=A(this,c0,this.svgFactory.createElement("svg:ellipse"));return u.setAttribute("cx",n/2),u.setAttribute("cy",i/2),u.setAttribute("rx",n/2-c/2),u.setAttribute("ry",i/2-c/2),u.setAttribute("stroke-width",c||1),u.setAttribute("stroke","transparent"),u.setAttribute("fill","transparent"),o.append(u),this.container.append(o),!e.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return l(this,c0)}addHighlightArea(){this.container.classList.add("highlightArea")}}c0=new WeakMap;var u0;class HR extends Ke{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});_(this,u0,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,vertices:n,borderStyle:i,popupRef:o},width:c,height:u}=this;if(!n)return this.container;const h=this.svgFactory.create(c,u,!0);let f=[];for(let m=0,v=n.length;m<v;m+=2){const b=n[m]-e[0],C=e[3]-n[m+1];f.push(`${b},${C}`)}f=f.join(" ");const p=A(this,u0,this.svgFactory.createElement(this.svgElementName));return p.setAttribute("points",f),p.setAttribute("stroke-width",i.width||1),p.setAttribute("stroke","transparent"),p.setAttribute("fill","transparent"),h.append(p),this.container.append(h),!o&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return l(this,u0)}addHighlightArea(){this.container.classList.add("highlightArea")}}u0=new WeakMap;class O3 extends HR{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class j3 extends Ke{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}}var h0,Vu,d0,US;class lE extends Ke{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});_(this,d0);_(this,h0,null);_(this,Vu,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?Gt.HIGHLIGHT:Gt.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,rotation:n,inkLists:i,borderStyle:o,popupRef:c}}=this,{transform:u,width:h,height:f}=R(this,d0,US).call(this,n,e),p=this.svgFactory.create(h,f,!0),m=A(this,h0,this.svgFactory.createElement("svg:g"));p.append(m),m.setAttribute("stroke-width",o.width||1),m.setAttribute("stroke-linecap","round"),m.setAttribute("stroke-linejoin","round"),m.setAttribute("stroke-miterlimit",10),m.setAttribute("stroke","transparent"),m.setAttribute("fill","transparent"),m.setAttribute("transform",u);for(let v=0,b=i.length;v<b;v++){const C=this.svgFactory.createElement(this.svgElementName);l(this,Vu).push(C),C.setAttribute("points",i[v].join(",")),m.append(C)}return!c&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(p),this._editOnDoubleClick(),this.container}updateEdited(e){super.updateEdited(e);const{thickness:n,points:i,rect:o}=e,c=l(this,h0);if(n>=0&&c.setAttribute("stroke-width",n||1),i)for(let u=0,h=l(this,Vu).length;u<h;u++)l(this,Vu)[u].setAttribute("points",i[u].join(","));if(o){const{transform:u,width:h,height:f}=R(this,d0,US).call(this,this.data.rotation,o);c.parentElement.setAttribute("viewBox",`0 0 ${h} ${f}`),c.setAttribute("transform",u)}}getElementsToTriggerPopup(){return l(this,Vu)}addHighlightArea(){this.container.classList.add("highlightArea")}}h0=new WeakMap,Vu=new WeakMap,d0=new WeakSet,US=function(e,n){switch(e){case 90:return{transform:`rotate(90) translate(${-n[0]},${n[1]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};case 180:return{transform:`rotate(180) translate(${-n[2]},${n[1]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]};case 270:return{transform:`rotate(270) translate(${-n[2]},${n[3]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};default:return{transform:`translate(${-n[0]},${n[3]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]}}};class $R extends Ke{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=Gt.HIGHLIGHT}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),t){const n=document.createElement("mark");n.classList.add("overlaidText"),n.textContent=t,this.container.append(n)}return this.container}}class B3 extends Ke{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("underlineAnnotation"),t){const n=document.createElement("u");n.classList.add("overlaidText"),n.textContent=t,this.container.append(n)}return this.container}}class U3 extends Ke{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("squigglyAnnotation"),t){const n=document.createElement("u");n.classList.add("overlaidText"),n.textContent=t,this.container.append(n)}return this.container}}class V3 extends Ke{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("strikeoutAnnotation"),t){const n=document.createElement("s");n.classList.add("overlaidText"),n.textContent=t,this.container.append(n)}return this.container}}class WR extends Ke{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=Gt.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}}var f0,p0,VS;class z3 extends Ke{constructor(e){super(e,{isRenderable:!0});_(this,p0);_(this,f0,null);const{file:n}=this.data;this.filename=n.filename,this.content=n.content,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,...n})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:n}=this;let i;n.hasAppearance||n.fillAlpha===0?i=document.createElement("div"):(i=document.createElement("img"),i.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(n.name)?"paperclip":"pushpin"}.svg`,n.fillAlpha&&n.fillAlpha<1&&(i.style=`filter: opacity(${Math.round(n.fillAlpha*100)}%);`)),i.addEventListener("dblclick",R(this,p0,VS).bind(this)),A(this,f0,i);const{isMac:o}=Cn.platform;return e.addEventListener("keydown",c=>{c.key==="Enter"&&(o?c.metaKey:c.ctrlKey)&&R(this,p0,VS).call(this)}),!n.popupRef&&this.hasPopupData?(this.hasOwnCommentButton=!0,this._createPopup()):i.classList.add("popupTriggerArea"),e.append(i),e}getElementsToTriggerPopup(){return l(this,f0)}addHighlightArea(){this.container.classList.add("highlightArea")}}f0=new WeakMap,p0=new WeakSet,VS=function(){this.downloadManager?.openOrDownloadData(this.content,this.filename)};var zu,Hu,Lf,Ll,m0,$u,as,g0,ga,Bv,HS;const yE=class yE{constructor({div:t,accessibilityManager:e,annotationCanvasMap:n,annotationEditorUIManager:i,page:o,viewport:c,structTreeLayer:u,commentManager:h,linkService:f,annotationStorage:p}){_(this,ga);_(this,zu,null);_(this,Hu,null);_(this,Lf,null);_(this,Ll,new Map);_(this,m0,null);_(this,$u,null);_(this,as,[]);_(this,g0,!1);this.div=t,A(this,zu,e),A(this,Hu,n),A(this,m0,u||null),A(this,$u,f||null),A(this,Lf,p||new sE),this.page=o,this.viewport=c,this.zIndex=0,this._annotationEditorUIManager=i,this._commentManager=h||null}hasEditableAnnotations(){return l(this,Ll).size>0}async render(t){const{annotations:e}=t,n=this.div;hh(n,this.viewport);const i=new Map,o=[],c={data:null,layer:n,linkService:l(this,$u),downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new ww,annotationStorage:l(this,Lf),enableComment:t.enableComment===!0,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const u of e){if(u.noHTML)continue;const h=u.annotationType===dn.POPUP;if(h){const m=i.get(u.id);if(!m)continue;if(!this._commentManager){o.push(u);continue}c.elements=m}else if(u.rect[2]===u.rect[0]||u.rect[3]===u.rect[1])continue;c.data=u;const f=xA.create(c);if(!f.isRenderable)continue;if(!h&&(l(this,as).push(f),u.popupRef)){const m=i.get(u.popupRef);m?m.push(f):i.set(u.popupRef,[f])}const p=f.render();u.hidden&&(p.style.visibility="hidden"),f._isEditable&&(l(this,Ll).set(f.data.id,f),this._annotationEditorUIManager?.renderAnnotationElement(f))}await R(this,ga,Bv).call(this);for(const u of o){const h=c.elements=i.get(u.id);c.data=u;const f=xA.create(c);if(!f.isRenderable)continue;const p=f.render();f.contentElement.id=`${Ad}${u.id}`,u.hidden&&(p.style.visibility="hidden"),h.at(-1).container.after(p)}R(this,ga,HS).call(this)}async addLinkAnnotations(t){const e={data:null,layer:this.div,linkService:l(this,$u),svgFactory:new ww,parent:this};for(const n of t){n.borderStyle||(n.borderStyle=yE._defaultBorderStyle),e.data=n;const i=xA.create(e);i.isRenderable&&(i.render(),i.contentElement.id=`${Ad}${n.id}`,l(this,as).push(i))}await R(this,ga,Bv).call(this)}update({viewport:t}){const e=this.div;this.viewport=t,hh(e,{rotation:t.rotation}),R(this,ga,HS).call(this),e.hidden=!1}getEditableAnnotations(){return Array.from(l(this,Ll).values())}getEditableAnnotation(t){return l(this,Ll).get(t)}addFakeAnnotation(t){const{div:e}=this,{id:n,rotation:i}=t,o=new k3({data:{id:n,rect:t.getPDFRect(),rotation:i},editor:t,layer:e,parent:this,enableComment:!!this._commentManager,linkService:l(this,$u),annotationStorage:l(this,Lf)});return o.render(),o.contentElement.id=`${Ad}${n}`,o.createOrUpdatePopup(),l(this,as).push(o),o}removeAnnotation(t){const e=l(this,as).findIndex(i=>i.data.id===t);if(e<0)return;const[n]=l(this,as).splice(e,1);l(this,zu)?.removePointerInTextLayer(n.contentElement)}updateFakeAnnotations(t){if(t.length!==0){for(const e of t)e.updateFakeAnnotationElement(this);R(this,ga,Bv).call(this)}}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}static get _defaultBorderStyle(){return $t(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:cd.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}};zu=new WeakMap,Hu=new WeakMap,Lf=new WeakMap,Ll=new WeakMap,m0=new WeakMap,$u=new WeakMap,as=new WeakMap,g0=new WeakMap,ga=new WeakSet,Bv=async function(){if(l(this,as).length===0)return;this.div.replaceChildren();const t=[];if(!l(this,g0)){A(this,g0,!0);for(const{contentElement:n,data:{id:i}}of l(this,as)){const o=n.id=`${Ad}${i}`;t.push(l(this,m0)?.getAriaAttributes(o).then(c=>{if(c)for(const[u,h]of c)n.setAttribute(u,h)}))}}l(this,as).sort(({data:{rect:[n,i,o,c]}},{data:{rect:[u,h,f,p]}})=>{if(n===o&&i===c)return 1;if(u===f&&h===p)return-1;const m=c,v=i,b=(i+c)/2,C=p,E=h,T=(h+p)/2;if(b>=C&&T<=v)return-1;if(T>=m&&b<=E)return 1;const P=(n+o)/2,N=(u+f)/2;return P-N});const e=document.createDocumentFragment();for(const n of l(this,as))e.append(n.container),this._commentManager?(n.extraPopupElement?.popup||n.popup)?.renderCommentButton():n.extraPopupElement&&e.append(n.extraPopupElement.render());if(this.div.append(e),await Promise.all(t),l(this,zu))for(const n of l(this,as))l(this,zu).addPointerInTextLayer(n.contentElement,!1)},HS=function(){if(!l(this,Hu))return;const t=this.div;for(const[e,n]of l(this,Hu)){const i=t.querySelector(`[data-annotation-id="${e}"]`);if(!i)continue;n.className="annotationContent";const{firstChild:o}=i;o?o.nodeName==="CANVAS"?o.replaceWith(n):o.classList.contains("annotationContent")?o.after(n):o.before(n):i.append(n);const c=l(this,Ll).get(e);c&&(c._hasNoCanvas?(this._annotationEditorUIManager?.setMissingCanvas(e,i.id,n),c._hasNoCanvas=!1):c.canvas=n)}l(this,Hu).clear()};let zS=yE;const gv=/\r\n?|\n/g;var ls,y0,Wu,cs,pn,GR,XR,KR,Uv,ya,Vv,zv,YR,WS,qR;const Fe=class Fe extends De{constructor(e){super({...e,name:"freeTextEditor"});_(this,pn);_(this,ls,"");_(this,y0,`${this.id}-editor`);_(this,Wu,null);_(this,cs);ct(this,"_colorPicker",null);this.color=e.color||Fe._defaultColor||De._defaultLineColor,A(this,cs,e.fontSize||Fe._defaultFontSize),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert"),this.canAddComment=!1}static get _keyboardManager(){const e=Fe.prototype,n=c=>c.isEmpty(),i=dh.TRANSLATE_SMALL,o=dh.TRANSLATE_BIG;return $t(this,"_keyboardManager",new $0([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-i,0],checker:n}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-o,0],checker:n}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[i,0],checker:n}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[o,0],checker:n}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-i],checker:n}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-o],checker:n}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,i],checker:n}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,o],checker:n}]]))}static initialize(e,n){De.initialize(e,n);const i=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(i.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,n){switch(e){case ie.FREETEXT_SIZE:Fe._defaultFontSize=n;break;case ie.FREETEXT_COLOR:Fe._defaultColor=n;break}}updateParams(e,n){switch(e){case ie.FREETEXT_SIZE:R(this,pn,GR).call(this,n);break;case ie.FREETEXT_COLOR:R(this,pn,XR).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[ie.FREETEXT_SIZE,Fe._defaultFontSize],[ie.FREETEXT_COLOR,Fe._defaultColor||De._defaultLineColor]]}get propertiesToUpdate(){return[[ie.FREETEXT_SIZE,l(this,cs)],[ie.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new vw(this)),[["colorPicker",this._colorPicker]]}get colorType(){return ie.FREETEXT_COLOR}onUpdatedColor(){this.editorDiv.style.color=this.color,this._colorPicker?.update(this.color),super.onUpdatedColor()}_translateEmpty(e,n){this._uiManager.translateSelectedEditors(e,n,!0)}getInitialTranslation(){const e=this.parentScale;return[-Fe._internalPadding*e,-(Fe._internalPadding+l(this,cs))*e]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),A(this,Wu,new AbortController);const e=this._uiManager.combinedSignal(l(this,Wu));return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:e}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:e}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:e}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:e}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:e}),!0}disableEditMode(){return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",l(this,y0)),this._isDraggable=!0,l(this,Wu)?.abort(),A(this,Wu,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(e){this.width||(this.enableEditMode(),e&&this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=l(this,ls),n=A(this,ls,R(this,pn,KR).call(this).trimEnd());if(e===n)return;const i=o=>{if(A(this,ls,o),!o){this.remove();return}R(this,pn,zv).call(this),this._uiManager.rebuild(this),R(this,pn,Uv).call(this)};this.addCommands({cmd:()=>{i(n)},undo:()=>{i(e)},mustExec:!1}),R(this,pn,Uv).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(e){e.target===this.div&&e.key==="Enter"&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){Fe._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let e,n;(this._isCopy||this.annotationElementId)&&(e=this.x,n=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",l(this,y0)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:i}=this.editorDiv;if(i.fontSize=`calc(${l(this,cs)}px * var(--total-scale-factor))`,i.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[o,c]=this.parentDimensions;if(this.annotationElementId){const{position:u}=this._initialData;let[h,f]=this.getInitialTranslation();[h,f]=this.pageTranslationToScreen(h,f);const[p,m]=this.pageDimensions,[v,b]=this.pageTranslation;let C,E;switch(this.rotation){case 0:C=e+(u[0]-v)/p,E=n+this.height-(u[1]-b)/m;break;case 90:C=e+(u[0]-v)/p,E=n-(u[1]-b)/m,[h,f]=[f,-h];break;case 180:C=e-this.width+(u[0]-v)/p,E=n-(u[1]-b)/m,[h,f]=[-h,-f];break;case 270:C=e+(u[0]-v-this.height*m)/p,E=n+(u[1]-b-this.width*p)/m,[h,f]=[-f,h];break}this.setAt(C*o,E*c,h,f)}else this._moveAfterPaste(e,n);R(this,pn,zv).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(e){var C,E,T;const n=e.clipboardData||window.clipboardData,{types:i}=n;if(i.length===1&&i[0]==="text/plain")return;e.preventDefault();const o=R(C=Fe,ya,WS).call(C,n.getData("text")||"").replaceAll(gv,`
`);if(!o)return;const c=window.getSelection();if(!c.rangeCount)return;this.editorDiv.normalize(),c.deleteFromDocument();const u=c.getRangeAt(0);if(!o.includes(`
`)){u.insertNode(document.createTextNode(o)),this.editorDiv.normalize(),c.collapseToStart();return}const{startContainer:h,startOffset:f}=u,p=[],m=[];if(h.nodeType===Node.TEXT_NODE){const P=h.parentElement;if(m.push(h.nodeValue.slice(f).replaceAll(gv,"")),P!==this.editorDiv){let N=p;for(const L of this.editorDiv.childNodes){if(L===P){N=m;continue}N.push(R(E=Fe,ya,Vv).call(E,L))}}p.push(h.nodeValue.slice(0,f).replaceAll(gv,""))}else if(h===this.editorDiv){let P=p,N=0;for(const L of this.editorDiv.childNodes)N++===f&&(P=m),P.push(R(T=Fe,ya,Vv).call(T,L))}A(this,ls,`${p.join(`
`)}${o}${m.join(`
`)}`),R(this,pn,zv).call(this);const v=new Range;let b=Math.sumPrecise(p.map(P=>P.length));for(const{firstChild:P}of this.editorDiv.childNodes)if(P.nodeType===Node.TEXT_NODE){const N=P.nodeValue.length;if(b<=N){v.setStart(P,b),v.setEnd(P,b);break}b-=N}c.removeAllRanges(),c.addRange(v)}get contentDiv(){return this.editorDiv}getPDFRect(){const e=Fe._internalPadding*this.parentScale;return this.getRect(e,e)}static async deserialize(e,n,i){var u;let o=null;if(e instanceof zR){const{data:{defaultAppearanceData:{fontSize:h,fontColor:f},rect:p,rotation:m,id:v,popupRef:b,richText:C,contentsObj:E,creationDate:T,modificationDate:P},textContent:N,textPosition:L,parent:{page:{pageNumber:F}}}=e;if(!N||N.length===0)return null;o=e={annotationType:Gt.FREETEXT,color:Array.from(f),fontSize:h,value:N.join(`
`),position:L,pageIndex:F-1,rect:p.slice(0),rotation:m,annotationElementId:v,id:v,deleted:!1,popupRef:b,comment:E?.str||null,richText:C,creationDate:T,modificationDate:P}}const c=await super.deserialize(e,n,i);return A(c,cs,e.fontSize),c.color=vt.makeHexColor(...e.color),A(c,ls,R(u=Fe,ya,WS).call(u,e.value)),c._initialData=o,e.comment&&c.setCommentData(e),c}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const n=De._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),i=Object.assign(super.serialize(e),{color:n,fontSize:l(this,cs),value:R(this,pn,YR).call(this)});return this.addComment(i),e?(i.isCopy=!0,i):this.annotationElementId&&!R(this,pn,qR).call(this,i)?null:(i.id=this.annotationElementId,i)}renderAnnotationElement(e){const n=super.renderAnnotationElement(e);if(!n)return null;const{style:i}=n;i.fontSize=`calc(${l(this,cs)}px * var(--total-scale-factor))`,i.color=this.color,n.replaceChildren();for(const o of l(this,ls).split(`
`)){const c=document.createElement("div");c.append(o?document.createTextNode(o):document.createElement("br")),n.append(c)}return e.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:l(this,ls)}}),n}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}};ls=new WeakMap,y0=new WeakMap,Wu=new WeakMap,cs=new WeakMap,pn=new WeakSet,GR=function(e){const n=o=>{this.editorDiv.style.fontSize=`calc(${o}px * var(--total-scale-factor))`,this.translate(0,-(o-l(this,cs))*this.parentScale),A(this,cs,o),R(this,pn,Uv).call(this)},i=l(this,cs);this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ie.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},XR=function(e){const n=o=>{this.color=o,this.onUpdatedColor()},i=this.color;this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ie.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},KR=function(){var i;const e=[];this.editorDiv.normalize();let n=null;for(const o of this.editorDiv.childNodes)n?.nodeType===Node.TEXT_NODE&&o.nodeName==="BR"||(e.push(R(i=Fe,ya,Vv).call(i,o)),n=o);return e.join(`
`)},Uv=function(){const[e,n]=this.parentDimensions;let i;if(this.isAttachedToDOM)i=this.div.getBoundingClientRect();else{const{currentLayer:o,div:c}=this,u=c.style.display,h=c.classList.contains("hidden");c.classList.remove("hidden"),c.style.display="hidden",o.div.append(this.div),i=c.getBoundingClientRect(),c.remove(),c.style.display=u,c.classList.toggle("hidden",h)}this.rotation%180===this.parentRotation%180?(this.width=i.width/e,this.height=i.height/n):(this.width=i.height/e,this.height=i.width/n),this.fixAndSetPosition()},ya=new WeakSet,Vv=function(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(gv,"")},zv=function(){if(this.editorDiv.replaceChildren(),!!l(this,ls))for(const e of l(this,ls).split(`
`)){const n=document.createElement("div");n.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(n)}},YR=function(){return l(this,ls).replaceAll(""," ")},WS=function(e){return e.replaceAll(" ","")},qR=function(e){const{value:n,fontSize:i,color:o,pageIndex:c}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||e.value!==n||e.fontSize!==i||e.color.some((u,h)=>u!==o[h])||e.pageIndex!==c},_(Fe,ya),ct(Fe,"_freeTextDefaultContent",""),ct(Fe,"_internalPadding",0),ct(Fe,"_defaultColor",null),ct(Fe,"_defaultFontSize",10),ct(Fe,"_type","freetext"),ct(Fe,"_editorType",Gt.FREETEXT);let $S=Fe;class St{toSVGPath(){Te("Abstract method `toSVGPath` must be implemented.")}get box(){Te("Abstract getter `box` must be implemented.")}serialize(t,e){Te("Abstract method `serialize` must be implemented.")}static _rescale(t,e,n,i,o,c){c||(c=new Float32Array(t.length));for(let u=0,h=t.length;u<h;u+=2)c[u]=e+t[u]*i,c[u+1]=n+t[u+1]*o;return c}static _rescaleAndSwap(t,e,n,i,o,c){c||(c=new Float32Array(t.length));for(let u=0,h=t.length;u<h;u+=2)c[u]=e+t[u+1]*i,c[u+1]=n+t[u]*o;return c}static _translate(t,e,n,i){i||(i=new Float32Array(t.length));for(let o=0,c=t.length;o<c;o+=2)i[o]=e+t[o],i[o+1]=n+t[o+1];return i}static svgRound(t){return Math.round(t*1e4)}static _normalizePoint(t,e,n,i,o){switch(o){case 90:return[1-e/n,t/i];case 180:return[1-t/n,1-e/i];case 270:return[e/n,1-t/i];default:return[t/n,e/i]}}static _normalizePagePoint(t,e,n){switch(n){case 90:return[1-e,t];case 180:return[1-t,1-e];case 270:return[e,1-t];default:return[t,e]}}static createBezierPoints(t,e,n,i,o,c){return[(t+5*n)/6,(e+5*i)/6,(5*n+o)/6,(5*i+c)/6,(n+o)/2,(i+c)/2]}}ct(St,"PRECISION",1e-4);var us,gr,If,Ff,to,ee,Gu,Xu,v0,w0,Of,jf,Il,x0,jw,Bw,En,Am,QR,ZR,JR,tM,eM,nM;const Mo=class Mo{constructor({x:t,y:e},n,i,o,c,u=0){_(this,En);_(this,us);_(this,gr,[]);_(this,If);_(this,Ff);_(this,to,[]);_(this,ee,new Float32Array(18));_(this,Gu);_(this,Xu);_(this,v0);_(this,w0);_(this,Of);_(this,jf);_(this,Il,[]);A(this,us,n),A(this,jf,o*i),A(this,Ff,c),l(this,ee).set([NaN,NaN,NaN,NaN,t,e],6),A(this,If,u),A(this,w0,l(Mo,x0)*i),A(this,v0,l(Mo,Bw)*i),A(this,Of,i),l(this,Il).push(t,e)}isEmpty(){return isNaN(l(this,ee)[8])}add({x:t,y:e}){A(this,Gu,t),A(this,Xu,e);const[n,i,o,c]=l(this,us);let[u,h,f,p]=l(this,ee).subarray(8,12);const m=t-f,v=e-p,b=Math.hypot(m,v);if(b<l(this,v0))return!1;const C=b-l(this,w0),E=C/b,T=E*m,P=E*v;let N=u,L=h;u=f,h=p,f+=T,p+=P,l(this,Il)?.push(t,e);const F=-P/C,O=T/C,z=F*l(this,jf),K=O*l(this,jf);return l(this,ee).set(l(this,ee).subarray(2,8),0),l(this,ee).set([f+z,p+K],4),l(this,ee).set(l(this,ee).subarray(14,18),12),l(this,ee).set([f-z,p-K],16),isNaN(l(this,ee)[6])?(l(this,to).length===0&&(l(this,ee).set([u+z,h+K],2),l(this,to).push(NaN,NaN,NaN,NaN,(u+z-n)/o,(h+K-i)/c),l(this,ee).set([u-z,h-K],14),l(this,gr).push(NaN,NaN,NaN,NaN,(u-z-n)/o,(h-K-i)/c)),l(this,ee).set([N,L,u,h,f,p],6),!this.isEmpty()):(l(this,ee).set([N,L,u,h,f,p],6),Math.abs(Math.atan2(L-h,N-u)-Math.atan2(P,T))<Math.PI/2?([u,h,f,p]=l(this,ee).subarray(2,6),l(this,to).push(NaN,NaN,NaN,NaN,((u+f)/2-n)/o,((h+p)/2-i)/c),[u,h,N,L]=l(this,ee).subarray(14,18),l(this,gr).push(NaN,NaN,NaN,NaN,((N+u)/2-n)/o,((L+h)/2-i)/c),!0):([N,L,u,h,f,p]=l(this,ee).subarray(0,6),l(this,to).push(((N+5*u)/6-n)/o,((L+5*h)/6-i)/c,((5*u+f)/6-n)/o,((5*h+p)/6-i)/c,((u+f)/2-n)/o,((h+p)/2-i)/c),[f,p,u,h,N,L]=l(this,ee).subarray(12,18),l(this,gr).push(((N+5*u)/6-n)/o,((L+5*h)/6-i)/c,((5*u+f)/6-n)/o,((5*h+p)/6-i)/c,((u+f)/2-n)/o,((h+p)/2-i)/c),!0))}toSVGPath(){if(this.isEmpty())return"";const t=l(this,to),e=l(this,gr);if(isNaN(l(this,ee)[6])&&!this.isEmpty())return R(this,En,QR).call(this);const n=[];n.push(`M${t[4]} ${t[5]}`);for(let i=6;i<t.length;i+=6)isNaN(t[i])?n.push(`L${t[i+4]} ${t[i+5]}`):n.push(`C${t[i]} ${t[i+1]} ${t[i+2]} ${t[i+3]} ${t[i+4]} ${t[i+5]}`);R(this,En,JR).call(this,n);for(let i=e.length-6;i>=6;i-=6)isNaN(e[i])?n.push(`L${e[i+4]} ${e[i+5]}`):n.push(`C${e[i]} ${e[i+1]} ${e[i+2]} ${e[i+3]} ${e[i+4]} ${e[i+5]}`);return R(this,En,ZR).call(this,n),n.join(" ")}newFreeDrawOutline(t,e,n,i,o,c){return new iM(t,e,n,i,o,c)}getOutlines(){const t=l(this,to),e=l(this,gr),n=l(this,ee),[i,o,c,u]=l(this,us),h=new Float32Array((l(this,Il)?.length??0)+2);for(let m=0,v=h.length-2;m<v;m+=2)h[m]=(l(this,Il)[m]-i)/c,h[m+1]=(l(this,Il)[m+1]-o)/u;if(h[h.length-2]=(l(this,Gu)-i)/c,h[h.length-1]=(l(this,Xu)-o)/u,isNaN(n[6])&&!this.isEmpty())return R(this,En,tM).call(this,h);const f=new Float32Array(l(this,to).length+24+l(this,gr).length);let p=t.length;for(let m=0;m<p;m+=2){if(isNaN(t[m])){f[m]=f[m+1]=NaN;continue}f[m]=t[m],f[m+1]=t[m+1]}p=R(this,En,nM).call(this,f,p);for(let m=e.length-6;m>=6;m-=6)for(let v=0;v<6;v+=2){if(isNaN(e[m+v])){f[p]=f[p+1]=NaN,p+=2;continue}f[p]=e[m+v],f[p+1]=e[m+v+1],p+=2}return R(this,En,eM).call(this,f,p),this.newFreeDrawOutline(f,h,l(this,us),l(this,Of),l(this,If),l(this,Ff))}};us=new WeakMap,gr=new WeakMap,If=new WeakMap,Ff=new WeakMap,to=new WeakMap,ee=new WeakMap,Gu=new WeakMap,Xu=new WeakMap,v0=new WeakMap,w0=new WeakMap,Of=new WeakMap,jf=new WeakMap,Il=new WeakMap,x0=new WeakMap,jw=new WeakMap,Bw=new WeakMap,En=new WeakSet,Am=function(){const t=l(this,ee).subarray(4,6),e=l(this,ee).subarray(16,18),[n,i,o,c]=l(this,us);return[(l(this,Gu)+(t[0]-e[0])/2-n)/o,(l(this,Xu)+(t[1]-e[1])/2-i)/c,(l(this,Gu)+(e[0]-t[0])/2-n)/o,(l(this,Xu)+(e[1]-t[1])/2-i)/c]},QR=function(){const[t,e,n,i]=l(this,us),[o,c,u,h]=R(this,En,Am).call(this);return`M${(l(this,ee)[2]-t)/n} ${(l(this,ee)[3]-e)/i} L${(l(this,ee)[4]-t)/n} ${(l(this,ee)[5]-e)/i} L${o} ${c} L${u} ${h} L${(l(this,ee)[16]-t)/n} ${(l(this,ee)[17]-e)/i} L${(l(this,ee)[14]-t)/n} ${(l(this,ee)[15]-e)/i} Z`},ZR=function(t){const e=l(this,gr);t.push(`L${e[4]} ${e[5]} Z`)},JR=function(t){const[e,n,i,o]=l(this,us),c=l(this,ee).subarray(4,6),u=l(this,ee).subarray(16,18),[h,f,p,m]=R(this,En,Am).call(this);t.push(`L${(c[0]-e)/i} ${(c[1]-n)/o} L${h} ${f} L${p} ${m} L${(u[0]-e)/i} ${(u[1]-n)/o}`)},tM=function(t){const e=l(this,ee),[n,i,o,c]=l(this,us),[u,h,f,p]=R(this,En,Am).call(this),m=new Float32Array(36);return m.set([NaN,NaN,NaN,NaN,(e[2]-n)/o,(e[3]-i)/c,NaN,NaN,NaN,NaN,(e[4]-n)/o,(e[5]-i)/c,NaN,NaN,NaN,NaN,u,h,NaN,NaN,NaN,NaN,f,p,NaN,NaN,NaN,NaN,(e[16]-n)/o,(e[17]-i)/c,NaN,NaN,NaN,NaN,(e[14]-n)/o,(e[15]-i)/c],0),this.newFreeDrawOutline(m,t,l(this,us),l(this,Of),l(this,If),l(this,Ff))},eM=function(t,e){const n=l(this,gr);return t.set([NaN,NaN,NaN,NaN,n[4],n[5]],e),e+=6},nM=function(t,e){const n=l(this,ee).subarray(4,6),i=l(this,ee).subarray(16,18),[o,c,u,h]=l(this,us),[f,p,m,v]=R(this,En,Am).call(this);return t.set([NaN,NaN,NaN,NaN,(n[0]-o)/u,(n[1]-c)/h,NaN,NaN,NaN,NaN,f,p,NaN,NaN,NaN,NaN,m,v,NaN,NaN,NaN,NaN,(i[0]-o)/u,(i[1]-c)/h],e),e+=24},_(Mo,x0,8),_(Mo,jw,2),_(Mo,Bw,l(Mo,x0)+l(Mo,jw));let xw=Mo;var Bf,Ku,ra,b0,hs,A0,an,Uw,sM;class iM extends St{constructor(e,n,i,o,c,u){super();_(this,Uw);_(this,Bf);_(this,Ku,new Float32Array(4));_(this,ra);_(this,b0);_(this,hs);_(this,A0);_(this,an);A(this,an,e),A(this,hs,n),A(this,Bf,i),A(this,A0,o),A(this,ra,c),A(this,b0,u),this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],R(this,Uw,sM).call(this,u);const[h,f,p,m]=l(this,Ku);for(let v=0,b=e.length;v<b;v+=2)e[v]=(e[v]-h)/p,e[v+1]=(e[v+1]-f)/m;for(let v=0,b=n.length;v<b;v+=2)n[v]=(n[v]-h)/p,n[v+1]=(n[v+1]-f)/m}toSVGPath(){const e=[`M${l(this,an)[4]} ${l(this,an)[5]}`];for(let n=6,i=l(this,an).length;n<i;n+=6){if(isNaN(l(this,an)[n])){e.push(`L${l(this,an)[n+4]} ${l(this,an)[n+5]}`);continue}e.push(`C${l(this,an)[n]} ${l(this,an)[n+1]} ${l(this,an)[n+2]} ${l(this,an)[n+3]} ${l(this,an)[n+4]} ${l(this,an)[n+5]}`)}return e.push("Z"),e.join(" ")}serialize([e,n,i,o],c){const u=i-e,h=o-n;let f,p;switch(c){case 0:f=St._rescale(l(this,an),e,o,u,-h),p=St._rescale(l(this,hs),e,o,u,-h);break;case 90:f=St._rescaleAndSwap(l(this,an),e,n,u,h),p=St._rescaleAndSwap(l(this,hs),e,n,u,h);break;case 180:f=St._rescale(l(this,an),i,n,-u,h),p=St._rescale(l(this,hs),i,n,-u,h);break;case 270:f=St._rescaleAndSwap(l(this,an),i,o,-u,-h),p=St._rescaleAndSwap(l(this,hs),i,o,-u,-h);break}return{outline:Array.from(f),points:[Array.from(p)]}}get box(){return l(this,Ku)}newOutliner(e,n,i,o,c,u=0){return new xw(e,n,i,o,c,u)}getNewOutline(e,n){const[i,o,c,u]=l(this,Ku),[h,f,p,m]=l(this,Bf),v=c*p,b=u*m,C=i*p+h,E=o*m+f,T=this.newOutliner({x:l(this,hs)[0]*v+C,y:l(this,hs)[1]*b+E},l(this,Bf),l(this,A0),e,l(this,b0),n??l(this,ra));for(let P=2;P<l(this,hs).length;P+=2)T.add({x:l(this,hs)[P]*v+C,y:l(this,hs)[P+1]*b+E});return T.getOutlines()}}Bf=new WeakMap,Ku=new WeakMap,ra=new WeakMap,b0=new WeakMap,hs=new WeakMap,A0=new WeakMap,an=new WeakMap,Uw=new WeakSet,sM=function(e){const n=l(this,an);let i=n[4],o=n[5];const c=[i,o,i,o];let u=i,h=o,f=i,p=o;const m=e?Math.max:Math.min,v=new Float32Array(4);for(let C=6,E=n.length;C<E;C+=6){const T=n[C+4],P=n[C+5];isNaN(n[C])?(vt.pointBoundingBox(T,P,c),h>P?(u=T,h=P):h===P&&(u=m(u,T)),p<P?(f=T,p=P):p===P&&(f=m(f,T))):(v[0]=v[1]=1/0,v[2]=v[3]=-1/0,vt.bezierBoundingBox(i,o,...n.slice(C,C+6),v),vt.rectBoundingBox(v[0],v[1],v[2],v[3],c),h>v[1]?(u=v[0],h=v[1]):h===v[1]&&(u=m(u,v[0])),p<v[3]?(f=v[2],p=v[3]):p===v[3]&&(f=m(f,v[2]))),i=T,o=P}const b=l(this,Ku);b[0]=c[0]-l(this,ra),b[1]=c[1]-l(this,ra),b[2]=c[2]-c[0]+2*l(this,ra),b[3]=c[3]-c[1]+2*l(this,ra),this.firstPoint=[u,h],this.lastPoint=[f,p]};var S0,E0,C0,Fl,yr,ki,rM,Hv,oM,aM,XS;class GS{constructor(t,e=0,n=0,i=!0){_(this,ki);_(this,S0);_(this,E0);_(this,C0);_(this,Fl,[]);_(this,yr,[]);const o=[1/0,1/0,-1/0,-1/0],c=10**-4;for(const{x:E,y:T,width:P,height:N}of t){const L=Math.floor((E-e)/c)*c,F=Math.ceil((E+P+e)/c)*c,O=Math.floor((T-e)/c)*c,z=Math.ceil((T+N+e)/c)*c,K=[L,O,z,!0],Y=[F,O,z,!1];l(this,Fl).push(K,Y),vt.rectBoundingBox(L,O,F,z,o)}const u=o[2]-o[0]+2*n,h=o[3]-o[1]+2*n,f=o[0]-n,p=o[1]-n;let m=i?-1/0:1/0,v=1/0;const b=l(this,Fl).at(i?-1:-2),C=[b[0],b[2]];for(const E of l(this,Fl)){const[T,P,N,L]=E;!L&&i?P<v?(v=P,m=T):P===v&&(m=Math.max(m,T)):L&&!i&&(P<v?(v=P,m=T):P===v&&(m=Math.min(m,T))),E[0]=(T-f)/u,E[1]=(P-p)/h,E[2]=(N-p)/h}A(this,S0,new Float32Array([f,p,u,h])),A(this,E0,[m,v]),A(this,C0,C)}getOutlines(){l(this,Fl).sort((e,n)=>e[0]-n[0]||e[1]-n[1]||e[2]-n[2]);const t=[];for(const e of l(this,Fl))e[3]?(t.push(...R(this,ki,XS).call(this,e)),R(this,ki,oM).call(this,e)):(R(this,ki,aM).call(this,e),t.push(...R(this,ki,XS).call(this,e)));return R(this,ki,rM).call(this,t)}}S0=new WeakMap,E0=new WeakMap,C0=new WeakMap,Fl=new WeakMap,yr=new WeakMap,ki=new WeakSet,rM=function(t){const e=[],n=new Set;for(const c of t){const[u,h,f]=c;e.push([u,h,c],[u,f,c])}e.sort((c,u)=>c[1]-u[1]||c[0]-u[0]);for(let c=0,u=e.length;c<u;c+=2){const h=e[c][2],f=e[c+1][2];h.push(f),f.push(h),n.add(h),n.add(f)}const i=[];let o;for(;n.size>0;){const c=n.values().next().value;let[u,h,f,p,m]=c;n.delete(c);let v=u,b=h;for(o=[u,f],i.push(o);;){let C;if(n.has(p))C=p;else if(n.has(m))C=m;else break;n.delete(C),[u,h,f,p,m]=C,v!==u&&(o.push(v,b,u,b===h?h:f),v=u),b=b===h?f:h}o.push(v,b)}return new H3(i,l(this,S0),l(this,E0),l(this,C0))},Hv=function(t){const e=l(this,yr);let n=0,i=e.length-1;for(;n<=i;){const o=n+i>>1,c=e[o][0];if(c===t)return o;c<t?n=o+1:i=o-1}return i+1},oM=function([,t,e]){const n=R(this,ki,Hv).call(this,t);l(this,yr).splice(n,0,[t,e])},aM=function([,t,e]){const n=R(this,ki,Hv).call(this,t);for(let i=n;i<l(this,yr).length;i++){const[o,c]=l(this,yr)[i];if(o!==t)break;if(o===t&&c===e){l(this,yr).splice(i,1);return}}for(let i=n-1;i>=0;i--){const[o,c]=l(this,yr)[i];if(o!==t)break;if(o===t&&c===e){l(this,yr).splice(i,1);return}}},XS=function(t){const[e,n,i]=t,o=[[e,n,i]],c=R(this,ki,Hv).call(this,i);for(let u=0;u<c;u++){const[h,f]=l(this,yr)[u];for(let p=0,m=o.length;p<m;p++){const[,v,b]=o[p];if(!(f<=v||b<=h)){if(v>=h){if(b>f)o[p][1]=f;else{if(m===1)return[];o.splice(p,1),p--,m--}continue}o[p][2]=h,b>f&&o.push([e,f,b])}}}return o};var k0,Uf;class H3 extends St{constructor(e,n,i,o){super();_(this,k0);_(this,Uf);A(this,Uf,e),A(this,k0,n),this.firstPoint=i,this.lastPoint=o}toSVGPath(){const e=[];for(const n of l(this,Uf)){let[i,o]=n;e.push(`M${i} ${o}`);for(let c=2;c<n.length;c+=2){const u=n[c],h=n[c+1];u===i?(e.push(`V${h}`),o=h):h===o&&(e.push(`H${u}`),i=u)}e.push("Z")}return e.join(" ")}serialize([e,n,i,o],c){const u=[],h=i-e,f=o-n;for(const p of l(this,Uf)){const m=new Array(p.length);for(let v=0;v<p.length;v+=2)m[v]=e+p[v]*h,m[v+1]=o-p[v+1]*f;u.push(m)}return u}get box(){return l(this,k0)}get classNamesForOutlining(){return["highlightOutline"]}}k0=new WeakMap,Uf=new WeakMap;class KS extends xw{newFreeDrawOutline(t,e,n,i,o,c){return new $3(t,e,n,i,o,c)}}class $3 extends iM{newOutliner(t,e,n,i,o,c=0){return new KS(t,e,n,i,o,c)}}var Vf,T0,oa,Yu,_0,$i,P0,R0,qu,ds,fs,Hn,zf,Hf,li,$f,Ws,M0,Yt,YS,$v,lM,cM,uM,qS,$c,Xs,md,hM,Wv,Gv,dM,fM,pM,mM,gM;const he=class he extends De{constructor(e){super({...e,name:"highlightEditor"});_(this,Yt);_(this,Vf,null);_(this,T0,0);_(this,oa);_(this,Yu,null);_(this,_0,null);_(this,$i,null);_(this,P0,null);_(this,R0,0);_(this,qu,null);_(this,ds,null);_(this,fs,null);_(this,Hn,!1);_(this,zf,null);_(this,Hf,null);_(this,li,null);_(this,$f,"");_(this,Ws);_(this,M0,"");this.color=e.color||he._defaultColor,A(this,Ws,e.thickness||he._defaultThickness),this.opacity=e.opacity||he._defaultOpacity,A(this,oa,e.boxes||null),A(this,M0,e.methodOfCreation||""),A(this,$f,e.text||""),this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",e.highlightId>-1?(A(this,Hn,!0),R(this,Yt,$v).call(this,e),R(this,Yt,$c).call(this)):l(this,oa)&&(A(this,Vf,e.anchorNode),A(this,T0,e.anchorOffset),A(this,P0,e.focusNode),A(this,R0,e.focusOffset),R(this,Yt,YS).call(this),R(this,Yt,$c).call(this),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}static get _keyboardManager(){const e=he.prototype;return $t(this,"_keyboardManager",new $0([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:l(this,Hn)?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:l(this,Ws),methodOfCreation:l(this,M0)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}static initialize(e,n){De.initialize(e,n),he._defaultColor||(he._defaultColor=n.highlightColors?.values().next().value||"#fff066")}static updateDefaultParams(e,n){switch(e){case ie.HIGHLIGHT_COLOR:he._defaultColor=n;break;case ie.HIGHLIGHT_THICKNESS:he._defaultThickness=n;break}}translateInPage(e,n){}get toolbarPosition(){return l(this,Hf)}get commentButtonPosition(){return l(this,zf)}updateParams(e,n){switch(e){case ie.HIGHLIGHT_COLOR:R(this,Yt,lM).call(this,n);break;case ie.HIGHLIGHT_THICKNESS:R(this,Yt,cM).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[ie.HIGHLIGHT_COLOR,he._defaultColor],[ie.HIGHLIGHT_THICKNESS,he._defaultThickness]]}get propertiesToUpdate(){return[[ie.HIGHLIGHT_COLOR,this.color||he._defaultColor],[ie.HIGHLIGHT_THICKNESS,l(this,Ws)||he._defaultThickness],[ie.HIGHLIGHT_FREE,l(this,Hn)]]}onUpdatedColor(){this.parent?.drawLayer.updateProperties(l(this,fs),{root:{fill:this.color,"fill-opacity":this.opacity}}),l(this,_0)?.updateColor(this.color),super.onUpdatedColor()}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",A(this,_0,new yw({editor:this}))]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(R(this,Yt,Gv).call(this))}getBaseTranslation(){return[0,0]}getRect(e,n){return super.getRect(e,n,R(this,Yt,Gv).call(this))}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),e&&this.div.focus()}remove(){R(this,Yt,qS).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(R(this,Yt,$c).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){let n=!1;this.parent&&!e?R(this,Yt,qS).call(this):e&&(R(this,Yt,$c).call(this,e),n=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(e),this.show(this._isVisible),n&&this.select()}rotate(e){var o,c,u;const{drawLayer:n}=this.parent;let i;l(this,Hn)?(e=(e-this.rotation+360)%360,i=R(o=he,Xs,md).call(o,l(this,ds).box,e)):i=R(c=he,Xs,md).call(c,[this.x,this.y,this.width,this.height],e),n.updateProperties(l(this,fs),{bbox:i,root:{"data-main-rotation":e}}),n.updateProperties(l(this,li),{bbox:R(u=he,Xs,md).call(u,l(this,$i).box,e),root:{"data-main-rotation":e}})}render(){if(this.div)return this.div;const e=super.render();l(this,$f)&&(e.setAttribute("aria-label",l(this,$f)),e.setAttribute("role","mark")),l(this,Hn)?e.classList.add("free"):this.div.addEventListener("keydown",R(this,Yt,hM).bind(this),{signal:this._uiManager._signal});const n=A(this,qu,document.createElement("div"));return e.append(n),n.setAttribute("aria-hidden","true"),n.className="internal",n.style.clipPath=l(this,Yu),this.setDims(),I2(this,l(this,qu),["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){this.isSelected||this.parent?.drawLayer.updateProperties(l(this,li),{rootClass:{hovered:!0}})}pointerleave(){this.isSelected||this.parent?.drawLayer.updateProperties(l(this,li),{rootClass:{hovered:!1}})}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:R(this,Yt,Wv).call(this,!0);break;case 1:case 3:R(this,Yt,Wv).call(this,!1);break}}select(){super.select(),l(this,li)&&this.parent?.drawLayer.updateProperties(l(this,li),{rootClass:{hovered:!1,selected:!0}})}unselect(){super.unselect(),l(this,li)&&(this.parent?.drawLayer.updateProperties(l(this,li),{rootClass:{selected:!1}}),l(this,Hn)||R(this,Yt,Wv).call(this,!1))}get _mustFixPosition(){return!l(this,Hn)}show(e=this._isVisible){super.show(e),this.parent&&(this.parent.drawLayer.updateProperties(l(this,fs),{rootClass:{hidden:!e}}),this.parent.drawLayer.updateProperties(l(this,li),{rootClass:{hidden:!e}}))}static startHighlighting(e,n,{target:i,x:o,y:c}){const{x:u,y:h,width:f,height:p}=i.getBoundingClientRect(),m=new AbortController,v=e.combinedSignal(m),b=C=>{m.abort(),R(this,Xs,mM).call(this,e,C)};window.addEventListener("blur",b,{signal:v}),window.addEventListener("pointerup",b,{signal:v}),window.addEventListener("pointerdown",nn,{capture:!0,passive:!1,signal:v}),window.addEventListener("contextmenu",Ys,{signal:v}),i.addEventListener("pointermove",R(this,Xs,pM).bind(this,e),{signal:v}),this._freeHighlight=new KS({x:o,y:c},[u,h,f,p],e.scale,this._defaultThickness/2,n,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(e,n,i){var E,T,P,N;let o=null;if(e instanceof $R){const{data:{quadPoints:L,rect:F,rotation:O,id:z,color:K,opacity:Y,popupRef:nt,richText:st,contentsObj:it,creationDate:Mt,modificationDate:xt},parent:{page:{pageNumber:Ct}}}=e;o=e={annotationType:Gt.HIGHLIGHT,color:Array.from(K),opacity:Y,quadPoints:L,boxes:null,pageIndex:Ct-1,rect:F.slice(0),rotation:O,annotationElementId:z,id:z,deleted:!1,popupRef:nt,richText:st,comment:it?.str||null,creationDate:Mt,modificationDate:xt}}else if(e instanceof lE){const{data:{inkLists:L,rect:F,rotation:O,id:z,color:K,borderStyle:{rawWidth:Y},popupRef:nt,richText:st,contentsObj:it,creationDate:Mt,modificationDate:xt},parent:{page:{pageNumber:Ct}}}=e;o=e={annotationType:Gt.HIGHLIGHT,color:Array.from(K),thickness:Y,inkLists:L,boxes:null,pageIndex:Ct-1,rect:F.slice(0),rotation:O,annotationElementId:z,id:z,deleted:!1,popupRef:nt,richText:st,comment:it?.str||null,creationDate:Mt,modificationDate:xt}}const{color:c,quadPoints:u,inkLists:h,opacity:f}=e,p=await super.deserialize(e,n,i);p.color=vt.makeHexColor(...c),p.opacity=f||1,h&&A(p,Ws,e.thickness),p._initialData=o,e.comment&&p.setCommentData(e);const[m,v]=p.pageDimensions,[b,C]=p.pageTranslation;if(u){const L=A(p,oa,[]);for(let F=0;F<u.length;F+=8)L.push({x:(u[F]-b)/m,y:1-(u[F+1]-C)/v,width:(u[F+2]-u[F])/m,height:(u[F+1]-u[F+5])/v});R(E=p,Yt,YS).call(E),R(T=p,Yt,$c).call(T),p.rotate(p.rotation)}else if(h){A(p,Hn,!0);const L=h[0],F={x:L[0]-b,y:v-(L[1]-C)},O=new KS(F,[0,0,m,v],1,l(p,Ws)/2,!0,.001);for(let Y=0,nt=L.length;Y<nt;Y+=2)F.x=L[Y]-b,F.y=v-(L[Y+1]-C),O.add(F);const{id:z,clipPathId:K}=n.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:p.color,"fill-opacity":p._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:O.toSVGPath()}},!0,!0);R(P=p,Yt,$v).call(P,{highlightOutlines:O.getOutlines(),highlightId:z,clipPathId:K}),R(N=p,Yt,$c).call(N),p.rotate(p.parentRotation)}return p}serialize(e=!1){if(this.isEmpty()||e)return null;if(this.deleted)return this.serializeDeleted();const n=De._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),i=super.serialize(e);return Object.assign(i,{color:n,opacity:this.opacity,thickness:l(this,Ws),quadPoints:R(this,Yt,dM).call(this),outlines:R(this,Yt,fM).call(this,i.rect)}),this.addComment(i),this.annotationElementId&&!R(this,Yt,gM).call(this,i)?null:(i.id=this.annotationElementId,i)}renderAnnotationElement(e){return this.deleted?(e.hide(),null):(e.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}};Vf=new WeakMap,T0=new WeakMap,oa=new WeakMap,Yu=new WeakMap,_0=new WeakMap,$i=new WeakMap,P0=new WeakMap,R0=new WeakMap,qu=new WeakMap,ds=new WeakMap,fs=new WeakMap,Hn=new WeakMap,zf=new WeakMap,Hf=new WeakMap,li=new WeakMap,$f=new WeakMap,Ws=new WeakMap,M0=new WeakMap,Yt=new WeakSet,YS=function(){const e=new GS(l(this,oa),.001);A(this,ds,e.getOutlines()),[this.x,this.y,this.width,this.height]=l(this,ds).box;const n=new GS(l(this,oa),.0025,.001,this._uiManager.direction==="ltr");A(this,$i,n.getOutlines());const{firstPoint:i}=l(this,ds);A(this,zf,[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height]);const{lastPoint:o}=l(this,$i);A(this,Hf,[(o[0]-this.x)/this.width,(o[1]-this.y)/this.height])},$v=function({highlightOutlines:e,highlightId:n,clipPathId:i}){var v,b;if(A(this,ds,e),A(this,$i,e.getNewOutline(l(this,Ws)/2+1.5,.0025)),n>=0)A(this,fs,n),A(this,Yu,i),this.parent.drawLayer.finalizeDraw(n,{bbox:e.box,path:{d:e.toSVGPath()}}),A(this,li,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:l(this,$i).box,path:{d:l(this,$i).toSVGPath()}},!0));else if(this.parent){const C=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(l(this,fs),{bbox:R(v=he,Xs,md).call(v,l(this,ds).box,(C-this.rotation+360)%360),path:{d:e.toSVGPath()}}),this.parent.drawLayer.updateProperties(l(this,li),{bbox:R(b=he,Xs,md).call(b,l(this,$i).box,C),path:{d:l(this,$i).toSVGPath()}})}const[c,u,h,f]=e.box;switch(this.rotation){case 0:this.x=c,this.y=u,this.width=h,this.height=f;break;case 90:{const[C,E]=this.parentDimensions;this.x=u,this.y=1-c,this.width=h*E/C,this.height=f*C/E;break}case 180:this.x=1-c,this.y=1-u,this.width=h,this.height=f;break;case 270:{const[C,E]=this.parentDimensions;this.x=1-u,this.y=c,this.width=h*E/C,this.height=f*C/E;break}}const{firstPoint:p}=e;A(this,zf,[(p[0]-c)/h,(p[1]-u)/f]);const{lastPoint:m}=l(this,$i);A(this,Hf,[(m[0]-c)/h,(m[1]-u)/f])},lM=function(e){const n=(c,u)=>{this.color=c,this.opacity=u,this.onUpdatedColor()},i=this.color,o=this.opacity;this.addCommands({cmd:n.bind(this,e,he._defaultOpacity),undo:n.bind(this,i,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ie.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(e)},!0)},cM=function(e){const n=l(this,Ws),i=o=>{A(this,Ws,o),R(this,Yt,uM).call(this,o)};this.addCommands({cmd:i.bind(this,e),undo:i.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ie.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)},uM=function(e){l(this,Hn)&&(R(this,Yt,$v).call(this,{highlightOutlines:l(this,ds).getNewOutline(e/2)}),this.fixAndSetPosition(),this.setDims())},qS=function(){l(this,fs)===null||!this.parent||(this.parent.drawLayer.remove(l(this,fs)),A(this,fs,null),this.parent.drawLayer.remove(l(this,li)),A(this,li,null))},$c=function(e=this.parent){l(this,fs)===null&&({id:wn(this,fs)._,clipPathId:wn(this,Yu)._}=e.drawLayer.draw({bbox:l(this,ds).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:l(this,Hn)},path:{d:l(this,ds).toSVGPath()}},!1,!0),A(this,li,e.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:l(this,Hn)},bbox:l(this,$i).box,path:{d:l(this,$i).toSVGPath()}},l(this,Hn))),l(this,qu)&&(l(this,qu).style.clipPath=l(this,Yu)))},Xs=new WeakSet,md=function([e,n,i,o],c){switch(c){case 90:return[1-n-o,e,o,i];case 180:return[1-e-i,1-n-o,i,o];case 270:return[n,1-e-i,o,i]}return[e,n,i,o]},hM=function(e){he._keyboardManager.exec(this,e)},Wv=function(e){if(!l(this,Vf))return;const n=window.getSelection();e?n.setPosition(l(this,Vf),l(this,T0)):n.setPosition(l(this,P0),l(this,R0))},Gv=function(){return l(this,Hn)?this.rotation:0},dM=function(){if(l(this,Hn))return null;const[e,n]=this.pageDimensions,[i,o]=this.pageTranslation,c=l(this,oa),u=new Float32Array(c.length*8);let h=0;for(const{x:f,y:p,width:m,height:v}of c){const b=f*e+i,C=(1-p)*n+o;u[h]=u[h+4]=b,u[h+1]=u[h+3]=C,u[h+2]=u[h+6]=b+m*e,u[h+5]=u[h+7]=C-v*n,h+=8}return u},fM=function(e){return l(this,ds).serialize(e,R(this,Yt,Gv).call(this))},pM=function(e,n){this._freeHighlight.add(n)&&e.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},mM=function(e,n){this._freeHighlight.isEmpty()?e.drawLayer.remove(this._freeHighlightId):e.createAndAddNewEditor(n,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},gM=function(e){const{color:n}=this._initialData;return this.hasEditedComment||e.color.some((i,o)=>i!==n[o])},_(he,Xs),ct(he,"_defaultColor",null),ct(he,"_defaultOpacity",1),ct(he,"_defaultThickness",12),ct(he,"_type","highlight"),ct(he,"_editorType",Gt.HIGHLIGHT),ct(he,"_freeHighlightId",-1),ct(he,"_freeHighlight",null),ct(he,"_freeHighlightClipId","");let bw=he;var Qu;class yM{constructor(){_(this,Qu,Object.create(null))}updateProperty(t,e){this[t]=e,this.updateSVGProperty(t,e)}updateProperties(t){if(t)for(const[e,n]of Object.entries(t))e.startsWith("_")||this.updateProperty(e,n)}updateSVGProperty(t,e){l(this,Qu)[t]=e}toSVGProperties(){const t=l(this,Qu);return A(this,Qu,Object.create(null)),{root:t}}reset(){A(this,Qu,Object.create(null))}updateAll(t=this){this.updateProperties(t)}clone(){Te("Not implemented")}}Qu=new WeakMap;var ps,Wf,Mn,Zu,Ju,ae,QS,ZS,JS,Sm,vM,Xv,Em,gd;const ne=class ne extends De{constructor(e){super(e);_(this,ae);_(this,ps,null);_(this,Wf);ct(this,"_colorPicker",null);ct(this,"_drawId",null);A(this,Wf,e.mustBeCommitted||!1),this._addOutlines(e)}onUpdatedColor(){this._colorPicker?.update(this.color),super.onUpdatedColor()}_addOutlines(e){e.drawOutlines&&(R(this,ae,QS).call(this,e),R(this,ae,Sm).call(this))}static _mergeSVGProperties(e,n){const i=new Set(Object.keys(e));for(const[o,c]of Object.entries(n))i.has(o)?Object.assign(e[o],c):e[o]=c;return e}static getDefaultDrawingOptions(e){Te("Not implemented")}static get typesMap(){Te("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(e,n){const i=this.typesMap.get(e);i&&this._defaultDrawingOptions.updateProperty(i,n),this._currentParent&&(l(ne,Mn).updateProperty(i,n),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(e,n){const i=this.constructor.typesMap.get(e);i&&this._updateProperty(e,i,n)}static get defaultPropertiesToUpdate(){const e=[],n=this._defaultDrawingOptions;for(const[i,o]of this.typesMap)e.push([i,n[o]]);return e}get propertiesToUpdate(){const e=[],{_drawingOptions:n}=this;for(const[i,o]of this.constructor.typesMap)e.push([i,n[o]]);return e}_updateProperty(e,n,i){const o=this._drawingOptions,c=o[n],u=h=>{o.updateProperty(n,h);const f=l(this,ps).updateProperty(n,h);f&&R(this,ae,Em).call(this,f),this.parent?.drawLayer.updateProperties(this._drawId,o.toSVGProperties()),e===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:u.bind(this,i),undo:u.bind(this,c),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:e,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){this.parent?.drawLayer.updateProperties(this._drawId,ne._mergeSVGProperties(l(this,ps).getPathResizingSVGProperties(R(this,ae,Xv).call(this)),{bbox:R(this,ae,gd).call(this)}))}_onResized(){this.parent?.drawLayer.updateProperties(this._drawId,ne._mergeSVGProperties(l(this,ps).getPathResizedSVGProperties(R(this,ae,Xv).call(this)),{bbox:R(this,ae,gd).call(this)}))}_onTranslating(e,n){this.parent?.drawLayer.updateProperties(this._drawId,{bbox:R(this,ae,gd).call(this)})}_onTranslated(){this.parent?.drawLayer.updateProperties(this._drawId,ne._mergeSVGProperties(l(this,ps).getPathTranslatedSVGProperties(R(this,ae,Xv).call(this),this.parentDimensions),{bbox:R(this,ae,gd).call(this)}))}_onStartDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,l(this,Wf)&&(A(this,Wf,!1),this.commit(),this.parent.setSelected(this),e&&this.isOnScreen&&this.div.focus())}remove(){R(this,ae,JS).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(R(this,ae,Sm).call(this),R(this,ae,Em).call(this,l(this,ps).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){let n=!1;this.parent&&!e?(this._uiManager.removeShouldRescale(this),R(this,ae,JS).call(this)):e&&(this._uiManager.addShouldRescale(this),R(this,ae,Sm).call(this,e),n=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(e),n&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,ne._mergeSVGProperties({bbox:R(this,ae,gd).call(this)},l(this,ps).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&R(this,ae,Em).call(this,l(this,ps).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let e,n;this._isCopy&&(e=this.x,n=this.y);const i=super.render();i.classList.add("draw");const o=document.createElement("div");return i.append(o),o.setAttribute("aria-hidden","true"),o.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(e,n),i}static createDrawerInstance(e,n,i,o,c){Te("Not implemented")}static startDrawing(e,n,i,o){const{target:c,offsetX:u,offsetY:h,pointerId:f,pointerType:p}=o;if(ii.isInitializedAndDifferentPointerType(p))return;const{viewport:{rotation:m}}=e,{width:v,height:b}=c.getBoundingClientRect(),C=A(ne,Zu,new AbortController),E=e.combinedSignal(C);if(ii.setPointer(p,f),window.addEventListener("pointerup",T=>{ii.isSamePointerIdOrRemove(T.pointerId)&&this._endDraw(T)},{signal:E}),window.addEventListener("pointercancel",T=>{ii.isSamePointerIdOrRemove(T.pointerId)&&this._currentParent.endDrawingSession()},{signal:E}),window.addEventListener("pointerdown",T=>{ii.isSamePointerType(T.pointerType)&&(ii.initializeAndAddPointerId(T.pointerId),l(ne,Mn).isCancellable()&&(l(ne,Mn).removeLastElement(),l(ne,Mn).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:E}),window.addEventListener("contextmenu",Ys,{signal:E}),c.addEventListener("pointermove",this._drawMove.bind(this),{signal:E}),c.addEventListener("touchmove",T=>{ii.isSameTimeStamp(T.timeStamp)&&nn(T)},{signal:E}),e.toggleDrawing(),n._editorUndoBar?.hide(),l(ne,Mn)){e.drawLayer.updateProperties(this._currentDrawId,l(ne,Mn).startNew(u,h,v,b,m));return}n.updateUIForDefaultProperties(this),A(ne,Mn,this.createDrawerInstance(u,h,v,b,m)),A(ne,Ju,this.getDefaultDrawingOptions()),this._currentParent=e,{id:this._currentDrawId}=e.drawLayer.draw(this._mergeSVGProperties(l(ne,Ju).toSVGProperties(),l(ne,Mn).defaultSVGProperties),!0,!1)}static _drawMove(e){if(ii.isSameTimeStamp(e.timeStamp),!l(ne,Mn))return;const{offsetX:n,offsetY:i,pointerId:o}=e;if(ii.isSamePointerId(o)){if(ii.isUsingMultiplePointers()){this._endDraw(e);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,l(ne,Mn).add(n,i)),ii.setTimeStamp(e.timeStamp),nn(e)}}static _cleanup(e){e&&(this._currentDrawId=-1,this._currentParent=null,A(ne,Mn,null),A(ne,Ju,null),ii.clearTimeStamp()),l(ne,Zu)&&(l(ne,Zu).abort(),A(ne,Zu,null),ii.clearPointerIds())}static _endDraw(e){const n=this._currentParent;if(n){if(n.toggleDrawing(!0),this._cleanup(!1),e?.target===n.div&&n.drawLayer.updateProperties(this._currentDrawId,l(ne,Mn).end(e.offsetX,e.offsetY)),this.supportMultipleDrawings){const i=l(ne,Mn),o=this._currentDrawId,c=i.getLastElement();n.addCommands({cmd:()=>{n.drawLayer.updateProperties(o,i.setLastElement(c))},undo:()=>{n.drawLayer.updateProperties(o,i.removeLastElement())},mustExec:!1,type:ie.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(e){const n=this._currentParent;if(!n)return null;if(n.toggleDrawing(!0),n.cleanUndoStack(ie.DRAW_STEP),!l(ne,Mn).isEmpty()){const{pageDimensions:[i,o],scale:c}=n,u=n.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:l(ne,Mn).getOutlines(i*c,o*c,c,this._INNER_MARGIN),drawingOptions:l(ne,Ju),mustBeCommitted:!e});return this._cleanup(!0),u}return n.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(e){}static deserializeDraw(e,n,i,o,c,u){Te("Not implemented")}static async deserialize(e,n,i){var m,v;const{rawDims:{pageWidth:o,pageHeight:c,pageX:u,pageY:h}}=n.viewport,f=this.deserializeDraw(u,h,o,c,this._INNER_MARGIN,e),p=await super.deserialize(e,n,i);return p.createDrawingOptions(e),R(m=p,ae,QS).call(m,{drawOutlines:f}),R(v=p,ae,Sm).call(v),p.onScaleChanging(),p.rotate(),p}serializeDraw(e){const[n,i]=this.pageTranslation,[o,c]=this.pageDimensions;return l(this,ps).serialize([n,i,o,c],e)}renderAnnotationElement(e){return e.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}};ps=new WeakMap,Wf=new WeakMap,Mn=new WeakMap,Zu=new WeakMap,Ju=new WeakMap,ae=new WeakSet,QS=function({drawOutlines:e,drawId:n,drawingOptions:i}){A(this,ps,e),this._drawingOptions||(this._drawingOptions=i),this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),n>=0?(this._drawId=n,this.parent.drawLayer.finalizeDraw(n,e.defaultProperties)):this._drawId=R(this,ae,ZS).call(this,e,this.parent),R(this,ae,Em).call(this,e.box)},ZS=function(e,n){const{id:i}=n.drawLayer.draw(ne._mergeSVGProperties(this._drawingOptions.toSVGProperties(),e.defaultSVGProperties),!1,!1);return i},JS=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},Sm=function(e=this.parent){if(!(this._drawId!==null&&this.parent===e)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,e.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=R(this,ae,ZS).call(this,l(this,ps),e)}},vM=function([e,n,i,o]){const{parentDimensions:[c,u],rotation:h}=this;switch(h){case 90:return[n,1-e,i*(u/c),o*(c/u)];case 180:return[1-e,1-n,i,o];case 270:return[1-n,e,i*(u/c),o*(c/u)];default:return[e,n,i,o]}},Xv=function(){const{x:e,y:n,width:i,height:o,parentDimensions:[c,u],rotation:h}=this;switch(h){case 90:return[1-n,e,i*(c/u),o*(u/c)];case 180:return[1-e,1-n,i,o];case 270:return[n,1-e,i*(c/u),o*(u/c)];default:return[e,n,i,o]}},Em=function(e){[this.x,this.y,this.width,this.height]=R(this,ae,vM).call(this,e),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()},gd=function(){const{x:e,y:n,width:i,height:o,rotation:c,parentRotation:u,parentDimensions:[h,f]}=this;switch((c*4+u)/90){case 1:return[1-n-o,e,o,i];case 2:return[1-e-i,1-n-o,i,o];case 3:return[n,1-e-i,o,i];case 4:return[e,n-i*(h/f),o*(f/h),i*(h/f)];case 5:return[1-n,e,i*(h/f),o*(f/h)];case 6:return[1-e-o*(f/h),1-n,o*(f/h),i*(h/f)];case 7:return[n-i*(h/f),1-e-o*(f/h),i*(h/f),o*(f/h)];case 8:return[e-i,n-o,i,o];case 9:return[1-n,e-i,o,i];case 10:return[1-e,1-n,i,o];case 11:return[n-o,1-e,o,i];case 12:return[e-o*(f/h),n,o*(f/h),i*(h/f)];case 13:return[1-n-i*(h/f),e-o*(f/h),i*(h/f),o*(f/h)];case 14:return[1-e,1-n-i*(h/f),o*(f/h),i*(h/f)];case 15:return[n,1-e,i*(h/f),o*(f/h)];default:return[e,n,i,o]}},ct(ne,"_currentDrawId",-1),ct(ne,"_currentParent",null),_(ne,Mn,null),_(ne,Zu,null),_(ne,Ju,null),ct(ne,"_INNER_MARGIN",3);let Aw=ne;var eo,Dn,Nn,th,Gf,wi,$n,Gs,eh,nh,ih,Xf,Kv;class W3{constructor(t,e,n,i,o,c){_(this,Xf);_(this,eo,new Float64Array(6));_(this,Dn);_(this,Nn);_(this,th);_(this,Gf);_(this,wi);_(this,$n,"");_(this,Gs,0);_(this,eh,new G0);_(this,nh);_(this,ih);A(this,nh,n),A(this,ih,i),A(this,th,o),A(this,Gf,c),[t,e]=R(this,Xf,Kv).call(this,t,e);const u=A(this,Dn,[NaN,NaN,NaN,NaN,t,e]);A(this,wi,[t,e]),A(this,Nn,[{line:u,points:l(this,wi)}]),l(this,eo).set(u,0)}updateProperty(t,e){t==="stroke-width"&&A(this,Gf,e)}isEmpty(){return!l(this,Nn)||l(this,Nn).length===0}isCancellable(){return l(this,wi).length<=10}add(t,e){[t,e]=R(this,Xf,Kv).call(this,t,e);const[n,i,o,c]=l(this,eo).subarray(2,6),u=t-o,h=e-c;return Math.hypot(l(this,nh)*u,l(this,ih)*h)<=2?null:(l(this,wi).push(t,e),isNaN(n)?(l(this,eo).set([o,c,t,e],2),l(this,Dn).push(NaN,NaN,NaN,NaN,t,e),{path:{d:this.toSVGPath()}}):(isNaN(l(this,eo)[0])&&l(this,Dn).splice(6,6),l(this,eo).set([n,i,o,c,t,e],0),l(this,Dn).push(...St.createBezierPoints(n,i,o,c,t,e)),{path:{d:this.toSVGPath()}}))}end(t,e){const n=this.add(t,e);return n||(l(this,wi).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(t,e,n,i,o){A(this,nh,n),A(this,ih,i),A(this,th,o),[t,e]=R(this,Xf,Kv).call(this,t,e);const c=A(this,Dn,[NaN,NaN,NaN,NaN,t,e]);A(this,wi,[t,e]);const u=l(this,Nn).at(-1);return u&&(u.line=new Float32Array(u.line),u.points=new Float32Array(u.points)),l(this,Nn).push({line:c,points:l(this,wi)}),l(this,eo).set(c,0),A(this,Gs,0),this.toSVGPath(),null}getLastElement(){return l(this,Nn).at(-1)}setLastElement(t){return l(this,Nn)?(l(this,Nn).push(t),A(this,Dn,t.line),A(this,wi,t.points),A(this,Gs,0),{path:{d:this.toSVGPath()}}):l(this,eh).setLastElement(t)}removeLastElement(){if(!l(this,Nn))return l(this,eh).removeLastElement();l(this,Nn).pop(),A(this,$n,"");for(let t=0,e=l(this,Nn).length;t<e;t++){const{line:n,points:i}=l(this,Nn)[t];A(this,Dn,n),A(this,wi,i),A(this,Gs,0),this.toSVGPath()}return{path:{d:l(this,$n)}}}toSVGPath(){const t=St.svgRound(l(this,Dn)[4]),e=St.svgRound(l(this,Dn)[5]);if(l(this,wi).length===2)return A(this,$n,`${l(this,$n)} M ${t} ${e} Z`),l(this,$n);if(l(this,wi).length<=6){const i=l(this,$n).lastIndexOf("M");A(this,$n,`${l(this,$n).slice(0,i)} M ${t} ${e}`),A(this,Gs,6)}if(l(this,wi).length===4){const i=St.svgRound(l(this,Dn)[10]),o=St.svgRound(l(this,Dn)[11]);return A(this,$n,`${l(this,$n)} L ${i} ${o}`),A(this,Gs,12),l(this,$n)}const n=[];l(this,Gs)===0&&(n.push(`M ${t} ${e}`),A(this,Gs,6));for(let i=l(this,Gs),o=l(this,Dn).length;i<o;i+=6){const[c,u,h,f,p,m]=l(this,Dn).slice(i,i+6).map(St.svgRound);n.push(`C${c} ${u} ${h} ${f} ${p} ${m}`)}return A(this,$n,l(this,$n)+n.join(" ")),A(this,Gs,l(this,Dn).length),l(this,$n)}getOutlines(t,e,n,i){const o=l(this,Nn).at(-1);return o.line=new Float32Array(o.line),o.points=new Float32Array(o.points),l(this,eh).build(l(this,Nn),t,e,n,l(this,th),l(this,Gf),i),A(this,eo,null),A(this,Dn,null),A(this,Nn,null),A(this,$n,null),l(this,eh)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}eo=new WeakMap,Dn=new WeakMap,Nn=new WeakMap,th=new WeakMap,Gf=new WeakMap,wi=new WeakMap,$n=new WeakMap,Gs=new WeakMap,eh=new WeakMap,nh=new WeakMap,ih=new WeakMap,Xf=new WeakSet,Kv=function(t,e){return St._normalizePoint(t,e,l(this,nh),l(this,ih),l(this,th))};var xi,D0,N0,ms,no,io,Kf,Yf,sh,Xn,Po,wM,xM,bM;class G0 extends St{constructor(){super(...arguments);_(this,Xn);_(this,xi);_(this,D0,0);_(this,N0);_(this,ms);_(this,no);_(this,io);_(this,Kf);_(this,Yf);_(this,sh)}build(e,n,i,o,c,u,h){A(this,no,n),A(this,io,i),A(this,Kf,o),A(this,Yf,c),A(this,sh,u),A(this,N0,h??0),A(this,ms,e),R(this,Xn,xM).call(this)}get thickness(){return l(this,sh)}setLastElement(e){return l(this,ms).push(e),{path:{d:this.toSVGPath()}}}removeLastElement(){return l(this,ms).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const e=[];for(const{line:n}of l(this,ms)){if(e.push(`M${St.svgRound(n[4])} ${St.svgRound(n[5])}`),n.length===6){e.push("Z");continue}if(n.length===12&&isNaN(n[6])){e.push(`L${St.svgRound(n[10])} ${St.svgRound(n[11])}`);continue}for(let i=6,o=n.length;i<o;i+=6){const[c,u,h,f,p,m]=n.subarray(i,i+6).map(St.svgRound);e.push(`C${c} ${u} ${h} ${f} ${p} ${m}`)}}return e.join("")}serialize([e,n,i,o],c){const u=[],h=[],[f,p,m,v]=R(this,Xn,wM).call(this);let b,C,E,T,P,N,L,F,O;switch(l(this,Yf)){case 0:O=St._rescale,b=e,C=n+o,E=i,T=-o,P=e+f*i,N=n+(1-p-v)*o,L=e+(f+m)*i,F=n+(1-p)*o;break;case 90:O=St._rescaleAndSwap,b=e,C=n,E=i,T=o,P=e+p*i,N=n+f*o,L=e+(p+v)*i,F=n+(f+m)*o;break;case 180:O=St._rescale,b=e+i,C=n,E=-i,T=o,P=e+(1-f-m)*i,N=n+p*o,L=e+(1-f)*i,F=n+(p+v)*o;break;case 270:O=St._rescaleAndSwap,b=e+i,C=n+o,E=-i,T=-o,P=e+(1-p-v)*i,N=n+(1-f-m)*o,L=e+(1-p)*i,F=n+(1-f)*o;break}for(const{line:z,points:K}of l(this,ms))u.push(O(z,b,C,E,T,c?new Array(z.length):null)),h.push(O(K,b,C,E,T,c?new Array(K.length):null));return{lines:u,points:h,rect:[P,N,L,F]}}static deserialize(e,n,i,o,c,{paths:{lines:u,points:h},rotation:f,thickness:p}){const m=[];let v,b,C,E,T;switch(f){case 0:T=St._rescale,v=-e/i,b=n/o+1,C=1/i,E=-1/o;break;case 90:T=St._rescaleAndSwap,v=-n/o,b=-e/i,C=1/o,E=1/i;break;case 180:T=St._rescale,v=e/i+1,b=-n/o,C=-1/i,E=1/o;break;case 270:T=St._rescaleAndSwap,v=n/o+1,b=e/i+1,C=-1/o,E=-1/i;break}if(!u){u=[];for(const N of h){const L=N.length;if(L===2){u.push(new Float32Array([NaN,NaN,NaN,NaN,N[0],N[1]]));continue}if(L===4){u.push(new Float32Array([NaN,NaN,NaN,NaN,N[0],N[1],NaN,NaN,NaN,NaN,N[2],N[3]]));continue}const F=new Float32Array(3*(L-2));u.push(F);let[O,z,K,Y]=N.subarray(0,4);F.set([NaN,NaN,NaN,NaN,O,z],0);for(let nt=4;nt<L;nt+=2){const st=N[nt],it=N[nt+1];F.set(St.createBezierPoints(O,z,K,Y,st,it),(nt-2)*3),[O,z,K,Y]=[K,Y,st,it]}}}for(let N=0,L=u.length;N<L;N++)m.push({line:T(u[N].map(F=>F??NaN),v,b,C,E),points:T(h[N].map(F=>F??NaN),v,b,C,E)});const P=new this.prototype.constructor;return P.build(m,i,o,1,f,p,c),P}get box(){return l(this,xi)}updateProperty(e,n){return e==="stroke-width"?R(this,Xn,bM).call(this,n):null}updateParentDimensions([e,n],i){const[o,c]=R(this,Xn,Po).call(this);A(this,no,e),A(this,io,n),A(this,Kf,i);const[u,h]=R(this,Xn,Po).call(this),f=u-o,p=h-c,m=l(this,xi);return m[0]-=f,m[1]-=p,m[2]+=2*f,m[3]+=2*p,m}updateRotation(e){return A(this,D0,e),{path:{transform:this.rotationTransform}}}get viewBox(){return l(this,xi).map(St.svgRound).join(" ")}get defaultProperties(){const[e,n]=l(this,xi);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${St.svgRound(e)} ${St.svgRound(n)}`}}}get rotationTransform(){const[,,e,n]=l(this,xi);let i=0,o=0,c=0,u=0,h=0,f=0;switch(l(this,D0)){case 90:o=n/e,c=-e/n,h=e;break;case 180:i=-1,u=-1,h=e,f=n;break;case 270:o=-n/e,c=e/n,f=n;break;default:return""}return`matrix(${i} ${o} ${c} ${u} ${St.svgRound(h)} ${St.svgRound(f)})`}getPathResizingSVGProperties([e,n,i,o]){const[c,u]=R(this,Xn,Po).call(this),[h,f,p,m]=l(this,xi);if(Math.abs(p-c)<=St.PRECISION||Math.abs(m-u)<=St.PRECISION){const T=e+i/2-(h+p/2),P=n+o/2-(f+m/2);return{path:{"transform-origin":`${St.svgRound(e)} ${St.svgRound(n)}`,transform:`${this.rotationTransform} translate(${T} ${P})`}}}const v=(i-2*c)/(p-2*c),b=(o-2*u)/(m-2*u),C=p/i,E=m/o;return{path:{"transform-origin":`${St.svgRound(h)} ${St.svgRound(f)}`,transform:`${this.rotationTransform} scale(${C} ${E}) translate(${St.svgRound(c)} ${St.svgRound(u)}) scale(${v} ${b}) translate(${St.svgRound(-c)} ${St.svgRound(-u)})`}}}getPathResizedSVGProperties([e,n,i,o]){const[c,u]=R(this,Xn,Po).call(this),h=l(this,xi),[f,p,m,v]=h;if(h[0]=e,h[1]=n,h[2]=i,h[3]=o,Math.abs(m-c)<=St.PRECISION||Math.abs(v-u)<=St.PRECISION){const P=e+i/2-(f+m/2),N=n+o/2-(p+v/2);for(const{line:L,points:F}of l(this,ms))St._translate(L,P,N,L),St._translate(F,P,N,F);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${St.svgRound(e)} ${St.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const b=(i-2*c)/(m-2*c),C=(o-2*u)/(v-2*u),E=-b*(f+c)+e+c,T=-C*(p+u)+n+u;if(b!==1||C!==1||E!==0||T!==0)for(const{line:P,points:N}of l(this,ms))St._rescale(P,E,T,b,C,P),St._rescale(N,E,T,b,C,N);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${St.svgRound(e)} ${St.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([e,n],i){const[o,c]=i,u=l(this,xi),h=e-u[0],f=n-u[1];if(l(this,no)===o&&l(this,io)===c)for(const{line:p,points:m}of l(this,ms))St._translate(p,h,f,p),St._translate(m,h,f,m);else{const p=l(this,no)/o,m=l(this,io)/c;A(this,no,o),A(this,io,c);for(const{line:v,points:b}of l(this,ms))St._rescale(v,h,f,p,m,v),St._rescale(b,h,f,p,m,b);u[2]*=p,u[3]*=m}return u[0]=e,u[1]=n,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${St.svgRound(e)} ${St.svgRound(n)}`}}}get defaultSVGProperties(){const e=l(this,xi);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${St.svgRound(e[0])} ${St.svgRound(e[1])}`,transform:this.rotationTransform||null},bbox:e}}}xi=new WeakMap,D0=new WeakMap,N0=new WeakMap,ms=new WeakMap,no=new WeakMap,io=new WeakMap,Kf=new WeakMap,Yf=new WeakMap,sh=new WeakMap,Xn=new WeakSet,Po=function(e=l(this,sh)){const n=l(this,N0)+e/2*l(this,Kf);return l(this,Yf)%180===0?[n/l(this,no),n/l(this,io)]:[n/l(this,io),n/l(this,no)]},wM=function(){const[e,n,i,o]=l(this,xi),[c,u]=R(this,Xn,Po).call(this,0);return[e+c,n+u,i-2*c,o-2*u]},xM=function(){const e=A(this,xi,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:o}of l(this,ms)){if(o.length<=12){for(let h=4,f=o.length;h<f;h+=6)vt.pointBoundingBox(o[h],o[h+1],e);continue}let c=o[4],u=o[5];for(let h=6,f=o.length;h<f;h+=6){const[p,m,v,b,C,E]=o.subarray(h,h+6);vt.bezierBoundingBox(c,u,p,m,v,b,C,E,e),c=C,u=E}}const[n,i]=R(this,Xn,Po).call(this);e[0]=Si(e[0]-n,0,1),e[1]=Si(e[1]-i,0,1),e[2]=Si(e[2]+n,0,1),e[3]=Si(e[3]+i,0,1),e[2]-=e[0],e[3]-=e[1]},bM=function(e){const[n,i]=R(this,Xn,Po).call(this);A(this,sh,e);const[o,c]=R(this,Xn,Po).call(this),[u,h]=[o-n,c-i],f=l(this,xi);return f[0]-=u,f[1]-=h,f[2]+=2*u,f[3]+=2*h,f};class rx extends yM{constructor(t){super(),this._viewParameters=t,super.updateProperties({fill:"none",stroke:De._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(t,e){t==="stroke-width"&&(e??(e=this["stroke-width"]),e*=this._viewParameters.realScale),super.updateSVGProperty(t,e)}clone(){const t=new rx(this._viewParameters);return t.updateAll(this),t}}var Vw,AM;const Td=class Td extends Aw{constructor(e){super({...e,name:"inkEditor"});_(this,Vw);this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(e,n){De.initialize(e,n),this._defaultDrawingOptions=new rx(n.viewParameters)}static getDefaultDrawingOptions(e){const n=this._defaultDrawingOptions.clone();return n.updateProperties(e),n}static get supportMultipleDrawings(){return!0}static get typesMap(){return $t(this,"typesMap",new Map([[ie.INK_THICKNESS,"stroke-width"],[ie.INK_COLOR,"stroke"],[ie.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(e,n,i,o,c){return new W3(e,n,i,o,c,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(e,n,i,o,c,u){return G0.deserialize(e,n,i,o,c,u)}static async deserialize(e,n,i){let o=null;if(e instanceof lE){const{data:{inkLists:u,rect:h,rotation:f,id:p,color:m,opacity:v,borderStyle:{rawWidth:b},popupRef:C,richText:E,contentsObj:T,creationDate:P,modificationDate:N},parent:{page:{pageNumber:L}}}=e;o=e={annotationType:Gt.INK,color:Array.from(m),thickness:b,opacity:v,paths:{points:u},boxes:null,pageIndex:L-1,rect:h.slice(0),rotation:f,annotationElementId:p,id:p,deleted:!1,popupRef:C,richText:E,comment:T?.str||null,creationDate:P,modificationDate:N}}const c=await super.deserialize(e,n,i);return c._initialData=o,e.comment&&c.setCommentData(e),c}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new vw(this)),[["colorPicker",this._colorPicker]]}get colorType(){return ie.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:e,_drawingOptions:n,parent:i}=this;n.updateSVGProperty("stroke-width"),i.drawLayer.updateProperties(e,n.toSVGProperties())}static onScaleChangingWhenDrawing(){const e=this._currentParent;e&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),e.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:e,thickness:n,opacity:i}){this._drawingOptions=Td.getDefaultDrawingOptions({stroke:vt.makeHexColor(...e),"stroke-width":n,"stroke-opacity":i})}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:n,points:i}=this.serializeDraw(e),{_drawingOptions:{stroke:o,"stroke-opacity":c,"stroke-width":u}}=this,h=Object.assign(super.serialize(e),{color:De._colorManager.convert(o),opacity:c,thickness:u,paths:{lines:n,points:i}});return this.addComment(h),e?(h.isCopy=!0,h):this.annotationElementId&&!R(this,Vw,AM).call(this,h)?null:(h.id=this.annotationElementId,h)}renderAnnotationElement(e){if(this.deleted)return e.hide(),null;const{points:n,rect:i}=this.serializeDraw(!1);return e.updateEdited({rect:i,thickness:this._drawingOptions["stroke-width"],points:n,popup:this.comment}),null}};Vw=new WeakSet,AM=function(e){const{color:n,thickness:i,opacity:o,pageIndex:c}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||e.color.some((u,h)=>u!==n[h])||e.thickness!==i||e.opacity!==o||e.pageIndex!==c},ct(Td,"_type","ink"),ct(Td,"_editorType",Gt.INK),ct(Td,"_defaultDrawingOptions",null);let t1=Td;class e1 extends G0{toSVGPath(){let t=super.toSVGPath();return t.endsWith("Z")||(t+="Z"),t}}const yv=8,nm=3;var rh,de,n1,vr,SM,EM,i1,Yv,CM,kM,TM,s1,r1,_M;class da{static extractContoursFromText(t,{fontFamily:e,fontStyle:n,fontWeight:i},o,c,u,h){let f=new OffscreenCanvas(1,1),p=f.getContext("2d",{alpha:!1});const m=200,v=p.font=`${n} ${i} ${m}px ${e}`,{actualBoundingBoxLeft:b,actualBoundingBoxRight:C,actualBoundingBoxAscent:E,actualBoundingBoxDescent:T,fontBoundingBoxAscent:P,fontBoundingBoxDescent:N,width:L}=p.measureText(t),F=1.5,O=Math.ceil(Math.max(Math.abs(b)+Math.abs(C)||0,L)*F),z=Math.ceil(Math.max(Math.abs(E)+Math.abs(T)||m,Math.abs(P)+Math.abs(N)||m)*F);f=new OffscreenCanvas(O,z),p=f.getContext("2d",{alpha:!0,willReadFrequently:!0}),p.font=v,p.filter="grayscale(1)",p.fillStyle="white",p.fillRect(0,0,O,z),p.fillStyle="black",p.fillText(t,O*(F-1)/2,z*(3-F)/2);const K=R(this,de,s1).call(this,p.getImageData(0,0,O,z).data),Y=R(this,de,TM).call(this,K),nt=R(this,de,r1).call(this,Y),st=R(this,de,i1).call(this,K,O,z,nt);return this.processDrawnLines({lines:{curves:st,width:O,height:z},pageWidth:o,pageHeight:c,rotation:u,innerMargin:h,mustSmooth:!0,areContours:!0})}static process(t,e,n,i,o){const[c,u,h]=R(this,de,_M).call(this,t),[f,p]=R(this,de,kM).call(this,c,u,h,Math.hypot(u,h)*l(this,rh).sigmaSFactor,l(this,rh).sigmaR,l(this,rh).kernelSize),m=R(this,de,r1).call(this,p),v=R(this,de,i1).call(this,f,u,h,m);return this.processDrawnLines({lines:{curves:v,width:u,height:h},pageWidth:e,pageHeight:n,rotation:i,innerMargin:o,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:t,pageWidth:e,pageHeight:n,rotation:i,innerMargin:o,mustSmooth:c,areContours:u}){i%180!==0&&([e,n]=[n,e]);const{curves:h,width:f,height:p}=t,m=t.thickness??0,v=[],b=Math.min(e/f,n/p),C=b/e,E=b/n,T=[];for(const{points:N}of h){const L=c?R(this,de,CM).call(this,N):N;if(!L)continue;T.push(L);const F=L.length,O=new Float32Array(F),z=new Float32Array(3*(F===2?2:F-2));if(v.push({line:z,points:O}),F===2){O[0]=L[0]*C,O[1]=L[1]*E,z.set([NaN,NaN,NaN,NaN,O[0],O[1]],0);continue}let[K,Y,nt,st]=L;K*=C,Y*=E,nt*=C,st*=E,O.set([K,Y,nt,st],0),z.set([NaN,NaN,NaN,NaN,K,Y],0);for(let it=4;it<F;it+=2){const Mt=O[it]=L[it]*C,xt=O[it+1]=L[it+1]*E;z.set(St.createBezierPoints(K,Y,nt,st,Mt,xt),(it-2)*3),[K,Y,nt,st]=[nt,st,Mt,xt]}}if(v.length===0)return null;const P=u?new e1:new G0;return P.build(v,e,n,1,i,u?0:m,o),{outline:P,newCurves:T,areContours:u,thickness:m,width:f,height:p}}static async compressSignature({outlines:t,areContours:e,thickness:n,width:i,height:o}){let c=1/0,u=-1/0,h=0;for(const L of t){h+=L.length;for(let F=2,O=L.length;F<O;F++){const z=L[F]-L[F-2];c=Math.min(c,z),u=Math.max(u,z)}}let f;c>=-128&&u<=127?f=Int8Array:c>=-32768&&u<=32767?f=Int16Array:f=Int32Array;const p=t.length,m=yv+nm*p,v=new Uint32Array(m);let b=0;v[b++]=m*Uint32Array.BYTES_PER_ELEMENT+(h-2*p)*f.BYTES_PER_ELEMENT,v[b++]=0,v[b++]=i,v[b++]=o,v[b++]=e?0:1,v[b++]=Math.max(0,Math.floor(n??0)),v[b++]=p,v[b++]=f.BYTES_PER_ELEMENT;for(const L of t)v[b++]=L.length-2,v[b++]=L[0],v[b++]=L[1];const C=new CompressionStream("deflate-raw"),E=C.writable.getWriter();await E.ready,E.write(v);const T=f.prototype.constructor;for(const L of t){const F=new T(L.length-2);for(let O=2,z=L.length;O<z;O++)F[O-2]=L[O]-L[O-2];E.write(F)}E.close();const P=await new Response(C.readable).arrayBuffer(),N=new Uint8Array(P);return k2(N)}static async decompressSignature(t){try{const e=oB(t),{readable:n,writable:i}=new DecompressionStream("deflate-raw"),o=i.getWriter();await o.ready,o.write(e).then(async()=>{await o.ready,await o.close()}).catch(()=>{});let c=null,u=0;for await(const L of n)c||(c=new Uint8Array(new Uint32Array(L.buffer,0,4)[0])),c.set(L,u),u+=L.length;const h=new Uint32Array(c.buffer,0,c.length>>2),f=h[1];if(f!==0)throw new Error(`Invalid version: ${f}`);const p=h[2],m=h[3],v=h[4]===0,b=h[5],C=h[6],E=h[7],T=[],P=(yv+nm*C)*Uint32Array.BYTES_PER_ELEMENT;let N;switch(E){case Int8Array.BYTES_PER_ELEMENT:N=new Int8Array(c.buffer,P);break;case Int16Array.BYTES_PER_ELEMENT:N=new Int16Array(c.buffer,P);break;case Int32Array.BYTES_PER_ELEMENT:N=new Int32Array(c.buffer,P);break}u=0;for(let L=0;L<C;L++){const F=h[nm*L+yv],O=new Float32Array(F+2);T.push(O);for(let z=0;z<nm-1;z++)O[z]=h[nm*L+yv+z+1];for(let z=0;z<F;z++)O[z+2]=O[z]+N[u++]}return{areContours:v,thickness:b,outlines:T,width:p,height:m}}catch(e){return Ht(`decompressSignature: ${e}`),null}}}rh=new WeakMap,de=new WeakSet,n1=function(t,e,n,i){return n-=t,i-=e,n===0?i>0?0:4:n===1?i+6:2-i},vr=new WeakMap,SM=function(t,e,n,i,o,c,u){const h=R(this,de,n1).call(this,n,i,o,c);for(let f=0;f<8;f++){const p=(-f+h-u+16)%8,m=l(this,vr)[2*p],v=l(this,vr)[2*p+1];if(t[(n+m)*e+(i+v)]!==0)return p}return-1},EM=function(t,e,n,i,o,c,u){const h=R(this,de,n1).call(this,n,i,o,c);for(let f=0;f<8;f++){const p=(f+h+u+16)%8,m=l(this,vr)[2*p],v=l(this,vr)[2*p+1];if(t[(n+m)*e+(i+v)]!==0)return p}return-1},i1=function(t,e,n,i){const o=t.length,c=new Int32Array(o);for(let p=0;p<o;p++)c[p]=t[p]<=i?1:0;for(let p=1;p<n-1;p++)c[p*e]=c[p*e+e-1]=0;for(let p=0;p<e;p++)c[p]=c[e*n-1-p]=0;let u=1,h;const f=[];for(let p=1;p<n-1;p++){h=1;for(let m=1;m<e-1;m++){const v=p*e+m,b=c[v];if(b===0)continue;let C=p,E=m;if(b===1&&c[v-1]===0)u+=1,E-=1;else if(b>=1&&c[v+1]===0)u+=1,E+=1,b>1&&(h=b);else{b!==1&&(h=Math.abs(b));continue}const T=[m,p],P=E===m+1,N={isHole:P,points:T,id:u,parent:0};f.push(N);let L;for(const it of f)if(it.id===h){L=it;break}L?L.isHole?N.parent=P?L.parent:h:N.parent=P?h:L.parent:N.parent=P?h:0;const F=R(this,de,SM).call(this,c,e,p,m,C,E,0);if(F===-1){c[v]=-u,c[v]!==1&&(h=Math.abs(c[v]));continue}let O=l(this,vr)[2*F],z=l(this,vr)[2*F+1];const K=p+O,Y=m+z;C=K,E=Y;let nt=p,st=m;for(;;){const it=R(this,de,EM).call(this,c,e,nt,st,C,E,1);O=l(this,vr)[2*it],z=l(this,vr)[2*it+1];const Mt=nt+O,xt=st+z;T.push(xt,Mt);const Ct=nt*e+st;if(c[Ct+1]===0?c[Ct]=-u:c[Ct]===1&&(c[Ct]=u),Mt===p&&xt===m&&nt===K&&st===Y){c[v]!==1&&(h=Math.abs(c[v]));break}else C=nt,E=st,nt=Mt,st=xt}}}return f},Yv=function(t,e,n,i){if(n-e<=4){for(let K=e;K<n-2;K+=2)i.push(t[K],t[K+1]);return}const o=t[e],c=t[e+1],u=t[n-4]-o,h=t[n-3]-c,f=Math.hypot(u,h),p=u/f,m=h/f,v=p*c-m*o,b=h/u,C=1/f,E=Math.atan(b),T=Math.cos(E),P=Math.sin(E),N=C*(Math.abs(T)+Math.abs(P)),L=C*(1-N+N**2),F=Math.max(Math.atan(Math.abs(P+T)*L),Math.atan(Math.abs(P-T)*L));let O=0,z=e;for(let K=e+2;K<n-2;K+=2){const Y=Math.abs(v-p*t[K+1]+m*t[K]);Y>O&&(z=K,O=Y)}O>(f*F)**2?(R(this,de,Yv).call(this,t,e,z+2,i),R(this,de,Yv).call(this,t,z,n,i)):i.push(o,c)},CM=function(t){const e=[],n=t.length;return R(this,de,Yv).call(this,t,0,n,e),e.push(t[n-2],t[n-1]),e.length<=4?null:e},kM=function(t,e,n,i,o,c){const u=new Float32Array(c**2),h=-2*i**2,f=c>>1;for(let E=0;E<c;E++){const T=(E-f)**2;for(let P=0;P<c;P++)u[E*c+P]=Math.exp((T+(P-f)**2)/h)}const p=new Float32Array(256),m=-2*o**2;for(let E=0;E<256;E++)p[E]=Math.exp(E**2/m);const v=t.length,b=new Uint8Array(v),C=new Uint32Array(256);for(let E=0;E<n;E++)for(let T=0;T<e;T++){const P=E*e+T,N=t[P];let L=0,F=0;for(let z=0;z<c;z++){const K=E+z-f;if(!(K<0||K>=n))for(let Y=0;Y<c;Y++){const nt=T+Y-f;if(nt<0||nt>=e)continue;const st=t[K*e+nt],it=u[z*c+Y]*p[Math.abs(st-N)];L+=st*it,F+=it}}const O=b[P]=Math.round(L/F);C[O]++}return[b,C]},TM=function(t){const e=new Uint32Array(256);for(const n of t)e[n]++;return e},s1=function(t){const e=t.length,n=new Uint8ClampedArray(e>>2);let i=-1/0,o=1/0;for(let u=0,h=n.length;u<h;u++){const f=n[u]=t[u<<2];i=Math.max(i,f),o=Math.min(o,f)}const c=255/(i-o);for(let u=0,h=n.length;u<h;u++)n[u]=(n[u]-o)*c;return n},r1=function(t){let e,n=-1/0,i=-1/0;const o=t.findIndex(h=>h!==0);let c=o,u=o;for(e=o;e<256;e++){const h=t[e];h>n&&(e-c>i&&(i=e-c,u=e-1),n=h,c=e)}for(e=u-1;e>=0&&!(t[e]>t[e+1]);e--);return e},_M=function(t){const e=t,{width:n,height:i}=t,{maxDim:o}=l(this,rh);let c=n,u=i;if(n>o||i>o){let v=n,b=i,C=Math.log2(Math.max(n,i)/o);const E=Math.floor(C);C=C===E?E-1:E;for(let P=0;P<C;P++){c=Math.ceil(v/2),u=Math.ceil(b/2);const N=new OffscreenCanvas(c,u);N.getContext("2d").drawImage(t,0,0,v,b,0,0,c,u),v=c,b=u,t!==e&&t.close(),t=N.transferToImageBitmap()}const T=Math.min(o/c,o/u);c=Math.round(c*T),u=Math.round(u*T)}const f=new OffscreenCanvas(c,u).getContext("2d",{willReadFrequently:!0});f.fillStyle="white",f.fillRect(0,0,c,u),f.filter="grayscale(1)",f.drawImage(t,0,0,t.width,t.height,0,0,c,u);const p=f.getImageData(0,0,c,u).data;return[R(this,de,s1).call(this,p),c,u]},_(da,de),_(da,rh,{maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16}),_(da,vr,new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]));class cE extends yM{constructor(){super(),super.updateProperties({fill:De._defaultLineColor,"stroke-width":0})}clone(){const t=new cE;return t.updateAll(this),t}}class uE extends rx{constructor(t){super(t),super.updateProperties({stroke:De._defaultLineColor,"stroke-width":1})}clone(){const t=new uE(this._viewParameters);return t.updateAll(this),t}}var Ol,so,jl,oh;const Qi=class Qi extends Aw{constructor(e){super({...e,mustBeCommitted:!0,name:"signatureEditor"});_(this,Ol,!1);_(this,so,null);_(this,jl,null);_(this,oh,null);this._willKeepAspectRatio=!0,A(this,jl,e.signatureData||null),A(this,so,null),this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(e,n){De.initialize(e,n),this._defaultDrawingOptions=new cE,this._defaultDrawnSignatureOptions=new uE(n.viewParameters)}static getDefaultDrawingOptions(e){const n=this._defaultDrawingOptions.clone();return n.updateProperties(e),n}static get supportMultipleDrawings(){return!1}static get typesMap(){return $t(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!l(this,so)}}static computeTelemetryFinalData(e){const n=e.get("hasDescription");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let e,n;const{_isCopy:i}=this;if(i&&(this._isCopy=!1,e=this.x,n=this.y),super.render(),this._drawId===null)if(l(this,jl)){const{lines:o,mustSmooth:c,areContours:u,description:h,uuid:f,heightInPage:p}=l(this,jl),{rawDims:{pageWidth:m,pageHeight:v},rotation:b}=this.parent.viewport,C=da.processDrawnLines({lines:o,pageWidth:m,pageHeight:v,rotation:b,innerMargin:Qi._INNER_MARGIN,mustSmooth:c,areContours:u});this.addSignature(C,p,h,f)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:l(this,so)||""}));return i&&(this._isCopy=!0,this._moveAfterPaste(e,n)),this.div}setUuid(e){A(this,oh,e),this.addEditToolbar()}getUuid(){return l(this,oh)}get description(){return l(this,so)}set description(e){A(this,so,e),this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:e})),super.addEditToolbar().then(n=>{n?.updateEditSignatureButton(e)}))}getSignaturePreview(){const{newCurves:e,areContours:n,thickness:i,width:o,height:c}=l(this,jl),u=Math.max(o,c),h=da.processDrawnLines({lines:{curves:e.map(f=>({points:f})),thickness:i,width:o,height:c},pageWidth:u,pageHeight:u,rotation:0,innerMargin:0,mustSmooth:!1,areContours:n});return{areContours:n,outline:h.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(e,n,i,o){const{x:c,y:u}=this,{outline:h}=A(this,jl,e);A(this,Ol,h instanceof e1),this.description=i;let f;l(this,Ol)?f=Qi.getDefaultDrawingOptions():(f=Qi._defaultDrawnSignatureOptions.clone(),f.updateProperties({"stroke-width":h.thickness})),this._addOutlines({drawOutlines:h,drawingOptions:f});const[,p]=this.pageDimensions;let m=n/p;m=m>=1?.5:m,this.width*=m/this.height,this.width>=1&&(m*=.9/this.width,this.width=.9),this.height=m,this.setDims(),this.x=c,this.y=u,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(o),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!o,hasDescription:!!i}}),this.div.hidden=!1}getFromImage(e){const{rawDims:{pageWidth:n,pageHeight:i},rotation:o}=this.parent.viewport;return da.process(e,n,i,o,Qi._INNER_MARGIN)}getFromText(e,n){const{rawDims:{pageWidth:i,pageHeight:o},rotation:c}=this.parent.viewport;return da.extractContoursFromText(e,n,i,o,c,Qi._INNER_MARGIN)}getDrawnSignature(e){const{rawDims:{pageWidth:n,pageHeight:i},rotation:o}=this.parent.viewport;return da.processDrawnLines({lines:e,pageWidth:n,pageHeight:i,rotation:o,innerMargin:Qi._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:e,thickness:n}){e?this._drawingOptions=Qi.getDefaultDrawingOptions():(this._drawingOptions=Qi._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":n}))}serialize(e=!1){if(this.isEmpty())return null;const{lines:n,points:i}=this.serializeDraw(e),{_drawingOptions:{"stroke-width":o}}=this,c=Object.assign(super.serialize(e),{isSignature:!0,areContours:l(this,Ol),color:[0,0,0],thickness:l(this,Ol)?0:o});return this.addComment(c),e?(c.paths={lines:n,points:i},c.uuid=l(this,oh),c.isCopy=!0):c.lines=n,l(this,so)&&(c.accessibilityData={type:"Figure",alt:l(this,so)}),c}static deserializeDraw(e,n,i,o,c,u){return u.areContours?e1.deserialize(e,n,i,o,c,u):G0.deserialize(e,n,i,o,c,u)}static async deserialize(e,n,i){const o=await super.deserialize(e,n,i);return A(o,Ol,e.areContours),o.description=e.accessibilityData?.alt||"",A(o,oh,e.uuid),o}};Ol=new WeakMap,so=new WeakMap,jl=new WeakMap,oh=new WeakMap,ct(Qi,"_type","signature"),ct(Qi,"_editorType",Gt.SIGNATURE),ct(Qi,"_defaultDrawingOptions",null);let o1=Qi;var Ve,Ln,Bl,aa,Ul,qf,la,ah,ro,gs,Qf,le,Cm,km,qv,Qv,Zv,l1,Jv,PM;class a1 extends De{constructor(e){super({...e,name:"stampEditor"});_(this,le);_(this,Ve,null);_(this,Ln,null);_(this,Bl,null);_(this,aa,null);_(this,Ul,null);_(this,qf,"");_(this,la,null);_(this,ah,!1);_(this,ro,null);_(this,gs,!1);_(this,Qf,!1);A(this,aa,e.bitmapUrl),A(this,Ul,e.bitmapFile),this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(e,n){De.initialize(e,n)}static isHandlingMimeForPasting(e){return GA.includes(e)}static paste(e,n){n.pasteEditor({mode:Gt.STAMP},{bitmapFile:e.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){return{type:"stamp",hasAltText:!!this.altTextData?.altText}}static computeTelemetryFinalData(e){const n=e.get("hasAltText");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}async mlGuessAltText(e=null,n=!0){if(this.hasAltTextData())return null;const{mlManager:i}=this._uiManager;if(!i)throw new Error("No ML.");if(!await i.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:o,width:c,height:u}=e||this.copyCanvas(null,null,!0).imageData,h=await i.guess({name:"altText",request:{data:o,width:c,height:u,channels:o.length/(c*u)}});if(!h)throw new Error("No response from the AI service.");if(h.error)throw new Error("Error from the AI service.");if(h.cancel)return null;if(!h.output)throw new Error("No valid response from the AI service.");const f=h.output;return await this.setGuessedAltText(f),n&&!this.hasAltTextData()&&(this.altTextData={alt:f,decorative:!1}),f}remove(){l(this,Ln)&&(A(this,Ve,null),this._uiManager.imageManager.deleteId(l(this,Ln)),l(this,la)?.remove(),A(this,la,null),l(this,ro)&&(clearTimeout(l(this,ro)),A(this,ro,null))),super.remove()}rebuild(){if(!this.parent){l(this,Ln)&&R(this,le,qv).call(this);return}super.rebuild(),this.div!==null&&(l(this,Ln)&&l(this,la)===null&&R(this,le,qv).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(e){this._isDraggable=!0,e&&this.div.focus()}isEmpty(){return!(l(this,Bl)||l(this,Ve)||l(this,aa)||l(this,Ul)||l(this,Ln)||l(this,ah))}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let e,n;return this._isCopy&&(e=this.x,n=this.y),super.render(),this.div.hidden=!0,this.createAltText(),l(this,ah)||(l(this,Ve)?R(this,le,Qv).call(this):R(this,le,qv).call(this)),this._isCopy&&this._moveAfterPaste(e,n),this._uiManager.addShouldRescale(this),this.div}setCanvas(e,n){const{id:i,bitmap:o}=this._uiManager.imageManager.getFromCanvas(e,n);n.remove(),i&&this._uiManager.imageManager.isValidId(i)&&(A(this,Ln,i),o&&A(this,Ve,o),A(this,ah,!1),R(this,le,Qv).call(this))}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;l(this,ro)!==null&&clearTimeout(l(this,ro)),A(this,ro,setTimeout(()=>{A(this,ro,null),R(this,le,l1).call(this)},200))}copyCanvas(e,n,i=!1){e||(e=224);const{width:o,height:c}=l(this,Ve),u=new co;let h=l(this,Ve),f=o,p=c,m=null;if(n){if(o>n||c>n){const K=Math.min(n/o,n/c);f=Math.floor(o*K),p=Math.floor(c*K)}m=document.createElement("canvas");const b=m.width=Math.ceil(f*u.sx),C=m.height=Math.ceil(p*u.sy);l(this,gs)||(h=R(this,le,Zv).call(this,b,C));const E=m.getContext("2d");E.filter=this._uiManager.hcmFilter;let T="white",P="#cfcfd8";this._uiManager.hcmFilter!=="none"?P="black":dB.isDarkMode&&(T="#8f8f9d",P="#42414d");const N=15,L=N*u.sx,F=N*u.sy,O=new OffscreenCanvas(L*2,F*2),z=O.getContext("2d");z.fillStyle=T,z.fillRect(0,0,L*2,F*2),z.fillStyle=P,z.fillRect(0,0,L,F),z.fillRect(L,F,L,F),E.fillStyle=E.createPattern(O,"repeat"),E.fillRect(0,0,b,C),E.drawImage(h,0,0,h.width,h.height,0,0,b,C)}let v=null;if(i){let b,C;if(u.symmetric&&h.width<e&&h.height<e)b=h.width,C=h.height;else if(h=l(this,Ve),o>e||c>e){const P=Math.min(e/o,e/c);b=Math.floor(o*P),C=Math.floor(c*P),l(this,gs)||(h=R(this,le,Zv).call(this,b,C))}const T=new OffscreenCanvas(b,C).getContext("2d",{willReadFrequently:!0});T.drawImage(h,0,0,h.width,h.height,0,0,b,C),v={width:b,height:C,data:T.getImageData(0,0,b,C).data}}return{canvas:m,width:f,height:p,imageData:v}}static async deserialize(e,n,i){let o=null,c=!1;if(e instanceof WR){const{data:{rect:T,rotation:P,id:N,structParent:L,popupRef:F,richText:O,contentsObj:z,creationDate:K,modificationDate:Y},container:nt,parent:{page:{pageNumber:st}},canvas:it}=e;let Mt,xt;it?(delete e.canvas,{id:Mt,bitmap:xt}=i.imageManager.getFromCanvas(nt.id,it),it.remove()):(c=!0,e._hasNoCanvas=!0);const Ct=(await n._structTree.getAriaAttributes(`${Ad}${N}`))?.get("aria-label")||"";o=e={annotationType:Gt.STAMP,bitmapId:Mt,bitmap:xt,pageIndex:st-1,rect:T.slice(0),rotation:P,annotationElementId:N,id:N,deleted:!1,accessibilityData:{decorative:!1,altText:Ct},isSvg:!1,structParent:L,popupRef:F,richText:O,comment:z?.str||null,creationDate:K,modificationDate:Y}}const u=await super.deserialize(e,n,i),{rect:h,bitmap:f,bitmapUrl:p,bitmapId:m,isSvg:v,accessibilityData:b}=e;c?(i.addMissingCanvas(e.id,u),A(u,ah,!0)):m&&i.imageManager.isValidId(m)?(A(u,Ln,m),f&&A(u,Ve,f)):A(u,aa,p),A(u,gs,v);const[C,E]=u.pageDimensions;return u.width=(h[2]-h[0])/C,u.height=(h[3]-h[1])/E,b&&(u.altTextData=b),u._initialData=o,e.comment&&u.setCommentData(e),A(u,Qf,!!o),u}serialize(e=!1,n=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const i=Object.assign(super.serialize(e),{bitmapId:l(this,Ln),isSvg:l(this,gs)});if(this.addComment(i),e)return i.bitmapUrl=R(this,le,Jv).call(this,!0),i.accessibilityData=this.serializeAltText(!0),i.isCopy=!0,i;const{decorative:o,altText:c}=this.serializeAltText(!1);if(!o&&c&&(i.accessibilityData={type:"Figure",alt:c}),this.annotationElementId){const h=R(this,le,PM).call(this,i);return h.isSame?null:(h.isSameAltText?delete i.accessibilityData:i.accessibilityData.structParent=this._initialData.structParent??-1,i.id=this.annotationElementId,delete i.bitmapId,i)}if(n===null)return i;n.stamps||(n.stamps=new Map);const u=l(this,gs)?(i.rect[2]-i.rect[0])*(i.rect[3]-i.rect[1]):null;if(!n.stamps.has(l(this,Ln)))n.stamps.set(l(this,Ln),{area:u,serialized:i}),i.bitmap=R(this,le,Jv).call(this,!1);else if(l(this,gs)){const h=n.stamps.get(l(this,Ln));u>h.area&&(h.area=u,h.serialized.bitmap.close(),h.serialized.bitmap=R(this,le,Jv).call(this,!1))}return i}renderAnnotationElement(e){return this.deleted?(e.hide(),null):(e.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}}Ve=new WeakMap,Ln=new WeakMap,Bl=new WeakMap,aa=new WeakMap,Ul=new WeakMap,qf=new WeakMap,la=new WeakMap,ah=new WeakMap,ro=new WeakMap,gs=new WeakMap,Qf=new WeakMap,le=new WeakSet,Cm=function(e,n=!1){if(!e){this.remove();return}A(this,Ve,e.bitmap),n||(A(this,Ln,e.id),A(this,gs,e.isSvg)),e.file&&A(this,qf,e.file.name),R(this,le,Qv).call(this)},km=function(){if(A(this,Bl,null),this._uiManager.enableWaiting(!1),!!l(this,la)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&l(this,Ve)){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&l(this,Ve)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},qv=function(){if(l(this,Ln)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(l(this,Ln)).then(i=>R(this,le,Cm).call(this,i,!0)).finally(()=>R(this,le,km).call(this));return}if(l(this,aa)){const i=l(this,aa);A(this,aa,null),this._uiManager.enableWaiting(!0),A(this,Bl,this._uiManager.imageManager.getFromUrl(i).then(o=>R(this,le,Cm).call(this,o)).finally(()=>R(this,le,km).call(this)));return}if(l(this,Ul)){const i=l(this,Ul);A(this,Ul,null),this._uiManager.enableWaiting(!0),A(this,Bl,this._uiManager.imageManager.getFromFile(i).then(o=>R(this,le,Cm).call(this,o)).finally(()=>R(this,le,km).call(this)));return}const e=document.createElement("input");e.type="file",e.accept=GA.join(",");const n=this._uiManager._signal;A(this,Bl,new Promise(i=>{e.addEventListener("change",async()=>{if(!e.files||e.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const o=await this._uiManager.imageManager.getFromFile(e.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),R(this,le,Cm).call(this,o)}i()},{signal:n}),e.addEventListener("cancel",()=>{this.remove(),i()},{signal:n})}).finally(()=>R(this,le,km).call(this))),e.click()},Qv=function(){const{div:e}=this;let{width:n,height:i}=l(this,Ve);const[o,c]=this.pageDimensions,u=.75;if(this.width)n=this.width*o,i=this.height*c;else if(n>u*o||i>u*c){const f=Math.min(u*o/n,u*c/i);n*=f,i*=f}this._uiManager.enableWaiting(!1);const h=A(this,la,document.createElement("canvas"));h.setAttribute("role","img"),this.addContainer(h),this.width=n/o,this.height=i/c,this.setDims(),this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(e.hidden=!1),R(this,le,l1).call(this),l(this,Qf)||(this.parent.addUndoableEditor(this),A(this,Qf,!0)),this._reportTelemetry({action:"inserted_image"}),l(this,qf)&&this.div.setAttribute("aria-description",l(this,qf)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")},Zv=function(e,n){const{width:i,height:o}=l(this,Ve);let c=i,u=o,h=l(this,Ve);for(;c>2*e||u>2*n;){const f=c,p=u;c>2*e&&(c=c>=16384?Math.floor(c/2)-1:Math.ceil(c/2)),u>2*n&&(u=u>=16384?Math.floor(u/2)-1:Math.ceil(u/2));const m=new OffscreenCanvas(c,u);m.getContext("2d").drawImage(h,0,0,f,p,0,0,c,u),h=m.transferToImageBitmap()}return h},l1=function(){const[e,n]=this.parentDimensions,{width:i,height:o}=this,c=new co,u=Math.ceil(i*e*c.sx),h=Math.ceil(o*n*c.sy),f=l(this,la);if(!f||f.width===u&&f.height===h)return;f.width=u,f.height=h;const p=l(this,gs)?l(this,Ve):R(this,le,Zv).call(this,u,h),m=f.getContext("2d");m.filter=this._uiManager.hcmFilter,m.drawImage(p,0,0,p.width,p.height,0,0,u,h)},Jv=function(e){if(e){if(l(this,gs)){const o=this._uiManager.imageManager.getSvgUrl(l(this,Ln));if(o)return o}const n=document.createElement("canvas");return{width:n.width,height:n.height}=l(this,Ve),n.getContext("2d").drawImage(l(this,Ve),0,0),n.toDataURL()}if(l(this,gs)){const[n,i]=this.pageDimensions,o=Math.round(this.width*n*Ql.PDF_TO_CSS_UNITS),c=Math.round(this.height*i*Ql.PDF_TO_CSS_UNITS),u=new OffscreenCanvas(o,c);return u.getContext("2d").drawImage(l(this,Ve),0,0,l(this,Ve).width,l(this,Ve).height,0,0,o,c),u.transferToImageBitmap()}return structuredClone(l(this,Ve))},PM=function(e){const{pageIndex:n,accessibilityData:{altText:i}}=this._initialData,o=e.pageIndex===n,c=(e.accessibilityData?.alt||"")===i;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&o&&c,isSameAltText:c}},ct(a1,"_type","stamp"),ct(a1,"_editorType",Gt.STAMP);var lh,Zf,Vl,zl,ca,Wi,Hl,Jf,tp,wr,ua,In,ha,$l,ep,_t,Wl,ke,u1,RM,Or,h1,d1,tw;const lr=class lr{constructor({uiManager:t,pageIndex:e,div:n,structTreeLayer:i,accessibilityManager:o,annotationLayer:c,drawLayer:u,textLayer:h,viewport:f,l10n:p}){_(this,ke);_(this,lh);_(this,Zf,!1);_(this,Vl,null);_(this,zl,null);_(this,ca,null);_(this,Wi,new Map);_(this,Hl,!1);_(this,Jf,!1);_(this,tp,!1);_(this,wr,null);_(this,ua,null);_(this,In,null);_(this,ha,null);_(this,$l,null);_(this,ep,-1);_(this,_t);const m=[...l(lr,Wl).values()];if(!lr._initialized){lr._initialized=!0;for(const v of m)v.initialize(p,t)}t.registerEditorTypes(m),A(this,_t,t),this.pageIndex=e,this.div=n,A(this,lh,o),A(this,Vl,c),this.viewport=f,A(this,In,h),this.drawLayer=u,this._structTree=i,l(this,_t).addLayer(this)}get isEmpty(){return l(this,Wi).size===0}get isInvisible(){return this.isEmpty&&l(this,_t).getMode()===Gt.NONE}updateToolbar(t){l(this,_t).updateToolbar(t)}updateMode(t=l(this,_t).getMode()){switch(R(this,ke,tw).call(this),t){case Gt.NONE:this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case Gt.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case Gt.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:e}=this.div;if(e.toggle("nonEditing",!1),t===Gt.POPUP)e.toggle("commentEditing",!0);else{e.toggle("commentEditing",!1);for(const n of l(lr,Wl).values())e.toggle(`${n._type}Editing`,t===n._editorType)}this.div.hidden=!1}hasTextLayer(t){return t===l(this,In)?.div}setEditingState(t){l(this,_t).setEditingState(t)}addCommands(t){l(this,_t).addCommands(t)}cleanUndoStack(t){l(this,_t).cleanUndoStack(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){l(this,Vl)?.togglePointerEvents(t)}async enable(){A(this,tp,!0),this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),l(this,$l)?.abort(),A(this,$l,null);const t=new Set;for(const n of l(this,ke,u1))n.enableEditing(),n.show(!0),n.annotationElementId&&(l(this,_t).removeChangedExistingAnnotation(n),t.add(n.annotationElementId));const e=l(this,Vl);if(e)for(const n of e.getEditableAnnotations()){if(n.hide(),l(this,_t).isDeletedAnnotationElement(n.data.id)||t.has(n.data.id))continue;const i=await this.deserialize(n);i&&(this.addOrRebuild(i),i.enableEditing())}A(this,tp,!1),l(this,_t)._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){if(A(this,Jf,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),l(this,In)&&!l(this,$l)){A(this,$l,new AbortController);const i=l(this,_t).combinedSignal(l(this,$l));l(this,In).div.addEventListener("pointerdown",o=>{const{clientX:u,clientY:h,timeStamp:f}=o,p=l(this,ep);if(f-p>500){A(this,ep,f);return}A(this,ep,-1);const{classList:m}=this.div;m.toggle("getElements",!0);const v=document.elementsFromPoint(u,h);if(m.toggle("getElements",!1),!this.div.contains(v[0]))return;let b;const C=new RegExp(`^${Um}[0-9]+$`);for(const T of v)if(C.test(T.id)){b=T.id;break}if(!b)return;const E=l(this,Wi).get(b);E?.annotationElementId===null&&(o.stopPropagation(),o.preventDefault(),E.dblclick(o))},{signal:i,capture:!0})}const t=l(this,Vl),e=[];if(t){const i=new Map,o=new Map;for(const u of l(this,ke,u1)){if(u.disableEditing(),!u.annotationElementId){e.push(u);continue}if(u.serialize()!==null){i.set(u.annotationElementId,u);continue}else o.set(u.annotationElementId,u);this.getEditableAnnotation(u.annotationElementId)?.show(),u.remove()}const c=t.getEditableAnnotations();for(const u of c){const{id:h}=u.data;if(l(this,_t).isDeletedAnnotationElement(h)){u.updateEdited({deleted:!0});continue}let f=o.get(h);if(f){f.resetAnnotationElement(u),f.show(!1),u.show();continue}f=i.get(h),f&&(l(this,_t).addChangedExistingAnnotation(f),f.renderAnnotationElement(u)&&f.show(!1)),u.show()}}R(this,ke,tw).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:n}=this.div;for(const i of l(lr,Wl).values())n.remove(`${i._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),t?.updateFakeAnnotations(e),A(this,Jf,!1)}getEditableAnnotation(t){return l(this,Vl)?.getEditableAnnotation(t)||null}setActiveEditor(t){l(this,_t).getActive()!==t&&l(this,_t).setActiveEditor(t)}enableTextSelection(){if(this.div.tabIndex=-1,l(this,In)?.div&&!l(this,ha)){A(this,ha,new AbortController);const t=l(this,_t).combinedSignal(l(this,ha));l(this,In).div.addEventListener("pointerdown",R(this,ke,RM).bind(this),{signal:t}),l(this,In).div.classList.add("highlighting")}}disableTextSelection(){this.div.tabIndex=0,l(this,In)?.div&&l(this,ha)&&(l(this,ha).abort(),A(this,ha,null),l(this,In).div.classList.remove("highlighting"))}enableClick(){if(l(this,zl))return;A(this,zl,new AbortController);const t=l(this,_t).combinedSignal(l(this,zl));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t});const e=this.pointerup.bind(this);this.div.addEventListener("pointerup",e,{signal:t}),this.div.addEventListener("pointercancel",e,{signal:t})}disableClick(){l(this,zl)?.abort(),A(this,zl,null)}attach(t){l(this,Wi).set(t.id,t);const{annotationElementId:e}=t;e&&l(this,_t).isDeletedAnnotationElement(e)&&l(this,_t).removeDeletedAnnotationElement(t)}detach(t){l(this,Wi).delete(t.id),l(this,lh)?.removePointerInTextLayer(t.contentDiv),!l(this,Jf)&&t.annotationElementId&&l(this,_t).addDeletedAnnotationElement(t)}remove(t){this.detach(t),l(this,_t).removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1}changeParent(t){t.parent!==this&&(t.parent&&t.annotationElementId&&(l(this,_t).addDeletedAnnotationElement(t),De.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),t.parent?.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),l(this,_t).addEditor(t),this.attach(t),!t.isAttachedToDOM){const e=t.render();this.div.append(e),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(!l(this,tp)),l(this,_t).addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){if(!t.isAttachedToDOM)return;const{activeElement:e}=document;t.div.contains(e)&&!l(this,ca)&&(t._focusEventsAllowed=!1,A(this,ca,setTimeout(()=>{A(this,ca,null),t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:l(this,_t)._signal}),e.focus())},0))),t._structTreeParentId=l(this,lh)?.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||(t.parent=this),t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const e=()=>t._uiManager.rebuild(t),n=()=>{t.remove()};this.addCommands({cmd:e,undo:n,mustExec:!1})}getEditorByUID(t){for(const e of l(this,Wi).values())if(e.uid===t)return e;return null}getNextId(){return l(this,_t).getId()}combinedSignal(t){return l(this,_t).combinedSignal(t)}canCreateNewEmptyEditor(){return l(this,ke,Or)?.canCreateNewEmptyEditor()}async pasteEditor(t,e){this.updateToolbar(t),await l(this,_t).updateMode(t.mode);const{offsetX:n,offsetY:i}=R(this,ke,d1).call(this),o=this.getNextId(),c=R(this,ke,h1).call(this,{parent:this,id:o,x:n,y:i,uiManager:l(this,_t),isCentered:!0,...e});c&&this.add(c)}async deserialize(t){return await l(lr,Wl).get(t.annotationType??t.annotationEditorType)?.deserialize(t,this,l(this,_t))||null}createAndAddNewEditor(t,e,n={}){const i=this.getNextId(),o=R(this,ke,h1).call(this,{parent:this,id:i,x:t.offsetX,y:t.offsetY,uiManager:l(this,_t),isCentered:e,...n});return o&&this.add(o),o}get boundingClientRect(){return this.div.getBoundingClientRect()}addNewEditor(t={}){this.createAndAddNewEditor(R(this,ke,d1).call(this),!0,t)}setSelected(t){l(this,_t).setSelected(t)}toggleSelected(t){l(this,_t).toggleSelected(t)}unselect(t){l(this,_t).unselect(t)}pointerup(t){const{isMac:e}=Cn.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div||!l(this,Hl)||(A(this,Hl,!1),l(this,ke,Or)?.isDrawer&&l(this,ke,Or).supportMultipleDrawings))return;if(!l(this,Zf)){A(this,Zf,!0);return}const n=l(this,_t).getMode();if(n===Gt.STAMP||n===Gt.SIGNATURE){l(this,_t).unselectAll();return}this.createAndAddNewEditor(t,!1)}pointerdown(t){if(l(this,_t).getMode()===Gt.HIGHLIGHT&&this.enableTextSelection(),l(this,Hl)){A(this,Hl,!1);return}const{isMac:e}=Cn.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div)return;if(A(this,Hl,!0),l(this,ke,Or)?.isDrawer){this.startDrawingSession(t);return}const n=l(this,_t).getActive();A(this,Zf,!n||n.isEmpty())}startDrawingSession(t){if(this.div.focus({preventScroll:!0}),l(this,wr)){l(this,ke,Or).startDrawing(this,l(this,_t),!1,t);return}l(this,_t).setCurrentDrawingSession(this),A(this,wr,new AbortController);const e=l(this,_t).combinedSignal(l(this,wr));this.div.addEventListener("blur",({relatedTarget:n})=>{n&&!this.div.contains(n)&&(A(this,ua,null),this.commitOrRemove())},{signal:e}),l(this,ke,Or).startDrawing(this,l(this,_t),!1,t)}pause(t){if(t){const{activeElement:e}=document;this.div.contains(e)&&A(this,ua,e);return}l(this,ua)&&setTimeout(()=>{l(this,ua)?.focus(),A(this,ua,null)},0)}endDrawingSession(t=!1){return l(this,wr)?(l(this,_t).setCurrentDrawingSession(null),l(this,wr).abort(),A(this,wr,null),A(this,ua,null),l(this,ke,Or).endDrawing(t)):null}findNewParent(t,e,n){const i=l(this,_t).findParent(e,n);return i===null||i===this?!1:(i.changeParent(t),!0)}commitOrRemove(){return l(this,wr)?(this.endDrawingSession(),!0):!1}onScaleChanging(){l(this,wr)&&l(this,ke,Or).onScaleChangingWhenDrawing(this)}destroy(){this.commitOrRemove(),l(this,_t).getActive()?.parent===this&&(l(this,_t).commitOrRemove(),l(this,_t).setActiveEditor(null)),l(this,ca)&&(clearTimeout(l(this,ca)),A(this,ca,null));for(const t of l(this,Wi).values())l(this,lh)?.removePointerInTextLayer(t.contentDiv),t.setParent(null),t.isAttachedToDOM=!1,t.div.remove();this.div=null,l(this,Wi).clear(),l(this,_t).removeLayer(this)}render({viewport:t}){this.viewport=t,hh(this.div,t);for(const e of l(this,_t).getEditors(this.pageIndex))this.add(e),e.rebuild();this.updateMode()}update({viewport:t}){l(this,_t).commitOrRemove(),R(this,ke,tw).call(this);const e=this.viewport.rotation,n=t.rotation;if(this.viewport=t,hh(this.div,{rotation:n}),e!==n)for(const i of l(this,Wi).values())i.rotate(n)}get pageDimensions(){const{pageWidth:t,pageHeight:e}=this.viewport.rawDims;return[t,e]}get scale(){return l(this,_t).viewParameters.realScale}};lh=new WeakMap,Zf=new WeakMap,Vl=new WeakMap,zl=new WeakMap,ca=new WeakMap,Wi=new WeakMap,Hl=new WeakMap,Jf=new WeakMap,tp=new WeakMap,wr=new WeakMap,ua=new WeakMap,In=new WeakMap,ha=new WeakMap,$l=new WeakMap,ep=new WeakMap,_t=new WeakMap,Wl=new WeakMap,ke=new WeakSet,u1=function(){return l(this,Wi).size!==0?l(this,Wi).values():l(this,_t).getEditors(this.pageIndex)},RM=function(t){l(this,_t).unselectAll();const{target:e}=t;if(e===l(this,In).div||(e.getAttribute("role")==="img"||e.classList.contains("endOfContent"))&&l(this,In).div.contains(e)){const{isMac:n}=Cn.platform;if(t.button!==0||t.ctrlKey&&n)return;l(this,_t).showAllEditors("highlight",!0,!0),l(this,In).div.classList.add("free"),this.toggleDrawing(),bw.startHighlighting(this,l(this,_t).direction==="ltr",{target:l(this,In).div,x:t.x,y:t.y}),l(this,In).div.addEventListener("pointerup",()=>{l(this,In).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:l(this,_t)._signal}),t.preventDefault()}},Or=function(){return l(lr,Wl).get(l(this,_t).getMode())},h1=function(t){const e=l(this,ke,Or);return e?new e.prototype.constructor(t):null},d1=function(){const{x:t,y:e,width:n,height:i}=this.boundingClientRect,o=Math.max(0,t),c=Math.max(0,e),u=Math.min(window.innerWidth,t+n),h=Math.min(window.innerHeight,e+i),f=(o+u)/2-t,p=(c+h)/2-e,[m,v]=this.viewport.rotation%180===0?[f,p]:[p,f];return{offsetX:m,offsetY:v}},tw=function(){for(const t of l(this,Wi).values())t.isEmpty()&&t.remove()},ct(lr,"_initialized",!1),_(lr,Wl,new Map([$S,t1,a1,bw,o1].map(t=>[t._editorType,t])));let c1=lr;var xr,bi,ch,L0,zw,MM,uo,p1,DM,m1;const bn=class bn{constructor({pageIndex:t}){_(this,uo);_(this,xr,null);_(this,bi,new Map);_(this,ch,new Map);this.pageIndex=t}setParent(t){if(!l(this,xr)){A(this,xr,t);return}if(l(this,xr)!==t){if(l(this,bi).size>0)for(const e of l(this,bi).values())e.remove(),t.append(e);A(this,xr,t)}}static get _svgFactory(){return $t(this,"_svgFactory",new ww)}draw(t,e=!1,n=!1){const i=wn(bn,L0)._++,o=R(this,uo,p1).call(this),c=bn._svgFactory.createElement("defs");o.append(c);const u=bn._svgFactory.createElement("path");c.append(u);const h=`path_p${this.pageIndex}_${i}`;u.setAttribute("id",h),u.setAttribute("vector-effect","non-scaling-stroke"),e&&l(this,ch).set(i,u);const f=n?R(this,uo,DM).call(this,c,h):null,p=bn._svgFactory.createElement("use");return o.append(p),p.setAttribute("href",`#${h}`),this.updateProperties(o,t),l(this,bi).set(i,o),{id:i,clipPathId:`url(#${f})`}}drawOutline(t,e){const n=wn(bn,L0)._++,i=R(this,uo,p1).call(this),o=bn._svgFactory.createElement("defs");i.append(o);const c=bn._svgFactory.createElement("path");o.append(c);const u=`path_p${this.pageIndex}_${n}`;c.setAttribute("id",u),c.setAttribute("vector-effect","non-scaling-stroke");let h;if(e){const m=bn._svgFactory.createElement("mask");o.append(m),h=`mask_p${this.pageIndex}_${n}`,m.setAttribute("id",h),m.setAttribute("maskUnits","objectBoundingBox");const v=bn._svgFactory.createElement("rect");m.append(v),v.setAttribute("width","1"),v.setAttribute("height","1"),v.setAttribute("fill","white");const b=bn._svgFactory.createElement("use");m.append(b),b.setAttribute("href",`#${u}`),b.setAttribute("stroke","none"),b.setAttribute("fill","black"),b.setAttribute("fill-rule","nonzero"),b.classList.add("mask")}const f=bn._svgFactory.createElement("use");i.append(f),f.setAttribute("href",`#${u}`),h&&f.setAttribute("mask",`url(#${h})`);const p=f.cloneNode();return i.append(p),f.classList.add("mainOutline"),p.classList.add("secondaryOutline"),this.updateProperties(i,t),l(this,bi).set(n,i),n}finalizeDraw(t,e){l(this,ch).delete(t),this.updateProperties(t,e)}updateProperties(t,e){var h;if(!e)return;const{root:n,bbox:i,rootClass:o,path:c}=e,u=typeof t=="number"?l(this,bi).get(t):t;if(u){if(n&&R(this,uo,m1).call(this,u,n),i&&R(h=bn,zw,MM).call(h,u,i),o){const{classList:f}=u;for(const[p,m]of Object.entries(o))f.toggle(p,m)}if(c){const p=u.firstElementChild.firstElementChild;R(this,uo,m1).call(this,p,c)}}}updateParent(t,e){if(e===this)return;const n=l(this,bi).get(t);n&&(l(e,xr).append(n),l(this,bi).delete(t),l(e,bi).set(t,n))}remove(t){l(this,ch).delete(t),l(this,xr)!==null&&(l(this,bi).get(t).remove(),l(this,bi).delete(t))}destroy(){A(this,xr,null);for(const t of l(this,bi).values())t.remove();l(this,bi).clear(),l(this,ch).clear()}};xr=new WeakMap,bi=new WeakMap,ch=new WeakMap,L0=new WeakMap,zw=new WeakSet,MM=function(t,[e,n,i,o]){const{style:c}=t;c.top=`${100*n}%`,c.left=`${100*e}%`,c.width=`${100*i}%`,c.height=`${100*o}%`},uo=new WeakSet,p1=function(){const t=bn._svgFactory.create(1,1,!0);return l(this,xr).append(t),t.setAttribute("aria-hidden",!0),t},DM=function(t,e){const n=bn._svgFactory.createElement("clipPath");t.append(n);const i=`clip_${e}`;n.setAttribute("id",i),n.setAttribute("clipPathUnits","objectBoundingBox");const o=bn._svgFactory.createElement("use");return n.append(o),o.setAttribute("href",`#${e}`),o.classList.add("clip"),i},m1=function(t,e){for(const[n,i]of Object.entries(e))i===null?t.removeAttribute(n):t.setAttribute(n,i)},_(bn,zw),_(bn,L0,0);let f1=bn;globalThis._pdfjsTestingUtils={HighlightOutliner:GS};globalThis.pdfjsLib={AbortException:ql,AnnotationEditorLayer:c1,AnnotationEditorParamsType:ie,AnnotationEditorType:Gt,AnnotationEditorUIManager:dh,AnnotationLayer:zS,AnnotationMode:el,AnnotationType:dn,applyOpacity:pB,build:A3,ColorPicker:yw,createValidAbsoluteUrl:A2,CSSConstants:fB,DOMSVGFactory:ww,DrawLayer:f1,FeatureTest:Cn,fetchData:V0,findContrastColor:mB,getDocument:RR,getFilenameFromUrl:aB,getPdfFilenameFromUrl:lB,getRGB:H0,getUuid:C2,getXfaPageViewport:uB,GlobalWorkerOptions:oo,ImageKind:bv,InvalidPDFException:$A,isDataScheme:ix,isPdfFile:iE,isValidExplicitDest:kB,MathClamp:Si,noContextMenu:Ys,normalizeUnicode:sB,OPS:Vm,OutputScale:co,PasswordResponses:Yj,PDFDataRangeTransport:MR,PDFDateString:hw,PDFWorker:$m,PermissionFlag:Kj,PixelsPerInch:Ql,RenderingCancelledException:nE,renderRichText:_2,ResponseException:uw,setLayerDimensions:hh,shadow:$t,SignatureExtractor:da,stopEvent:nn,SupportedImageMimeTypes:GA,TextLayer:Hm,TouchManager:fw,updateUrlHash:S2,Util:vt,VerbosityLevel:tx,version:b3,XfaLayer:T2};oo.workerSrc=new URL("/assets/pdf.worker.min-LyOxJPrg.mjs",import.meta.url).toString();async function G3(r){const t=await r.arrayBuffer(),e=await RR({data:t}).promise;let n="";for(let i=1;i<=e.numPages;i++){const c=await(await e.getPage(i)).getTextContent();n+=c.items.map(u=>u.str).join(" ")+`

`}return n.trim()}function X3(r){const t=r.replace(/\r/g,"").replace(/[ \t]+/g," ").replace(/\n{3,}/g,`

`).trim(),e=t.split(/\n\s*\n/g).map(n=>n.trim()).filter(Boolean);return e.length<3?t.split(/(?<=[.!?])\s+(?=[A-Z0-9])/g).map(n=>n.trim()).filter(n=>n.length>12):e}function K3(r){const t=r.toLowerCase(),e=/(\d+)\s*(h|hr|hrs|hour|hours|m|min|mins|minute|minutes|s|sec|secs|second|seconds)\b/g;let n=0,i=!1;for(const o of t.matchAll(e)){i=!0;const c=Number(o[1]),u=o[2];["h","hr","hrs","hour","hours"].includes(u)?n+=c*3600:["m","min","mins","minute","minutes"].includes(u)?n+=c*60:n+=c}return i&&n>0?n:/\bovernight\b/.test(t)?8*3600:null}const Y3=()=>{const r=Mm(m=>m.addRecipe),[t,e]=$.useState("file"),[n,i]=$.useState(!1),[o,c]=$.useState(null),[u,h]=$.useState(""),f=async m=>{i(!0),c(null);try{const v=await G3(m),C=X3(v).map(E=>({id:crypto.randomUUID(),text:E,timer:(()=>{const T=K3(E);return T?{seconds:T}:void 0})()}));r({id:crypto.randomUUID(),title:m.name.replace(/\.pdf$/i,""),sourceType:"pdf",sourceRef:m.name,createdAt:Date.now(),steps:C})}catch(v){c(v.message||"Failed to parse PDF.")}finally{i(!1)}},p=()=>{u.trim()&&(r({id:crypto.randomUUID(),title:u,sourceType:"url",sourceRef:u,createdAt:Date.now(),steps:[{id:crypto.randomUUID(),text:`Open recipe at ${u}`}]}),h(""))};return I.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-5 shadow-sm dark:border-slate-800 dark:bg-slate-900",children:[I.jsx("div",{className:"mb-4 flex items-center justify-between gap-3",children:I.jsxs("div",{children:[I.jsx("h2",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:"Add a Recipe"}),I.jsx("p",{className:"mt-1 text-sm text-slate-500 dark:text-slate-300",children:"Upload a PDF or drop in a link to build your library."})]})}),I.jsxs("div",{className:"flex gap-2 mb-4",children:[I.jsx("button",{onClick:()=>e("file"),className:`px-4 py-2 rounded-full text-sm font-medium ${t==="file"?"bg-slate-900 text-white dark:bg-white dark:text-slate-900":"bg-slate-100 text-slate-600 dark:bg-slate-800 dark:text-slate-300"}`,children:"Upload PDF"}),I.jsx("button",{onClick:()=>e("link"),className:`px-4 py-2 rounded-full text-sm font-medium ${t==="link"?"bg-slate-900 text-white dark:bg-white dark:text-slate-900":"bg-slate-100 text-slate-600 dark:bg-slate-800 dark:text-slate-300"}`,children:"Add via Link"})]}),t==="file"&&I.jsxs("label",{className:"block rounded-xl border border-dashed border-slate-200 bg-slate-50 p-4 text-sm text-slate-600 dark:border-slate-700 dark:bg-slate-800/60 dark:text-slate-300",children:[I.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-200",children:"Upload PDF"}),I.jsx("input",{type:"file",accept:"application/pdf",disabled:n,onChange:m=>{const v=m.target.files?.[0];v&&f(v)},className:"mt-2 block w-full text-sm"})]}),t==="link"&&I.jsxs("div",{className:"flex gap-2",children:[I.jsx("input",{value:u,onChange:m=>h(m.target.value),placeholder:"https://example.com/recipe.pdf",className:"flex-grow rounded-xl border border-slate-200 bg-white p-2 text-sm text-slate-700 shadow-sm focus:border-slate-400 focus:outline-none dark:border-slate-700 dark:bg-slate-950 dark:text-slate-100"}),I.jsx("button",{onClick:p,className:"rounded-xl bg-slate-900 px-4 py-2 text-sm font-semibold text-white shadow-sm transition hover:bg-slate-800 dark:bg-white dark:text-slate-900",children:"Add"})]}),n&&I.jsx("p",{className:"text-sky-500 text-sm mt-2",children:"Processing"}),o&&I.jsx("p",{className:"text-red-500 text-sm mt-2",children:o})]})};const q3=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),NM=(...r)=>r.filter((t,e,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===e).join(" ").trim();var Q3={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Z3=$.forwardRef(({color:r="currentColor",size:t=24,strokeWidth:e=2,absoluteStrokeWidth:n,className:i="",children:o,iconNode:c,...u},h)=>$.createElement("svg",{ref:h,...Q3,width:t,height:t,stroke:r,strokeWidth:n?Number(e)*24/Number(t):e,className:NM("lucide",i),...u},[...c.map(([f,p])=>$.createElement(f,p)),...Array.isArray(o)?o:[o]]));const ox=(r,t)=>{const e=$.forwardRef(({className:n,...i},o)=>$.createElement(Z3,{ref:o,iconNode:t,className:NM(`lucide-${q3(r)}`,n),...i}));return e.displayName=`${r}`,e};const J3=ox("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);const t4=ox("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);const e4=ox("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);const n4=ox("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),i4=({title:r,stepsCount:t,imageSrc:e,onClick:n,onRename:i,onDelete:o})=>{const[c,u]=$.useState(!1),[h,f]=$.useState(r);$.useEffect(()=>{c||f(r)},[r,c]);const p=()=>{const m=h.trim();if(!m){f(r),u(!1);return}m!==r&&i?.(m),u(!1)};return I.jsxs("div",{onClick:n,className:"group relative flex min-h-[140px] gap-4 rounded-2xl border border-slate-200 bg-white p-4 shadow-sm transition hover:-translate-y-0.5 hover:shadow-lg dark:border-slate-800 dark:bg-slate-900",children:[I.jsx("div",{className:"flex h-16 w-16 shrink-0 items-center justify-center rounded-2xl bg-slate-100 dark:bg-slate-800",children:I.jsx("img",{src:e,alt:"",className:"h-10 w-10 object-contain",loading:"lazy"})}),I.jsxs("div",{className:"min-w-0 flex-1",children:[c?I.jsx("input",{value:h,onChange:m=>f(m.target.value),onClick:m=>m.stopPropagation(),onBlur:p,onKeyDown:m=>{m.key==="Enter"&&(m.preventDefault(),p()),m.key==="Escape"&&(m.preventDefault(),f(r),u(!1))},className:"w-full rounded-md border border-slate-200 bg-white px-2 py-1 text-sm font-semibold text-slate-900 shadow-sm focus:border-sky-500 focus:outline-none dark:border-slate-700 dark:bg-slate-950 dark:text-white",autoFocus:!0}):I.jsx("h3",{className:"truncate text-lg font-semibold text-slate-900 dark:text-white",children:r}),I.jsxs("p",{className:"mt-1 text-sm text-slate-500 dark:text-slate-300",children:[t," steps"]})]}),I.jsxs("div",{className:"absolute right-3 top-3 flex items-center gap-1 opacity-0 transition group-hover:opacity-100",children:[I.jsx("button",{type:"button",onClick:m=>{m.stopPropagation(),u(!0)},className:"rounded-full border border-slate-200 bg-white p-2 text-slate-500 shadow-sm transition hover:text-slate-900 dark:border-slate-700 dark:bg-slate-800 dark:text-slate-300 dark:hover:text-white","aria-label":"Rename recipe",children:I.jsx(t4,{className:"h-4 w-4"})}),I.jsx("button",{type:"button",onClick:m=>{m.stopPropagation(),o?.()},className:"rounded-full border border-slate-200 bg-white p-2 text-slate-500 shadow-sm transition hover:text-rose-600 dark:border-slate-700 dark:bg-slate-800 dark:text-slate-300 dark:hover:text-rose-400","aria-label":"Delete recipe",children:I.jsx(n4,{className:"h-4 w-4"})})]})]})},LM=Zw()(Jw(r=>({currentRecipeId:null,currentStep:0,timerActive:!1,setRecipe:t=>r({currentRecipeId:t,currentStep:0,timerActive:!1}),nextStep:()=>r(t=>({currentStep:Math.min(t.currentStep+1,9999)})),prevStep:()=>r(t=>({currentStep:Math.max(t.currentStep-1,0)})),setStep:t=>r({currentStep:t}),setTimerActive:t=>r({timerActive:t}),toggleTimer:()=>r(t=>({timerActive:!t.timerActive}))}),{name:"palmchef-session"})),s4=()=>{const r="/hat.png",t=Mm(c=>c.recipes),e=Mm(c=>c.removeRecipe),n=Mm(c=>c.updateRecipe),i=LM(c=>c.setRecipe),o=ph();return I.jsxs("div",{className:"space-y-8",children:[I.jsx("header",{className:"rounded-3xl border border-slate-200 bg-white p-8 shadow-sm dark:border-slate-800 dark:bg-slate-900",children:I.jsxs("div",{className:"flex flex-col gap-4 lg:flex-row lg:items-center lg:justify-between",children:[I.jsxs("div",{children:[I.jsx("p",{className:"text-sm font-semibold uppercase tracking-wide text-slate-500",children:"Recipe Library"}),I.jsx("h1",{className:"mt-2 text-3xl font-semibold",children:"Build your hands-free cooking lineup."}),I.jsx("p",{className:"mt-3 max-w-2xl text-slate-600 dark:text-slate-300",children:"Import a recipe, let PalmChef detect steps and timers, then launch the assistant to cook without touching your screen."})]}),I.jsxs("div",{className:"rounded-2xl bg-slate-50 px-6 py-4 text-sm text-slate-600 dark:bg-slate-800/60 dark:text-slate-200",children:[I.jsx("p",{className:"font-semibold text-slate-900 dark:text-white",children:"Library snapshot"}),I.jsxs("p",{className:"mt-2",children:["Recipes stored: ",t.length]}),I.jsxs("p",{children:["Total steps: ",t.reduce((c,u)=>c+u.steps.length,0)]})]})]})}),I.jsxs("section",{className:"grid gap-6 lg:grid-cols-[1.2fr,0.8fr]",children:[I.jsxs("div",{className:"space-y-4",children:[I.jsx(Y3,{}),I.jsx("div",{className:"rounded-3xl border border-slate-200 bg-white px-6 py-4 text-sm text-slate-600 shadow-sm dark:border-slate-800 dark:bg-slate-900 dark:text-slate-300",children:I.jsxs("div",{className:"flex items-center gap-3",children:[I.jsx("img",{src:r,alt:"Chef hat",className:"h-10 w-10 rounded-full bg-slate-100 p-1 dark:bg-slate-800"}),I.jsxs("div",{children:[I.jsx("p",{className:"font-semibold text-slate-900 dark:text-white",children:"Default preview style"}),I.jsx("p",{className:"mt-1 text-slate-500 dark:text-slate-300",children:"Each recipe card starts with the PalmChef logo and a clean step count."})]})]})})]}),I.jsxs("aside",{className:"rounded-3xl border border-slate-200 bg-white p-6 shadow-sm dark:border-slate-800 dark:bg-slate-900",children:[I.jsx("h2",{className:"text-lg font-semibold",children:"Quick start tips"}),I.jsxs("ul",{className:"mt-4 space-y-3 text-sm text-slate-600 dark:text-slate-300",children:[I.jsx("li",{children:"Upload a PDF or paste a recipe link to auto-parse steps."}),I.jsx("li",{children:"Use  to advance,  to go back, and  to repeat a step."}),I.jsx("li",{children:" pauses or resumes narration when needed."})]}),I.jsxs("div",{className:"mt-6 rounded-2xl bg-slate-50 p-4 text-sm text-slate-600 dark:bg-slate-800/60 dark:text-slate-200",children:[I.jsx("p",{className:"font-semibold text-slate-900 dark:text-white",children:"Pro tip"}),I.jsx("p",{className:"mt-2",children:"Keep your device at counter height for the best gesture accuracy."})]})]})]}),I.jsxs("section",{children:[I.jsxs("div",{className:"flex items-center justify-between",children:[I.jsx("h2",{className:"text-xl font-semibold",children:"Your Recipes"}),I.jsx("p",{className:"text-sm text-slate-500",children:"Launch the assistant to start a guided session."})]}),t.length===0?I.jsxs("div",{className:"mt-6 rounded-2xl border border-dashed border-slate-300 bg-slate-50 p-6 text-center text-slate-500 dark:border-slate-700 dark:bg-slate-900/40",children:[I.jsx("p",{className:"font-semibold text-slate-700 dark:text-slate-200",children:"No recipes yet"}),I.jsx("p",{className:"mt-2",children:"Add your first recipe above to unlock hands-free cooking."})]}):I.jsx("div",{className:"mt-6 grid gap-4 sm:grid-cols-2 xl:grid-cols-3",children:t.map(c=>I.jsx(i4,{title:c.title,stepsCount:c.steps.length,imageSrc:r,onRename:u=>n(c.id,{title:u}),onDelete:()=>e(c.id),onClick:()=>{i(c.id),o(`/assistant/${c.id}`)}},c.id))})]})]})},ax=Zw()(Jw((r,t)=>({theme:"light",voiceRate:1,voicePitch:1,toggleTheme:()=>r({theme:t().theme==="light"?"dark":"light"}),setVoiceRate:e=>r({voiceRate:e}),setVoicePitch:e=>r({voicePitch:e})}),{name:"palmchef-settings"}));var bA={},R_;function r4(){return R_||(R_=1,(function(){var r;function t(g){var x=0;return function(){return x<g.length?{done:!1,value:g[x++]}:{done:!0}}}var e=typeof Object.defineProperties=="function"?Object.defineProperty:function(g,x,k){return g==Array.prototype||g==Object.prototype||(g[x]=k.value),g};function n(g){g=[typeof globalThis=="object"&&globalThis,g,typeof window=="object"&&window,typeof self=="object"&&self,typeof xk=="object"&&xk];for(var x=0;x<g.length;++x){var k=g[x];if(k&&k.Math==Math)return k}throw Error("Cannot find global object")}var i=n(this);function o(g,x){if(x)t:{var k=i;g=g.split(".");for(var M=0;M<g.length-1;M++){var j=g[M];if(!(j in k))break t;k=k[j]}g=g[g.length-1],M=k[g],x=x(M),x!=M&&x!=null&&e(k,g,{configurable:!0,writable:!0,value:x})}}o("Symbol",function(g){function x(U){if(this instanceof x)throw new TypeError("Symbol is not a constructor");return new k(M+(U||"")+"_"+j++,U)}function k(U,B){this.h=U,e(this,"description",{configurable:!0,writable:!0,value:B})}if(g)return g;k.prototype.toString=function(){return this.h};var M="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",j=0;return x}),o("Symbol.iterator",function(g){if(g)return g;g=Symbol("Symbol.iterator");for(var x="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),k=0;k<x.length;k++){var M=i[x[k]];typeof M=="function"&&typeof M.prototype[g]!="function"&&e(M.prototype,g,{configurable:!0,writable:!0,value:function(){return c(t(this))}})}return g});function c(g){return g={next:g},g[Symbol.iterator]=function(){return this},g}function u(g){var x=typeof Symbol<"u"&&Symbol.iterator&&g[Symbol.iterator];return x?x.call(g):{next:t(g)}}function h(g){if(!(g instanceof Array)){g=u(g);for(var x,k=[];!(x=g.next()).done;)k.push(x.value);g=k}return g}var f=typeof Object.assign=="function"?Object.assign:function(g,x){for(var k=1;k<arguments.length;k++){var M=arguments[k];if(M)for(var j in M)Object.prototype.hasOwnProperty.call(M,j)&&(g[j]=M[j])}return g};o("Object.assign",function(g){return g||f});var p=typeof Object.create=="function"?Object.create:function(g){function x(){}return x.prototype=g,new x},m;if(typeof Object.setPrototypeOf=="function")m=Object.setPrototypeOf;else{var v;t:{var b={a:!0},C={};try{C.__proto__=b,v=C.a;break t}catch{}v=!1}m=v?function(g,x){if(g.__proto__=x,g.__proto__!==x)throw new TypeError(g+" is not extensible");return g}:null}var E=m;function T(g,x){if(g.prototype=p(x.prototype),g.prototype.constructor=g,E)E(g,x);else for(var k in x)if(k!="prototype")if(Object.defineProperties){var M=Object.getOwnPropertyDescriptor(x,k);M&&Object.defineProperty(g,k,M)}else g[k]=x[k];g.ya=x.prototype}function P(){this.m=!1,this.j=null,this.i=void 0,this.h=1,this.v=this.s=0,this.l=null}function N(g){if(g.m)throw new TypeError("Generator is already running");g.m=!0}P.prototype.u=function(g){this.i=g};function L(g,x){g.l={ma:x,na:!0},g.h=g.s||g.v}P.prototype.return=function(g){this.l={return:g},this.h=this.v};function F(g,x,k){return g.h=k,{value:x}}function O(g){this.h=new P,this.i=g}function z(g,x){N(g.h);var k=g.h.j;return k?K(g,"return"in k?k.return:function(M){return{value:M,done:!0}},x,g.h.return):(g.h.return(x),Y(g))}function K(g,x,k,M){try{var j=x.call(g.h.j,k);if(!(j instanceof Object))throw new TypeError("Iterator result "+j+" is not an object");if(!j.done)return g.h.m=!1,j;var U=j.value}catch(B){return g.h.j=null,L(g.h,B),Y(g)}return g.h.j=null,M.call(g.h,U),Y(g)}function Y(g){for(;g.h.h;)try{var x=g.i(g.h);if(x)return g.h.m=!1,{value:x.value,done:!1}}catch(k){g.h.i=void 0,L(g.h,k)}if(g.h.m=!1,g.h.l){if(x=g.h.l,g.h.l=null,x.na)throw x.ma;return{value:x.return,done:!0}}return{value:void 0,done:!0}}function nt(g){this.next=function(x){return N(g.h),g.h.j?x=K(g,g.h.j.next,x,g.h.u):(g.h.u(x),x=Y(g)),x},this.throw=function(x){return N(g.h),g.h.j?x=K(g,g.h.j.throw,x,g.h.u):(L(g.h,x),x=Y(g)),x},this.return=function(x){return z(g,x)},this[Symbol.iterator]=function(){return this}}function st(g){function x(M){return g.next(M)}function k(M){return g.throw(M)}return new Promise(function(M,j){function U(B){B.done?M(B.value):Promise.resolve(B.value).then(x,k).then(U,j)}U(g.next())})}function it(g){return st(new nt(new O(g)))}o("Promise",function(g){function x(B){this.i=0,this.j=void 0,this.h=[],this.u=!1;var G=this.l();try{B(G.resolve,G.reject)}catch(Z){G.reject(Z)}}function k(){this.h=null}function M(B){return B instanceof x?B:new x(function(G){G(B)})}if(g)return g;k.prototype.i=function(B){if(this.h==null){this.h=[];var G=this;this.j(function(){G.m()})}this.h.push(B)};var j=i.setTimeout;k.prototype.j=function(B){j(B,0)},k.prototype.m=function(){for(;this.h&&this.h.length;){var B=this.h;this.h=[];for(var G=0;G<B.length;++G){var Z=B[G];B[G]=null;try{Z()}catch(at){this.l(at)}}}this.h=null},k.prototype.l=function(B){this.j(function(){throw B})},x.prototype.l=function(){function B(at){return function(pt){Z||(Z=!0,at.call(G,pt))}}var G=this,Z=!1;return{resolve:B(this.I),reject:B(this.m)}},x.prototype.I=function(B){if(B===this)this.m(new TypeError("A Promise cannot resolve to itself"));else if(B instanceof x)this.L(B);else{t:switch(typeof B){case"object":var G=B!=null;break t;case"function":G=!0;break t;default:G=!1}G?this.F(B):this.s(B)}},x.prototype.F=function(B){var G=void 0;try{G=B.then}catch(Z){this.m(Z);return}typeof G=="function"?this.M(G,B):this.s(B)},x.prototype.m=function(B){this.v(2,B)},x.prototype.s=function(B){this.v(1,B)},x.prototype.v=function(B,G){if(this.i!=0)throw Error("Cannot settle("+B+", "+G+"): Promise already settled in state"+this.i);this.i=B,this.j=G,this.i===2&&this.K(),this.H()},x.prototype.K=function(){var B=this;j(function(){if(B.D()){var G=i.console;typeof G<"u"&&G.error(B.j)}},1)},x.prototype.D=function(){if(this.u)return!1;var B=i.CustomEvent,G=i.Event,Z=i.dispatchEvent;return typeof Z>"u"?!0:(typeof B=="function"?B=new B("unhandledrejection",{cancelable:!0}):typeof G=="function"?B=new G("unhandledrejection",{cancelable:!0}):(B=i.document.createEvent("CustomEvent"),B.initCustomEvent("unhandledrejection",!1,!0,B)),B.promise=this,B.reason=this.j,Z(B))},x.prototype.H=function(){if(this.h!=null){for(var B=0;B<this.h.length;++B)U.i(this.h[B]);this.h=null}};var U=new k;return x.prototype.L=function(B){var G=this.l();B.T(G.resolve,G.reject)},x.prototype.M=function(B,G){var Z=this.l();try{B.call(G,Z.resolve,Z.reject)}catch(at){Z.reject(at)}},x.prototype.then=function(B,G){function Z(Rt,gt){return typeof Rt=="function"?function(Dt){try{at(Rt(Dt))}catch(Kt){pt(Kt)}}:gt}var at,pt,Ft=new x(function(Rt,gt){at=Rt,pt=gt});return this.T(Z(B,at),Z(G,pt)),Ft},x.prototype.catch=function(B){return this.then(void 0,B)},x.prototype.T=function(B,G){function Z(){switch(at.i){case 1:B(at.j);break;case 2:G(at.j);break;default:throw Error("Unexpected state: "+at.i)}}var at=this;this.h==null?U.i(Z):this.h.push(Z),this.u=!0},x.resolve=M,x.reject=function(B){return new x(function(G,Z){Z(B)})},x.race=function(B){return new x(function(G,Z){for(var at=u(B),pt=at.next();!pt.done;pt=at.next())M(pt.value).T(G,Z)})},x.all=function(B){var G=u(B),Z=G.next();return Z.done?M([]):new x(function(at,pt){function Ft(Dt){return function(Kt){Rt[Dt]=Kt,gt--,gt==0&&at(Rt)}}var Rt=[],gt=0;do Rt.push(void 0),gt++,M(Z.value).T(Ft(Rt.length-1),pt),Z=G.next();while(!Z.done)})},x});function Mt(g,x){g instanceof String&&(g+="");var k=0,M=!1,j={next:function(){if(!M&&k<g.length){var U=k++;return{value:x(U,g[U]),done:!1}}return M=!0,{done:!0,value:void 0}}};return j[Symbol.iterator]=function(){return j},j}o("Array.prototype.keys",function(g){return g||function(){return Mt(this,function(x){return x})}}),o("Array.prototype.fill",function(g){return g||function(x,k,M){var j=this.length||0;for(0>k&&(k=Math.max(0,j+k)),(M==null||M>j)&&(M=j),M=Number(M),0>M&&(M=Math.max(0,j+M)),k=Number(k||0);k<M;k++)this[k]=x;return this}});function xt(g){return g||Array.prototype.fill}o("Int8Array.prototype.fill",xt),o("Uint8Array.prototype.fill",xt),o("Uint8ClampedArray.prototype.fill",xt),o("Int16Array.prototype.fill",xt),o("Uint16Array.prototype.fill",xt),o("Int32Array.prototype.fill",xt),o("Uint32Array.prototype.fill",xt),o("Float32Array.prototype.fill",xt),o("Float64Array.prototype.fill",xt),o("Object.is",function(g){return g||function(x,k){return x===k?x!==0||1/x===1/k:x!==x&&k!==k}}),o("Array.prototype.includes",function(g){return g||function(x,k){var M=this;M instanceof String&&(M=String(M));var j=M.length;for(k=k||0,0>k&&(k=Math.max(k+j,0));k<j;k++){var U=M[k];if(U===x||Object.is(U,x))return!0}return!1}}),o("String.prototype.includes",function(g){return g||function(x,k){if(this==null)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if(x instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return this.indexOf(x,k||0)!==-1}});var Ct=this||self;function Qt(g,x){g=g.split(".");var k=Ct;g[0]in k||typeof k.execScript>"u"||k.execScript("var "+g[0]);for(var M;g.length&&(M=g.shift());)g.length||x===void 0?k[M]&&k[M]!==Object.prototype[M]?k=k[M]:k=k[M]={}:k[M]=x}function ft(g){var x;t:{if((x=Ct.navigator)&&(x=x.userAgent))break t;x=""}return x.indexOf(g)!=-1}var lt=Array.prototype.map?function(g,x){return Array.prototype.map.call(g,x,void 0)}:function(g,x){for(var k=g.length,M=Array(k),j=typeof g=="string"?g.split(""):g,U=0;U<k;U++)U in j&&(M[U]=x.call(void 0,j[U],U,g));return M},et={},mt=null;function ht(g){var x=g.length,k=3*x/4;k%3?k=Math.floor(k):"=.".indexOf(g[x-1])!=-1&&(k="=.".indexOf(g[x-2])!=-1?k-2:k-1);var M=new Uint8Array(k),j=0;return W(g,function(U){M[j++]=U}),j!==k?M.subarray(0,j):M}function W(g,x){function k(Z){for(;M<g.length;){var at=g.charAt(M++),pt=mt[at];if(pt!=null)return pt;if(!/^[\s\xa0]*$/.test(at))throw Error("Unknown base64 encoding at char: "+at)}return Z}tt();for(var M=0;;){var j=k(-1),U=k(0),B=k(64),G=k(64);if(G===64&&j===-1)break;x(j<<2|U>>4),B!=64&&(x(U<<4&240|B>>2),G!=64&&x(B<<6&192|G))}}function tt(){if(!mt){mt={};for(var g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),x=["+/=","+/","-_=","-_.","-_"],k=0;5>k;k++){var M=g.concat(x[k].split(""));et[k]=M;for(var j=0;j<M.length;j++){var U=M[j];mt[U]===void 0&&(mt[U]=j)}}}}var bt=typeof Uint8Array<"u",Bt=!(ft("Trident")||ft("MSIE"))&&typeof Ct.btoa=="function";function Vt(g){if(!Bt){var x;x===void 0&&(x=0),tt(),x=et[x];for(var k=Array(Math.floor(g.length/3)),M=x[64]||"",j=0,U=0;j<g.length-2;j+=3){var B=g[j],G=g[j+1],Z=g[j+2],at=x[B>>2];B=x[(B&3)<<4|G>>4],G=x[(G&15)<<2|Z>>6],Z=x[Z&63],k[U++]=at+B+G+Z}switch(at=0,Z=M,g.length-j){case 2:at=g[j+1],Z=x[(at&15)<<2]||M;case 1:g=g[j],k[U]=x[g>>2]+x[(g&3)<<4|at>>4]+Z+M}return k.join("")}for(x="";10240<g.length;)x+=String.fromCharCode.apply(null,g.subarray(0,10240)),g=g.subarray(10240);return x+=String.fromCharCode.apply(null,g),btoa(x)}var zt=RegExp("[-_.]","g");function jt(g){switch(g){case"-":return"+";case"_":return"/";case".":return"=";default:return""}}function Jt(g){if(!Bt)return ht(g);zt.test(g)&&(g=g.replace(zt,jt)),g=atob(g);for(var x=new Uint8Array(g.length),k=0;k<g.length;k++)x[k]=g.charCodeAt(k);return x}var re;function mn(){return re||(re=new Uint8Array(0))}var Ti={},Sa=typeof Uint8Array.prototype.slice=="function",Se=0,sn=0;function up(g){var x=0>g;g=Math.abs(g);var k=g>>>0;g=Math.floor((g-k)/4294967296),x&&(k=u(vh(k,g)),x=k.next().value,g=k.next().value,k=x),Se=k>>>0,sn=g>>>0}var X0=typeof BigInt=="function";function vh(g,x){return x=~x,g?g=~g+1:x+=1,[g,x]}function hp(g,x){this.i=g>>>0,this.h=x>>>0}function wh(g){if(!g)return Ea||(Ea=new hp(0,0));if(!/^-?\d+$/.test(g))return null;if(16>g.length)up(Number(g));else if(X0)g=BigInt(g),Se=Number(g&BigInt(4294967295))>>>0,sn=Number(g>>BigInt(32)&BigInt(4294967295));else{var x=+(g[0]==="-");sn=Se=0;for(var k=g.length,M=x,j=(k-x)%6+x;j<=k;M=j,j+=6)M=Number(g.slice(M,j)),sn*=1e6,Se=1e6*Se+M,4294967296<=Se&&(sn+=Se/4294967296|0,Se%=4294967296);x&&(x=u(vh(Se,sn)),g=x.next().value,x=x.next().value,Se=g,sn=x)}return new hp(Se,sn)}var Ea;function ho(g,x){return Error("Invalid wire type: "+g+" (at position "+x+")")}function ec(){return Error("Failed to read varint, encoding is invalid.")}function dp(g,x){return Error("Tried to read past the end of the data "+x+" > "+g)}function Sr(){throw Error("Invalid UTF8")}function fp(g,x){return x=String.fromCharCode.apply(null,x),g==null?x:g+x}var nc=void 0,ic,xh=typeof TextDecoder<"u",pp,sc=typeof TextEncoder<"u",Ca;function K0(g){if(g!==Ti)throw Error("illegal external caller")}function ka(g,x){if(K0(x),this.V=g,g!=null&&g.length===0)throw Error("ByteString should be constructed with non-empty values")}function bh(){return Ca||(Ca=new ka(null,Ti))}function Y0(g){K0(Ti);var x=g.V;return x=x==null||bt&&x!=null&&x instanceof Uint8Array?x:typeof x=="string"?Jt(x):null,x==null?x:g.V=x}function mp(g){if(typeof g=="string")return{buffer:Jt(g),C:!1};if(Array.isArray(g))return{buffer:new Uint8Array(g),C:!1};if(g.constructor===Uint8Array)return{buffer:g,C:!1};if(g.constructor===ArrayBuffer)return{buffer:new Uint8Array(g),C:!1};if(g.constructor===ka)return{buffer:Y0(g)||mn(),C:!0};if(g instanceof Uint8Array)return{buffer:new Uint8Array(g.buffer,g.byteOffset,g.byteLength),C:!1};throw Error("Type not convertible to a Uint8Array, expected a Uint8Array, an ArrayBuffer, a base64 encoded string, a ByteString or an Array of numbers")}function Ah(g,x){this.i=null,this.m=!1,this.h=this.j=this.l=0,rc(this,g,x)}function rc(g,x,k){k=k===void 0?{}:k,g.S=k.S===void 0?!1:k.S,x&&(x=mp(x),g.i=x.buffer,g.m=x.C,g.l=0,g.j=g.i.length,g.h=g.l)}Ah.prototype.reset=function(){this.h=this.l};function qs(g,x){if(g.h=x,x>g.j)throw dp(g.j,x)}function fo(g){var x=g.i,k=g.h,M=x[k++],j=M&127;if(M&128&&(M=x[k++],j|=(M&127)<<7,M&128&&(M=x[k++],j|=(M&127)<<14,M&128&&(M=x[k++],j|=(M&127)<<21,M&128&&(M=x[k++],j|=M<<28,M&128&&x[k++]&128&&x[k++]&128&&x[k++]&128&&x[k++]&128&&x[k++]&128)))))throw ec();return qs(g,k),j}function po(g,x){if(0>x)throw Error("Tried to read a negative byte length: "+x);var k=g.h,M=k+x;if(M>g.j)throw dp(x,g.j-k);return g.h=M,k}var mo=[];function Sh(){this.h=[]}Sh.prototype.length=function(){return this.h.length},Sh.prototype.end=function(){var g=this.h;return this.h=[],g};function gp(g,x,k){for(;0<k||127<x;)g.h.push(x&127|128),x=(x>>>7|k<<25)>>>0,k>>>=7;g.h.push(x)}function Er(g,x){for(;127<x;)g.h.push(x&127|128),x>>>=7;g.h.push(x)}function Eh(g,x){if(mo.length){var k=mo.pop();rc(k,g,x),g=k}else g=new Ah(g,x);this.h=g,this.j=this.h.h,this.i=this.l=-1,this.setOptions(x)}Eh.prototype.setOptions=function(g){g=g===void 0?{}:g,this.ca=g.ca===void 0?!1:g.ca},Eh.prototype.reset=function(){this.h.reset(),this.j=this.h.h,this.i=this.l=-1};function yp(g){var x=g.h;if(x.h==x.j)return!1;g.j=g.h.h;var k=fo(g.h)>>>0;if(x=k>>>3,k&=7,!(0<=k&&5>=k))throw ho(k,g.j);if(1>x)throw Error("Invalid field number: "+x+" (at position "+g.j+")");return g.l=x,g.i=k,!0}function Ta(g){switch(g.i){case 0:if(g.i!=0)Ta(g);else t:{g=g.h;for(var x=g.h,k=x+10,M=g.i;x<k;)if((M[x++]&128)===0){qs(g,x);break t}throw ec()}break;case 1:g=g.h,qs(g,g.h+8);break;case 2:g.i!=2?Ta(g):(x=fo(g.h)>>>0,g=g.h,qs(g,g.h+x));break;case 5:g=g.h,qs(g,g.h+4);break;case 3:x=g.l;do{if(!yp(g))throw Error("Unmatched start-group tag: stream EOF");if(g.i==4){if(g.l!=x)throw Error("Unmatched end-group tag");break}Ta(g)}while(!0);break;default:throw ho(g.i,g.j)}}var oc=[];function ac(){this.j=[],this.i=0,this.h=new Sh}function Cr(g,x){x.length!==0&&(g.j.push(x),g.i+=x.length)}function lc(g,x){if(x=x.R){Cr(g,g.h.end());for(var k=0;k<x.length;k++)Cr(g,Y0(x[k])||mn())}}var Qs=typeof Symbol=="function"&&typeof Symbol()=="symbol"?Symbol():void 0;function Xi(g,x){return Qs?g[Qs]|=x:g.A!==void 0?g.A|=x:(Object.defineProperties(g,{A:{value:x,configurable:!0,writable:!0,enumerable:!1}}),x)}function cc(g,x){Qs?g[Qs]&&(g[Qs]&=~x):g.A!==void 0&&(g.A&=~x)}function _e(g){var x;return Qs?x=g[Qs]:x=g.A,x??0}function _i(g,x){Qs?g[Qs]=x:g.A!==void 0?g.A=x:Object.defineProperties(g,{A:{value:x,configurable:!0,writable:!0,enumerable:!1}})}function vp(g){return Xi(g,1),g}function lx(g,x){_i(x,(g|0)&-51)}function Ch(g,x){_i(x,(g|18)&-41)}var Zs={};function uc(g){return g!==null&&typeof g=="object"&&!Array.isArray(g)&&g.constructor===Object}var _a,q0=[];_i(q0,23),_a=Object.freeze(q0);function kh(g){if(_e(g.o)&2)throw Error("Cannot mutate an immutable Message")}function Th(g){var x=g.length;(x=x?g[x-1]:void 0)&&uc(x)?x.g=1:(x={},g.push((x.g=1,x)))}function wp(g){var x=g.i+g.G;return g.B||(g.B=g.o[x]={})}function Pi(g,x){return x===-1?null:x>=g.i?g.B?g.B[x]:void 0:g.o[x+g.G]}function Ss(g,x,k,M){kh(g),hc(g,x,k,M)}function hc(g,x,k,M){g.j&&(g.j=void 0),x>=g.i||M?wp(g)[x]=k:(g.o[x+g.G]=k,(g=g.B)&&x in g&&delete g[x])}function Ne(g,x,k,M){var j=Pi(g,x);Array.isArray(j)||(j=_a);var U=_e(j);if(U&1||vp(j),M)U&2||Xi(j,2),k&1||Object.freeze(j);else{M=!(k&2);var B=U&2;k&1||!B?M&&U&16&&!B&&cc(j,16):(j=vp(Array.prototype.slice.call(j)),hc(g,x,j))}return j}function xp(g,x){var k=Pi(g,x),M=k==null?k:typeof k=="number"||k==="NaN"||k==="Infinity"||k==="-Infinity"?Number(k):void 0;return M!=null&&M!==k&&hc(g,x,M),M}function _h(g,x,k,M,j){g.h||(g.h={});var U=g.h[k],B=Ne(g,k,3,j);if(!U){var G=B;U=[];var Z=!!(_e(g.o)&16);B=!!(_e(G)&2);var at=G;!j&&B&&(G=Array.prototype.slice.call(G));for(var pt=B,Ft=0;Ft<G.length;Ft++){var Rt=G[Ft],gt=x,Dt=!1;if(Dt=Dt===void 0?!1:Dt,Rt=Array.isArray(Rt)?new gt(Rt):Dt?new gt:void 0,Rt!==void 0){gt=Rt.o;var Kt=Dt=_e(gt);B&&(Kt|=2),Z&&(Kt|=16),Kt!=Dt&&_i(gt,Kt),gt=Kt,pt=pt||!!(2&gt),U.push(Rt)}}return g.h[k]=U,Z=_e(G),x=Z|33,x=pt?x&-9:x|8,Z!=x&&(pt=G,Object.isFrozen(pt)&&(pt=Array.prototype.slice.call(pt)),_i(pt,x),G=pt),at!==G&&hc(g,k,G),(j||M&&B)&&Xi(U,2),M&&Object.freeze(U),U}return j||(j=Object.isFrozen(U),M&&!j?Object.freeze(U):!M&&j&&(U=Array.prototype.slice.call(U),g.h[k]=U)),U}function dc(g,x,k){var M=!!(_e(g.o)&2);if(x=_h(g,x,k,M,M),g=Ne(g,k,3,M),!(M||_e(g)&8)){for(M=0;M<x.length;M++){if(k=x[M],_e(k.o)&2){var j=gc(k,!1);j.j=k}else j=k;k!==j&&(x[M]=j,g[M]=j.o)}Xi(g,8)}return x}function hi(g,x,k){if(k!=null&&typeof k!="number")throw Error("Value of float/double field must be a number|null|undefined, found "+typeof k+": "+k);Ss(g,x,k)}function Q0(g,x,k,M,j){kh(g);var U=_h(g,k,x,!1,!1);return k=M??new k,g=Ne(g,x,2,!1),j!=null?(U.splice(j,0,k),g.splice(j,0,k.o)):(U.push(k),g.push(k.o)),k.C()&&cc(g,8),k}function fc(g,x){return g??x}function di(g,x,k){return k=k===void 0?0:k,fc(xp(g,x),k)}var fi;function cx(g){switch(typeof g){case"number":return isFinite(g)?g:String(g);case"object":if(g)if(Array.isArray(g)){if((_e(g)&128)!==0)return g=Array.prototype.slice.call(g),Th(g),g}else{if(bt&&g!=null&&g instanceof Uint8Array)return Vt(g);if(g instanceof ka){var x=g.V;return x==null?"":typeof x=="string"?x:g.V=Vt(x)}}}return g}function Ri(g,x,k,M){if(g!=null){if(Array.isArray(g))g=bp(g,x,k,M!==void 0);else if(uc(g)){var j={},U;for(U in g)j[U]=Ri(g[U],x,k,M);g=j}else g=x(g,M);return g}}function bp(g,x,k,M){var j=_e(g);M=M?!!(j&16):void 0,g=Array.prototype.slice.call(g);for(var U=0;U<g.length;U++)g[U]=Ri(g[U],x,k,M);return k(j,g),g}function ux(g){return g.ja===Zs?g.toJSON():cx(g)}function hx(g,x){g&128&&Th(x)}function pc(g,x,k){if(k=k===void 0?Ch:k,g!=null){if(bt&&g instanceof Uint8Array)return g.length?new ka(new Uint8Array(g),Ti):bh();if(Array.isArray(g)){var M=_e(g);return M&2?g:x&&!(M&32)&&(M&16||M===0)?(_i(g,M|2),g):(g=bp(g,pc,M&4?Ch:k,!0),x=_e(g),x&4&&x&2&&Object.freeze(g),g)}return g.ja===Zs?Pa(g):g}}function mc(g,x,k,M,j,U,B){if(g=g.h&&g.h[k]){if(M=_e(g),M&2?M=g:(U=lt(g,Pa),Ch(M,U),Object.freeze(U),M=U),kh(x),B=M==null?_a:vp([]),M!=null){for(U=!!M.length,g=0;g<M.length;g++){var G=M[g];U=U&&!(_e(G.o)&2),B[g]=G.o}U=(U?8:0)|1,g=_e(B),(g&U)!==U&&(Object.isFrozen(B)&&(B=Array.prototype.slice.call(B)),_i(B,g|U)),x.h||(x.h={}),x.h[k]=M}else x.h&&(x.h[k]=void 0);hc(x,k,B,j)}else Ss(x,k,pc(M,U,B),j)}function Pa(g){return _e(g.o)&2||(g=gc(g,!0),Xi(g.o,2)),g}function gc(g,x){var k=g.o,M=[];Xi(M,16);var j=g.constructor.h;if(j&&M.push(j),j=g.B,j){M.length=k.length,M.fill(void 0,M.length,k.length);var U={};M[M.length-1]=U}(_e(k)&128)!==0&&Th(M),x=x||g.C()?Ch:lx,U=g.constructor,fi=M,M=new U(M),fi=void 0,g.R&&(M.R=g.R.slice()),U=!!(_e(k)&16);for(var B=j?k.length-1:k.length,G=0;G<B;G++)mc(g,M,G-g.G,k[G],!1,U,x);if(j)for(var Z in j)mc(g,M,+Z,j[Z],!0,U,x);return M}function Yn(g,x,k){g==null&&(g=fi),fi=void 0;var M=this.constructor.i||0,j=0<M,U=this.constructor.h,B=!1;if(g==null){g=U?[U]:[];var G=48,Z=!0;j&&(M=0,G|=128),_i(g,G)}else{if(!Array.isArray(g)||U&&U!==g[0])throw Error();var at=G=Xi(g,0);if((Z=(16&at)!==0)&&((B=(32&at)!==0)||(at|=32)),j){if(128&at)M=0;else if(0<g.length){var pt=g[g.length-1];if(uc(pt)&&"g"in pt){M=0,at|=128,delete pt.g;var Ft=!0,Rt;for(Rt in pt){Ft=!1;break}Ft&&g.pop()}}}else if(128&at)throw Error();G!==at&&_i(g,at)}this.G=(U?0:-1)-M,this.h=void 0,this.o=g;t:{if(U=this.o.length,M=U-1,U&&(U=this.o[M],uc(U))){this.B=U,this.i=M-this.G;break t}x!==void 0&&-1<x?(this.i=Math.max(x,M+1-this.G),this.B=void 0):this.i=Number.MAX_VALUE}if(!j&&this.B&&"g"in this.B)throw Error('Unexpected "g" flag in sparse object of message that is not a group type.');if(k){x=Z&&!B&&!0,j=this.i;var gt;for(Z=0;Z<k.length;Z++)B=k[Z],B<j?(B+=this.G,(M=g[B])?Z0(M,x):g[B]=_a):(gt||(gt=wp(this)),(M=gt[B])?Z0(M,x):gt[B]=_a)}}Yn.prototype.toJSON=function(){return bp(this.o,ux,hx)},Yn.prototype.C=function(){return!!(_e(this.o)&2)};function Z0(g,x){if(Array.isArray(g)){var k=_e(g),M=1;!x||k&2||(M|=16),(k&M)!==M&&_i(g,k|M)}}Yn.prototype.ja=Zs,Yn.prototype.toString=function(){return this.o.toString()};function Ph(g,x,k){if(k){var M={},j;for(j in k){var U=k[j],B=U.qa;B||(M.J=U.wa||U.oa.W,U.ia?(M.aa=Mh(U.ia),B=(function(G){return function(Z,at,pt){return G.J(Z,at,pt,G.aa)}})(M)):U.ka?(M.Z=Ep(U.da.P,U.ka),B=(function(G){return function(Z,at,pt){return G.J(Z,at,pt,G.Z)}})(M)):B=M.J,U.qa=B),B(x,g,U.da),M={J:M.J,aa:M.aa,Z:M.Z}}}lc(x,g)}var yc=Symbol();function Rh(g,x,k){return g[yc]||(g[yc]=function(M,j){return x(M,j,k)})}function Ra(g){var x=g[yc];if(!x){var k=Nh(g);x=function(M,j){return Da(M,j,k)},g[yc]=x}return x}function dx(g){var x=g.ia;if(x)return Ra(x);if(x=g.va)return Rh(g.da.P,x,g.ka)}function Ap(g){var x=dx(g),k=g.da,M=g.oa.U;return x?function(j,U){return M(j,U,k,x)}:function(j,U){return M(j,U,k)}}function ce(g,x){var k=g[x];return typeof k=="function"&&k.length===0&&(k=k(),g[x]=k),Array.isArray(k)&&(Mi in k||Ma in k||0<k.length&&typeof k[0]=="function")?k:void 0}function Sp(g,x,k,M,j,U){x.P=g[0];var B=1;if(g.length>B&&typeof g[B]!="number"){var G=g[B++];k(x,G)}for(;B<g.length;){k=g[B++];for(var Z=B+1;Z<g.length&&typeof g[Z]!="number";)Z++;switch(G=g[B++],Z-=B,Z){case 0:M(x,k,G);break;case 1:(Z=ce(g,B))?(B++,j(x,k,G,Z)):M(x,k,G,g[B++]);break;case 2:Z=B++,Z=ce(g,Z),j(x,k,G,Z,g[B++]);break;case 3:U(x,k,G,g[B++],g[B++],g[B++]);break;case 4:U(x,k,G,g[B++],g[B++],g[B++],g[B++]);break;default:throw Error("unexpected number of binary field arguments: "+Z)}}return x}var vc=Symbol();function Mh(g){var x=g[vc];if(!x){var k=Es(g);x=function(M,j){return ty(M,j,k)},g[vc]=x}return x}function Ep(g,x){var k=g[vc];return k||(k=function(M,j){return Ph(M,j,x)},g[vc]=k),k}var Ma=Symbol();function J0(g,x){g.push(x)}function Cp(g,x,k){g.push(x,k.W)}function Dh(g,x,k,M){var j=Mh(M),U=Es(M).P,B=k.W;g.push(x,function(G,Z,at){return B(G,Z,at,U,j)})}function kr(g,x,k,M,j,U){var B=Ep(M,U),G=k.W;g.push(x,function(Z,at,pt){return G(Z,at,pt,M,B)})}function Es(g){var x=g[Ma];return x||(x=Sp(g,g[Ma]=[],J0,Cp,Dh,kr),Mi in g&&Ma in g&&(g.length=0),x)}var Mi=Symbol();function wc(g,x){g[0]=x}function xc(g,x,k,M){var j=k.U;g[x]=M?function(U,B,G){return j(U,B,G,M)}:j}function Tr(g,x,k,M,j){var U=k.U,B=Ra(M),G=Nh(M).P;g[x]=function(Z,at,pt){return U(Z,at,pt,G,B,j)}}function fx(g,x,k,M,j,U,B){var G=k.U,Z=Rh(M,j,U);g[x]=function(at,pt,Ft){return G(at,pt,Ft,M,Z,B)}}function Nh(g){var x=g[Mi];return x||(x=Sp(g,g[Mi]={},wc,xc,Tr,fx),Mi in g&&Ma in g&&(g.length=0),x)}function Da(g,x,k){for(;yp(x)&&x.i!=4;){var M=x.l,j=k[M];if(!j){var U=k[0];U&&(U=U[M])&&(j=k[M]=Ap(U))}if(!j||!j(x,g,M)){j=x,M=g,U=j.j,Ta(j);var B=j;if(!B.ca){if(j=B.h.h-U,B.h.h=U,B=B.h,j==0)j=bh();else{if(U=po(B,j),B.S&&B.m)j=B.i.subarray(U,U+j);else{B=B.i;var G=U;j=U+j,j=G===j?mn():Sa?B.slice(G,j):new Uint8Array(B.subarray(G,j))}j=j.length==0?bh():new ka(j,Ti)}(U=M.R)?U.push(j):M.R=[j]}}}return g}function ty(g,x,k){for(var M=k.length,j=M%2==1,U=j?1:0;U<M;U+=2)(0,k[U+1])(x,g,k[U]);Ph(g,x,j?k[0]:void 0)}function Na(g,x){return{U:g,W:x}}var qn=Na(function(g,x,k){if(g.i!==5)return!1;g=g.h;var M=g.i,j=g.h,U=M[j],B=M[j+1],G=M[j+2];return M=M[j+3],qs(g,g.h+4),B=(U<<0|B<<8|G<<16|M<<24)>>>0,g=2*(B>>31)+1,U=B>>>23&255,B&=8388607,Ss(x,k,U==255?B?NaN:1/0*g:U==0?g*Math.pow(2,-149)*B:g*Math.pow(2,U-150)*(B+Math.pow(2,23))),!0},function(g,x,k){if(x=xp(x,k),x!=null){Er(g.h,8*k+5),g=g.h;var M=+x;M===0?0<1/M?Se=sn=0:(sn=0,Se=2147483648):isNaN(M)?(sn=0,Se=2147483647):(M=(k=0>M?-2147483648:0)?-M:M,34028234663852886e22<M?(sn=0,Se=(k|2139095040)>>>0):11754943508222875e-54>M?(M=Math.round(M/Math.pow(2,-149)),sn=0,Se=(k|M)>>>0):(x=Math.floor(Math.log(M)/Math.LN2),M*=Math.pow(2,-x),M=Math.round(8388608*M),16777216<=M&&++x,sn=0,Se=(k|x+127<<23|M&8388607)>>>0)),k=Se,g.h.push(k>>>0&255),g.h.push(k>>>8&255),g.h.push(k>>>16&255),g.h.push(k>>>24&255)}}),ey=Na(function(g,x,k){if(g.i!==0)return!1;var M=g.h,j=0,U=g=0,B=M.i,G=M.h;do{var Z=B[G++];j|=(Z&127)<<U,U+=7}while(32>U&&Z&128);for(32<U&&(g|=(Z&127)>>4),U=3;32>U&&Z&128;U+=7)Z=B[G++],g|=(Z&127)<<U;if(qs(M,G),128>Z)M=j>>>0,Z=g>>>0,(g=Z&2147483648)&&(M=~M+1>>>0,Z=~Z>>>0,M==0&&(Z=Z+1>>>0)),M=4294967296*Z+(M>>>0);else throw ec();return Ss(x,k,g?-M:M),!0},function(g,x,k){x=Pi(x,k),x!=null&&(typeof x=="string"&&wh(x),x!=null&&(Er(g.h,8*k),typeof x=="number"?(g=g.h,up(x),gp(g,Se,sn)):(k=wh(x),gp(g.h,k.i,k.h))))}),px=Na(function(g,x,k){return g.i!==0?!1:(Ss(x,k,fo(g.h)),!0)},function(g,x,k){if(x=Pi(x,k),x!=null&&x!=null)if(Er(g.h,8*k),g=g.h,k=x,0<=k)Er(g,k);else{for(x=0;9>x;x++)g.h.push(k&127|128),k>>=7;g.h.push(1)}}),La=Na(function(g,x,k){if(g.i!==2)return!1;var M=fo(g.h)>>>0;g=g.h;var j=po(g,M);if(g=g.i,xh){var U=g,B;(B=ic)||(B=ic=new TextDecoder("utf-8",{fatal:!0})),g=j+M,U=j===0&&g===U.length?U:U.subarray(j,g);try{var G=B.decode(U)}catch(Ft){if(nc===void 0){try{B.decode(new Uint8Array([128]))}catch{}try{B.decode(new Uint8Array([97])),nc=!0}catch{nc=!1}}throw!nc&&(ic=void 0),Ft}}else{G=j,M=G+M,j=[];for(var Z=null,at,pt;G<M;)at=g[G++],128>at?j.push(at):224>at?G>=M?Sr():(pt=g[G++],194>at||(pt&192)!==128?(G--,Sr()):j.push((at&31)<<6|pt&63)):240>at?G>=M-1?Sr():(pt=g[G++],(pt&192)!==128||at===224&&160>pt||at===237&&160<=pt||((U=g[G++])&192)!==128?(G--,Sr()):j.push((at&15)<<12|(pt&63)<<6|U&63)):244>=at?G>=M-2?Sr():(pt=g[G++],(pt&192)!==128||(at<<28)+(pt-144)>>30!==0||((U=g[G++])&192)!==128||((B=g[G++])&192)!==128?(G--,Sr()):(at=(at&7)<<18|(pt&63)<<12|(U&63)<<6|B&63,at-=65536,j.push((at>>10&1023)+55296,(at&1023)+56320))):Sr(),8192<=j.length&&(Z=fp(Z,j),j.length=0);G=fp(Z,j)}return Ss(x,k,G),!0},function(g,x,k){if(x=Pi(x,k),x!=null){var M=!1;if(M=M===void 0?!1:M,sc){if(M&&/(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])/.test(x))throw Error("Found an unpaired surrogate");x=(pp||(pp=new TextEncoder)).encode(x)}else{for(var j=0,U=new Uint8Array(3*x.length),B=0;B<x.length;B++){var G=x.charCodeAt(B);if(128>G)U[j++]=G;else{if(2048>G)U[j++]=G>>6|192;else{if(55296<=G&&57343>=G){if(56319>=G&&B<x.length){var Z=x.charCodeAt(++B);if(56320<=Z&&57343>=Z){G=1024*(G-55296)+Z-56320+65536,U[j++]=G>>18|240,U[j++]=G>>12&63|128,U[j++]=G>>6&63|128,U[j++]=G&63|128;continue}else B--}if(M)throw Error("Found an unpaired surrogate");G=65533}U[j++]=G>>12|224,U[j++]=G>>6&63|128}U[j++]=G&63|128}}x=j===U.length?U:U.subarray(0,j)}Er(g.h,8*k+2),Er(g.h,x.length),Cr(g,g.h.end()),Cr(g,x)}}),Ia=Na(function(g,x,k,M,j){if(g.i!==2)return!1;x=Q0(x,k,M),k=g.h.j,M=fo(g.h)>>>0;var U=g.h.h+M,B=U-k;if(0>=B&&(g.h.j=U,j(x,g,void 0,void 0,void 0),B=U-g.h.h),B)throw Error("Message parsing ended unexpectedly. Expected to read "+(M+" bytes, instead read "+(M-B)+" bytes, either the data ended unexpectedly or the message misreported its own length"));return g.h.h=U,g.h.j=k,!0},function(g,x,k,M,j){if(x=dc(x,M,k),x!=null)for(M=0;M<x.length;M++){var U=g;Er(U.h,8*k+2);var B=U.h.end();Cr(U,B),B.push(U.i),U=B,j(x[M],g),B=g;var G=U.pop();for(G=B.i+B.h.length()-G;127<G;)U.push(G&127|128),G>>>=7,B.i++;U.push(G),B.i++}});function _r(g){return function(x,k){t:{if(oc.length){var M=oc.pop();M.setOptions(k),rc(M.h,x,k),x=M}else x=new Eh(x,k);try{var j=Nh(g),U=Da(new j.P,x,j);break t}finally{j=x.h,j.i=null,j.m=!1,j.l=0,j.j=0,j.h=0,j.S=!1,x.l=-1,x.i=-1,100>oc.length&&oc.push(x)}U=void 0}return U}}function Fa(g){return function(){var x=new ac;ty(this,x,Es(g)),Cr(x,x.h.end());for(var k=new Uint8Array(x.i),M=x.j,j=M.length,U=0,B=0;B<j;B++){var G=M[B];k.set(G,U),U+=G.length}return x.j=[k],k}}function Oa(g){Yn.call(this,g)}T(Oa,Yn);var ny=[Oa,1,px,2,qn,3,La,4,La];Oa.prototype.l=Fa(ny);function bc(g){Yn.call(this,g,-1,Lh)}T(bc,Yn),bc.prototype.addClassification=function(g,x){return Q0(this,1,Oa,g,x),this};var Lh=[1],Ih=_r([bc,1,Ia,ny]);function go(g){Yn.call(this,g)}T(go,Yn);var Js=[go,1,qn,2,qn,3,qn,4,qn,5,qn];go.prototype.l=Fa(Js);function Fh(g){Yn.call(this,g,-1,Oh)}T(Fh,Yn);var Oh=[1],kp=_r([Fh,1,Ia,Js]);function yo(g){Yn.call(this,g)}T(yo,Yn);var Ac=[yo,1,qn,2,qn,3,qn,4,qn,5,qn,6,ey],iy=_r(Ac);yo.prototype.l=Fa(Ac);function Qn(g,x,k){if(k=g.createShader(k===0?g.VERTEX_SHADER:g.FRAGMENT_SHADER),g.shaderSource(k,x),g.compileShader(k),!g.getShaderParameter(k,g.COMPILE_STATUS))throw Error(`Could not compile WebGL shader.

`+g.getShaderInfoLog(k));return k}function vo(g){return dc(g,Oa,1).map(function(x){var k=Pi(x,1);return{index:k??0,score:di(x,2),label:Pi(x,3)!=null?fc(Pi(x,3),""):void 0,displayName:Pi(x,4)!=null?fc(Pi(x,4),""):void 0}})}function jh(g){return{x:di(g,1),y:di(g,2),z:di(g,3),visibility:xp(g,4)!=null?di(g,4):void 0}}function ja(g){return g.map(function(x){return dc(kp(x),go,1).map(jh)})}function Tp(g,x){this.i=g,this.h=x,this.m=0}function Bh(g,x,k){return _p(g,x),typeof g.h.canvas.transferToImageBitmap=="function"?Promise.resolve(g.h.canvas.transferToImageBitmap()):k?Promise.resolve(g.h.canvas):typeof createImageBitmap=="function"?createImageBitmap(g.h.canvas):(g.j===void 0&&(g.j=document.createElement("canvas")),new Promise(function(M){g.j.height=g.h.canvas.height,g.j.width=g.h.canvas.width,g.j.getContext("2d",{}).drawImage(g.h.canvas,0,0,g.h.canvas.width,g.h.canvas.height),M(g.j)}))}function _p(g,x){var k=g.h;if(g.s===void 0){var M=Qn(k,`
  attribute vec2 aVertex;
  attribute vec2 aTex;
  varying vec2 vTex;
  void main(void) {
    gl_Position = vec4(aVertex, 0.0, 1.0);
    vTex = aTex;
  }`,0),j=Qn(k,`
  precision mediump float;
  varying vec2 vTex;
  uniform sampler2D sampler0;
  void main(){
    gl_FragColor = texture2D(sampler0, vTex);
  }`,1),U=k.createProgram();if(k.attachShader(U,M),k.attachShader(U,j),k.linkProgram(U),!k.getProgramParameter(U,k.LINK_STATUS))throw Error(`Could not compile WebGL program.

`+k.getProgramInfoLog(U));M=g.s=U,k.useProgram(M),j=k.getUniformLocation(M,"sampler0"),g.l={O:k.getAttribLocation(M,"aVertex"),N:k.getAttribLocation(M,"aTex"),xa:j},g.v=k.createBuffer(),k.bindBuffer(k.ARRAY_BUFFER,g.v),k.enableVertexAttribArray(g.l.O),k.vertexAttribPointer(g.l.O,2,k.FLOAT,!1,0,0),k.bufferData(k.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),k.STATIC_DRAW),k.bindBuffer(k.ARRAY_BUFFER,null),g.u=k.createBuffer(),k.bindBuffer(k.ARRAY_BUFFER,g.u),k.enableVertexAttribArray(g.l.N),k.vertexAttribPointer(g.l.N,2,k.FLOAT,!1,0,0),k.bufferData(k.ARRAY_BUFFER,new Float32Array([0,1,0,0,1,0,1,1]),k.STATIC_DRAW),k.bindBuffer(k.ARRAY_BUFFER,null),k.uniform1i(j,0)}M=g.l,k.useProgram(g.s),k.canvas.width=x.width,k.canvas.height=x.height,k.viewport(0,0,x.width,x.height),k.activeTexture(k.TEXTURE0),g.i.bindTexture2d(x.glName),k.enableVertexAttribArray(M.O),k.bindBuffer(k.ARRAY_BUFFER,g.v),k.vertexAttribPointer(M.O,2,k.FLOAT,!1,0,0),k.enableVertexAttribArray(M.N),k.bindBuffer(k.ARRAY_BUFFER,g.u),k.vertexAttribPointer(M.N,2,k.FLOAT,!1,0,0),k.bindFramebuffer(k.DRAW_FRAMEBUFFER?k.DRAW_FRAMEBUFFER:k.FRAMEBUFFER,null),k.clearColor(0,0,0,0),k.clear(k.COLOR_BUFFER_BIT),k.colorMask(!0,!0,!0,!0),k.drawArrays(k.TRIANGLE_FAN,0,4),k.disableVertexAttribArray(M.O),k.disableVertexAttribArray(M.N),k.bindBuffer(k.ARRAY_BUFFER,null),g.i.bindTexture2d(0)}function Sc(g){this.h=g}var Uh=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]);function sy(g,x){return x+g}function ry(g,x){window[g]=x}function mx(g){var x=document.createElement("script");return x.setAttribute("src",g),x.setAttribute("crossorigin","anonymous"),new Promise(function(k){x.addEventListener("load",function(){k()},!1),x.addEventListener("error",function(){k()},!1),document.body.appendChild(x)})}function gx(){return it(function(g){switch(g.h){case 1:return g.s=2,F(g,WebAssembly.instantiate(Uh),4);case 4:g.h=3,g.s=0;break;case 2:return g.s=0,g.l=null,g.return(!1);case 3:return g.return(!0)}})}function Ec(g){if(this.h=g,this.listeners={},this.l={},this.L={},this.s={},this.v={},this.M=this.u=this.ga=!0,this.I=Promise.resolve(),this.fa="",this.D={},this.locateFile=g&&g.locateFile||sy,typeof window=="object")var x=window.location.pathname.toString().substring(0,window.location.pathname.toString().lastIndexOf("/"))+"/";else if(typeof location<"u")x=location.pathname.toString().substring(0,location.pathname.toString().lastIndexOf("/"))+"/";else throw Error("solutions can only be loaded on a web page or in a web worker");if(this.ha=x,g.options){x=u(Object.keys(g.options));for(var k=x.next();!k.done;k=x.next()){k=k.value;var M=g.options[k].default;M!==void 0&&(this.l[k]=typeof M=="function"?M():M)}}}r=Ec.prototype,r.close=function(){return this.j&&this.j.delete(),Promise.resolve()};function yx(g){var x,k,M,j,U,B,G,Z,at,pt,Ft;return it(function(Rt){switch(Rt.h){case 1:return g.ga?(x=g.h.files===void 0?[]:typeof g.h.files=="function"?g.h.files(g.l):g.h.files,F(Rt,gx(),2)):Rt.return();case 2:if(k=Rt.i,typeof window=="object")return ry("createMediapipeSolutionsWasm",{locateFile:g.locateFile}),ry("createMediapipeSolutionsPackedAssets",{locateFile:g.locateFile}),B=x.filter(function(gt){return gt.data!==void 0}),G=x.filter(function(gt){return gt.data===void 0}),Z=Promise.all(B.map(function(gt){var Dt=Vh(g,gt.url);if(gt.path!==void 0){var Kt=gt.path;Dt=Dt.then(function(ge){return g.overrideFile(Kt,ge),Promise.resolve(ge)})}return Dt})),at=Promise.all(G.map(function(gt){return gt.simd===void 0||gt.simd&&k||!gt.simd&&!k?mx(g.locateFile(gt.url,g.ha)):Promise.resolve()})).then(function(){var gt,Dt,Kt;return it(function(ge){if(ge.h==1)return gt=window.createMediapipeSolutionsWasm,Dt=window.createMediapipeSolutionsPackedAssets,Kt=g,F(ge,gt(Dt),2);Kt.i=ge.i,ge.h=0})}),pt=(function(){return it(function(gt){return g.h.graph&&g.h.graph.url?gt=F(gt,Vh(g,g.h.graph.url),0):(gt.h=0,gt=void 0),gt})})(),F(Rt,Promise.all([at,Z,pt]),7);if(typeof importScripts!="function")throw Error("solutions can only be loaded on a web page or in a web worker");return M=x.filter(function(gt){return gt.simd===void 0||gt.simd&&k||!gt.simd&&!k}).map(function(gt){return g.locateFile(gt.url,g.ha)}),importScripts.apply(null,h(M)),j=g,F(Rt,createMediapipeSolutionsWasm(Module),6);case 6:j.i=Rt.i,g.m=new OffscreenCanvas(1,1),g.i.canvas=g.m,U=g.i.GL.createContext(g.m,{antialias:!1,alpha:!1,ua:typeof WebGL2RenderingContext<"u"?2:1}),g.i.GL.makeContextCurrent(U),Rt.h=4;break;case 7:if(g.m=document.createElement("canvas"),Ft=g.m.getContext("webgl2",{}),!Ft&&(Ft=g.m.getContext("webgl",{}),!Ft))return alert("Failed to create WebGL canvas context when passing video frame."),Rt.return();g.K=Ft,g.i.canvas=g.m,g.i.createContext(g.m,!0,!0,{});case 4:g.j=new g.i.SolutionWasm,g.ga=!1,Rt.h=0}})}function vx(g){var x,k,M,j,U,B,G,Z;return it(function(at){if(at.h==1){if(g.h.graph&&g.h.graph.url&&g.fa===g.h.graph.url)return at.return();if(g.u=!0,!g.h.graph||!g.h.graph.url){at.h=2;return}return g.fa=g.h.graph.url,F(at,Vh(g,g.h.graph.url),3)}for(at.h!=2&&(x=at.i,g.j.loadGraph(x)),k=u(Object.keys(g.D)),M=k.next();!M.done;M=k.next())j=M.value,g.j.overrideFile(j,g.D[j]);if(g.D={},g.h.listeners)for(U=u(g.h.listeners),B=U.next();!B.done;B=U.next())G=B.value,bx(g,G);Z=g.l,g.l={},g.setOptions(Z),at.h=0})}r.reset=function(){var g=this;return it(function(x){g.j&&(g.j.reset(),g.s={},g.v={}),x.h=0})},r.setOptions=function(g,x){var k=this;if(x=x||this.h.options){for(var M=[],j=[],U={},B=u(Object.keys(g)),G=B.next();!G.done;U={X:U.X,Y:U.Y},G=B.next())if(G=G.value,!(G in this.l&&this.l[G]===g[G])){this.l[G]=g[G];var Z=x[G];Z!==void 0&&(Z.onChange&&(U.X=Z.onChange,U.Y=g[G],M.push((function(at){return function(){var pt;return it(function(Ft){if(Ft.h==1)return F(Ft,at.X(at.Y),2);pt=Ft.i,pt===!0&&(k.u=!0),Ft.h=0})}})(U))),Z.graphOptionXref&&(G=Object.assign({},{calculatorName:"",calculatorIndex:0},Z.graphOptionXref,{valueNumber:Z.type===1?g[G]:0,valueBoolean:Z.type===0?g[G]:!1,valueString:Z.type===2?g[G]:""}),j.push(G)))}(M.length!==0||j.length!==0)&&(this.u=!0,this.H=(this.H===void 0?[]:this.H).concat(j),this.F=(this.F===void 0?[]:this.F).concat(M))}};function wx(g){var x,k,M,j,U,B,G;return it(function(Z){switch(Z.h){case 1:if(!g.u)return Z.return();if(!g.F){Z.h=2;break}x=u(g.F),k=x.next();case 3:if(k.done){Z.h=5;break}return M=k.value,F(Z,M(),4);case 4:k=x.next(),Z.h=3;break;case 5:g.F=void 0;case 2:if(g.H){for(j=new g.i.GraphOptionChangeRequestList,U=u(g.H),B=U.next();!B.done;B=U.next())G=B.value,j.push_back(G);g.j.changeOptions(j),j.delete(),g.H=void 0}g.u=!1,Z.h=0}})}r.initialize=function(){var g=this;return it(function(x){return x.h==1?F(x,yx(g),2):x.h!=3?F(x,vx(g),3):F(x,wx(g),0)})};function Vh(g,x){var k,M;return it(function(j){return x in g.L?j.return(g.L[x]):(k=g.locateFile(x,""),M=fetch(k).then(function(U){return U.arrayBuffer()}),g.L[x]=M,j.return(M))})}r.overrideFile=function(g,x){this.j?this.j.overrideFile(g,x):this.D[g]=x},r.clearOverriddenFiles=function(){this.D={},this.j&&this.j.clearOverriddenFiles()},r.send=function(g,x){var k=this,M,j,U,B,G,Z,at,pt,Ft;return it(function(Rt){switch(Rt.h){case 1:return k.h.inputs?(M=1e3*(x??performance.now()),F(Rt,k.I,2)):Rt.return();case 2:return F(Rt,k.initialize(),3);case 3:for(j=new k.i.PacketDataList,U=u(Object.keys(g)),B=U.next();!B.done;B=U.next())if(G=B.value,Z=k.h.inputs[G]){t:{var gt=g[G];switch(Z.type){case"video":var Dt=k.s[Z.stream];if(Dt||(Dt=new Tp(k.i,k.K),k.s[Z.stream]=Dt),Dt.m===0&&(Dt.m=Dt.i.createTexture()),typeof HTMLVideoElement<"u"&&gt instanceof HTMLVideoElement)var Kt=gt.videoWidth,ge=gt.videoHeight;else typeof HTMLImageElement<"u"&&gt instanceof HTMLImageElement?(Kt=gt.naturalWidth,ge=gt.naturalHeight):(Kt=gt.width,ge=gt.height);ge={glName:Dt.m,width:Kt,height:ge},Kt=Dt.h,Kt.canvas.width=ge.width,Kt.canvas.height=ge.height,Kt.activeTexture(Kt.TEXTURE0),Dt.i.bindTexture2d(Dt.m),Kt.texImage2D(Kt.TEXTURE_2D,0,Kt.RGBA,Kt.RGBA,Kt.UNSIGNED_BYTE,gt),Dt.i.bindTexture2d(0),Dt=ge;break t;case"detections":for(Dt=k.s[Z.stream],Dt||(Dt=new Sc(k.i),k.s[Z.stream]=Dt),Dt.data||(Dt.data=new Dt.h.DetectionListData),Dt.data.reset(gt.length),ge=0;ge<gt.length;++ge){Kt=gt[ge];var fe=Dt.data,cn=fe.setBoundingBox,pi=ge,Fn=Kt.la,Zt=new yo;if(hi(Zt,1,Fn.ra),hi(Zt,2,Fn.sa),hi(Zt,3,Fn.height),hi(Zt,4,Fn.width),hi(Zt,5,Fn.rotation),Ss(Zt,6,Fn.pa),Fn=Zt.l(),cn.call(fe,pi,Fn),Kt.ea)for(fe=0;fe<Kt.ea.length;++fe){Zt=Kt.ea[fe],cn=Dt.data,pi=cn.addNormalizedLandmark,Fn=ge,Zt=Object.assign({},Zt,{visibility:Zt.visibility?Zt.visibility:0});var gn=new go;hi(gn,1,Zt.x),hi(gn,2,Zt.y),hi(gn,3,Zt.z),Zt.visibility&&hi(gn,4,Zt.visibility),Zt=gn.l(),pi.call(cn,Fn,Zt)}if(Kt.ba)for(fe=0;fe<Kt.ba.length;++fe)cn=Dt.data,pi=cn.addClassification,Fn=ge,Zt=Kt.ba[fe],gn=new Oa,hi(gn,2,Zt.score),Zt.index&&Ss(gn,1,Zt.index),Zt.label&&Ss(gn,3,Zt.label),Zt.displayName&&Ss(gn,4,Zt.displayName),Zt=gn.l(),pi.call(cn,Fn,Zt)}Dt=Dt.data;break t;default:Dt={}}}switch(at=Dt,pt=Z.stream,Z.type){case"video":j.pushTexture2d(Object.assign({},at,{stream:pt,timestamp:M}));break;case"detections":Ft=at,Ft.stream=pt,Ft.timestamp=M,j.pushDetectionList(Ft);break;default:throw Error("Unknown input config type: '"+Z.type+"'")}}return k.j.send(j),F(Rt,k.I,4);case 4:j.delete(),Rt.h=0}})};function xx(g,x,k){var M,j,U,B,G,Z,at,pt,Ft,Rt,gt,Dt,Kt,ge;return it(function(fe){switch(fe.h){case 1:if(!k)return fe.return(x);for(M={},j=0,U=u(Object.keys(k)),B=U.next();!B.done;B=U.next())G=B.value,Z=k[G],typeof Z!="string"&&Z.type==="texture"&&x[Z.stream]!==void 0&&++j;1<j&&(g.M=!1),at=u(Object.keys(k)),B=at.next();case 2:if(B.done){fe.h=4;break}if(pt=B.value,Ft=k[pt],typeof Ft=="string")return Kt=M,ge=pt,F(fe,oy(g,pt,x[Ft]),14);if(Rt=x[Ft.stream],Ft.type==="detection_list"){if(Rt){for(var cn=Rt.getRectList(),pi=Rt.getLandmarksList(),Fn=Rt.getClassificationsList(),Zt=[],gn=0;gn<cn.size();++gn){var Pr=iy(cn.get(gn)),Ax=di(Pr,1),cy=di(Pr,2),uy=di(Pr,3),Cc=di(Pr,4),kc=di(Pr,5,0),zh=void 0;zh=zh===void 0?0:zh,Pr={la:{ra:Ax,sa:cy,height:uy,width:Cc,rotation:kc,pa:fc(Pi(Pr,6),zh)},ea:dc(kp(pi.get(gn)),go,1).map(jh),ba:vo(Ih(Fn.get(gn)))},Zt.push(Pr)}cn=Zt}else cn=[];M[pt]=cn,fe.h=7;break}if(Ft.type==="proto_list"){if(Rt){for(cn=Array(Rt.size()),pi=0;pi<Rt.size();pi++)cn[pi]=Rt.get(pi);Rt.delete()}else cn=[];M[pt]=cn,fe.h=7;break}if(Rt===void 0){fe.h=3;break}if(Ft.type==="float_list"){M[pt]=Rt,fe.h=7;break}if(Ft.type==="proto"){M[pt]=Rt,fe.h=7;break}if(Ft.type!=="texture")throw Error("Unknown output config type: '"+Ft.type+"'");return gt=g.v[pt],gt||(gt=new Tp(g.i,g.K),g.v[pt]=gt),F(fe,Bh(gt,Rt,g.M),13);case 13:Dt=fe.i,M[pt]=Dt;case 7:Ft.transform&&M[pt]&&(M[pt]=Ft.transform(M[pt])),fe.h=3;break;case 14:Kt[ge]=fe.i;case 3:B=at.next(),fe.h=2;break;case 4:return fe.return(M)}})}function oy(g,x,k){var M;return it(function(j){return typeof k=="number"||k instanceof Uint8Array||k instanceof g.i.Uint8BlobList?j.return(k):k instanceof g.i.Texture2dDataOut?(M=g.v[x],M||(M=new Tp(g.i,g.K),g.v[x]=M),j.return(Bh(M,k,g.M))):j.return(void 0)})}function bx(g,x){for(var k=x.name||"$",M=[].concat(h(x.wants)),j=new g.i.StringList,U=u(x.wants),B=U.next();!B.done;B=U.next())j.push_back(B.value);U=g.i.PacketListener.implement({onResults:function(G){for(var Z={},at=0;at<x.wants.length;++at)Z[M[at]]=G.get(at);var pt=g.listeners[k];pt&&(g.I=xx(g,Z,x.outs).then(function(Ft){Ft=pt(Ft);for(var Rt=0;Rt<x.wants.length;++Rt){var gt=Z[M[Rt]];typeof gt=="object"&&gt.hasOwnProperty&&gt.hasOwnProperty("delete")&&gt.delete()}Ft&&(g.I=Ft)}))}}),g.j.attachMultiListener(j,U),j.delete()}r.onResults=function(g,x){this.listeners[x||"$"]=g},Qt("Solution",Ec),Qt("OptionType",{BOOL:0,NUMBER:1,ta:2,0:"BOOL",1:"NUMBER",2:"STRING"});function ay(g){return g===void 0&&(g=0),g===1?"hand_landmark_full.tflite":"hand_landmark_lite.tflite"}function ly(g){var x=this;g=g||{},this.h=new Ec({locateFile:g.locateFile,files:function(k){return[{url:"hands_solution_packed_assets_loader.js"},{simd:!1,url:"hands_solution_wasm_bin.js"},{simd:!0,url:"hands_solution_simd_wasm_bin.js"},{data:!0,url:ay(k.modelComplexity)}]},graph:{url:"hands.binarypb"},inputs:{image:{type:"video",stream:"input_frames_gpu"}},listeners:[{wants:["multi_hand_landmarks","multi_hand_world_landmarks","image_transformed","multi_handedness"],outs:{image:"image_transformed",multiHandLandmarks:{type:"proto_list",stream:"multi_hand_landmarks",transform:ja},multiHandWorldLandmarks:{type:"proto_list",stream:"multi_hand_world_landmarks",transform:ja},multiHandedness:{type:"proto_list",stream:"multi_handedness",transform:function(k){return k.map(function(M){return vo(Ih(M))[0]})}}}}],options:{useCpuInference:{type:0,graphOptionXref:{calculatorType:"InferenceCalculator",fieldName:"use_cpu_inference"},default:typeof window!="object"||window.navigator===void 0?!1:"iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";").includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document},selfieMode:{type:0,graphOptionXref:{calculatorType:"GlScalerCalculator",calculatorIndex:1,fieldName:"flip_horizontal"}},maxNumHands:{type:1,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculator",fieldName:"int_value"}},modelComplexity:{type:1,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorModelComplexity",fieldName:"int_value"},onChange:function(k){var M,j,U;return it(function(B){return B.h==1?(M=ay(k),j="third_party/mediapipe/modules/hand_landmark/"+M,F(B,Vh(x.h,M),2)):(U=B.i,x.h.overrideFile(j,U),B.return(!0))})}},minDetectionConfidence:{type:1,graphOptionXref:{calculatorType:"TensorsToDetectionsCalculator",calculatorName:"handlandmarktrackinggpu__palmdetectiongpu__TensorsToDetectionsCalculator",fieldName:"min_score_thresh"}},minTrackingConfidence:{type:1,graphOptionXref:{calculatorType:"ThresholdingCalculator",calculatorName:"handlandmarktrackinggpu__handlandmarkgpu__ThresholdingCalculator",fieldName:"threshold"}}}})}r=ly.prototype,r.close=function(){return this.h.close(),Promise.resolve()},r.onResults=function(g){this.h.onResults(g)},r.initialize=function(){var g=this;return it(function(x){return F(x,g.h.initialize(),0)})},r.reset=function(){this.h.reset()},r.send=function(g){var x=this;return it(function(k){return F(k,x.h.send(g),0)})},r.setOptions=function(g){this.h.setOptions(g)},Qt("Hands",ly),Qt("HAND_CONNECTIONS",[[0,1],[1,2],[2,3],[3,4],[0,5],[5,6],[6,7],[7,8],[5,9],[9,10],[10,11],[11,12],[9,13],[13,14],[14,15],[15,16],[13,17],[0,17],[17,18],[18,19],[19,20]]),Qt("VERSION","0.4.1675469240")}).call(bA)),bA}var o4=r4();function a4(r){if(!r||r.length<21)return{gesture:"NONE",confidence:0};const t=(C,E)=>{const T=r[C].x-r[E].x,P=r[C].y-r[E].y,N=r[C].z-r[E].z;return Math.sqrt(T*T+P*P+N*N)},e=(C,E,T)=>{const P=t(C,E),N=t(E,T);return P/(N+1e-5)},n=e(4,3,2),i=e(8,7,5),o=e(12,11,9),c=e(16,15,13),u=e(20,19,17),h=(C,E,T,P=.02)=>r[C].y<r[E].y-P||T>.85,f=(C,E,T,P=.04)=>r[C].y<r[E].y-P||T>.95,p={thumb:n>.6,index:h(8,6,i),middle:h(12,10,o),ring:h(16,14,c),pinky:h(20,18,u)},m={thumb:n>.7,index:f(8,6,i),middle:f(12,10,o),ring:f(16,14,c),pinky:f(20,18,u)},v=C=>Object.values(C).filter(Boolean).length;v(p);const b=v(m);return m.index&&!m.middle&&!m.ring&&!m.pinky?{gesture:"TIMER",confidence:.9}:m.index&&m.middle&&!m.ring&&!m.pinky?{gesture:"REPEAT",confidence:.9}:b<=1?{gesture:"PREV",confidence:.85}:b>=3?{gesture:"NEXT",confidence:.85}:{gesture:"NONE",confidence:.3}}const l4="https://cdn.jsdelivr.net/npm/@mediapipe/hands@0.4.1675469240",c4=300,u4=900,h4=({onGesture:r,onGestureFrame:t,throttleMs:e=120,minConfidence:n=.5,className:i})=>{const o=$.useRef(null),[c,u]=$.useState("idle"),[h,f]=$.useState(null),p=$.useRef(0),m=$.useRef(0),v=$.useRef("NONE"),b=$.useRef(0),C=$.useRef(0),E=$.useRef(!1),T=$.useRef([]),P=$.useRef(r),N=$.useRef(t),L=$.useRef(e),F=$.useRef(n),O=$.useRef(null),z=$.useRef(null);return $.useEffect(()=>{P.current=r},[r]),$.useEffect(()=>{N.current=t},[t]),$.useEffect(()=>{L.current=e},[e]),$.useEffect(()=>{F.current=n},[n]),$.useEffect(()=>{let K=null,Y=!0;return(async()=>{if(!navigator.mediaDevices?.getUserMedia){console.warn("Webcam not supported"),u("error"),f("Webcam not supported in this browser.");return}u("loading");try{K=await navigator.mediaDevices.getUserMedia({video:{facingMode:"user",width:{ideal:960},height:{ideal:540}}})}catch(Mt){console.error(Mt),u("error"),f("Camera access denied. Enable it to use gestures.");return}if(!Y||!o.current)return;o.current.srcObject=K,await o.current.play(),u("ready");const st=new o4.Hands({locateFile:Mt=>`${l4}/${Mt}`});st.setOptions({maxNumHands:1,minDetectionConfidence:.6,minTrackingConfidence:.6,modelComplexity:1}),st.onResults(Mt=>{const xt=performance.now();if(xt-p.current<L.current)return;p.current=xt;const Ct=Mt.multiHandLandmarks?.[0];if(!Ct||Ct.length===0){T.current=[],N.current?.("NONE",0),v.current="NONE",b.current=xt;return}const Qt=a4(Ct);T.current=[...T.current.slice(-5),Qt];const ft=T.current.reduce((ht,W)=>(ht[W.gesture]=(ht[W.gesture]??0)+1,ht),{NEXT:0,PREV:0,REPEAT:0,TIMER:0,NONE:0}),lt=Object.keys(ft).filter(ht=>ht!=="NONE"&&ft[ht]>0),et=lt.length===0?"NONE":lt.reduce((ht,W)=>ft[W]>ft[ht]?W:ht),mt=et==="NONE"?0:T.current.filter(ht=>ht.gesture===et).reduce((ht,W)=>ht+W.confidence,0)/(ft[et]||1);if(N.current?.(et,mt),et!=="NONE"&&!(ft[et]<2)&&!(mt<F.current)&&!(xt<C.current)){if(et!==v.current){v.current=et,b.current=xt;return}xt-b.current>=c4&&(P.current(et),C.current=xt+u4,v.current="NONE")}});const it=async()=>{if(!Y||!o.current||!st)return;const Mt=performance.now();if(E.current||Mt-m.current<L.current){O.current=requestAnimationFrame(it);return}E.current=!0,m.current=Mt;try{await st.send({image:o.current})}finally{E.current=!1}O.current=requestAnimationFrame(it)};it(),z.current=st})().catch(console.error),()=>{Y=!1,O.current&&cancelAnimationFrame(O.current),z.current?.close(),K&&K.getTracks().forEach(st=>st.stop())}},[]),I.jsxs("div",{className:`relative w-full overflow-hidden rounded-2xl border border-slate-200 bg-slate-950/90 shadow-sm dark:border-slate-700 ${i??""}`,children:[I.jsx("video",{ref:o,className:"h-full w-full object-cover",muted:!0,playsInline:!0}),c!=="ready"&&I.jsxs("div",{className:"absolute inset-0 flex items-center justify-center bg-slate-900/70 text-sm text-white",children:[c==="loading"&&"Starting camera...",c==="error"&&h,c==="idle"&&"Preparing camera..."]})]})},d4={NEXT:"Next Step",PREV:"Previous Step",REPEAT:"Repeat Step",TIMER:"Pause/Resume",NONE:"No Hand"},f4=({gesture:r,confidence:t,className:e,placement:n="overlay"})=>{const i=Math.round(t*100),o=t>=.88&&r!=="NONE",c=n==="inline"?"relative w-full":"absolute z-50";return I.jsx("div",{className:"absolute top-4 right-4 z-50",children:I.jsxs("div",{className:`${c} ${n==="overlay"?e??"top-4 right-4":e??""} rounded-xl px-4 py-3 text-sm shadow-lg backdrop-blur
          ${o?"bg-green-500/90 text-white":"bg-slate-800/80 text-white"}
        `,children:[I.jsx("div",{className:"font-medium",children:d4[r]}),I.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[I.jsx("div",{className:"h-1.5 w-24 bg-white/30 rounded-full overflow-hidden",children:I.jsx("div",{className:"h-full bg-white transition-all",style:{width:`${i}%`}})}),I.jsxs("span",{className:"text-xs",children:[i,"%"]})]}),I.jsx("div",{className:"mt-1 text-xs opacity-80",children:o?"Locked":"Stabilizing"})]})})},p4=({initialSeconds:r=0,isRunning:t,onRunningChange:e})=>{const[n,i]=$.useState(r),[o,c]=$.useState(!1),u=$.useRef(null),h=t??o;$.useEffect(()=>{i(r),c(!1),e?.(!1)},[r,e]),$.useEffect(()=>{t!==void 0&&c(t)},[t]),$.useEffect(()=>(h?u.current=window.setInterval(()=>{i(C=>Math.max(0,C-1))},1e3):u.current&&(clearInterval(u.current),u.current=null),()=>{u.current&&clearInterval(u.current)}),[h]),$.useEffect(()=>{n===0&&h&&(t===void 0&&c(!1),e?.(!1))},[n,h,t,e]);const f=()=>i(r),p=()=>{t===void 0&&c(!0),e?.(!0)},m=()=>{t===void 0&&c(!1),e?.(!1)},v=Math.floor(n/60),b=n%60;return I.jsxs("div",{className:"rounded-xl border p-4 bg-slate-50 dark:bg-slate-800 border-slate-200 dark:border-slate-700",children:[I.jsxs("div",{className:"text-3xl font-mono text-center",children:[v.toString().padStart(2,"0"),":",b.toString().padStart(2,"0")]}),I.jsxs("div",{className:"mt-3 flex gap-2 justify-center",children:[I.jsx("button",{onClick:p,className:"px-3 py-1 rounded-md bg-emerald-500 text-white",children:"Start"}),I.jsx("button",{onClick:m,className:"px-3 py-1 rounded-md bg-amber-500 text-white",children:"Pause"}),I.jsx("button",{onClick:f,className:"px-3 py-1 rounded-md bg-slate-500 text-white",children:"Reset"})]})]})};function g1(r,t){if(!("speechSynthesis"in window)){console.warn("TTS not supported in this browser");return}Sw();const e=new SpeechSynthesisUtterance(r);e.rate=t?.rate??1,e.pitch=t?.pitch??1,t?.voice&&(e.voice=t.voice),window.speechSynthesis.speak(e)}function Sw(){"speechSynthesis"in window&&window.speechSynthesis.cancel()}function m4(){"speechSynthesis"in window&&window.speechSynthesis.speaking&&!window.speechSynthesis.paused&&window.speechSynthesis.pause()}function g4(){"speechSynthesis"in window&&window.speechSynthesis.paused&&window.speechSynthesis.resume()}function M_(){return"speechSynthesis"in window?window.speechSynthesis.paused:!1}function y4(){return"speechSynthesis"in window?window.speechSynthesis.speaking:!1}const v4=({currentText:r})=>{const{voiceRate:t,voicePitch:e,setVoicePitch:n,setVoiceRate:i}=ax(),[o,c]=$.useState(!1),u=()=>{r&&(g1(r),c(!0))},h=()=>{Sw(),c(!1)};return I.jsxs("div",{className:"rounded-xl border p-4 bg-slate-50 dark:bg-slate-800 border-slate-200 dark:border-slate-700",children:[I.jsxs("div",{className:"flex items-center justify-between gap-4",children:[I.jsx("div",{className:"font-semibold",children:"Voice"}),I.jsx("div",{className:"flex gap-2",children:o?I.jsx("button",{onClick:h,className:"px-3 py-1 rounded-md bg-red-500 text-white",children:"Stop"}):I.jsx("button",{onClick:u,className:"px-3 py-1 rounded-md bg-sky-500 text-white",children:"Speak"})})]}),I.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-3",children:[I.jsxs("label",{className:"text-sm",children:["Rate: ",t.toFixed(2),I.jsx("input",{type:"range",min:.5,max:2,step:.05,value:t,onChange:f=>i(parseFloat(f.target.value)),className:"w-full"})]}),I.jsxs("label",{className:"text-sm",children:["Pitch: ",e.toFixed(2),I.jsx("input",{type:"range",min:0,max:2,step:.05,value:e,onChange:f=>n(parseFloat(f.target.value)),className:"w-full"})]})]})]})},w4=()=>{const{id:r}=EN(),{currentRecipeId:t,currentStep:e,timerActive:n,nextStep:i,prevStep:o,setRecipe:c,setTimerActive:u}=LM();$.useEffect(()=>{r&&c(r)},[r,c]);const h=Mm(L=>L.recipes),{voiceRate:f,voicePitch:p}=ax(),[m,v]=$.useState("NONE"),[b,C]=$.useState(0),E=$.useRef("NONE"),T=$.useMemo(()=>h.find(L=>L.id===t),[h,t]),P=T?.steps[e];$.useEffect(()=>{P&&(Sw(),u(!1),g1(P.text,{rate:f,pitch:p}))},[P,f,p,u]);const N=L=>{if(L!==E.current){switch(E.current=L,L){case"NEXT":i();break;case"PREV":o();break;case"REPEAT":P&&(Sw(),g1(P.text,{rate:f,pitch:p}));break;case"TIMER":(y4()||M_())&&(M_()?g4():m4());break}setTimeout(()=>{E.current="NONE"},700)}};return!T||!P?I.jsx("div",{className:"p-6 text-center text-slate-500",children:"No active recipe selected."}):I.jsx("div",{className:"relative flex flex-col gap-6 p-6",children:I.jsxs("div",{className:"grid gap-6 lg:grid-cols-[minmax(0,420px),1fr]",children:[I.jsxs("div",{className:"space-y-4",children:[I.jsxs("div",{className:"flex items-center justify-between",children:[I.jsx("h2",{className:"text-sm font-semibold uppercase tracking-wide text-slate-500",children:"Live camera"}),I.jsx("span",{className:"text-xs text-slate-400",children:"Best in good lighting"})]}),I.jsx("div",{className:"relative",children:I.jsx(h4,{onGesture:N,onGestureFrame:(L,F)=>{v(L),C(F)},className:"aspect-video max-h-[280px] sm:max-h-[320px]"})}),I.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-4 shadow-sm dark:border-slate-800 dark:bg-slate-900",children:[I.jsxs("div",{className:"flex items-center justify-between",children:[I.jsx("p",{className:"text-sm font-semibold text-slate-700 dark:text-slate-200",children:"Gesture status"}),I.jsx("span",{className:"text-xs text-slate-400",children:"Live feedback"})]}),I.jsx("div",{className:"mt-3",children:I.jsx(f4,{gesture:m,confidence:b,placement:"inline",className:"max-w-full"})})]}),I.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-slate-50 p-4 text-sm text-slate-600 shadow-sm dark:border-slate-800 dark:bg-slate-900/50 dark:text-slate-300",children:[I.jsx("p",{className:"font-semibold text-slate-700 dark:text-slate-200",children:"Gesture shortcuts"}),I.jsxs("div",{className:"mt-3 grid gap-3 text-xs text-slate-600 dark:text-slate-300 sm:grid-cols-2",children:[I.jsx("div",{className:"rounded-xl border border-slate-200 bg-white p-3 dark:border-slate-800 dark:bg-slate-900",children:" Next step"}),I.jsx("div",{className:"rounded-xl border border-slate-200 bg-white p-3 dark:border-slate-800 dark:bg-slate-900",children:" Previous step"}),I.jsx("div",{className:"rounded-xl border border-slate-200 bg-white p-3 dark:border-slate-800 dark:bg-slate-900",children:" Repeat narration"}),I.jsx("div",{className:"rounded-xl border border-slate-200 bg-white p-3 dark:border-slate-800 dark:bg-slate-900",children:" Pause/Resume narration"})]})]}),I.jsx("div",{className:"rounded-2xl border border-slate-200 bg-white p-4 text-sm text-slate-600 shadow-sm dark:border-slate-800 dark:bg-slate-900 dark:text-slate-300",children:"Keep your palm centered and about 2 feet from the camera for reliable detection."})]}),I.jsxs("div",{className:"flex flex-col gap-6",children:[I.jsxs("div",{className:"rounded-3xl border border-slate-200/70 bg-white/80 p-8 text-center shadow-sm backdrop-blur dark:border-slate-800 dark:bg-slate-900/70",children:[I.jsxs("p",{className:"text-xs uppercase tracking-wide text-slate-500",children:["Step ",e+1," of ",T.steps.length]}),I.jsx("div",{className:"mt-4 text-2xl md:text-3xl font-semibold text-slate-900 dark:text-white",children:P.text})]}),P.timer?.seconds&&I.jsx("div",{className:"rounded-2xl border border-slate-200/70 bg-white/80 p-5 shadow-sm backdrop-blur dark:border-slate-800 dark:bg-slate-900/70",children:I.jsx(p4,{initialSeconds:P.timer.seconds,isRunning:n,onRunningChange:u})}),I.jsx("div",{className:"rounded-2xl border border-slate-200/70 bg-white/80 p-5 shadow-sm backdrop-blur dark:border-slate-800 dark:bg-slate-900/70",children:I.jsx(v4,{currentText:P.text})})]})]})})},x4=[{icon:"",title:"Next step",description:"Move forward in the recipe with an open palm."},{icon:"",title:"Previous step",description:"Go back one step to review details."},{icon:"",title:"Repeat narration",description:"Replays the current instruction hands-free."},{icon:"",title:"Narration control",description:"Start or pause the narration ."}],b4=()=>I.jsxs("div",{className:"space-y-8",children:[I.jsxs("header",{className:"rounded-3xl border border-slate-200 bg-white p-8 shadow-sm dark:border-slate-800 dark:bg-slate-900",children:[I.jsx("h1",{className:"text-3xl font-semibold",children:"About PalmChef"}),I.jsx("p",{className:"mt-3 max-w-3xl text-slate-600 dark:text-slate-300",children:"PalmChef is a gesture-controlled kitchen assistant built for effortless, confident cooking. It combines hand tracking, smart timers, and narrated guidance so you can stay focused on what matters: your dish."})]}),I.jsxs("section",{className:"grid gap-6 md:grid-cols-2",children:[I.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm dark:border-slate-800 dark:bg-slate-900",children:[I.jsx("h2",{className:"text-xl font-semibold",children:"Why it works"}),I.jsx("p",{className:"mt-3 text-slate-600 dark:text-slate-300",children:"PalmChef keeps your hands clean while your recipe stays organized. Every interaction is designed for the kitchenno distractions, just clear guidance."})]}),I.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm dark:border-slate-800 dark:bg-slate-900",children:[I.jsx("h2",{className:"text-xl font-semibold",children:"Built for flow"}),I.jsx("p",{className:"mt-3 text-slate-600 dark:text-slate-300",children:"From timers to narration, every feature is optimized for smooth, uninterrupted cooking sessions."})]})]}),I.jsxs("section",{className:"rounded-3xl border border-slate-200 bg-slate-50 p-8 dark:border-slate-800 dark:bg-slate-900/40",children:[I.jsx("h2",{className:"text-2xl font-semibold",children:"Gesture controls"}),I.jsx("p",{className:"mt-2 text-slate-600 dark:text-slate-300",children:"Use simple, intuitive gestures to guide your cooking session without touching your device."}),I.jsx("div",{className:"mt-6 grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:x4.map(r=>I.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-5 text-center shadow-sm dark:border-slate-800 dark:bg-slate-900",children:[I.jsx("div",{className:"text-2xl",children:r.icon}),I.jsx("h3",{className:"mt-3 font-semibold",children:r.title}),I.jsx("p",{className:"mt-2 text-sm text-slate-600 dark:text-slate-300",children:r.description})]},r.title))})]})]}),A4=()=>I.jsxs("div",{className:"space-y-8",children:[I.jsxs("header",{className:"rounded-3xl border border-slate-200 bg-white p-8 shadow-sm dark:border-slate-800 dark:bg-slate-900",children:[I.jsx("h1",{className:"text-3xl font-semibold",children:"Privacy Policy"}),I.jsx("p",{className:"mt-3 max-w-3xl text-slate-600 dark:text-slate-300",children:"PalmChef runs entirely in your browser. Your recipes, webcam feed, and gesture data never leave your device."})]}),I.jsxs("section",{className:"grid gap-6 md:grid-cols-2",children:[I.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm dark:border-slate-800 dark:bg-slate-900",children:[I.jsx("h2",{className:"text-xl font-semibold",children:"What we collect"}),I.jsx("p",{className:"mt-3 text-slate-600 dark:text-slate-300",children:"PalmChef does not collect personal data. Recipes are stored locally in your browser so you can resume a session without creating an account."})]}),I.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm dark:border-slate-800 dark:bg-slate-900",children:[I.jsx("h2",{className:"text-xl font-semibold",children:"How your data is used"}),I.jsx("p",{className:"mt-3 text-slate-600 dark:text-slate-300",children:"Hand tracking and gesture recognition happen on-device. No video or telemetry is transmitted or stored remotely."})]})]}),I.jsxs("section",{className:"rounded-3xl border border-slate-200 bg-slate-50 p-8 dark:border-slate-800 dark:bg-slate-900/40",children:[I.jsx("h2",{className:"text-2xl font-semibold",children:"Your control"}),I.jsxs("ul",{className:"mt-4 space-y-3 text-slate-600 dark:text-slate-300",children:[I.jsx("li",{children:"Delete recipes at any time by removing them from your browser."}),I.jsx("li",{children:"Disable camera access by revoking permission in your browser."}),I.jsx("li",{children:"Use PalmChef offline to keep your data fully local."})]})]})]}),S4=()=>I.jsxs("div",{className:"text-center py-24",children:[I.jsx("h1",{className:"text-5xl font-bold mb-4",children:"404"}),I.jsx("p",{className:"text-slate-500 mb-6",children:"Page not found."}),I.jsx(Ei,{to:"/",className:"text-sky-500 hover:underline",children:"Go Home"})]});function E4(r,t){try{localStorage.setItem(r,JSON.stringify(t))}catch(e){console.error("Storage save failed",e)}}function C4(r){try{const t=localStorage.getItem(r);return t?JSON.parse(t):null}catch{return null}}function k4(r){try{localStorage.removeItem(r)}catch(t){console.error("Storage remove failed",t)}}const hE=["palmchef-user-profile","palmchef-user","palmchefUser","user"],T4=r=>r?typeof r=="object"&&"state"in r&&r.state?.user?r.state.user:r:null,IM=()=>{for(const r of hE){const t=C4(r),e=T4(t);if(e)return e}return null},FM=r=>{E4(hE[0],r),window.dispatchEvent(new Event("palmchef-user-updated"))},OM=()=>{hE.forEach(k4),window.dispatchEvent(new Event("palmchef-user-updated"))},_4=()=>{const r=ph(),[t,e]=$.useState(""),[n,i]=$.useState(""),[o,c]=$.useState("");$.useEffect(()=>{const p=IM();if(!p){r("/",{replace:!0});return}e(p.name??"PalmChef User"),i(p.email??""),c(p.avatarUrl??"")},[r]);const u=$.useMemo(()=>{const p=t.trim().split(" ").filter(Boolean);return p.length===0?"PC":p.slice(0,2).map(m=>m[0]?.toUpperCase()).join("")},[t]),h=()=>{FM({name:t,email:n,avatarUrl:o})},f=()=>{OM(),r("/",{replace:!0})};return I.jsxs("div",{className:"space-y-6",children:[I.jsxs("header",{className:"rounded-3xl border border-slate-200/70 bg-white/80 p-8 shadow-sm backdrop-blur dark:border-slate-800 dark:bg-slate-900/70",children:[I.jsx("h1",{className:"text-3xl font-semibold",children:"Your Profile"}),I.jsx("p",{className:"mt-2 text-slate-600 dark:text-slate-300",children:"Manage your account details and keep your PalmChef identity fresh."})]}),I.jsxs("section",{className:"grid gap-6 lg:grid-cols-[minmax(0,340px),1fr]",children:[I.jsxs("div",{className:"rounded-3xl border border-slate-200/70 bg-white/80 p-6 text-center shadow-sm backdrop-blur dark:border-slate-800 dark:bg-slate-900/70",children:[I.jsx("div",{className:"mx-auto flex h-24 w-24 items-center justify-center rounded-full bg-slate-900 text-3xl font-semibold text-white shadow-lg shadow-slate-300/40",children:o?I.jsx("img",{src:o,alt:t,className:"h-full w-full rounded-full object-cover"}):u}),I.jsx("h2",{className:"mt-4 text-xl font-semibold",children:t}),n&&I.jsx("p",{className:"mt-1 text-sm text-slate-500",children:n}),I.jsx("button",{onClick:f,className:"mt-5 w-full rounded-full border border-slate-200 bg-white px-4 py-2 text-sm font-semibold text-slate-700 shadow-sm transition hover:-translate-y-0.5 hover:shadow-md",children:"Log out"})]}),I.jsxs("div",{className:"rounded-3xl border border-slate-200/70 bg-white/80 p-6 shadow-sm backdrop-blur dark:border-slate-800 dark:bg-slate-900/70",children:[I.jsx("h2",{className:"text-lg font-semibold",children:"Profile settings"}),I.jsxs("div",{className:"mt-4 grid gap-4",children:[I.jsxs("label",{className:"text-sm text-slate-600 dark:text-slate-300",children:["Display name",I.jsx("input",{value:t,onChange:p=>e(p.target.value),className:"mt-2 w-full rounded-2xl border border-slate-200 bg-white px-4 py-3 text-slate-800 shadow-sm focus:border-slate-400 focus:outline-none dark:border-slate-700 dark:bg-slate-900 dark:text-slate-100"})]}),I.jsxs("label",{className:"text-sm text-slate-600 dark:text-slate-300",children:["Email",I.jsx("input",{value:n,onChange:p=>i(p.target.value),className:"mt-2 w-full rounded-2xl border border-slate-200 bg-white px-4 py-3 text-slate-800 shadow-sm focus:border-slate-400 focus:outline-none dark:border-slate-700 dark:bg-slate-900 dark:text-slate-100"})]}),I.jsxs("label",{className:"text-sm text-slate-600 dark:text-slate-300",children:["Avatar URL",I.jsx("input",{value:o,onChange:p=>c(p.target.value),placeholder:"https://",className:"mt-2 w-full rounded-2xl border border-slate-200 bg-white px-4 py-3 text-slate-800 shadow-sm focus:border-slate-400 focus:outline-none dark:border-slate-700 dark:bg-slate-900 dark:text-slate-100"})]})]}),I.jsx("button",{onClick:h,className:"mt-6 rounded-full bg-slate-900 px-6 py-3 text-sm font-semibold text-white shadow-lg shadow-slate-300/40 transition hover:-translate-y-0.5 hover:bg-slate-800",children:"Save changes"})]})]})]})},P4="/assets/profile--Nsyynuy.png",D_={id:"",name:"Guest",email:"",avatarUrl:"",isAuthenticated:!1},jM=Zw()(Jw(r=>({user:D_,setUser:t=>r({user:{...t,isAuthenticated:!0}}),updateName:t=>r(e=>({user:{...e.user,name:t}})),logout:()=>r({user:D_})}),{name:"palmchef-user"})),R4=()=>{const r=ph(),{setUser:t}=jM(),[e,n]=$.useState("login"),[i,o]=$.useState(""),[c,u]=$.useState(""),[h,f]=$.useState(""),[p,m]=$.useState(""),[v,b]=$.useState(""),[C,E]=$.useState(!1),T=()=>{m(""),b("")},P=L=>{e!==L&&(n(L),u(""),f(""),T())},N=async L=>{if(L.preventDefault(),T(),e==="signup"&&c!==h){m("Passwords do not match.");return}const F="";E(!0);try{const O=await fetch(`${F}/api/${e}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:i,password:c})}),z=O.headers.get("content-type")??"",K=await O.text(),Y=K&&z.includes("application/json")?JSON.parse(K):null;if(!O.ok){const nt=Y&&typeof Y.error=="string"?Y.error:"Unable to reach the server. Please try again.";throw new Error(nt)}if(Y&&"token"in Y){const nt=Y.user.email.split("@")[0]||"PalmChef User",st={id:Y.user.id,email:Y.user.email,name:nt,avatarUrl:P4};localStorage.setItem("palmchef_token",Y.token),FM(st),t({...st,isAuthenticated:!0})}b(e==="login"?"Welcome back! You are signed in.":"Account created! You are signed in."),r("/",{replace:!0})}catch(O){m(O instanceof Error?O.message:"Unable to authenticate. Please try again.")}finally{E(!1)}};return I.jsxs(eE.section,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.4},className:"mx-auto grid max-w-5xl gap-8 lg:grid-cols-[1.1fr_0.9fr]",children:[I.jsxs("div",{className:"rounded-3xl bg-gradient-to-br from-sky-500 via-blue-600 to-indigo-600 p-8 text-white shadow-lg",children:[I.jsx("p",{className:"text-sm uppercase tracking-[0.3em] text-white/70",children:"PalmChef Access"}),I.jsx("h1",{className:"mt-4 text-3xl font-semibold",children:"Cook smarter with personalized guidance."}),I.jsx("p",{className:"mt-4 text-base text-white/80",children:"Create an account to save your favorite recipes, sync timers across devices, and pick up cooking sessions where you left off."}),I.jsxs("div",{className:"mt-8 space-y-4 text-sm text-white/80",children:[I.jsxs("div",{className:"rounded-2xl bg-white/15 p-4",children:[I.jsx("h2",{className:"font-semibold text-white",children:"Hands-free setup"}),I.jsx("p",{className:"mt-1",children:"Access gesture control profiles and voice preferences."})]}),I.jsxs("div",{className:"rounded-2xl bg-white/15 p-4",children:[I.jsx("h2",{className:"font-semibold text-white",children:"Weekly inspiration"}),I.jsx("p",{className:"mt-1",children:"Get tailored meal ideas based on your pantry and schedule."})]})]})]}),I.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white/80 p-8 shadow-lg backdrop-blur dark:border-slate-800 dark:bg-slate-900/60",children:[I.jsxs("div",{className:"flex items-center justify-between",children:[I.jsxs("div",{children:[I.jsx("h2",{className:"text-2xl font-semibold",children:e==="login"?"Welcome back":"Create your account"}),I.jsx("p",{className:"mt-2 text-sm text-slate-600 dark:text-slate-300",children:e==="login"?"Sign in to keep cooking.":"Join PalmChef to save your progress."})]}),I.jsxs("div",{className:"rounded-full bg-slate-100 p-1 text-sm dark:bg-slate-800",children:[I.jsx("button",{type:"button",onClick:()=>P("login"),className:`rounded-full px-3 py-1 transition ${e==="login"?"bg-white text-slate-900 shadow dark:bg-slate-700 dark:text-white":"text-slate-500 dark:text-slate-300"}`,children:"Login"}),I.jsx("button",{type:"button",onClick:()=>P("signup"),className:`rounded-full px-3 py-1 transition ${e==="signup"?"bg-white text-slate-900 shadow dark:bg-slate-700 dark:text-white":"text-slate-500 dark:text-slate-300"}`,children:"Sign up"})]})]}),I.jsxs("form",{className:"mt-6 space-y-5",onSubmit:N,children:[I.jsxs("div",{children:[I.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-200",children:"Email address"}),I.jsx("input",{type:"email",required:!0,value:i,onChange:L=>o(L.target.value),className:"mt-2 w-full rounded-xl border border-slate-200 bg-white px-4 py-3 text-sm text-slate-900 shadow-sm outline-none transition focus:border-sky-500 focus:ring-2 focus:ring-sky-200 dark:border-slate-700 dark:bg-slate-950 dark:text-slate-100 dark:focus:ring-sky-900",placeholder:"you@palmchef.com"})]}),I.jsxs("div",{children:[I.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-200",children:"Password"}),I.jsx("input",{type:"password",required:!0,value:c,onChange:L=>u(L.target.value),className:"mt-2 w-full rounded-xl border border-slate-200 bg-white px-4 py-3 text-sm text-slate-900 shadow-sm outline-none transition focus:border-sky-500 focus:ring-2 focus:ring-sky-200 dark:border-slate-700 dark:bg-slate-950 dark:text-slate-100 dark:focus:ring-sky-900",placeholder:""})]}),e==="signup"&&I.jsxs("div",{children:[I.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-200",children:"Confirm password"}),I.jsx("input",{type:"password",required:!0,value:h,onChange:L=>f(L.target.value),className:"mt-2 w-full rounded-xl border border-slate-200 bg-white px-4 py-3 text-sm text-slate-900 shadow-sm outline-none transition focus:border-sky-500 focus:ring-2 focus:ring-sky-200 dark:border-slate-700 dark:bg-slate-950 dark:text-slate-100 dark:focus:ring-sky-900",placeholder:""})]}),p&&I.jsx("div",{className:"rounded-xl border border-rose-200 bg-rose-50 px-4 py-3 text-sm text-rose-700 dark:border-rose-900/40 dark:bg-rose-900/20 dark:text-rose-200",children:p}),v&&I.jsx("div",{className:"rounded-xl border border-emerald-200 bg-emerald-50 px-4 py-3 text-sm text-emerald-700 dark:border-emerald-900/40 dark:bg-emerald-900/20 dark:text-emerald-200",children:v}),I.jsx("button",{type:"submit",disabled:C,className:"flex w-full items-center justify-center rounded-xl bg-sky-500 px-4 py-3 text-sm font-semibold text-white transition hover:bg-sky-600 disabled:cursor-not-allowed disabled:opacity-70",children:C?"Please wait...":e==="login"?"Sign in":"Create account"})]})]})]})},M4=({children:r})=>I.jsx(X_,{mode:"wait",children:I.jsx(eE.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.25,ease:"easeInOut"},children:r},location.pathname)}),D4=()=>{const r=Jl();return I.jsx(M4,{children:I.jsxs(VN,{location:r,children:[I.jsx(Fr,{path:"/",element:I.jsx(Pj,{})}),I.jsx(Fr,{path:"/recipes",element:I.jsx(s4,{})}),I.jsx(Fr,{path:"/assistant/:id",element:I.jsx(w4,{})}),I.jsx(Fr,{path:"/assistant",element:I.jsx(BN,{to:"/recipes",replace:!0})}),I.jsx(Fr,{path:"/auth",element:I.jsx(R4,{})}),I.jsx(Fr,{path:"/about",element:I.jsx(b4,{})}),I.jsx(Fr,{path:"/privacy",element:I.jsx(A4,{})}),I.jsx(Fr,{path:"/profile",element:I.jsx(_4,{})}),I.jsx(Fr,{path:"*",element:I.jsx(S4,{})})]})})},N4=()=>{const{theme:r,toggleTheme:t}=ax(),e=ph(),[n,i]=$.useState(!1),[o,c]=$.useState(null),[u,h]=$.useState(null),f=$.useRef(null);$.useEffect(()=>{const b=()=>{const E=IM();c(E?.name??null),h(E?.avatarUrl??null)};b();const C=E=>{f.current?.contains(E.target)||i(!1)};return window.addEventListener("storage",b),window.addEventListener("focus",b),window.addEventListener("palmchef-user-updated",b),document.addEventListener("mousedown",C),()=>{window.removeEventListener("storage",b),window.removeEventListener("focus",b),window.removeEventListener("palmchef-user-updated",b),document.removeEventListener("mousedown",C)}},[]);const p=$.useMemo(()=>o?o.split(" ").filter(Boolean).slice(0,2).map(b=>b[0]?.toUpperCase()).join(""):"PC",[o]),m=()=>{OM(),i(!1),e("/",{replace:!0})},v=({isActive:b})=>`px-4 py-2 rounded-full text-sm font-medium transition-all duration-300 ${b?"bg-slate-900 text-white shadow-lg shadow-slate-300/50 dark:bg-white dark:text-slate-900":"text-slate-700 hover:-translate-y-0.5 hover:bg-white hover:text-slate-900 hover:shadow-lg hover:shadow-slate-200/60 dark:text-slate-200 dark:hover:bg-slate-800 dark:hover:text-white dark:hover:shadow-none"}`;return I.jsx("header",{className:"sticky top-0 z-50",children:I.jsxs("nav",{className:"mx-auto mt-4 flex max-w-5xl flex-wrap items-center justify-between gap-3 rounded-full border border-white/70 bg-white/80 px-4 py-2 shadow-lg shadow-slate-200/40 backdrop-blur transition duration-300 hover:shadow-xl hover:shadow-slate-200/60 dark:border-slate-800 dark:bg-slate-900/80 dark:shadow-none",children:[I.jsxs(Ei,{to:"/",className:"flex items-center gap-2 text-xl font-semibold",children:[I.jsx("img",{src:"/logo.png",alt:"PalmChef",className:"h-12 w-12"}),I.jsx("span",{children:"PalmChef"})]}),I.jsxs("div",{className:"flex flex-wrap items-center gap-1.5",children:[I.jsx(sv,{to:"/",className:v,children:"Home"}),I.jsx(sv,{to:"/recipes",className:v,children:"Recipes"}),I.jsx(sv,{to:"/about",className:v,children:"About"}),I.jsx(sv,{to:"/privacy",className:v,children:"Privacy"}),I.jsx(Ei,{to:"/recipes",className:"ml-1 rounded-full bg-slate-900 px-5 py-2 text-sm font-semibold text-white shadow-lg shadow-slate-300/50 transition duration-300 hover:-translate-y-0.5 hover:bg-slate-800 hover:shadow-xl hover:shadow-slate-300/60 dark:bg-white dark:text-slate-900 dark:hover:bg-slate-200 dark:hover:shadow-none",children:"Launch Assistant"}),!o&&I.jsx(Ei,{to:"/auth",className:"ml-1 rounded-full border border-slate-200 bg-white px-4 py-2 text-sm font-semibold text-slate-700 shadow-sm transition duration-300 hover:-translate-y-0.5 hover:bg-slate-50 hover:shadow-md dark:border-slate-700 dark:bg-slate-800 dark:text-slate-200 dark:hover:bg-slate-700",children:"Sign in"}),o&&I.jsxs("div",{className:"relative",ref:f,children:[I.jsx("button",{onClick:()=>i(b=>!b),className:"ml-1 flex h-10 w-10 items-center justify-center rounded-full border border-white/60 bg-white/70 text-sm font-semibold text-slate-700 shadow-lg shadow-slate-200/60 transition duration-300 hover:-translate-y-0.5 hover:shadow-xl hover:shadow-slate-200/70 dark:border-slate-700 dark:bg-slate-800 dark:text-white dark:shadow-none","aria-label":"Open profile menu",children:u?I.jsx("img",{src:u,alt:o,className:"h-full w-full rounded-full object-cover"}):p}),n&&I.jsxs("div",{className:"absolute right-0 mt-3 w-52 rounded-2xl border border-slate-200/70 bg-white/90 p-2 text-sm shadow-xl shadow-slate-200/60 backdrop-blur dark:border-slate-800 dark:bg-slate-900/90",children:[I.jsxs("div",{className:"px-3 py-2",children:[I.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-400",children:"Signed in as"}),I.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-100",children:o})]}),I.jsx(Ei,{to:"/profile",className:"block rounded-xl px-3 py-2 font-medium text-slate-700 transition hover:bg-slate-100 dark:text-slate-200 dark:hover:bg-slate-800",onClick:()=>i(!1),children:"Change username"}),I.jsx("button",{onClick:m,className:"mt-1 w-full rounded-xl px-3 py-2 text-left font-medium text-slate-700 transition hover:bg-slate-100 dark:text-slate-200 dark:hover:bg-slate-800",children:"Log out"})]})]}),I.jsx("button",{onClick:t,className:"rounded-full p-2 transition hover:-translate-y-0.5 hover:bg-white hover:shadow-lg hover:shadow-slate-200/60 dark:hover:bg-slate-800 dark:hover:shadow-none",title:"Toggle theme",children:r==="light"?I.jsx(J3,{className:"h-5 w-5"}):I.jsx(e4,{className:"h-5 w-5"})})]})]})})},L4=()=>I.jsxs("footer",{className:"mt-12 border-t border-slate-200/70 bg-white/80 backdrop-blur dark:border-slate-800 dark:bg-slate-900/80",children:[I.jsxs("div",{className:"container mx-auto grid gap-8 px-4 py-10 md:grid-cols-4",children:[I.jsxs("div",{className:"space-y-3",children:[I.jsxs(Ei,{to:"/",className:"flex items-center gap-2 text-lg font-semibold",children:[I.jsx("img",{src:"/logo.png",alt:"PalmChef",className:"h-8 w-8"}),I.jsx("span",{children:"PalmChef"})]}),I.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"The hands-free kitchen assistant built for effortless, guided cooking sessions at home."})]}),I.jsxs("div",{children:[I.jsx("h3",{className:"text-sm font-semibold uppercase tracking-wide text-slate-600 dark:text-slate-400",children:"Product"}),I.jsxs("ul",{className:"mt-3 space-y-2 text-sm",children:[I.jsx("li",{children:I.jsx(Ei,{to:"/recipes",className:"hover:text-sky-500",children:"Recipe Library"})}),I.jsx("li",{children:I.jsx(Ei,{to:"/about",className:"hover:text-sky-500",children:"Gestures"})}),I.jsx("li",{children:I.jsx(Ei,{to:"/privacy",className:"hover:text-sky-500",children:"Privacy"})})]})]}),I.jsxs("div",{children:[I.jsx("h3",{className:"text-sm font-semibold uppercase tracking-wide text-slate-600 dark:text-slate-400",children:"Resources"}),I.jsxs("ul",{className:"mt-3 space-y-2 text-sm",children:[I.jsx("li",{children:I.jsx("a",{href:"https://github.com",target:"_blank",rel:"noopener noreferrer",className:"hover:text-sky-500",children:"GitHub"})}),I.jsx("li",{children:I.jsx("a",{href:"https://developers.google.com/mediapipe",target:"_blank",rel:"noopener noreferrer",className:"hover:text-sky-500",children:"MediaPipe"})})]})]}),I.jsxs("div",{children:[I.jsx("h3",{className:"text-sm font-semibold uppercase tracking-wide text-slate-600 dark:text-slate-400",children:"Get Started"}),I.jsx("p",{className:"mt-3 text-sm text-slate-600 dark:text-slate-400",children:"Import a recipe, choose a step, and let PalmChef guide your hands-free cooking session."}),I.jsx(Ei,{to:"/recipes",className:"mt-4 inline-flex items-center justify-center rounded-md bg-sky-500 px-4 py-2 text-sm font-semibold text-white transition hover:bg-sky-600",children:"Try PalmChef"})]})]}),I.jsxs("div",{className:"border-t border-slate-200/70 dark:border-slate-800 py-4 text-center text-xs text-slate-500",children:[" ",new Date().getFullYear()," PalmChef  The Hands-Free Kitchen Assistant"]})]}),I4=()=>{const{theme:r}=ax(),t=Jl(),e=ph(),{user:n}=jM(),i=$.useRef(n.isAuthenticated);return $.useEffect(()=>{document.documentElement.classList.toggle("dark",r==="dark")},[r]),$.useEffect(()=>{!i.current&&n.isAuthenticated&&(t.pathname==="/signin"||t.pathname==="/login"||t.pathname==="/auth")&&e("/",{replace:!0}),i.current=n.isAuthenticated},[t.pathname,e,n.isAuthenticated]),I.jsxs("div",{className:"flex min-h-full flex-col bg-slate-50 text-slate-900 dark:bg-slate-950 dark:text-slate-100",children:[I.jsx(N4,{}),I.jsx("main",{className:"flex-grow container mx-auto px-4 py-8",children:I.jsx(X_,{mode:"wait",children:I.jsx(D4,{},t.pathname)})}),I.jsx(L4,{})]})};"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js").then(()=>console.log("Service Worker registered")).catch(r=>console.error("SW registration failed:",r))});qD.createRoot(document.getElementById("root")).render(I.jsx(v1.StrictMode,{children:I.jsx(YN,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:I.jsx(I4,{})})}));
